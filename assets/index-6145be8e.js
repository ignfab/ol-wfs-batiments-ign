var tC=(i,t)=>()=>(t||i((t={exports:{}}).exports,t),t.exports);var T4=tC(V0=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function e(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=e(r);fetch(r.href,o)}})();var iC=function(){function i(){this.disposed=!1}return i.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal())},i.prototype.disposeInternal=function(){},i}();const Jp=iC;function nC(i,t,e){for(var n,r,o=e||va,a=0,s=i.length,l=!1;a<s;)n=a+(s-a>>1),r=+o(i[n],t),r<0?a=n+1:(s=n,l=!r);return l?a:~a}function va(i,t){return i>t?1:i<t?-1:0}function cn(i,t){return i.indexOf(t)>=0}function fh(i,t,e){var n=i.length;if(i[0]<=t)return 0;if(t<=i[n-1])return n-1;var r=void 0;if(e>0){for(r=1;r<n;++r)if(i[r]<t)return r-1}else if(e<0){for(r=1;r<n;++r)if(i[r]<=t)return r}else for(r=1;r<n;++r){if(i[r]==t)return r;if(i[r]<t)return typeof e=="function"?e(t,i[r-1],i[r])>0?r-1:r:i[r-1]-t<t-i[r]?r-1:r}return n-1}function rC(i,t,e){for(;t<e;){var n=i[t];i[t]=i[e],i[e]=n,++t,--e}}function St(i,t){for(var e=Array.isArray(t)?t:[t],n=e.length,r=0;r<n;r++)i[i.length]=e[r]}function Ga(i,t){var e=i.length;if(e!==t.length)return!1;for(var n=0;n<e;n++)if(i[n]!==t[n])return!1;return!0}function oC(i,t,e){var n=t||va;return i.every(function(r,o){if(o===0)return!0;var a=n(i[o-1],r);return!(a>0||e&&a===0)})}function Wr(){return!0}function Vs(){return!1}function ma(){}function aC(i){var t=!1,e,n,r;return function(){var o=Array.prototype.slice.call(arguments);return(!t||this!==r||!Ga(o,n))&&(t=!0,r=this,n=o,e=i.apply(this,arguments)),e}}function we(){return function(){throw new Error("Unimplemented abstract method.")}()}var sC=0;function _e(i){return i.ol_uid||(i.ol_uid=String(++sC))}var lC="6.9.0",Is=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",uC=Is.indexOf("firefox")!==-1;Is.indexOf("safari")!==-1&&Is.indexOf("chrom")==-1;var cC=Is.indexOf("webkit")!==-1&&Is.indexOf("edge")==-1,hC=Is.indexOf("macintosh")!==-1,Xv=typeof devicePixelRatio<"u"?devicePixelRatio:1,gh=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,dC=typeof Image<"u"&&Image.prototype.decode,Zv=function(){var i=!1;try{var t=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch{}return i}(),pC=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),fC=function(i){pC(t,i);function t(e){var n=this,r="v"+lC.split("-")[0],o="Assertion failed. See https://openlayers.org/en/"+r+"/doc/errors/#"+e+" for details.";return n=i.call(this,o)||this,n.code=e,n.name="AssertionError",n.message=o,n}return t}(Error);const Kv=fC;function be(i,t){if(!i)throw new Kv(t)}var Jv=new Array(6);function Dn(){return[1,0,0,1,0,0]}function $0(i){return vh(i,1,0,0,1,0,0)}function Qp(i,t){var e=i[0],n=i[1],r=i[2],o=i[3],a=i[4],s=i[5],l=t[0],u=t[1],c=t[2],h=t[3],d=t[4],p=t[5];return i[0]=e*l+r*u,i[1]=n*l+o*u,i[2]=e*c+r*h,i[3]=n*c+o*h,i[4]=e*d+r*p+a,i[5]=n*d+o*p+s,i}function vh(i,t,e,n,r,o,a){return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i[4]=o,i[5]=a,i}function gC(i,t){return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i}function ei(i,t){var e=t[0],n=t[1];return t[0]=i[0]*e+i[2]*n+i[4],t[1]=i[1]*e+i[3]*n+i[5],t}function sd(i,t,e){return Qp(i,vh(Jv,t,0,0,e,0,0))}function vC(i,t,e){return vh(i,t,0,0,e,0,0)}function mC(i,t,e){return Qp(i,vh(Jv,1,0,0,1,t,e))}function wr(i,t,e,n,r,o,a,s){var l=Math.sin(o),u=Math.cos(o);return i[0]=n*u,i[1]=r*l,i[2]=-n*l,i[3]=r*u,i[4]=a*n*u-s*n*l+t,i[5]=a*r*l+s*r*u+e,i}function $p(i,t){var e=yC(t);be(e!==0,32);var n=t[0],r=t[1],o=t[2],a=t[3],s=t[4],l=t[5];return i[0]=a/e,i[1]=-r/e,i[2]=-o/e,i[3]=n/e,i[4]=(o*l-a*s)/e,i[5]=-(n*l-r*s)/e,i}function yC(i){return i[0]*i[3]-i[1]*i[2]}var eg;function Qv(i){var t="matrix("+i.join(", ")+")";if(gh)return t;var e=eg||(eg=document.createElement("div"));return e.style.transform=t,e.style.transform}const hl={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"},_i={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function Cn(i){for(var t=pn(),e=0,n=i.length;e<n;++e)El(t,i[e]);return t}function AC(i,t,e){var n=Math.min.apply(null,i),r=Math.min.apply(null,t),o=Math.max.apply(null,i),a=Math.max.apply(null,t);return er(n,r,o,a,e)}function Jn(i,t,e){return e?(e[0]=i[0]-t,e[1]=i[1]-t,e[2]=i[2]+t,e[3]=i[3]+t,e):[i[0]-t,i[1]-t,i[2]+t,i[3]+t]}function $v(i,t){return t?(t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t):i.slice()}function ka(i,t,e){var n,r;return t<i[0]?n=i[0]-t:i[2]<t?n=t-i[2]:n=0,e<i[1]?r=i[1]-e:i[3]<e?r=e-i[3]:r=0,n*n+r*r}function mh(i,t){return ef(i,t[0],t[1])}function zr(i,t){return i[0]<=t[0]&&t[2]<=i[2]&&i[1]<=t[1]&&t[3]<=i[3]}function ef(i,t,e){return i[0]<=t&&t<=i[2]&&i[1]<=e&&e<=i[3]}function ap(i,t){var e=i[0],n=i[1],r=i[2],o=i[3],a=t[0],s=t[1],l=_i.UNKNOWN;return a<e?l=l|_i.LEFT:a>r&&(l=l|_i.RIGHT),s<n?l=l|_i.BELOW:s>o&&(l=l|_i.ABOVE),l===_i.UNKNOWN&&(l=_i.INTERSECTING),l}function pn(){return[1/0,1/0,-1/0,-1/0]}function er(i,t,e,n,r){return r?(r[0]=i,r[1]=t,r[2]=e,r[3]=n,r):[i,t,e,n]}function uu(i){return er(1/0,1/0,-1/0,-1/0,i)}function Il(i,t){var e=i[0],n=i[1];return er(e,n,e,n,t)}function tf(i,t,e,n,r){var o=uu(r);return tm(o,i,t,e,n)}function ya(i,t){return i[0]==t[0]&&i[2]==t[2]&&i[1]==t[1]&&i[3]==t[3]}function em(i,t){return t[0]<i[0]&&(i[0]=t[0]),t[2]>i[2]&&(i[2]=t[2]),t[1]<i[1]&&(i[1]=t[1]),t[3]>i[3]&&(i[3]=t[3]),i}function El(i,t){t[0]<i[0]&&(i[0]=t[0]),t[0]>i[2]&&(i[2]=t[0]),t[1]<i[1]&&(i[1]=t[1]),t[1]>i[3]&&(i[3]=t[1])}function tm(i,t,e,n,r){for(;e<n;e+=r)_C(i,t[e],t[e+1]);return i}function _C(i,t,e){i[0]=Math.min(i[0],t),i[1]=Math.min(i[1],e),i[2]=Math.max(i[2],t),i[3]=Math.max(i[3],e)}function nf(i,t){var e;return e=t(yh(i)),e||(e=t(Ah(i)),e)||(e=t(_h(i)),e)||(e=t(Uo(i)),e)?e:!1}function sp(i){var t=0;return rf(i)||(t=Ct(i)*Ti(i)),t}function yh(i){return[i[0],i[1]]}function Ah(i){return[i[2],i[1]]}function Sr(i){return[(i[0]+i[2])/2,(i[1]+i[3])/2]}function CC(i,t){var e;return t===hl.BOTTOM_LEFT?e=yh(i):t===hl.BOTTOM_RIGHT?e=Ah(i):t===hl.TOP_LEFT?e=Uo(i):t===hl.TOP_RIGHT?e=_h(i):be(!1,13),e}function us(i,t,e,n,r){var o=t*n[0]/2,a=t*n[1]/2,s=Math.cos(e),l=Math.sin(e),u=o*s,c=o*l,h=a*s,d=a*l,p=i[0],f=i[1],g=p-u+d,v=p-u-d,y=p+u-d,m=p+u+d,A=f-c-h,_=f-c+h,C=f+c+h,I=f+c-h;return er(Math.min(g,v,y,m),Math.min(A,_,C,I),Math.max(g,v,y,m),Math.max(A,_,C,I),r)}function Ti(i){return i[3]-i[1]}function xo(i,t,e){var n=e||pn();return Vt(i,t)?(i[0]>t[0]?n[0]=i[0]:n[0]=t[0],i[1]>t[1]?n[1]=i[1]:n[1]=t[1],i[2]<t[2]?n[2]=i[2]:n[2]=t[2],i[3]<t[3]?n[3]=i[3]:n[3]=t[3]):uu(n),n}function Uo(i){return[i[0],i[3]]}function _h(i){return[i[2],i[3]]}function Ct(i){return i[2]-i[0]}function Vt(i,t){return i[0]<=t[2]&&i[2]>=t[0]&&i[1]<=t[3]&&i[3]>=t[1]}function rf(i){return i[2]<i[0]||i[3]<i[1]}function IC(i,t){return t?(t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t):i}function EC(i,t,e){var n=!1,r=ap(i,t),o=ap(i,e);if(r===_i.INTERSECTING||o===_i.INTERSECTING)n=!0;else{var a=i[0],s=i[1],l=i[2],u=i[3],c=t[0],h=t[1],d=e[0],p=e[1],f=(p-h)/(d-c),g=void 0,v=void 0;o&_i.ABOVE&&!(r&_i.ABOVE)&&(g=d-(p-u)/f,n=g>=a&&g<=l),!n&&o&_i.RIGHT&&!(r&_i.RIGHT)&&(v=p-(d-l)*f,n=v>=s&&v<=u),!n&&o&_i.BELOW&&!(r&_i.BELOW)&&(g=d-(p-s)/f,n=g>=a&&g<=l),!n&&o&_i.LEFT&&!(r&_i.LEFT)&&(v=p-(d-a)*f,n=v>=s&&v<=u)}return n}function of(i,t,e,n){var r=[];if(n>1)for(var o=i[2]-i[0],a=i[3]-i[1],s=0;s<n;++s)r.push(i[0]+o*s/n,i[1],i[2],i[1]+a*s/n,i[2]-o*s/n,i[3],i[0],i[3]-a*s/n);else r=[i[0],i[1],i[2],i[1],i[2],i[3],i[0],i[3]];t(r,r,2);for(var l=[],u=[],s=0,c=r.length;s<c;s+=2)l.push(r[s]),u.push(r[s+1]);return AC(l,u,e)}function wC(i,t){var e=t.getExtent(),n=Sr(i);if(t.canWrapX()&&(n[0]<e[0]||n[0]>=e[2])){var r=Ct(e),o=Math.floor((n[0]-e[0])/r),a=o*r;i[0]-=a,i[2]-=a}return i}function ri(i,t,e){return Math.min(Math.max(i,t),e)}var SC=function(){var i;return"cosh"in Math?i=Math.cosh:i=function(t){var e=Math.exp(t);return(e+1/e)/2},i}(),PC=function(){var i;return"log2"in Math?i=Math.log2:i=function(t){return Math.log(t)*Math.LOG2E},i}();function xC(i,t,e,n,r,o){var a=r-e,s=o-n;if(a!==0||s!==0){var l=((i-e)*a+(t-n)*s)/(a*a+s*s);l>1?(e=r,n=o):l>0&&(e+=a*l,n+=s*l)}return da(i,t,e,n)}function da(i,t,e,n){var r=e-i,o=n-t;return r*r+o*o}function MC(i){for(var t=i.length,e=0;e<t;e++){for(var n=e,r=Math.abs(i[e][e]),o=e+1;o<t;o++){var a=Math.abs(i[o][e]);a>r&&(r=a,n=o)}if(r===0)return null;var s=i[n];i[n]=i[e],i[e]=s;for(var l=e+1;l<t;l++)for(var u=-i[l][e]/i[e][e],c=e;c<t+1;c++)e==c?i[l][c]=0:i[l][c]+=u*i[e][c]}for(var h=new Array(t),d=t-1;d>=0;d--){h[d]=i[d][t]/i[d][d];for(var p=d-1;p>=0;p--)i[p][t]-=i[p][d]*h[d]}return h}function Mo(i){return i*Math.PI/180}function To(i,t){var e=i%t;return e*t<0?e+t:e}function Ur(i,t,e){return i+e*(t-i)}var TC=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,bC=/^([a-z]*)$|^hsla?\(.*\)$/i;function im(i){return typeof i=="string"?i:nm(i)}function RC(i){var t=document.createElement("div");if(t.style.color=i,t.style.color!==""){document.body.appendChild(t);var e=getComputedStyle(t).color;return document.body.removeChild(t),e}else return""}var OC=function(){var i=1024,t={},e=0;return function(n){var r;if(t.hasOwnProperty(n))r=t[n];else{if(e>=i){var o=0;for(var a in t)o++&3||(delete t[a],--e)}r=LC(n),t[n]=r,++e}return r}}();function af(i){return Array.isArray(i)?i:OC(i)}function LC(i){var t,e,n,r,o;if(bC.exec(i)&&(i=RC(i)),TC.exec(i)){var a=i.length-1,s=void 0;a<=4?s=1:s=2;var l=a===4||a===8;t=parseInt(i.substr(1+0*s,s),16),e=parseInt(i.substr(1+1*s,s),16),n=parseInt(i.substr(1+2*s,s),16),l?r=parseInt(i.substr(1+3*s,s),16):r=255,s==1&&(t=(t<<4)+t,e=(e<<4)+e,n=(n<<4)+n,l&&(r=(r<<4)+r)),o=[t,e,n,r/255]}else i.indexOf("rgba(")==0?(o=i.slice(5,-1).split(",").map(Number),tg(o)):i.indexOf("rgb(")==0?(o=i.slice(4,-1).split(",").map(Number),o.push(1),tg(o)):be(!1,14);return o}function tg(i){return i[0]=ri(i[0]+.5|0,0,255),i[1]=ri(i[1]+.5|0,0,255),i[2]=ri(i[2]+.5|0,0,255),i[3]=ri(i[3],0,1),i}function nm(i){var t=i[0];t!=(t|0)&&(t=t+.5|0);var e=i[1];e!=(e|0)&&(e=e+.5|0);var n=i[2];n!=(n|0)&&(n=n+.5|0);var r=i[3]===void 0?1:i[3];return"rgba("+t+","+e+","+n+","+r+")"}var GC=function(){function i(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return i.prototype.clear=function(){this.cache_={},this.cacheSize_=0},i.prototype.canExpireCache=function(){return this.cacheSize_>this.maxCacheSize_},i.prototype.expire=function(){if(this.canExpireCache()){var t=0;for(var e in this.cache_){var n=this.cache_[e];!(t++&3)&&!n.hasListener()&&(delete this.cache_[e],--this.cacheSize_)}}},i.prototype.get=function(t,e,n){var r=ig(t,e,n);return r in this.cache_?this.cache_[r]:null},i.prototype.set=function(t,e,n,r){var o=ig(t,e,n);this.cache_[o]=r,++this.cacheSize_},i.prototype.setSize=function(t){this.maxCacheSize_=t,this.expire()},i}();function ig(i,t,e){var n=e?im(e):"null";return t+":"+i+":"+n}var vc=new GC,kC=function(){function i(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}return i.prototype.preventDefault=function(){this.defaultPrevented=!0},i.prototype.stopPropagation=function(){this.propagationStopped=!0},i}();const zn=kC,Aa={PROPERTYCHANGE:"propertychange"};var dt=typeof Object.assign=="function"?Object.assign:function(i,t){if(i==null)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(i),n=1,r=arguments.length;n<r;++n){var o=arguments[n];if(o!=null)for(var a in o)o.hasOwnProperty(a)&&(e[a]=o[a])}return e};function Ws(i){for(var t in i)delete i[t]}var rm=typeof Object.values=="function"?Object.values:function(i){var t=[];for(var e in i)t.push(i[e]);return t};function _a(i){var t;for(t in i)return!1;return!t}var DC=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),NC=function(i){DC(t,i);function t(e){var n=i.call(this)||this;return n.eventTarget_=e,n.pendingRemovals_=null,n.dispatching_=null,n.listeners_=null,n}return t.prototype.addEventListener=function(e,n){if(!(!e||!n)){var r=this.listeners_||(this.listeners_={}),o=r[e]||(r[e]=[]);o.indexOf(n)===-1&&o.push(n)}},t.prototype.dispatchEvent=function(e){var n=typeof e=="string"?new zn(e):e,r=n.type;n.target||(n.target=this.eventTarget_||this);var o=this.listeners_&&this.listeners_[r],a;if(o){var s=this.dispatching_||(this.dispatching_={}),l=this.pendingRemovals_||(this.pendingRemovals_={});r in s||(s[r]=0,l[r]=0),++s[r];for(var u=0,c=o.length;u<c;++u)if("handleEvent"in o[u]?a=o[u].handleEvent(n):a=o[u].call(this,n),a===!1||n.propagationStopped){a=!1;break}if(--s[r],s[r]===0){var h=l[r];for(delete l[r];h--;)this.removeEventListener(r,ma);delete s[r]}return a}},t.prototype.disposeInternal=function(){this.listeners_&&Ws(this.listeners_)},t.prototype.getListeners=function(e){return this.listeners_&&this.listeners_[e]||void 0},t.prototype.hasListener=function(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1},t.prototype.removeEventListener=function(e,n){var r=this.listeners_&&this.listeners_[e];if(r){var o=r.indexOf(n);o!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(r[o]=ma,++this.pendingRemovals_[e]):(r.splice(o,1),r.length===0&&delete this.listeners_[e]))}},t}(Jp);const Ys=NC,Ie={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function rt(i,t,e,n,r){if(n&&n!==i&&(e=e.bind(n)),r){var o=e;e=function(){i.removeEventListener(t,e),o.apply(this,arguments)}}var a={target:i,type:t,listener:e};return i.addEventListener(t,e),a}function mc(i,t,e,n){return rt(i,t,e,n,!0)}function Pt(i){i&&i.target&&(i.target.removeEventListener(i.type,i.listener),Ws(i))}var FC=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),cu=function(i){FC(t,i);function t(){var e=i.call(this)||this;return e.on=e.onInternal,e.once=e.onceInternal,e.un=e.unInternal,e.revision_=0,e}return t.prototype.changed=function(){++this.revision_,this.dispatchEvent(Ie.CHANGE)},t.prototype.getRevision=function(){return this.revision_},t.prototype.onInternal=function(e,n){if(Array.isArray(e)){for(var r=e.length,o=new Array(r),a=0;a<r;++a)o[a]=rt(this,e[a],n);return o}else return rt(this,e,n)},t.prototype.onceInternal=function(e,n){var r;if(Array.isArray(e)){var o=e.length;r=new Array(o);for(var a=0;a<o;++a)r[a]=mc(this,e[a],n)}else r=mc(this,e,n);return n.ol_key=r,r},t.prototype.unInternal=function(e,n){var r=n.ol_key;if(r)Kt(r);else if(Array.isArray(e))for(var o=0,a=e.length;o<a;++o)this.removeEventListener(e[o],n);else this.removeEventListener(e,n)},t}(Ys);cu.prototype.on;cu.prototype.once;cu.prototype.un;function Kt(i){if(Array.isArray(i))for(var t=0,e=i.length;t<e;++t)Pt(i[t]);else Pt(i)}var om=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),ng=function(i){om(t,i);function t(e,n,r){var o=i.call(this,e)||this;return o.key=n,o.oldValue=r,o}return t}(zn),UC=function(i){om(t,i);function t(e){var n=i.call(this)||this;return n.on,n.once,n.un,_e(n),n.values_=null,e!==void 0&&n.setProperties(e),n}return t.prototype.get=function(e){var n;return this.values_&&this.values_.hasOwnProperty(e)&&(n=this.values_[e]),n},t.prototype.getKeys=function(){return this.values_&&Object.keys(this.values_)||[]},t.prototype.getProperties=function(){return this.values_&&dt({},this.values_)||{}},t.prototype.hasProperties=function(){return!!this.values_},t.prototype.notify=function(e,n){var r;r="change:"+e,this.dispatchEvent(new ng(r,e,n)),r=Aa.PROPERTYCHANGE,this.dispatchEvent(new ng(r,e,n))},t.prototype.addChangeListener=function(e,n){this.addEventListener("change:"+e,n)},t.prototype.removeChangeListener=function(e,n){this.removeEventListener("change:"+e,n)},t.prototype.set=function(e,n,r){var o=this.values_||(this.values_={});if(r)o[e]=n;else{var a=o[e];o[e]=n,a!==n&&this.notify(e,a)}},t.prototype.setProperties=function(e,n){for(var r in e)this.set(r,e[r],n)},t.prototype.applyProperties=function(e){e.values_&&dt(this.values_||(this.values_={}),e.values_)},t.prototype.unset=function(e,n){if(this.values_&&e in this.values_){var r=this.values_[e];delete this.values_[e],_a(this.values_)&&(this.values_=null),n||this.notify(e,r)}},t}(cu);const ir=UC,wt={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source"};var BC=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),jC=function(i){BC(t,i);function t(e){var n=i.call(this)||this;n.on,n.once,n.un;var r=dt({},e);return typeof e.properties=="object"&&(delete r.properties,dt(r,e.properties)),r[wt.OPACITY]=e.opacity!==void 0?e.opacity:1,be(typeof r[wt.OPACITY]=="number",64),r[wt.VISIBLE]=e.visible!==void 0?e.visible:!0,r[wt.Z_INDEX]=e.zIndex,r[wt.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,r[wt.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,r[wt.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,r[wt.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,n.className_=r.className!==void 0?e.className:"ol-layer",delete r.className,n.setProperties(r),n.state_=null,n}return t.prototype.getClassName=function(){return this.className_},t.prototype.getLayerState=function(e){var n=this.state_||{layer:this,managed:e===void 0?!0:e},r=this.getZIndex();return n.opacity=ri(Math.round(this.getOpacity()*100)/100,0,1),n.sourceState=this.getSourceState(),n.visible=this.getVisible(),n.extent=this.getExtent(),n.zIndex=r===void 0&&!n.managed?1/0:r,n.maxResolution=this.getMaxResolution(),n.minResolution=Math.max(this.getMinResolution(),0),n.minZoom=this.getMinZoom(),n.maxZoom=this.getMaxZoom(),this.state_=n,n},t.prototype.getLayersArray=function(e){return we()},t.prototype.getLayerStatesArray=function(e){return we()},t.prototype.getExtent=function(){return this.get(wt.EXTENT)},t.prototype.getMaxResolution=function(){return this.get(wt.MAX_RESOLUTION)},t.prototype.getMinResolution=function(){return this.get(wt.MIN_RESOLUTION)},t.prototype.getMinZoom=function(){return this.get(wt.MIN_ZOOM)},t.prototype.getMaxZoom=function(){return this.get(wt.MAX_ZOOM)},t.prototype.getOpacity=function(){return this.get(wt.OPACITY)},t.prototype.getSourceState=function(){return we()},t.prototype.getVisible=function(){return this.get(wt.VISIBLE)},t.prototype.getZIndex=function(){return this.get(wt.Z_INDEX)},t.prototype.setExtent=function(e){this.set(wt.EXTENT,e)},t.prototype.setMaxResolution=function(e){this.set(wt.MAX_RESOLUTION,e)},t.prototype.setMinResolution=function(e){this.set(wt.MIN_RESOLUTION,e)},t.prototype.setMaxZoom=function(e){this.set(wt.MAX_ZOOM,e)},t.prototype.setMinZoom=function(e){this.set(wt.MIN_ZOOM,e)},t.prototype.setOpacity=function(e){be(typeof e=="number",64),this.set(wt.OPACITY,e)},t.prototype.setVisible=function(e){this.set(wt.VISIBLE,e)},t.prototype.setZIndex=function(e){this.set(wt.Z_INDEX,e)},t.prototype.disposeInternal=function(){this.state_&&(this.state_.layer=null,this.state_=null),i.prototype.disposeInternal.call(this)},t}(ir);const am=jC,Ca={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},Ar={UNDEFINED:"undefined",LOADING:"loading",READY:"ready",ERROR:"error"};var zC=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),sm=function(i){zC(t,i);function t(e){var n=this,r=dt({},e);delete r.source,n=i.call(this,r)||this,n.on,n.once,n.un,n.mapPrecomposeKey_=null,n.mapRenderKey_=null,n.sourceChangeKey_=null,n.renderer_=null,e.render&&(n.render=e.render),e.map&&n.setMap(e.map),n.addChangeListener(wt.SOURCE,n.handleSourcePropertyChange_);var o=e.source?e.source:null;return n.setSource(o),n}return t.prototype.getLayersArray=function(e){var n=e||[];return n.push(this),n},t.prototype.getLayerStatesArray=function(e){var n=e||[];return n.push(this.getLayerState()),n},t.prototype.getSource=function(){return this.get(wt.SOURCE)||null},t.prototype.getSourceState=function(){var e=this.getSource();return e?e.getState():Ar.UNDEFINED},t.prototype.handleSourceChange_=function(){this.changed()},t.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(Pt(this.sourceChangeKey_),this.sourceChangeKey_=null);var e=this.getSource();e&&(this.sourceChangeKey_=rt(e,Ie.CHANGE,this.handleSourceChange_,this)),this.changed()},t.prototype.getFeatures=function(e){return this.renderer_?this.renderer_.getFeatures(e):new Promise(function(n){return n([])})},t.prototype.render=function(e,n){var r=this.getRenderer();if(r.prepareFrame(e))return r.renderFrame(e,n)},t.prototype.setMap=function(e){this.mapPrecomposeKey_&&(Pt(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(Pt(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=rt(e,Ca.PRECOMPOSE,function(n){var r=n,o=r.frameState.layerStatesArray,a=this.getLayerState(!1);be(!o.some(function(s){return s.layer===a.layer}),67),o.push(a)},this),this.mapRenderKey_=rt(this,Ie.CHANGE,e.render,e),this.changed())},t.prototype.setSource=function(e){this.set(wt.SOURCE,e)},t.prototype.getRenderer=function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_},t.prototype.hasRenderer=function(){return!!this.renderer_},t.prototype.createRenderer=function(){return null},t.prototype.disposeInternal=function(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),i.prototype.disposeInternal.call(this)},t}(am);function yc(i,t){if(!i.visible)return!1;var e=t.resolution;if(e<i.minResolution||e>=i.maxResolution)return!1;var n=t.zoom;return n>i.minZoom&&n<=i.maxZoom}function rl(i,t,e){var n=e!==void 0?i.toFixed(e):""+i,r=n.indexOf(".");return r=r===-1?n.length:r,r>t?n:new Array(1+t-r).join("0")+n}function lm(i,t){for(var e=(""+i).split("."),n=(""+t).split("."),r=0;r<Math.max(e.length,n.length);r++){var o=parseInt(e[r]||"0",10),a=parseInt(n[r]||"0",10);if(o>a)return 1;if(a>o)return-1}return 0}function VC(i,t){return i[0]+=+t[0],i[1]+=+t[1],i}function um(i,t){var e=i[0],n=i[1],r=t[0],o=t[1],a=r[0],s=r[1],l=o[0],u=o[1],c=l-a,h=u-s,d=c===0&&h===0?0:(c*(e-a)+h*(n-s))/(c*c+h*h||0),p,f;return d<=0?(p=a,f=s):d>=1?(p=l,f=u):(p=a+d*c,f=s+d*h),[p,f]}function dr(i,t){for(var e=!0,n=i.length-1;n>=0;--n)if(i[n]!=t[n]){e=!1;break}return e}function sf(i,t){var e=Math.cos(t),n=Math.sin(t),r=i[0]*e-i[1]*n,o=i[1]*e+i[0]*n;return i[0]=r,i[1]=o,i}function WC(i,t){return i[0]*=t,i[1]*=t,i}function Es(i,t){var e=i[0]-t[0],n=i[1]-t[1];return e*e+n*n}function rg(i,t){return Math.sqrt(Es(i,t))}function YC(i,t){return Es(i,um(i,t))}function lf(i,t){if(t.canWrapX()){var e=Ct(t.getExtent()),n=HC(i,t,e);n&&(i[0]-=n*e)}return i}function HC(i,t,e){var n=t.getExtent(),r=0;if(t.canWrapX()&&(i[0]<n[0]||i[0]>n[2])){var o=e||Ct(n);r=Math.floor((i[0]-n[0])/o)}return r}var qC=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),XC=function(i){qC(t,i);function t(e){var n=i.call(this)||this;return n.map_=e,n}return t.prototype.dispatchRenderEvent=function(e,n){we()},t.prototype.calculateMatrices2D=function(e){var n=e.viewState,r=e.coordinateToPixelTransform,o=e.pixelToCoordinateTransform;wr(r,e.size[0]/2,e.size[1]/2,1/n.resolution,-1/n.resolution,-n.rotation,-n.center[0],-n.center[1]),$p(o,r)},t.prototype.forEachFeatureAtCoordinate=function(e,n,r,o,a,s,l,u){var c,h=n.viewState;function d(B,U,D,z){return a.call(s,U,B?D:null,z)}var p=h.projection,f=lf(e.slice(),p),g=[[0,0]];if(p.canWrapX()&&o){var v=p.getExtent(),y=Ct(v);g.push([-y,0],[y,0])}for(var m=n.layerStatesArray,A=m.length,_=[],C=[],I=0;I<g.length;I++)for(var E=A-1;E>=0;--E){var w=m[E],S=w.layer;if(S.hasRenderer()&&yc(w,h)&&l.call(u,S)){var x=S.getRenderer(),T=S.getSource();if(x&&T){var L=T.getWrapX()?f:e,G=d.bind(null,w.managed);C[0]=L[0]+g[I][0],C[1]=L[1]+g[I][1],c=x.forEachFeatureAtCoordinate(C,n,r,G,_)}if(c)return c}}if(_.length!==0){var N=1/_.length;return _.forEach(function(B,U){return B.distanceSq+=U*N}),_.sort(function(B,U){return B.distanceSq-U.distanceSq}),_.some(function(B){return c=B.callback(B.feature,B.layer,B.geometry)}),c}},t.prototype.forEachLayerAtPixel=function(e,n,r,o,a){return we()},t.prototype.hasFeatureAtCoordinate=function(e,n,r,o,a,s){var l=this.forEachFeatureAtCoordinate(e,n,r,o,Wr,this,a,s);return l!==void 0},t.prototype.getMap=function(){return this.map_},t.prototype.renderFrame=function(e){we()},t.prototype.scheduleExpireIconCache=function(e){vc.canExpireCache()&&e.postRenderFunctions.push(ZC)},t}(Jp);function ZC(i,t){vc.expire()}const KC=XC;var JC=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),QC=function(i){JC(t,i);function t(e,n,r,o){var a=i.call(this,e)||this;return a.inversePixelTransform=n,a.frameState=r,a.context=o,a}return t}(zn);const cm=QC;var Mu="ol-hidden",$C="ol-selectable",Ch="ol-unselectable",uf="ol-control",og="ol-collapsed",eI=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),ag=["style","variant","weight","size","lineHeight","family"],hm=function(i){var t=i.match(eI);if(!t)return null;for(var e={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},n=0,r=ag.length;n<r;++n){var o=t[n+1];o!==void 0&&(e[ag[n]]=o)}return e.families=e.family.split(/,\s?/),e};function cf(i){return i===1?"":String(Math.round(i*100)/100)}function Mn(i,t,e,n){var r;return e&&e.length?r=e.shift():gh?r=new OffscreenCanvas(i||300,t||300):(r=document.createElement("canvas"),r.style.all="unset"),i&&(r.width=i),t&&(r.height=t),r.getContext("2d",n)}function tI(i){var t=i.offsetWidth,e=getComputedStyle(i);return t+=parseInt(e.marginLeft,10)+parseInt(e.marginRight,10),t}function iI(i){var t=i.offsetHeight,e=getComputedStyle(i);return t+=parseInt(e.marginTop,10)+parseInt(e.marginBottom,10),t}function sg(i,t){var e=t.parentNode;e&&e.replaceChild(i,t)}function Ac(i){return i&&i.parentNode?i.parentNode.removeChild(i):null}function dm(i){for(;i.lastChild;)i.removeChild(i.lastChild)}function nI(i,t){for(var e=i.childNodes,n=0;;++n){var r=e[n],o=t[n];if(!r&&!o)break;if(r!==o){if(!r){i.appendChild(o);continue}if(!o){i.removeChild(r),--n;continue}i.insertBefore(o,r)}}}var pm="10px sans-serif",Yr="#000",_c="round",Fl=[],Ul=0,ws="round",Bl=10,jl="#000",zl="center",Cc="middle",sa=[0,0,0,0],Vl=1,Nr=new ir,lp=new Ys;lp.setSize=function(){console.warn("labelCache is deprecated.")};var Ka=null,up,cp={},rI=function(){var i=100,t="32px ",e=["monospace","serif"],n=e.length,r="wmytzilWMYTZIL@#/&?$%10",o,a;function s(u,c,h){for(var d=!0,p=0;p<n;++p){var f=e[p];if(a=Ic(u+" "+c+" "+t+f,r),h!=f){var g=Ic(u+" "+c+" "+t+h+","+f,r);d=d&&g!=a}}return!!d}function l(){for(var u=!0,c=Nr.getKeys(),h=0,d=c.length;h<d;++h){var p=c[h];Nr.get(p)<i&&(s.apply(this,p.split(`
`))?(Ws(cp),Ka=null,up=void 0,Nr.set(p,i)):(Nr.set(p,Nr.get(p)+1,!0),u=!1))}u&&(clearInterval(o),o=void 0)}return function(u){var c=hm(u);if(c)for(var h=c.families,d=0,p=h.length;d<p;++d){var f=h[d],g=c.style+`
`+c.weight+`
`+f;Nr.get(g)===void 0&&(Nr.set(g,i,!0),s(c.style,c.weight,f)||(Nr.set(g,0,!0),o===void 0&&(o=setInterval(l,32))))}}}(),oI=function(){var i;return function(t){var e=cp[t];if(e==null){if(gh){var n=hm(t),r=fm(t,"Žg"),o=isNaN(Number(n.lineHeight))?1.2:Number(n.lineHeight);e=o*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else i||(i=document.createElement("div"),i.innerHTML="M",i.style.minHeight="0",i.style.maxHeight="none",i.style.height="auto",i.style.padding="0",i.style.border="none",i.style.position="absolute",i.style.display="block",i.style.left="-99999px"),i.style.font=t,document.body.appendChild(i),e=i.offsetHeight,document.body.removeChild(i);cp[t]=e}return e}}();function fm(i,t){return Ka||(Ka=Mn(1,1)),i!=up&&(Ka.font=i,up=Ka.font),Ka.measureText(t)}function Ic(i,t){return fm(i,t).width}function lg(i,t,e){if(t in e)return e[t];var n=Ic(i,t);return e[t]=n,n}function aI(i,t,e){for(var n=t.length,r=0,o=0;o<n;++o){var a=Ic(i,t[o]);r=Math.max(r,a),e.push(a)}return r}function sI(i,t,e,n,r,o,a,s,l,u,c){i.save(),e!==1&&(i.globalAlpha*=e),t&&i.setTransform.apply(i,t),n.contextInstructions?(i.translate(l,u),i.scale(c[0],c[1]),lI(n,i)):c[0]<0||c[1]<0?(i.translate(l,u),i.scale(c[0],c[1]),i.drawImage(n,r,o,a,s,0,0,a,s)):i.drawImage(n,r,o,a,s,l,u,a*c[0],s*c[1]),i.restore()}function lI(i,t){for(var e=i.contextInstructions,n=0,r=e.length;n<r;n+=2)Array.isArray(e[n+1])?t[e[n]].apply(t,e[n+1]):t[e[n]]=e[n+1]}var uI=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),cI=function(i){uI(t,i);function t(e){var n=i.call(this,e)||this;n.fontChangeListenerKey_=rt(Nr,Aa.PROPERTYCHANGE,e.redrawText.bind(e)),n.element_=document.createElement("div");var r=n.element_.style;r.position="absolute",r.width="100%",r.height="100%",r.zIndex="0",n.element_.className=Ch+" ol-layers";var o=e.getViewport();return o.insertBefore(n.element_,o.firstChild||null),n.children_=[],n.renderedVisible_=!0,n}return t.prototype.dispatchRenderEvent=function(e,n){var r=this.getMap();if(r.hasListener(e)){var o=new cm(e,void 0,n);r.dispatchEvent(o)}},t.prototype.disposeInternal=function(){Pt(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),i.prototype.disposeInternal.call(this)},t.prototype.renderFrame=function(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(Ca.PRECOMPOSE,e);var n=e.layerStatesArray.sort(function(d,p){return d.zIndex-p.zIndex}),r=e.viewState;this.children_.length=0;for(var o=[],a=null,s=0,l=n.length;s<l;++s){var u=n[s];if(e.layerIndex=s,!(!yc(u,r)||u.sourceState!=Ar.READY&&u.sourceState!=Ar.UNDEFINED)){var c=u.layer,h=c.render(e,a);h&&(h!==a&&(this.children_.push(h),a=h),"getDeclutter"in c&&o.push(c))}}for(var s=o.length-1;s>=0;--s)o[s].renderDeclutter(e);nI(this.element_,this.children_),this.dispatchRenderEvent(Ca.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)},t.prototype.forEachLayerAtPixel=function(e,n,r,o,a){for(var s=n.viewState,l=n.layerStatesArray,u=l.length,c=u-1;c>=0;--c){var h=l[c],d=h.layer;if(d.hasRenderer()&&yc(h,s)&&a(d)){var p=d.getRenderer(),f=p.getDataAtPixel(e,n,r);if(f){var g=o(d,f);if(g)return g}}}},t}(KC);const hI=cI,ti={ADD:"add",REMOVE:"remove"};var gm=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),ug={LENGTH:"length"},Tu=function(i){gm(t,i);function t(e,n,r){var o=i.call(this,e)||this;return o.element=n,o.index=r,o}return t}(zn),dI=function(i){gm(t,i);function t(e,n){var r=i.call(this)||this;r.on,r.once,r.un;var o=n||{};if(r.unique_=!!o.unique,r.array_=e||[],r.unique_)for(var a=0,s=r.array_.length;a<s;++a)r.assertUnique_(r.array_[a],a);return r.updateLength_(),r}return t.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},t.prototype.extend=function(e){for(var n=0,r=e.length;n<r;++n)this.push(e[n]);return this},t.prototype.forEach=function(e){for(var n=this.array_,r=0,o=n.length;r<o;++r)e(n[r],r,n)},t.prototype.getArray=function(){return this.array_},t.prototype.item=function(e){return this.array_[e]},t.prototype.getLength=function(){return this.get(ug.LENGTH)},t.prototype.insertAt=function(e,n){this.unique_&&this.assertUnique_(n),this.array_.splice(e,0,n),this.updateLength_(),this.dispatchEvent(new Tu(ti.ADD,n,e))},t.prototype.pop=function(){return this.removeAt(this.getLength()-1)},t.prototype.push=function(e){this.unique_&&this.assertUnique_(e);var n=this.getLength();return this.insertAt(n,e),this.getLength()},t.prototype.remove=function(e){for(var n=this.array_,r=0,o=n.length;r<o;++r)if(n[r]===e)return this.removeAt(r)},t.prototype.removeAt=function(e){var n=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new Tu(ti.REMOVE,n,e)),n},t.prototype.setAt=function(e,n){var r=this.getLength();if(e<r){this.unique_&&this.assertUnique_(n,e);var o=this.array_[e];this.array_[e]=n,this.dispatchEvent(new Tu(ti.REMOVE,o,e)),this.dispatchEvent(new Tu(ti.ADD,n,e))}else{for(var a=r;a<e;++a)this.insertAt(a,void 0);this.insertAt(e,n)}},t.prototype.updateLength_=function(){this.set(ug.LENGTH,this.array_.length)},t.prototype.assertUnique_=function(e,n){for(var r=0,o=this.array_.length;r<o;++r)if(this.array_[r]===e&&r!==n)throw new Kv(58)},t}(ir);const oi=dI;var pI=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),ld={LAYERS:"layers"},fI=function(i){pI(t,i);function t(e){var n=this,r=e||{},o=dt({},r);delete o.layers;var a=r.layers;return n=i.call(this,o)||this,n.on,n.once,n.un,n.layersListenerKeys_=[],n.listenerKeys_={},n.addChangeListener(ld.LAYERS,n.handleLayersChanged_),a?Array.isArray(a)?a=new oi(a.slice(),{unique:!0}):be(typeof a.getArray=="function",43):a=new oi(void 0,{unique:!0}),n.setLayers(a),n}return t.prototype.handleLayerChange_=function(){this.changed()},t.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(Pt),this.layersListenerKeys_.length=0;var e=this.getLayers();this.layersListenerKeys_.push(rt(e,ti.ADD,this.handleLayersAdd_,this),rt(e,ti.REMOVE,this.handleLayersRemove_,this));for(var n in this.listenerKeys_)this.listenerKeys_[n].forEach(Pt);Ws(this.listenerKeys_);for(var r=e.getArray(),o=0,a=r.length;o<a;o++){var s=r[o];this.listenerKeys_[_e(s)]=[rt(s,Aa.PROPERTYCHANGE,this.handleLayerChange_,this),rt(s,Ie.CHANGE,this.handleLayerChange_,this)]}this.changed()},t.prototype.handleLayersAdd_=function(e){var n=e.element;this.listenerKeys_[_e(n)]=[rt(n,Aa.PROPERTYCHANGE,this.handleLayerChange_,this),rt(n,Ie.CHANGE,this.handleLayerChange_,this)],this.changed()},t.prototype.handleLayersRemove_=function(e){var n=e.element,r=_e(n);this.listenerKeys_[r].forEach(Pt),delete this.listenerKeys_[r],this.changed()},t.prototype.getLayers=function(){return this.get(ld.LAYERS)},t.prototype.setLayers=function(e){this.set(ld.LAYERS,e)},t.prototype.getLayersArray=function(e){var n=e!==void 0?e:[];return this.getLayers().forEach(function(r){r.getLayersArray(n)}),n},t.prototype.getLayerStatesArray=function(e){var n=e!==void 0?e:[],r=n.length;this.getLayers().forEach(function(c){c.getLayerStatesArray(n)});var o=this.getLayerState(),a=o.zIndex;!e&&o.zIndex===void 0&&(a=0);for(var s=r,l=n.length;s<l;s++){var u=n[s];u.opacity*=o.opacity,u.visible=u.visible&&o.visible,u.maxResolution=Math.min(u.maxResolution,o.maxResolution),u.minResolution=Math.max(u.minResolution,o.minResolution),u.minZoom=Math.max(u.minZoom,o.minZoom),u.maxZoom=Math.min(u.maxZoom,o.maxZoom),o.extent!==void 0&&(u.extent!==void 0?u.extent=xo(u.extent,o.extent):u.extent=o.extent),u.zIndex===void 0&&(u.zIndex=a)}return n},t.prototype.getSourceState=function(){return Ar.READY},t}(am);const gI=fI;var vI=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),mI=function(i){vI(t,i);function t(e,n,r){var o=i.call(this,e)||this;return o.map=n,o.frameState=r!==void 0?r:null,o}return t}(zn);const nc=mI;var yI=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),AI=function(i){yI(t,i);function t(e,n,r,o,a){var s=i.call(this,e,n,a)||this;return s.originalEvent=r,s.pixel_=null,s.coordinate_=null,s.dragging=o!==void 0?o:!1,s}return Object.defineProperty(t.prototype,"pixel",{get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(e){this.pixel_=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"coordinate",{get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(e){this.coordinate_=e},enumerable:!1,configurable:!0}),t.prototype.preventDefault=function(){i.prototype.preventDefault.call(this),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()},t.prototype.stopPropagation=function(){i.prototype.stopPropagation.call(this),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()},t}(nc);const Fr=AI,Je={SINGLECLICK:"singleclick",CLICK:Ie.CLICK,DBLCLICK:Ie.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},hp={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};var _I=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),CI=function(i){_I(t,i);function t(e,n){var r=i.call(this,e)||this;r.map_=e,r.clickTimeoutId_,r.emulateClicks_=!1,r.dragging_=!1,r.dragListenerKeys_=[],r.moveTolerance_=n===void 0?1:n,r.down_=null;var o=r.map_.getViewport();return r.activePointers_=0,r.trackedTouches_={},r.element_=o,r.pointerdownListenerKey_=rt(o,hp.POINTERDOWN,r.handlePointerDown_,r),r.originalPointerMoveEvent_,r.relayedListenerKey_=rt(o,hp.POINTERMOVE,r.relayEvent_,r),r.boundHandleTouchMove_=r.handleTouchMove_.bind(r),r.element_.addEventListener(Ie.TOUCHMOVE,r.boundHandleTouchMove_,Zv?{passive:!1}:!1),r}return t.prototype.emulateClick_=function(e){var n=new Fr(Je.CLICK,this.map_,e);this.dispatchEvent(n),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,n=new Fr(Je.DBLCLICK,this.map_,e),this.dispatchEvent(n)):this.clickTimeoutId_=setTimeout((function(){this.clickTimeoutId_=void 0;var r=new Fr(Je.SINGLECLICK,this.map_,e);this.dispatchEvent(r)}).bind(this),250)},t.prototype.updateActivePointers_=function(e){var n=e;n.type==Je.POINTERUP||n.type==Je.POINTERCANCEL?delete this.trackedTouches_[n.pointerId]:n.type==Je.POINTERDOWN&&(this.trackedTouches_[n.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},t.prototype.handlePointerUp_=function(e){this.updateActivePointers_(e);var n=new Fr(Je.POINTERUP,this.map_,e);this.dispatchEvent(n),this.emulateClicks_&&!n.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_===0&&(this.dragListenerKeys_.forEach(Pt),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)},t.prototype.isMouseActionButton_=function(e){return e.button===0},t.prototype.handlePointerDown_=function(e){this.emulateClicks_=this.activePointers_===0,this.updateActivePointers_(e);var n=new Fr(Je.POINTERDOWN,this.map_,e);this.dispatchEvent(n),this.down_={};for(var r in e){var o=e[r];this.down_[r]=typeof o=="function"?ma:o}if(this.dragListenerKeys_.length===0){var a=this.map_.getOwnerDocument();this.dragListenerKeys_.push(rt(a,Je.POINTERMOVE,this.handlePointerMove_,this),rt(a,Je.POINTERUP,this.handlePointerUp_,this),rt(this.element_,Je.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==a&&this.dragListenerKeys_.push(rt(this.element_.getRootNode(),Je.POINTERUP,this.handlePointerUp_,this))}},t.prototype.handlePointerMove_=function(e){if(this.isMoving_(e)){this.dragging_=!0;var n=new Fr(Je.POINTERDRAG,this.map_,e,this.dragging_);this.dispatchEvent(n)}},t.prototype.relayEvent_=function(e){this.originalPointerMoveEvent_=e;var n=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new Fr(e.type,this.map_,e,n))},t.prototype.handleTouchMove_=function(e){var n=this.originalPointerMoveEvent_;(!n||n.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()},t.prototype.isMoving_=function(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_},t.prototype.disposeInternal=function(){this.relayedListenerKey_&&(Pt(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(Ie.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Pt(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Pt),this.dragListenerKeys_.length=0,this.element_=null,i.prototype.disposeInternal.call(this)},t}(Ys);const II=CI,wl={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend"},Fi={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};var Ec=1/0,EI=function(){function i(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return i.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,Ws(this.queuedElements_)},i.prototype.dequeue=function(){var t=this.elements_,e=this.priorities_,n=t[0];t.length==1?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));var r=this.keyFunction_(n);return delete this.queuedElements_[r],n},i.prototype.enqueue=function(t){be(!(this.keyFunction_(t)in this.queuedElements_),31);var e=this.priorityFunction_(t);return e!=Ec?(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1},i.prototype.getCount=function(){return this.elements_.length},i.prototype.getLeftChildIndex_=function(t){return t*2+1},i.prototype.getRightChildIndex_=function(t){return t*2+2},i.prototype.getParentIndex_=function(t){return t-1>>1},i.prototype.heapify_=function(){var t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)},i.prototype.isEmpty=function(){return this.elements_.length===0},i.prototype.isKeyQueued=function(t){return t in this.queuedElements_},i.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},i.prototype.siftUp_=function(t){for(var e=this.elements_,n=this.priorities_,r=e.length,o=e[t],a=n[t],s=t;t<r>>1;){var l=this.getLeftChildIndex_(t),u=this.getRightChildIndex_(t),c=u<r&&n[u]<n[l]?u:l;e[t]=e[c],n[t]=n[c],t=c}e[t]=o,n[t]=a,this.siftDown_(s,t)},i.prototype.siftDown_=function(t,e){for(var n=this.elements_,r=this.priorities_,o=n[e],a=r[e];e>t;){var s=this.getParentIndex_(e);if(r[s]>a)n[e]=n[s],r[e]=r[s],e=s;else break}n[e]=o,r[e]=a},i.prototype.reprioritize=function(){var t=this.priorityFunction_,e=this.elements_,n=this.priorities_,r=0,o=e.length,a,s,l;for(s=0;s<o;++s)a=e[s],l=t(a),l==Ec?delete this.queuedElements_[this.keyFunction_(a)]:(n[r]=l,e[r++]=a);e.length=r,n.length=r,this.heapify_()},i}();const wI=EI,oe={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};var SI=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),PI=function(i){SI(t,i);function t(e,n){var r=i.call(this,function(o){return e.apply(null,o)},function(o){return o[0].getKey()})||this;return r.boundHandleTileChange_=r.handleTileChange.bind(r),r.tileChangeCallback_=n,r.tilesLoading_=0,r.tilesLoadingKeys_={},r}return t.prototype.enqueue=function(e){var n=i.prototype.enqueue.call(this,e);if(n){var r=e[0];r.addEventListener(Ie.CHANGE,this.boundHandleTileChange_)}return n},t.prototype.getTilesLoading=function(){return this.tilesLoading_},t.prototype.handleTileChange=function(e){var n=e.target,r=n.getState();if(r===oe.LOADED||r===oe.ERROR||r===oe.EMPTY){n.removeEventListener(Ie.CHANGE,this.boundHandleTileChange_);var o=n.getKey();o in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[o],--this.tilesLoading_),this.tileChangeCallback_()}},t.prototype.loadMoreTiles=function(e,n){for(var r=0,o,a,s;this.tilesLoading_<e&&r<n&&this.getCount()>0;)a=this.dequeue()[0],s=a.getKey(),o=a.getState(),o===oe.IDLE&&!(s in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[s]=!0,++this.tilesLoading_,++r,a.load())},t}(wI);const xI=PI;function MI(i,t,e,n,r){if(!i||!(e in i.wantedTiles)||!i.wantedTiles[e][t.getKey()])return Ec;var o=i.viewState.center,a=n[0]-o[0],s=n[1]-o[1];return 65536*Math.log(r)+Math.sqrt(a*a+s*s)/r}const b={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"};var Hs={RADIANS:"radians",DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},Pr={};Pr[Hs.RADIANS]=6370997/(2*Math.PI);Pr[Hs.DEGREES]=2*Math.PI*6370997/360;Pr[Hs.FEET]=.3048;Pr[Hs.METERS]=1;Pr[Hs.USFEET]=1200/3937;const _r=Hs,jt={ANIMATING:0,INTERACTING:1},lr={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};var TI=42,hf=256,bI=function(){function i(t){this.code_=t.code,this.units_=t.units,this.extent_=t.extent!==void 0?t.extent:null,this.worldExtent_=t.worldExtent!==void 0?t.worldExtent:null,this.axisOrientation_=t.axisOrientation!==void 0?t.axisOrientation:"enu",this.global_=t.global!==void 0?t.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}return i.prototype.canWrapX=function(){return this.canWrapX_},i.prototype.getCode=function(){return this.code_},i.prototype.getExtent=function(){return this.extent_},i.prototype.getUnits=function(){return this.units_},i.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||Pr[this.units_]},i.prototype.getWorldExtent=function(){return this.worldExtent_},i.prototype.getAxisOrientation=function(){return this.axisOrientation_},i.prototype.isGlobal=function(){return this.global_},i.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!!(t&&this.extent_)},i.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},i.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},i.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!!(this.global_&&t)},i.prototype.setWorldExtent=function(t){this.worldExtent_=t},i.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},i.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},i}();const Ih=bI;var RI=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),hu=6378137,is=Math.PI*hu,OI=[-is,-is,is,is],LI=[-180,-85,180,85],bu=hu*Math.log(Math.tan(Math.PI/2)),ja=function(i){RI(t,i);function t(e){return i.call(this,{code:e,units:_r.METERS,extent:OI,global:!0,worldExtent:LI,getPointResolution:function(n,r){return n/SC(r[1]/hu)}})||this}return t}(Ih),cg=[new ja("EPSG:3857"),new ja("EPSG:102100"),new ja("EPSG:102113"),new ja("EPSG:900913"),new ja("http://www.opengis.net/def/crs/EPSG/0/3857"),new ja("http://www.opengis.net/gml/srs/epsg.xml#3857")];function GI(i,t,e){var n=i.length,r=e>1?e:2,o=t;o===void 0&&(r>2?o=i.slice():o=new Array(n));for(var a=0;a<n;a+=r){o[a]=is*i[a]/180;var s=hu*Math.log(Math.tan(Math.PI*(+i[a+1]+90)/360));s>bu?s=bu:s<-bu&&(s=-bu),o[a+1]=s}return o}function kI(i,t,e){var n=i.length,r=e>1?e:2,o=t;o===void 0&&(r>2?o=i.slice():o=new Array(n));for(var a=0;a<n;a+=r)o[a]=180*i[a]/is,o[a+1]=360*Math.atan(Math.exp(i[a+1]/hu))/Math.PI-90;return o}var DI=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),NI=6378137,hg=[-180,-90,180,90],FI=Math.PI*NI/180,Ho=function(i){DI(t,i);function t(e,n){return i.call(this,{code:e,units:_r.DEGREES,extent:hg,axisOrientation:n,global:!0,metersPerUnit:FI,worldExtent:hg})||this}return t}(Ih),dg=[new Ho("CRS:84"),new Ho("EPSG:4326","neu"),new Ho("urn:ogc:def:crs:OGC:1.3:CRS84"),new Ho("urn:ogc:def:crs:OGC:2:84"),new Ho("http://www.opengis.net/def/crs/OGC/1.3/CRS84","neu"),new Ho("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Ho("http://www.opengis.net/def/crs/EPSG/0/4326","neu")],dp={};function UI(i){return dp[i]||dp[i.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function BI(i,t){dp[i]=t}var cs={};function Ss(i,t,e){var n=i.getCode(),r=t.getCode();n in cs||(cs[n]={}),cs[n][r]=e}function vm(i,t){var e;return i in cs&&t in cs[i]&&(e=cs[i][t]),e}var mm=63710088e-1;function Ia(i,t,e){var n=e||mm,r=Mo(i[1]),o=Mo(t[1]),a=(o-r)/2,s=Mo(t[0]-i[0])/2,l=Math.sin(a)*Math.sin(a)+Math.sin(s)*Math.sin(s)*Math.cos(r)*Math.cos(o);return 2*n*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))}function Ru(i,t){for(var e=0,n=i.length,r=i[n-1][0],o=i[n-1][1],a=0;a<n;a++){var s=i[a][0],l=i[a][1];e+=Mo(s-r)*(2+Math.sin(Mo(o))+Math.sin(Mo(l))),r=s,o=l}return e*t*t/2}function wc(i,t){var e=t||{},n=e.radius||mm,r=e.projection||"EPSG:3857",o=i.getType();o!==b.GEOMETRY_COLLECTION&&(i=i.clone().transform(r,"EPSG:4326"));var a=0,s,l,u,c,h,d;switch(o){case b.POINT:case b.MULTI_POINT:case b.LINE_STRING:case b.MULTI_LINE_STRING:case b.LINEAR_RING:break;case b.POLYGON:{for(s=i.getCoordinates(),a=Math.abs(Ru(s[0],n)),u=1,c=s.length;u<c;++u)a-=Math.abs(Ru(s[u],n));break}case b.MULTI_POLYGON:{for(s=i.getCoordinates(),u=0,c=s.length;u<c;++u)for(l=s[u],a+=Math.abs(Ru(l[0],n)),h=1,d=l.length;h<d;++h)a-=Math.abs(Ru(l[h],n));break}case b.GEOMETRY_COLLECTION:{var p=i.getGeometries();for(u=0,c=p.length;u<c;++u)a+=wc(p[u],t);break}default:throw new Error("Unsupported geometry type: "+o)}return a}function df(i,t,e){var n;if(t!==void 0){for(var r=0,o=i.length;r<o;++r)t[r]=i[r];n=t}else n=i.slice();return n}function ym(i,t,e){if(t!==void 0&&i!==t){for(var n=0,r=i.length;n<r;++n)t[n]=i[n];i=t}return i}function pf(i){BI(i.getCode(),i),Ss(i,i,df)}function jI(i){i.forEach(pf)}function Ee(i){return typeof i=="string"?UI(i):i||null}function pg(i,t,e,n){i=Ee(i);var r,o=i.getPointResolutionFunc();if(o){if(r=o(t,e),n&&n!==i.getUnits()){var a=i.getMetersPerUnit();a&&(r=r*a/Pr[n])}}else{var s=i.getUnits();if(s==_r.DEGREES&&!n||n==_r.DEGREES)r=t;else{var l=Eh(i,Ee("EPSG:4326"));if(l===ym&&s!==_r.DEGREES)r=t*i.getMetersPerUnit();else{var u=[e[0]-t/2,e[1],e[0]+t/2,e[1],e[0],e[1]-t/2,e[0],e[1]+t/2];u=l(u,u,2);var c=Ia(u.slice(0,2),u.slice(2,4)),h=Ia(u.slice(4,6),u.slice(6,8));r=(c+h)/2}var a=n?Pr[n]:i.getMetersPerUnit();a!==void 0&&(r/=a)}}return r}function pp(i){jI(i),i.forEach(function(t){i.forEach(function(e){t!==e&&Ss(t,e,df)})})}function zI(i,t,e,n){i.forEach(function(r){t.forEach(function(o){Ss(r,o,e),Ss(o,r,n)})})}function ff(i,t){return i?typeof i=="string"?Ee(i):i:Ee(t)}function fg(i){return function(t,e,n){for(var r=t.length,o=n!==void 0?n:2,a=e!==void 0?e:new Array(r),s=0;s<r;s+=o){var l=i([t[s],t[s+1]]);a[s]=l[0],a[s+1]=l[1];for(var u=o-1;u>=2;--u)a[s+u]=t[s+u]}return a}}function VI(i,t,e,n){var r=Ee(i),o=Ee(t);Ss(r,o,fg(e)),Ss(o,r,fg(n))}function WI(i,t){return ut(i,"EPSG:4326",t!==void 0?t:"EPSG:3857")}function jr(i,t){if(i===t)return!0;var e=i.getUnits()===t.getUnits();if(i.getCode()===t.getCode())return e;var n=Eh(i,t);return n===df&&e}function Eh(i,t){var e=i.getCode(),n=t.getCode(),r=vm(e,n);return r||(r=ym),r}function Ps(i,t){var e=Ee(i),n=Ee(t);return Eh(e,n)}function ut(i,t,e){var n=Ps(t,e);return n(i,void 0,i.length)}function vr(i,t,e,n){var r=Ps(t,e);return of(i,r,void 0,n)}var YI=null;function Wl(){return YI}function Yl(i,t){return i}function Xt(i,t){return i}function wh(i,t){return i}function Vr(i,t){return i}function HI(i,t){return i}function qI(){pp(cg),pp(dg),zI(dg,cg,GI,kI)}qI();function gg(i,t,e){return function(n,r,o,a,s){if(n){var l=t?0:o[0]*r,u=t?0:o[1]*r,c=s?s[0]:0,h=s?s[1]:0,d=i[0]+l/2+c,p=i[2]-l/2+c,f=i[1]+u/2+h,g=i[3]-u/2+h;d>p&&(d=(p+d)/2,p=d),f>g&&(f=(g+f)/2,g=f);var v=ri(n[0],d,p),y=ri(n[1],f,g),m=30*r;return a&&e&&(v+=-m*Math.log(1+Math.max(0,d-n[0])/m)+m*Math.log(1+Math.max(0,n[0]-p)/m),y+=-m*Math.log(1+Math.max(0,f-n[1])/m)+m*Math.log(1+Math.max(0,n[1]-g)/m)),[v,y]}else return}}function XI(i){return i}function gf(i,t,e,n){var r=Ct(t)/e[0],o=Ti(t)/e[1];return n?Math.min(i,Math.max(r,o)):Math.min(i,Math.min(r,o))}function vf(i,t,e){var n=Math.min(i,t),r=50;return n*=Math.log(1+r*Math.max(0,i/t-1))/r+1,e&&(n=Math.max(n,e),n/=Math.log(1+r*Math.max(0,e/i-1))/r+1),ri(n,e/2,t*2)}function ZI(i,t,e,n){return function(r,o,a,s){if(r!==void 0){var l=i[0],u=i[i.length-1],c=e?gf(l,e,a,n):l;if(s){var h=t!==void 0?t:!0;return h?vf(r,c,u):ri(r,u,c)}var d=Math.min(c,r),p=Math.floor(fh(i,d,o));return i[p]>c&&p<i.length-1?i[p+1]:i[p]}else return}}function KI(i,t,e,n,r,o){return function(a,s,l,u){if(a!==void 0){var c=r?gf(t,r,l,o):t,h=e!==void 0?e:0;if(u){var d=n!==void 0?n:!0;return d?vf(a,c,h):ri(a,h,c)}var p=1e-9,f=Math.ceil(Math.log(t/c)/Math.log(i)-p),g=-s*(.5-p)+.5,v=Math.min(c,a),y=Math.floor(Math.log(t/v)/Math.log(i)+g),m=Math.max(f,y),A=t/Math.pow(i,m);return ri(A,h,c)}else return}}function vg(i,t,e,n,r){return function(o,a,s,l){if(o!==void 0){var u=n?gf(i,n,s,r):i,c=e!==void 0?e:!0;return!c||!l?ri(o,t,u):vf(o,u,t)}else return}}function mf(i){if(i!==void 0)return 0}function mg(i){if(i!==void 0)return i}function JI(i){var t=2*Math.PI/i;return function(e,n){if(n)return e;if(e!==void 0)return e=Math.floor(e/t+.5)*t,e}}function QI(i){var t=i||Mo(5);return function(e,n){if(n)return e;if(e!==void 0)return Math.abs(e)<=t?0:e}}function Am(i){return Math.pow(i,3)}function qs(i){return 1-Am(1-i)}function $I(i){return 3*i*i-2*i*i*i}function eE(i){return i}const De={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"};function bo(i,t,e,n,r,o){for(var a=o||[],s=0,l=t;l<e;l+=n){var u=i[l],c=i[l+1];a[s++]=r[0]*u+r[2]*c+r[4],a[s++]=r[1]*u+r[3]*c+r[5]}return o&&a.length!=s&&(a.length=s),a}function yf(i,t,e,n,r,o,a){for(var s=a||[],l=Math.cos(r),u=Math.sin(r),c=o[0],h=o[1],d=0,p=t;p<e;p+=n){var f=i[p]-c,g=i[p+1]-h;s[d++]=c+f*l-g*u,s[d++]=h+f*u+g*l;for(var v=p+2;v<p+n;++v)s[d++]=i[v]}return a&&s.length!=d&&(s.length=d),s}function tE(i,t,e,n,r,o,a,s){for(var l=s||[],u=a[0],c=a[1],h=0,d=t;d<e;d+=n){var p=i[d]-u,f=i[d+1]-c;l[h++]=u+r*p,l[h++]=c+o*f;for(var g=d+2;g<d+n;++g)l[h++]=i[g]}return s&&l.length!=h&&(l.length=h),l}function _m(i,t,e,n,r,o,a){for(var s=a||[],l=0,u=t;u<e;u+=n){s[l++]=i[u]+r,s[l++]=i[u+1]+o;for(var c=u+2;c<u+n;++c)s[l++]=i[c]}return a&&s.length!=l&&(s.length=l),s}var iE=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),yg=Dn(),nE=function(i){iE(t,i);function t(){var e=i.call(this)||this;return e.extent_=pn(),e.extentRevision_=-1,e.simplifiedGeometryMaxMinSquaredTolerance=0,e.simplifiedGeometryRevision=0,e.simplifyTransformedInternal=aC(function(n,r,o){if(!o)return this.getSimplifiedGeometry(r);var a=this.clone();return a.applyTransform(o),a.getSimplifiedGeometry(r)}),e}return t.prototype.simplifyTransformed=function(e,n){return this.simplifyTransformedInternal(this.getRevision(),e,n)},t.prototype.clone=function(){return we()},t.prototype.closestPointXY=function(e,n,r,o){return we()},t.prototype.containsXY=function(e,n){var r=this.getClosestPoint([e,n]);return r[0]===e&&r[1]===n},t.prototype.getClosestPoint=function(e,n){var r=n||[NaN,NaN];return this.closestPointXY(e[0],e[1],r,1/0),r},t.prototype.intersectsCoordinate=function(e){return this.containsXY(e[0],e[1])},t.prototype.computeExtent=function(e){return we()},t.prototype.getExtent=function(e){if(this.extentRevision_!=this.getRevision()){var n=this.computeExtent(this.extent_);(isNaN(n[0])||isNaN(n[1]))&&uu(n),this.extentRevision_=this.getRevision()}return IC(this.extent_,e)},t.prototype.rotate=function(e,n){we()},t.prototype.scale=function(e,n,r){we()},t.prototype.simplify=function(e){return this.getSimplifiedGeometry(e*e)},t.prototype.getSimplifiedGeometry=function(e){return we()},t.prototype.getType=function(){return we()},t.prototype.applyTransform=function(e){we()},t.prototype.intersectsExtent=function(e){return we()},t.prototype.translate=function(e,n){we()},t.prototype.transform=function(e,n){var r=Ee(e),o=r.getUnits()==_r.TILE_PIXELS?function(a,s,l){var u=r.getExtent(),c=r.getWorldExtent(),h=Ti(c)/Ti(u);return wr(yg,c[0],c[3],h,-h,0,0,0),bo(a,0,a.length,l,yg,s),Ps(r,n)(a,s,l)}:Ps(r,n);return this.applyTransform(o),this},t}(ir);const Cm=nE;var rE=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),oE=function(i){rE(t,i);function t(){var e=i.call(this)||this;return e.layout=De.XY,e.stride=2,e.flatCoordinates=null,e}return t.prototype.computeExtent=function(e){return tf(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)},t.prototype.getCoordinates=function(){return we()},t.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},t.prototype.getFlatCoordinates=function(){return this.flatCoordinates},t.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},t.prototype.getLayout=function(){return this.layout},t.prototype.getSimplifiedGeometry=function(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var n=this.getSimplifiedGeometryInternal(e),r=n.getFlatCoordinates();return r.length<this.flatCoordinates.length?n:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)},t.prototype.getSimplifiedGeometryInternal=function(e){return this},t.prototype.getStride=function(){return this.stride},t.prototype.setFlatCoordinates=function(e,n){this.stride=Ag(e),this.layout=e,this.flatCoordinates=n},t.prototype.setCoordinates=function(e,n){we()},t.prototype.setLayout=function(e,n,r){var o;if(e)o=Ag(e);else{for(var a=0;a<r;++a)if(n.length===0){this.layout=De.XY,this.stride=2;return}else n=n[0];o=n.length,e=aE(o)}this.layout=e,this.stride=o},t.prototype.applyTransform=function(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},t.prototype.rotate=function(e,n){var r=this.getFlatCoordinates();if(r){var o=this.getStride();yf(r,0,r.length,o,e,n,r),this.changed()}},t.prototype.scale=function(e,n,r){var o=n;o===void 0&&(o=e);var a=r;a||(a=Sr(this.getExtent()));var s=this.getFlatCoordinates();if(s){var l=this.getStride();tE(s,0,s.length,l,e,o,a,s),this.changed()}},t.prototype.translate=function(e,n){var r=this.getFlatCoordinates();if(r){var o=this.getStride();_m(r,0,r.length,o,e,n,r),this.changed()}},t}(Cm);function aE(i){var t;return i==2?t=De.XY:i==3?t=De.XYZ:i==4&&(t=De.XYZM),t}function Ag(i){var t;return i==De.XY?t=2:i==De.XYZ||i==De.XYM?t=3:i==De.XYZM&&(t=4),t}function sE(i,t,e){var n=i.getFlatCoordinates();if(n){var r=i.getStride();return bo(n,0,n.length,r,t,e)}else return null}const Bo=oE;function _g(i,t,e,n,r,o,a){var s=i[t],l=i[t+1],u=i[e]-s,c=i[e+1]-l,h;if(u===0&&c===0)h=t;else{var d=((r-s)*u+(o-l)*c)/(u*u+c*c);if(d>1)h=e;else if(d>0){for(var p=0;p<n;++p)a[p]=Ur(i[t+p],i[e+p],d);a.length=n;return}else h=t}for(var p=0;p<n;++p)a[p]=i[h+p];a.length=n}function Af(i,t,e,n,r){var o=i[t],a=i[t+1];for(t+=n;t<e;t+=n){var s=i[t],l=i[t+1],u=da(o,a,s,l);u>r&&(r=u),o=s,a=l}return r}function _f(i,t,e,n,r){for(var o=0,a=e.length;o<a;++o){var s=e[o];r=Af(i,t,s,n,r),t=s}return r}function lE(i,t,e,n,r){for(var o=0,a=e.length;o<a;++o){var s=e[o];r=_f(i,t,s,n,r),t=s[s.length-1]}return r}function Cf(i,t,e,n,r,o,a,s,l,u,c){if(t==e)return u;var h,d;if(r===0)if(d=da(a,s,i[t],i[t+1]),d<u){for(h=0;h<n;++h)l[h]=i[t+h];return l.length=n,d}else return u;for(var p=c||[NaN,NaN],f=t+n;f<e;)if(_g(i,f-n,f,n,a,s,p),d=da(a,s,p[0],p[1]),d<u){for(u=d,h=0;h<n;++h)l[h]=p[h];l.length=n,f+=n}else f+=n*Math.max((Math.sqrt(d)-Math.sqrt(u))/r|0,1);if(o&&(_g(i,e-n,t,n,a,s,p),d=da(a,s,p[0],p[1]),d<u)){for(u=d,h=0;h<n;++h)l[h]=p[h];l.length=n}return u}function If(i,t,e,n,r,o,a,s,l,u,c){for(var h=c||[NaN,NaN],d=0,p=e.length;d<p;++d){var f=e[d];u=Cf(i,t,f,n,r,o,a,s,l,u,h),t=f}return u}function uE(i,t,e,n,r,o,a,s,l,u,c){for(var h=c||[NaN,NaN],d=0,p=e.length;d<p;++d){var f=e[d];u=If(i,t,f,n,r,o,a,s,l,u,h),t=f[f.length-1]}return u}function Im(i,t,e,n){for(var r=0,o=e.length;r<o;++r)i[t++]=e[r];return t}function Sh(i,t,e,n){for(var r=0,o=e.length;r<o;++r)for(var a=e[r],s=0;s<n;++s)i[t++]=a[s];return t}function Ef(i,t,e,n,r){for(var o=r||[],a=0,s=0,l=e.length;s<l;++s){var u=Sh(i,t,e[s],n);o[a++]=u,t=u}return o.length=a,o}function cE(i,t,e,n,r){for(var o=r||[],a=0,s=0,l=e.length;s<l;++s){var u=Ef(i,t,e[s],n,o[a]);o[a++]=u,t=u[u.length-1]}return o.length=a,o}function wf(i,t,e,n,r,o,a){var s=(e-t)/n;if(s<3){for(;t<e;t+=n)o[a++]=i[t],o[a++]=i[t+1];return a}var l=new Array(s);l[0]=1,l[s-1]=1;for(var u=[t,e-n],c=0;u.length>0;){for(var h=u.pop(),d=u.pop(),p=0,f=i[d],g=i[d+1],v=i[h],y=i[h+1],m=d+n;m<h;m+=n){var A=i[m],_=i[m+1],C=xC(A,_,f,g,v,y);C>p&&(c=m,p=C)}p>r&&(l[(c-t)/n]=1,d+n<c&&u.push(d,c),c+n<h&&u.push(c,h))}for(var m=0;m<s;++m)l[m]&&(o[a++]=i[t+m*n],o[a++]=i[t+m*n+1]);return a}function hE(i,t,e,n,r,o,a,s){for(var l=0,u=e.length;l<u;++l){var c=e[l];a=wf(i,t,c,n,r,o,a),s.push(a),t=c}return a}function ra(i,t){return t*Math.round(i/t)}function dE(i,t,e,n,r,o,a){if(t==e)return a;var s=ra(i[t],r),l=ra(i[t+1],r);t+=n,o[a++]=s,o[a++]=l;var u,c;do if(u=ra(i[t],r),c=ra(i[t+1],r),t+=n,t==e)return o[a++]=u,o[a++]=c,a;while(u==s&&c==l);for(;t<e;){var h=ra(i[t],r),d=ra(i[t+1],r);if(t+=n,!(h==u&&d==c)){var p=u-s,f=c-l,g=h-s,v=d-l;if(p*v==f*g&&(p<0&&g<p||p==g||p>0&&g>p)&&(f<0&&v<f||f==v||f>0&&v>f)){u=h,c=d;continue}o[a++]=u,o[a++]=c,s=u,l=c,u=h,c=d}}return o[a++]=u,o[a++]=c,a}function Em(i,t,e,n,r,o,a,s){for(var l=0,u=e.length;l<u;++l){var c=e[l];a=dE(i,t,c,n,r,o,a),s.push(a),t=c}return a}function pE(i,t,e,n,r,o,a,s){for(var l=0,u=e.length;l<u;++l){var c=e[l],h=[];a=Em(i,t,c,n,r,o,a,h),s.push(h),t=c[c.length-1]}return a}function mo(i,t,e,n,r){for(var o=r!==void 0?r:[],a=0,s=t;s<e;s+=n)o[a++]=i.slice(s,s+n);return o.length=a,o}function Hl(i,t,e,n,r){for(var o=r!==void 0?r:[],a=0,s=0,l=e.length;s<l;++s){var u=e[s];o[a++]=mo(i,t,u,n,o[a]),t=u}return o.length=a,o}function fp(i,t,e,n,r){for(var o=r!==void 0?r:[],a=0,s=0,l=e.length;s<l;++s){var u=e[s];o[a++]=Hl(i,t,u,n,o[a]),t=u[u.length-1]}return o.length=a,o}function wm(i,t,e,n){for(var r=0,o=i[e-n],a=i[e-n+1];t<e;t+=n){var s=i[t],l=i[t+1];r+=a*s-o*l,o=s,a=l}return r/2}function Sm(i,t,e,n){for(var r=0,o=0,a=e.length;o<a;++o){var s=e[o];r+=wm(i,t,s,n),t=s}return r}function fE(i,t,e,n){for(var r=0,o=0,a=e.length;o<a;++o){var s=e[o];r+=Sm(i,t,s,n),t=s[s.length-1]}return r}var gE=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),vE=function(i){gE(t,i);function t(e,n){var r=i.call(this)||this;return r.maxDelta_=-1,r.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(e[0])?r.setFlatCoordinates(n,e):r.setCoordinates(e,n),r}return t.prototype.clone=function(){return new t(this.flatCoordinates.slice(),this.layout)},t.prototype.closestPointXY=function(e,n,r,o){return o<ka(this.getExtent(),e,n)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Af(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Cf(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,n,r,o))},t.prototype.getArea=function(){return wm(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},t.prototype.getCoordinates=function(){return mo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},t.prototype.getSimplifiedGeometryInternal=function(e){var n=[];return n.length=wf(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,n,0),new t(n,De.XY)},t.prototype.getType=function(){return b.LINEAR_RING},t.prototype.intersectsExtent=function(e){return!1},t.prototype.setCoordinates=function(e,n){this.setLayout(n,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Sh(this.flatCoordinates,0,e,this.stride),this.changed()},t}(Bo);const gp=vE;var mE=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),yE=function(i){mE(t,i);function t(e,n){var r=i.call(this)||this;return r.setCoordinates(e,n),r}return t.prototype.clone=function(){var e=new t(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e},t.prototype.closestPointXY=function(e,n,r,o){var a=this.flatCoordinates,s=da(e,n,a[0],a[1]);if(s<o){for(var l=this.stride,u=0;u<l;++u)r[u]=a[u];return r.length=l,s}else return o},t.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},t.prototype.computeExtent=function(e){return Il(this.flatCoordinates,e)},t.prototype.getType=function(){return b.POINT},t.prototype.intersectsExtent=function(e){return ef(e,this.flatCoordinates[0],this.flatCoordinates[1])},t.prototype.setCoordinates=function(e,n){this.setLayout(n,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Im(this.flatCoordinates,0,e,this.stride),this.changed()},t}(Bo);const Wi=yE;function AE(i,t,e,n,r){var o=nf(r,function(a){return!la(i,t,e,n,a[0],a[1])});return!o}function la(i,t,e,n,r,o){for(var a=0,s=i[e-n],l=i[e-n+1];t<e;t+=n){var u=i[t],c=i[t+1];l<=o?c>o&&(u-s)*(o-l)-(r-s)*(c-l)>0&&a++:c<=o&&(u-s)*(o-l)-(r-s)*(c-l)<0&&a--,s=u,l=c}return a!==0}function Sf(i,t,e,n,r,o){if(e.length===0||!la(i,t,e[0],n,r,o))return!1;for(var a=1,s=e.length;a<s;++a)if(la(i,e[a-1],e[a],n,r,o))return!1;return!0}function _E(i,t,e,n,r,o){if(e.length===0)return!1;for(var a=0,s=e.length;a<s;++a){var l=e[a];if(Sf(i,t,l,n,r,o))return!0;t=l[l.length-1]}return!1}function Pf(i,t,e,n,r,o,a){for(var s,l,u,c,h,d,p,f=r[o+1],g=[],v=0,y=e.length;v<y;++v){var m=e[v];for(c=i[m-n],d=i[m-n+1],s=t;s<m;s+=n)h=i[s],p=i[s+1],(f<=d&&p<=f||d<=f&&f<=p)&&(u=(f-d)/(p-d)*(h-c)+c,g.push(u)),c=h,d=p}var A=NaN,_=-1/0;for(g.sort(va),c=g[0],s=1,l=g.length;s<l;++s){h=g[s];var C=Math.abs(h-c);C>_&&(u=(c+h)/2,Sf(i,t,e,n,u,f)&&(A=u,_=C)),c=h}return isNaN(A)&&(A=r[o]),a?(a.push(A,f,_),a):[A,f,_]}function Pm(i,t,e,n,r){for(var o=[],a=0,s=e.length;a<s;++a){var l=e[a];o=Pf(i,t,l,n,r,2*a,o),t=l[l.length-1]}return o}function xm(i,t,e,n,r){var o;for(t+=n;t<e;t+=n)if(o=r(i.slice(t-n,t),i.slice(t,t+n)),o)return o;return!1}function Ph(i,t,e,n,r){var o=tm(pn(),i,t,e,n);return Vt(r,o)?zr(r,o)||o[0]>=r[0]&&o[2]<=r[2]||o[1]>=r[1]&&o[3]<=r[3]?!0:xm(i,t,e,n,function(a,s){return EC(r,a,s)}):!1}function CE(i,t,e,n,r){for(var o=0,a=e.length;o<a;++o){if(Ph(i,t,e[o],n,r))return!0;t=e[o]}return!1}function IE(i,t,e,n,r){return!!(Ph(i,t,e,n,r)||la(i,t,e,n,r[0],r[1])||la(i,t,e,n,r[0],r[3])||la(i,t,e,n,r[2],r[1])||la(i,t,e,n,r[2],r[3]))}function Mm(i,t,e,n,r){if(!IE(i,t,e[0],n,r))return!1;if(e.length===1)return!0;for(var o=1,a=e.length;o<a;++o)if(AE(i,e[o-1],e[o],n,r)&&!Ph(i,e[o-1],e[o],n,r))return!1;return!0}function EE(i,t,e,n,r){for(var o=0,a=e.length;o<a;++o){var s=e[o];if(Mm(i,t,s,n,r))return!0;t=s[s.length-1]}return!1}function wE(i,t,e,n){for(;t<e-n;){for(var r=0;r<n;++r){var o=i[t+r];i[t+r]=i[e-n+r],i[e-n+r]=o}t+=n,e-=n}}function xf(i,t,e,n){for(var r=0,o=i[e-n],a=i[e-n+1];t<e;t+=n){var s=i[t],l=i[t+1];r+=(s-o)*(l+a),o=s,a=l}return r===0?void 0:r>0}function Tm(i,t,e,n,r){for(var o=r!==void 0?r:!1,a=0,s=e.length;a<s;++a){var l=e[a],u=xf(i,t,l,n);if(a===0){if(o&&u||!o&&!u)return!1}else if(o&&!u||!o&&u)return!1;t=l}return!0}function SE(i,t,e,n,r){for(var o=0,a=e.length;o<a;++o){var s=e[o];if(!Tm(i,t,s,n,r))return!1;s.length&&(t=s[s.length-1])}return!0}function vp(i,t,e,n,r){for(var o=r!==void 0?r:!1,a=0,s=e.length;a<s;++a){var l=e[a],u=xf(i,t,l,n),c=a===0?o&&u||!o&&!u:o&&!u||!o&&u;c&&wE(i,t,l,n),t=l}return t}function Cg(i,t,e,n,r){for(var o=0,a=e.length;o<a;++o)t=vp(i,t,e[o],n,r);return t}var PE=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Mf=function(i){PE(t,i);function t(e,n,r){var o=i.call(this)||this;return o.ends_=[],o.flatInteriorPointRevision_=-1,o.flatInteriorPoint_=null,o.maxDelta_=-1,o.maxDeltaRevision_=-1,o.orientedRevision_=-1,o.orientedFlatCoordinates_=null,n!==void 0&&r?(o.setFlatCoordinates(n,e),o.ends_=r):o.setCoordinates(e,n),o}return t.prototype.appendLinearRing=function(e){this.flatCoordinates?St(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},t.prototype.clone=function(){var e=new t(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e},t.prototype.closestPointXY=function(e,n,r,o){return o<ka(this.getExtent(),e,n)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(_f(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),If(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,n,r,o))},t.prototype.containsXY=function(e,n){return Sf(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,n)},t.prototype.getArea=function(){return Sm(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},t.prototype.getCoordinates=function(e){var n;return e!==void 0?(n=this.getOrientedFlatCoordinates().slice(),vp(n,0,this.ends_,this.stride,e)):n=this.flatCoordinates,Hl(n,0,this.ends_,this.stride)},t.prototype.getEnds=function(){return this.ends_},t.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var e=Sr(this.getExtent());this.flatInteriorPoint_=Pf(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},t.prototype.getInteriorPoint=function(){return new Wi(this.getFlatInteriorPoint(),De.XYM)},t.prototype.getLinearRingCount=function(){return this.ends_.length},t.prototype.getLinearRing=function(e){return e<0||this.ends_.length<=e?null:new gp(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)},t.prototype.getLinearRings=function(){for(var e=this.layout,n=this.flatCoordinates,r=this.ends_,o=[],a=0,s=0,l=r.length;s<l;++s){var u=r[s],c=new gp(n.slice(a,u),e);o.push(c),a=u}return o},t.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var e=this.flatCoordinates;Tm(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=vp(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},t.prototype.getSimplifiedGeometryInternal=function(e){var n=[],r=[];return n.length=Em(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),n,0,r),new t(n,De.XY,r)},t.prototype.getType=function(){return b.POLYGON},t.prototype.intersectsExtent=function(e){return Mm(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)},t.prototype.setCoordinates=function(e,n){this.setLayout(n,e,2),this.flatCoordinates||(this.flatCoordinates=[]);var r=Ef(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()},t}(Bo);const zi=Mf;function Ig(i){var t=i[0],e=i[1],n=i[2],r=i[3],o=[t,e,t,r,n,r,n,e,t,e];return new Mf(o,De.XY,[o.length])}function xE(i,t,e){for(var n=t||32,r=i.getStride(),o=i.getLayout(),a=i.getCenter(),s=r*(n+1),l=new Array(s),u=0;u<s;u+=r){l[u]=0,l[u+1]=0;for(var c=2;c<r;c++)l[u+c]=a[c]}var h=[l.length],d=new Mf(l,o,h);return ME(d,a,i.getRadius(),e),d}function ME(i,t,e,n){for(var r=i.getFlatCoordinates(),o=i.getStride(),a=r.length/o-1,s=n||0,l=0;l<=a;++l){var u=l*o,c=s+To(l,a)*2*Math.PI/a;r[u]=t[0]+e*Math.cos(c),r[u+1]=t[1]+e*Math.sin(c)}i.changed()}var TE=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),ud=0,bE=function(i){TE(t,i);function t(e){var n=i.call(this)||this;n.on,n.once,n.un;var r=dt({},e);return n.hints_=[0,0],n.animations_=[],n.updateAnimationKey_,n.projection_=ff(r.projection,"EPSG:3857"),n.viewportSize_=[100,100],n.targetCenter_=null,n.targetResolution_,n.targetRotation_,n.nextCenter_=null,n.nextResolution_,n.nextRotation_,n.cancelAnchor_=void 0,r.center&&(r.center=Xt(r.center,n.projection_)),r.extent&&(r.extent=Vr(r.extent,n.projection_)),n.applyOptions_(r),n}return t.prototype.applyOptions_=function(e){var n={},r=OE(e);this.maxResolution_=r.maxResolution,this.minResolution_=r.minResolution,this.zoomFactor_=r.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=r.minZoom;var o=RE(e),a=r.constraint,s=LE(e);this.constraints_={center:o,resolution:a,rotation:s},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom),this.setProperties(n),this.options_=e},Object.defineProperty(t.prototype,"padding",{get:function(){return this.padding_},set:function(e){var n=this.padding_;this.padding_=e;var r=this.getCenter();if(r){var o=e||[0,0,0,0];n=n||[0,0,0,0];var a=this.getResolution(),s=a/2*(o[3]-n[3]+n[1]-o[1]),l=a/2*(o[0]-n[0]+n[2]-o[2]);this.setCenterInternal([r[0]+s,r[1]-l])}},enumerable:!1,configurable:!0}),t.prototype.getUpdatedOptions_=function(e){var n=dt({},this.options_);return n.resolution!==void 0?n.resolution=this.getResolution():n.zoom=this.getZoom(),n.center=this.getCenterInternal(),n.rotation=this.getRotation(),dt({},n,e)},t.prototype.animate=function(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var n=new Array(arguments.length),r=0;r<n.length;++r){var o=arguments[r];o.center&&(o=dt({},o),o.center=Xt(o.center,this.getProjection())),o.anchor&&(o=dt({},o),o.anchor=Xt(o.anchor,this.getProjection())),n[r]=o}this.animateInternal.apply(this,n)},t.prototype.animateInternal=function(e){var n=arguments.length,r;n>1&&typeof arguments[n-1]=="function"&&(r=arguments[n-1],--n);for(var o=0;o<n&&!this.isDef();++o){var a=arguments[o];a.center&&this.setCenterInternal(a.center),a.zoom!==void 0?this.setZoom(a.zoom):a.resolution&&this.setResolution(a.resolution),a.rotation!==void 0&&this.setRotation(a.rotation)}if(o===n){r&&Ou(r,!0);return}for(var s=Date.now(),l=this.targetCenter_.slice(),u=this.targetResolution_,c=this.targetRotation_,h=[];o<n;++o){var d=arguments[o],p={start:s,complete:!1,anchor:d.anchor,duration:d.duration!==void 0?d.duration:1e3,easing:d.easing||$I,callback:r};if(d.center&&(p.sourceCenter=l,p.targetCenter=d.center.slice(),l=p.targetCenter),d.zoom!==void 0?(p.sourceResolution=u,p.targetResolution=this.getResolutionForZoom(d.zoom),u=p.targetResolution):d.resolution&&(p.sourceResolution=u,p.targetResolution=d.resolution,u=p.targetResolution),d.rotation!==void 0){p.sourceRotation=c;var f=To(d.rotation-c+Math.PI,2*Math.PI)-Math.PI;p.targetRotation=c+f,c=p.targetRotation}GE(p)?p.complete=!0:s+=p.duration,h.push(p)}this.animations_.push(h),this.setHint(jt.ANIMATING,1),this.updateAnimations_()},t.prototype.getAnimating=function(){return this.hints_[jt.ANIMATING]>0},t.prototype.getInteracting=function(){return this.hints_[jt.INTERACTING]>0},t.prototype.cancelAnimations=function(){this.setHint(jt.ANIMATING,-this.hints_[jt.ANIMATING]);for(var e,n=0,r=this.animations_.length;n<r;++n){var o=this.animations_[n];if(o[0].callback&&Ou(o[0].callback,!1),!e)for(var a=0,s=o.length;a<s;++a){var l=o[a];if(!l.complete){e=l.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN},t.prototype.updateAnimations_=function(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!!this.getAnimating()){for(var e=Date.now(),n=!1,r=this.animations_.length-1;r>=0;--r){for(var o=this.animations_[r],a=!0,s=0,l=o.length;s<l;++s){var u=o[s];if(!u.complete){var c=e-u.start,h=u.duration>0?c/u.duration:1;h>=1?(u.complete=!0,h=1):a=!1;var d=u.easing(h);if(u.sourceCenter){var p=u.sourceCenter[0],f=u.sourceCenter[1],g=u.targetCenter[0],v=u.targetCenter[1];this.nextCenter_=u.targetCenter;var y=p+d*(g-p),m=f+d*(v-f);this.targetCenter_=[y,m]}if(u.sourceResolution&&u.targetResolution){var A=d===1?u.targetResolution:u.sourceResolution+d*(u.targetResolution-u.sourceResolution);if(u.anchor){var _=this.getViewportSize_(this.getRotation()),C=this.constraints_.resolution(A,0,_,!0);this.targetCenter_=this.calculateCenterZoom(C,u.anchor)}this.nextResolution_=u.targetResolution,this.targetResolution_=A,this.applyTargetState_(!0)}if(u.sourceRotation!==void 0&&u.targetRotation!==void 0){var I=d===1?To(u.targetRotation+Math.PI,2*Math.PI)-Math.PI:u.sourceRotation+d*(u.targetRotation-u.sourceRotation);if(u.anchor){var E=this.constraints_.rotation(I,!0);this.targetCenter_=this.calculateCenterRotate(E,u.anchor)}this.nextRotation_=u.targetRotation,this.targetRotation_=I}if(this.applyTargetState_(!0),n=!0,!u.complete)break}}if(a){this.animations_[r]=null,this.setHint(jt.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;var w=o[0].callback;w&&Ou(w,!0)}}this.animations_=this.animations_.filter(Boolean),n&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}},t.prototype.calculateCenterRotate=function(e,n){var r,o=this.getCenterInternal();return o!==void 0&&(r=[o[0]-n[0],o[1]-n[1]],sf(r,e-this.getRotation()),VC(r,n)),r},t.prototype.calculateCenterZoom=function(e,n){var r,o=this.getCenterInternal(),a=this.getResolution();if(o!==void 0&&a!==void 0){var s=n[0]-e*(n[0]-o[0])/a,l=n[1]-e*(n[1]-o[1])/a;r=[s,l]}return r},t.prototype.getViewportSize_=function(e){var n=this.viewportSize_;if(e){var r=n[0],o=n[1];return[Math.abs(r*Math.cos(e))+Math.abs(o*Math.sin(e)),Math.abs(r*Math.sin(e))+Math.abs(o*Math.cos(e))]}else return n},t.prototype.setViewportSize=function(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)},t.prototype.getCenter=function(){var e=this.getCenterInternal();return e&&Yl(e,this.getProjection())},t.prototype.getCenterInternal=function(){return this.get(lr.CENTER)},t.prototype.getConstraints=function(){return this.constraints_},t.prototype.getConstrainResolution=function(){return this.options_.constrainResolution},t.prototype.getHints=function(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()},t.prototype.calculateExtent=function(e){var n=this.calculateExtentInternal(e);return wh(n,this.getProjection())},t.prototype.calculateExtentInternal=function(e){var n=e||this.getViewportSizeMinusPadding_(),r=this.getCenterInternal();be(r,1);var o=this.getResolution();be(o!==void 0,2);var a=this.getRotation();return be(a!==void 0,3),us(r,o,a,n)},t.prototype.getMaxResolution=function(){return this.maxResolution_},t.prototype.getMinResolution=function(){return this.minResolution_},t.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},t.prototype.setMaxZoom=function(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))},t.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},t.prototype.setMinZoom=function(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))},t.prototype.setConstrainResolution=function(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))},t.prototype.getProjection=function(){return this.projection_},t.prototype.getResolution=function(){return this.get(lr.RESOLUTION)},t.prototype.getResolutions=function(){return this.resolutions_},t.prototype.getResolutionForExtent=function(e,n){return this.getResolutionForExtentInternal(Vr(e,this.getProjection()),n)},t.prototype.getResolutionForExtentInternal=function(e,n){var r=n||this.getViewportSizeMinusPadding_(),o=Ct(e)/r[0],a=Ti(e)/r[1];return Math.max(o,a)},t.prototype.getResolutionForValueFunction=function(e){var n=e||2,r=this.getConstrainedResolution(this.maxResolution_),o=this.minResolution_,a=Math.log(r/o)/Math.log(n);return function(s){var l=r/Math.pow(n,s*a);return l}},t.prototype.getRotation=function(){return this.get(lr.ROTATION)},t.prototype.getValueForResolutionFunction=function(e){var n=Math.log(e||2),r=this.getConstrainedResolution(this.maxResolution_),o=this.minResolution_,a=Math.log(r/o)/n;return function(s){var l=Math.log(r/s)/n/a;return l}},t.prototype.getViewportSizeMinusPadding_=function(e){var n=this.getViewportSize_(e),r=this.padding_;return r&&(n=[n[0]-r[1]-r[3],n[1]-r[0]-r[2]]),n},t.prototype.getState=function(){var e=this.getProjection(),n=this.getResolution(),r=this.getRotation(),o=this.getCenterInternal(),a=this.padding_;if(a){var s=this.getViewportSizeMinusPadding_();o=cd(o,this.getViewportSize_(),[s[0]/2+a[3],s[1]/2+a[0]],n,r)}return{center:o.slice(0),projection:e!==void 0?e:null,resolution:n,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:r,zoom:this.getZoom()}},t.prototype.getZoom=function(){var e,n=this.getResolution();return n!==void 0&&(e=this.getZoomForResolution(n)),e},t.prototype.getZoomForResolution=function(e){var n=this.minZoom_||0,r,o;if(this.resolutions_){var a=fh(this.resolutions_,e,1);n=a,r=this.resolutions_[a],a==this.resolutions_.length-1?o=2:o=r/this.resolutions_[a+1]}else r=this.maxResolution_,o=this.zoomFactor_;return n+Math.log(r/e)/Math.log(o)},t.prototype.getResolutionForZoom=function(e){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var n=ri(Math.floor(e),0,this.resolutions_.length-2),r=this.resolutions_[n]/this.resolutions_[n+1];return this.resolutions_[n]/Math.pow(r,ri(e-n,0,1))}else return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)},t.prototype.fit=function(e,n){var r;if(be(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function",24),Array.isArray(e)){be(!rf(e),25);var o=Vr(e,this.getProjection());r=Ig(o)}else if(e.getType()===b.CIRCLE){var o=Vr(e.getExtent(),this.getProjection());r=Ig(o),r.rotate(this.getRotation(),Sr(o))}else{var a=Wl();a?r=e.clone().transform(a,this.getProjection()):r=e}this.fitInternal(r,n)},t.prototype.rotatedExtentForGeometry=function(e){for(var n=this.getRotation(),r=Math.cos(n),o=Math.sin(-n),a=e.getFlatCoordinates(),s=e.getStride(),l=1/0,u=1/0,c=-1/0,h=-1/0,d=0,p=a.length;d<p;d+=s){var f=a[d]*r-a[d+1]*o,g=a[d]*o+a[d+1]*r;l=Math.min(l,f),u=Math.min(u,g),c=Math.max(c,f),h=Math.max(h,g)}return[l,u,c,h]},t.prototype.fitInternal=function(e,n){var r=n||{},o=r.size;o||(o=this.getViewportSizeMinusPadding_());var a=r.padding!==void 0?r.padding:[0,0,0,0],s=r.nearest!==void 0?r.nearest:!1,l;r.minResolution!==void 0?l=r.minResolution:r.maxZoom!==void 0?l=this.getResolutionForZoom(r.maxZoom):l=0;var u=this.rotatedExtentForGeometry(e),c=this.getResolutionForExtentInternal(u,[o[0]-a[1]-a[3],o[1]-a[0]-a[2]]);c=isNaN(c)?l:Math.max(c,l),c=this.getConstrainedResolution(c,s?0:1);var h=this.getRotation(),d=Math.sin(h),p=Math.cos(h),f=Sr(u);f[0]+=(a[1]-a[3])/2*c,f[1]+=(a[0]-a[2])/2*c;var g=f[0]*p-f[1]*d,v=f[1]*p+f[0]*d,y=this.getConstrainedCenter([g,v],c),m=r.callback?r.callback:ma;r.duration!==void 0?this.animateInternal({resolution:c,center:y,duration:r.duration,easing:r.easing},m):(this.targetResolution_=c,this.targetCenter_=y,this.applyTargetState_(!1,!0),Ou(m,!0))},t.prototype.centerOn=function(e,n,r){this.centerOnInternal(Xt(e,this.getProjection()),n,r)},t.prototype.centerOnInternal=function(e,n,r){this.setCenterInternal(cd(e,n,r,this.getResolution(),this.getRotation()))},t.prototype.calculateCenterShift=function(e,n,r,o){var a,s=this.padding_;if(s&&e){var l=this.getViewportSizeMinusPadding_(-r),u=cd(e,o,[l[0]/2+s[3],l[1]/2+s[0]],n,r);a=[e[0]-u[0],e[1]-u[1]]}return a},t.prototype.isDef=function(){return!!this.getCenterInternal()&&this.getResolution()!==void 0},t.prototype.adjustCenter=function(e){var n=Yl(this.targetCenter_,this.getProjection());this.setCenter([n[0]+e[0],n[1]+e[1]])},t.prototype.adjustCenterInternal=function(e){var n=this.targetCenter_;this.setCenterInternal([n[0]+e[0],n[1]+e[1]])},t.prototype.adjustResolution=function(e,n){var r=n&&Xt(n,this.getProjection());this.adjustResolutionInternal(e,r)},t.prototype.adjustResolutionInternal=function(e,n){var r=this.getAnimating()||this.getInteracting(),o=this.getViewportSize_(this.getRotation()),a=this.constraints_.resolution(this.targetResolution_*e,0,o,r);n&&(this.targetCenter_=this.calculateCenterZoom(a,n)),this.targetResolution_*=e,this.applyTargetState_()},t.prototype.adjustZoom=function(e,n){this.adjustResolution(Math.pow(this.zoomFactor_,-e),n)},t.prototype.adjustRotation=function(e,n){n&&(n=Xt(n,this.getProjection())),this.adjustRotationInternal(e,n)},t.prototype.adjustRotationInternal=function(e,n){var r=this.getAnimating()||this.getInteracting(),o=this.constraints_.rotation(this.targetRotation_+e,r);n&&(this.targetCenter_=this.calculateCenterRotate(o,n)),this.targetRotation_+=e,this.applyTargetState_()},t.prototype.setCenter=function(e){this.setCenterInternal(Xt(e,this.getProjection()))},t.prototype.setCenterInternal=function(e){this.targetCenter_=e,this.applyTargetState_()},t.prototype.setHint=function(e,n){return this.hints_[e]+=n,this.changed(),this.hints_[e]},t.prototype.setResolution=function(e){this.targetResolution_=e,this.applyTargetState_()},t.prototype.setRotation=function(e){this.targetRotation_=e,this.applyTargetState_()},t.prototype.setZoom=function(e){this.setResolution(this.getResolutionForZoom(e))},t.prototype.applyTargetState_=function(e,n){var r=this.getAnimating()||this.getInteracting()||n,o=this.constraints_.rotation(this.targetRotation_,r),a=this.getViewportSize_(o),s=this.constraints_.resolution(this.targetResolution_,0,a,r),l=this.constraints_.center(this.targetCenter_,s,a,r,this.calculateCenterShift(this.targetCenter_,s,o,a));this.get(lr.ROTATION)!==o&&this.set(lr.ROTATION,o),this.get(lr.RESOLUTION)!==s&&this.set(lr.RESOLUTION,s),(!this.get(lr.CENTER)||!dr(this.get(lr.CENTER),l))&&this.set(lr.CENTER,l),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0},t.prototype.resolveConstraints=function(e,n,r){var o=e!==void 0?e:200,a=n||0,s=this.constraints_.rotation(this.targetRotation_),l=this.getViewportSize_(s),u=this.constraints_.resolution(this.targetResolution_,a,l),c=this.constraints_.center(this.targetCenter_,u,l,!1,this.calculateCenterShift(this.targetCenter_,u,s,l));if(o===0&&!this.cancelAnchor_){this.targetResolution_=u,this.targetRotation_=s,this.targetCenter_=c,this.applyTargetState_();return}var h=r||(o===0?this.cancelAnchor_:void 0);this.cancelAnchor_=void 0,(this.getResolution()!==u||this.getRotation()!==s||!this.getCenterInternal()||!dr(this.getCenterInternal(),c))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:c,resolution:u,duration:o,easing:qs,anchor:h}))},t.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(jt.INTERACTING,1)},t.prototype.endInteraction=function(e,n,r){var o=r&&Xt(r,this.getProjection());this.endInteractionInternal(e,n,o)},t.prototype.endInteractionInternal=function(e,n,r){this.setHint(jt.INTERACTING,-1),this.resolveConstraints(e,n,r)},t.prototype.getConstrainedCenter=function(e,n){var r=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,n||this.getResolution(),r)},t.prototype.getConstrainedZoom=function(e,n){var r=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(r,n))},t.prototype.getConstrainedResolution=function(e,n){var r=n||0,o=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,r,o)},t}(ir);function Ou(i,t){setTimeout(function(){i(t)},0)}function RE(i){if(i.extent!==void 0){var t=i.smoothExtentConstraint!==void 0?i.smoothExtentConstraint:!0;return gg(i.extent,i.constrainOnlyCenter,t)}var e=ff(i.projection,"EPSG:3857");if(i.multiWorld!==!0&&e.isGlobal()){var n=e.getExtent().slice();return n[0]=-1/0,n[2]=1/0,gg(n,!1,!1)}return XI}function OE(i){var t,e,n,r=28,o=2,a=i.minZoom!==void 0?i.minZoom:ud,s=i.maxZoom!==void 0?i.maxZoom:r,l=i.zoomFactor!==void 0?i.zoomFactor:o,u=i.multiWorld!==void 0?i.multiWorld:!1,c=i.smoothResolutionConstraint!==void 0?i.smoothResolutionConstraint:!0,h=i.showFullExtent!==void 0?i.showFullExtent:!1,d=ff(i.projection,"EPSG:3857"),p=d.getExtent(),f=i.constrainOnlyCenter,g=i.extent;if(!u&&!g&&d.isGlobal()&&(f=!1,g=p),i.resolutions!==void 0){var v=i.resolutions;e=v[a],n=v[s]!==void 0?v[s]:v[v.length-1],i.constrainResolution?t=ZI(v,c,!f&&g,h):t=vg(e,n,c,!f&&g,h)}else{var y=p?Math.max(Ct(p),Ti(p)):360*Pr[_r.DEGREES]/d.getMetersPerUnit(),m=y/hf/Math.pow(o,ud),A=m/Math.pow(o,r-ud);e=i.maxResolution,e!==void 0?a=0:e=m/Math.pow(l,a),n=i.minResolution,n===void 0&&(i.maxZoom!==void 0?i.maxResolution!==void 0?n=e/Math.pow(l,s):n=m/Math.pow(l,s):n=A),s=a+Math.floor(Math.log(e/n)/Math.log(l)),n=e/Math.pow(l,s-a),i.constrainResolution?t=KI(l,e,n,c,!f&&g,h):t=vg(e,n,c,!f&&g,h)}return{constraint:t,maxResolution:e,minResolution:n,minZoom:a,zoomFactor:l}}function LE(i){var t=i.enableRotation!==void 0?i.enableRotation:!0;if(t){var e=i.constrainRotation;return e===void 0||e===!0?QI():e===!1?mg:typeof e=="number"?JI(e):mg}else return mf}function GE(i){return!(i.sourceCenter&&i.targetCenter&&!dr(i.sourceCenter,i.targetCenter)||i.sourceResolution!==i.targetResolution||i.sourceRotation!==i.targetRotation)}function cd(i,t,e,n,r){var o=Math.cos(-r),a=Math.sin(-r),s=i[0]*o-i[1]*a,l=i[1]*o+i[0]*a;s+=(t[0]/2-e[0])*n,l+=(e[1]-t[1]/2)*n,a=-a;var u=s*o-l*a,c=l*o+s*a;return[u,c]}const po=bE;function Eg(i,t,e){return e===void 0&&(e=[0,0]),e[0]=i[0]+2*t,e[1]=i[1]+2*t,e}function wg(i){return i[0]>0&&i[1]>0}function bm(i,t,e){return e===void 0&&(e=[0,0]),e[0]=i[0]*t+.5|0,e[1]=i[1]*t+.5|0,e}function Bi(i,t){return Array.isArray(i)?i:(t===void 0?t=[i,i]:(t[0]=i,t[1]=i),t)}var kE=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),DE=function(i){kE(t,i);function t(e){var n=i.call(this)||this;n.on,n.once,n.un;var r=NE(e);n.boundHandleBrowserEvent_=n.handleBrowserEvent.bind(n),n.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,n.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:Xv,n.postRenderTimeoutHandle_,n.animationDelayKey_,n.animationDelay_=(function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}).bind(n),n.coordinateToPixelTransform_=Dn(),n.pixelToCoordinateTransform_=Dn(),n.frameIndex_=0,n.frameState_=null,n.previousExtent_=null,n.viewPropertyListenerKey_=null,n.viewChangeListenerKey_=null,n.layerGroupPropertyListenerKeys_=null,n.viewport_=document.createElement("div"),n.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),n.viewport_.style.position="relative",n.viewport_.style.overflow="hidden",n.viewport_.style.width="100%",n.viewport_.style.height="100%",n.overlayContainer_=document.createElement("div"),n.overlayContainer_.style.position="absolute",n.overlayContainer_.style.zIndex="0",n.overlayContainer_.style.width="100%",n.overlayContainer_.style.height="100%",n.overlayContainer_.style.pointerEvents="none",n.overlayContainer_.className="ol-overlaycontainer",n.viewport_.appendChild(n.overlayContainer_),n.overlayContainerStopEvent_=document.createElement("div"),n.overlayContainerStopEvent_.style.position="absolute",n.overlayContainerStopEvent_.style.zIndex="0",n.overlayContainerStopEvent_.style.width="100%",n.overlayContainerStopEvent_.style.height="100%",n.overlayContainerStopEvent_.style.pointerEvents="none",n.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",n.viewport_.appendChild(n.overlayContainerStopEvent_),n.mapBrowserEventHandler_=null,n.moveTolerance_=e.moveTolerance,n.keyboardEventTarget_=r.keyboardEventTarget,n.keyHandlerKeys_=null,n.controls=r.controls||new oi,n.interactions=r.interactions||new oi,n.overlays_=r.overlays,n.overlayIdIndex_={},n.renderer_=null,n.handleResize_,n.postRenderFunctions_=[],n.tileQueue_=new xI(n.getTilePriority.bind(n),n.handleTileChange_.bind(n)),n.addChangeListener(Fi.LAYERGROUP,n.handleLayerGroupChanged_),n.addChangeListener(Fi.VIEW,n.handleViewChanged_),n.addChangeListener(Fi.SIZE,n.handleSizeChanged_),n.addChangeListener(Fi.TARGET,n.handleTargetChanged_),n.setProperties(r.values);var o=n;return e.view&&!(e.view instanceof po)&&e.view.then(function(a){o.setView(new po(a))}),n.controls.addEventListener(ti.ADD,(function(a){a.element.setMap(this)}).bind(n)),n.controls.addEventListener(ti.REMOVE,(function(a){a.element.setMap(null)}).bind(n)),n.interactions.addEventListener(ti.ADD,(function(a){a.element.setMap(this)}).bind(n)),n.interactions.addEventListener(ti.REMOVE,(function(a){a.element.setMap(null)}).bind(n)),n.overlays_.addEventListener(ti.ADD,(function(a){this.addOverlayInternal_(a.element)}).bind(n)),n.overlays_.addEventListener(ti.REMOVE,(function(a){var s=a.element,l=s.getId();l!==void 0&&delete this.overlayIdIndex_[l.toString()],a.element.setMap(null)}).bind(n)),n.controls.forEach((function(a){a.setMap(this)}).bind(n)),n.interactions.forEach((function(a){a.setMap(this)}).bind(n)),n.overlays_.forEach(n.addOverlayInternal_.bind(n)),n}return t.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},t.prototype.addControl=function(e){this.getControls().push(e)},t.prototype.addInteraction=function(e){this.getInteractions().push(e)},t.prototype.addLayer=function(e){var n=this.getLayerGroup().getLayers();n.push(e)},t.prototype.addOverlay=function(e){this.getOverlays().push(e)},t.prototype.addOverlayInternal_=function(e){var n=e.getId();n!==void 0&&(this.overlayIdIndex_[n.toString()]=e),e.setMap(this)},t.prototype.disposeInternal=function(){this.setTarget(null),i.prototype.disposeInternal.call(this)},t.prototype.forEachFeatureAtPixel=function(e,n,r){if(this.frameState_){var o=this.getCoordinateFromPixelInternal(e);r=r!==void 0?r:{};var a=r.hitTolerance!==void 0?r.hitTolerance:0,s=r.layerFilter!==void 0?r.layerFilter:Wr,l=r.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(o,this.frameState_,a,l,n,null,s,null)}},t.prototype.getFeaturesAtPixel=function(e,n){var r=[];return this.forEachFeatureAtPixel(e,function(o){r.push(o)},n),r},t.prototype.forEachLayerAtPixel=function(e,n,r){if(this.frameState_){var o=r||{},a=o.hitTolerance!==void 0?o.hitTolerance:0,s=o.layerFilter||Wr;return this.renderer_.forEachLayerAtPixel(e,this.frameState_,a,n,s)}},t.prototype.hasFeatureAtPixel=function(e,n){if(!this.frameState_)return!1;var r=this.getCoordinateFromPixelInternal(e);n=n!==void 0?n:{};var o=n.layerFilter!==void 0?n.layerFilter:Wr,a=n.hitTolerance!==void 0?n.hitTolerance:0,s=n.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(r,this.frameState_,a,s,o,null)},t.prototype.getEventCoordinate=function(e){return this.getCoordinateFromPixel(this.getEventPixel(e))},t.prototype.getEventCoordinateInternal=function(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))},t.prototype.getEventPixel=function(e){var n=this.viewport_.getBoundingClientRect(),r="changedTouches"in e?e.changedTouches[0]:e;return[r.clientX-n.left,r.clientY-n.top]},t.prototype.getTarget=function(){return this.get(Fi.TARGET)},t.prototype.getTargetElement=function(){var e=this.getTarget();return e!==void 0?typeof e=="string"?document.getElementById(e):e:null},t.prototype.getCoordinateFromPixel=function(e){return Yl(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())},t.prototype.getCoordinateFromPixelInternal=function(e){var n=this.frameState_;return n?ei(n.pixelToCoordinateTransform,e.slice()):null},t.prototype.getControls=function(){return this.controls},t.prototype.getOverlays=function(){return this.overlays_},t.prototype.getOverlayById=function(e){var n=this.overlayIdIndex_[e.toString()];return n!==void 0?n:null},t.prototype.getInteractions=function(){return this.interactions},t.prototype.getLayerGroup=function(){return this.get(Fi.LAYERGROUP)},t.prototype.setLayers=function(e){var n=this.getLayerGroup();if(e instanceof oi){n.setLayers(e);return}var r=n.getLayers();r.clear(),r.extend(e)},t.prototype.getLayers=function(){var e=this.getLayerGroup().getLayers();return e},t.prototype.getLoading=function(){for(var e=this.getLayerGroup().getLayerStatesArray(),n=0,r=e.length;n<r;++n){var o=e[n].layer,a=o.getSource();if(a&&a.loading)return!0}return!1},t.prototype.getPixelFromCoordinate=function(e){var n=Xt(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(n)},t.prototype.getPixelFromCoordinateInternal=function(e){var n=this.frameState_;return n?ei(n.coordinateToPixelTransform,e.slice(0,2)):null},t.prototype.getRenderer=function(){return this.renderer_},t.prototype.getSize=function(){return this.get(Fi.SIZE)},t.prototype.getView=function(){return this.get(Fi.VIEW)},t.prototype.getViewport=function(){return this.viewport_},t.prototype.getOverlayContainer=function(){return this.overlayContainer_},t.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},t.prototype.getOwnerDocument=function(){var e=this.getTargetElement();return e?e.ownerDocument:document},t.prototype.getTilePriority=function(e,n,r,o){return MI(this.frameState_,e,n,r,o)},t.prototype.handleBrowserEvent=function(e,n){var r=n||e.type,o=new Fr(r,this,e);this.handleMapBrowserEvent(o)},t.prototype.handleMapBrowserEvent=function(e){if(this.frameState_){var n=e.originalEvent,r=n.type;if(r===hp.POINTERDOWN||r===Ie.WHEEL||r===Ie.KEYDOWN){var o=this.getOwnerDocument(),a=this.viewport_.getRootNode?this.viewport_.getRootNode():o,s=n.target;if(this.overlayContainerStopEvent_.contains(s)||!(a===o?o.documentElement:a).contains(s))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1)for(var l=this.getInteractions().getArray().slice(),u=l.length-1;u>=0;u--){var c=l[u];if(!(c.getMap()!==this||!c.getActive()||!this.getTargetElement())){var h=c.handleEvent(e);if(!h||e.propagationStopped)break}}}},t.prototype.handlePostRender=function(){var e=this.frameState_,n=this.tileQueue_;if(!n.isEmpty()){var r=this.maxTilesLoading_,o=r;if(e){var a=e.viewHints;if(a[jt.ANIMATING]||a[jt.INTERACTING]){var s=Date.now()-e.time>8;r=s?0:8,o=s?0:2}}n.getTilesLoading()<r&&(n.reprioritize(),n.loadMoreTiles(r,o))}e&&this.hasListener(Ca.RENDERCOMPLETE)&&!e.animate&&!this.tileQueue_.getTilesLoading()&&!this.getLoading()&&this.renderer_.dispatchRenderEvent(Ca.RENDERCOMPLETE,e);for(var l=this.postRenderFunctions_,u=0,c=l.length;u<c;++u)l[u](this,e);l.length=0},t.prototype.handleSizeChanged_=function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()},t.prototype.handleTargetChanged_=function(){var e;if(this.getTarget()&&(e=this.getTargetElement()),this.mapBrowserEventHandler_){for(var n=0,r=this.keyHandlerKeys_.length;n<r;++n)Pt(this.keyHandlerKeys_[n]);this.keyHandlerKeys_=null,this.viewport_.removeEventListener(Ie.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(Ie.WHEEL,this.boundHandleBrowserEvent_),this.handleResize_!==void 0&&(removeEventListener(Ie.RESIZE,this.handleResize_,!1),this.handleResize_=void 0),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,Ac(this.viewport_)}if(!e)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{e.appendChild(this.viewport_),this.renderer_||(this.renderer_=this.createRenderer()),this.mapBrowserEventHandler_=new II(this,this.moveTolerance_);for(var o in Je)this.mapBrowserEventHandler_.addEventListener(Je[o],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(Ie.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(Ie.WHEEL,this.boundHandleBrowserEvent_,Zv?{passive:!1}:!1);var a=this.keyboardEventTarget_?this.keyboardEventTarget_:e;this.keyHandlerKeys_=[rt(a,Ie.KEYDOWN,this.handleBrowserEvent,this),rt(a,Ie.KEYPRESS,this.handleBrowserEvent,this)],this.handleResize_||(this.handleResize_=this.updateSize.bind(this),window.addEventListener(Ie.RESIZE,this.handleResize_,!1))}this.updateSize()},t.prototype.handleTileChange_=function(){this.render()},t.prototype.handleViewPropertyChanged_=function(){this.render()},t.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(Pt(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Pt(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var e=this.getView();e&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=rt(e,Aa.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=rt(e,Ie.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()},t.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Pt),this.layerGroupPropertyListenerKeys_=null);var e=this.getLayerGroup();e&&(this.layerGroupPropertyListenerKeys_=[rt(e,Aa.PROPERTYCHANGE,this.render,this),rt(e,Ie.CHANGE,this.render,this)]),this.render()},t.prototype.isRendered=function(){return!!this.frameState_},t.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},t.prototype.redrawText=function(){for(var e=this.getLayerGroup().getLayerStatesArray(),n=0,r=e.length;n<r;++n){var o=e[n].layer;o.hasRenderer()&&o.getRenderer().handleFontsChanged()}},t.prototype.render=function(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},t.prototype.removeControl=function(e){return this.getControls().remove(e)},t.prototype.removeInteraction=function(e){return this.getInteractions().remove(e)},t.prototype.removeLayer=function(e){var n=this.getLayerGroup().getLayers();return n.remove(e)},t.prototype.removeOverlay=function(e){return this.getOverlays().remove(e)},t.prototype.renderFrame_=function(e){var n=this,r=this.getSize(),o=this.getView(),a=this.frameState_,s=null;if(r!==void 0&&wg(r)&&o&&o.isDef()){var l=o.getHints(this.frameState_?this.frameState_.viewHints:void 0),u=o.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:us(u.center,u.resolution,u.rotation,r),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:r,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:u,viewHints:l,wantedTiles:{}},u.nextCenter&&u.nextResolution){var c=isNaN(u.nextRotation)?u.rotation:u.nextRotation;s.nextExtent=us(u.nextCenter,u.nextResolution,c,r)}}if(this.frameState_=s,this.renderer_.renderFrame(s),s){if(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),a){var h=!this.previousExtent_||!rf(this.previousExtent_)&&!ya(s.extent,this.previousExtent_);h&&(this.dispatchEvent(new nc(wl.MOVESTART,this,a)),this.previousExtent_=uu(this.previousExtent_))}var d=this.previousExtent_&&!s.viewHints[jt.ANIMATING]&&!s.viewHints[jt.INTERACTING]&&!ya(s.extent,this.previousExtent_);d&&(this.dispatchEvent(new nc(wl.MOVEEND,this,s)),$v(s.extent,this.previousExtent_))}this.dispatchEvent(new nc(wl.POSTRENDER,this,s)),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(function(){n.postRenderTimeoutHandle_=void 0,n.handlePostRender()},0))},t.prototype.setLayerGroup=function(e){this.set(Fi.LAYERGROUP,e)},t.prototype.setSize=function(e){this.set(Fi.SIZE,e)},t.prototype.setTarget=function(e){this.set(Fi.TARGET,e)},t.prototype.setView=function(e){if(!e||e instanceof po){this.set(Fi.VIEW,e);return}this.set(Fi.VIEW,new po);var n=this;e.then(function(r){n.setView(new po(r))})},t.prototype.updateSize=function(){var e=this.getTargetElement(),n=void 0;if(e){var r=getComputedStyle(e),o=e.offsetWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight)-parseFloat(r.borderRightWidth),a=e.offsetHeight-parseFloat(r.borderTopWidth)-parseFloat(r.paddingTop)-parseFloat(r.paddingBottom)-parseFloat(r.borderBottomWidth);!isNaN(o)&&!isNaN(a)&&(n=[o,a],!wg(n)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0."))}this.setSize(n),this.updateViewportSize_()},t.prototype.updateViewportSize_=function(){var e=this.getView();if(e){var n=void 0,r=getComputedStyle(this.viewport_);r.width&&r.height&&(n=[parseInt(r.width,10),parseInt(r.height,10)]),e.setViewportSize(n)}},t}(ir);function NE(i){var t=null;i.keyboardEventTarget!==void 0&&(t=typeof i.keyboardEventTarget=="string"?document.getElementById(i.keyboardEventTarget):i.keyboardEventTarget);var e={},n=i.layers&&typeof i.layers.getLayers=="function"?i.layers:new gI({layers:i.layers});e[Fi.LAYERGROUP]=n,e[Fi.TARGET]=i.target,e[Fi.VIEW]=i.view instanceof po?i.view:new po;var r;i.controls!==void 0&&(Array.isArray(i.controls)?r=new oi(i.controls.slice()):(be(typeof i.controls.getArray=="function",47),r=i.controls));var o;i.interactions!==void 0&&(Array.isArray(i.interactions)?o=new oi(i.interactions.slice()):(be(typeof i.interactions.getArray=="function",48),o=i.interactions));var a;return i.overlays!==void 0?Array.isArray(i.overlays)?a=new oi(i.overlays.slice()):(be(typeof i.overlays.getArray=="function",49),a=i.overlays):a=new oi,{controls:r,interactions:o,keyboardEventTarget:t,overlays:a,values:e}}const FE=DE;var UE=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),BE=function(i){UE(t,i);function t(e){var n=i.call(this)||this,r=e.element;return r&&!e.target&&!r.style.pointerEvents&&(r.style.pointerEvents="auto"),n.element=r||null,n.target_=null,n.map_=null,n.listenerKeys=[],e.render&&(n.render=e.render),e.target&&n.setTarget(e.target),n}return t.prototype.disposeInternal=function(){Ac(this.element),i.prototype.disposeInternal.call(this)},t.prototype.getMap=function(){return this.map_},t.prototype.setMap=function(e){this.map_&&Ac(this.element);for(var n=0,r=this.listenerKeys.length;n<r;++n)Pt(this.listenerKeys[n]);if(this.listenerKeys.length=0,this.map_=e,this.map_){var o=this.target_?this.target_:e.getOverlayContainerStopEvent();o.appendChild(this.element),this.render!==ma&&this.listenerKeys.push(rt(e,wl.POSTRENDER,this.render,this)),e.render()}},t.prototype.render=function(e){},t.prototype.setTarget=function(e){this.target_=typeof e=="string"?document.getElementById(e):e},t}(ir);const yi=BE;var jE=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),zE=function(i){jE(t,i);function t(e){var n=this,r=e||{};n=i.call(this,{element:document.createElement("div"),render:r.render,target:r.target})||this,n.ulElement_=document.createElement("ul"),n.collapsed_=r.collapsed!==void 0?r.collapsed:!0,n.userCollapsed_=n.collapsed_,n.overrideCollapsible_=r.collapsible!==void 0,n.collapsible_=r.collapsible!==void 0?r.collapsible:!0,n.collapsible_||(n.collapsed_=!1);var o=r.className!==void 0?r.className:"ol-attribution",a=r.tipLabel!==void 0?r.tipLabel:"Attributions",s=r.expandClassName!==void 0?r.expandClassName:o+"-expand",l=r.collapseLabel!==void 0?r.collapseLabel:"›",u=r.collapseClassName!==void 0?r.collapseClassName:o+"-collpase";typeof l=="string"?(n.collapseLabel_=document.createElement("span"),n.collapseLabel_.textContent=l,n.collapseLabel_.className=u):n.collapseLabel_=l;var c=r.label!==void 0?r.label:"i";typeof c=="string"?(n.label_=document.createElement("span"),n.label_.textContent=c,n.label_.className=s):n.label_=c;var h=n.collapsible_&&!n.collapsed_?n.collapseLabel_:n.label_;n.toggleButton_=document.createElement("button"),n.toggleButton_.setAttribute("type","button"),n.toggleButton_.setAttribute("aria-expanded",String(!n.collapsed_)),n.toggleButton_.title=a,n.toggleButton_.appendChild(h),n.toggleButton_.addEventListener(Ie.CLICK,n.handleClick_.bind(n),!1);var d=o+" "+Ch+" "+uf+(n.collapsed_&&n.collapsible_?" "+og:"")+(n.collapsible_?"":" ol-uncollapsible"),p=n.element;return p.className=d,p.appendChild(n.toggleButton_),p.appendChild(n.ulElement_),n.renderedAttributions_=[],n.renderedVisible_=!0,n}return t.prototype.collectSourceAttributions_=function(e){for(var n={},r=[],o=!0,a=e.layerStatesArray,s=0,l=a.length;s<l;++s){var u=a[s];if(yc(u,e.viewState)){var c=u.layer.getSource();if(c){var h=c.getAttributions();if(h){var d=h(e);if(d)if(o=o&&c.getAttributionsCollapsible()!==!1,Array.isArray(d))for(var p=0,f=d.length;p<f;++p)d[p]in n||(r.push(d[p]),n[d[p]]=!0);else d in n||(r.push(d),n[d]=!0)}}}}return this.overrideCollapsible_||this.setCollapsible(o),r},t.prototype.updateElement_=function(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}var n=this.collectSourceAttributions_(e),r=n.length>0;if(this.renderedVisible_!=r&&(this.element.style.display=r?"":"none",this.renderedVisible_=r),!Ga(n,this.renderedAttributions_)){dm(this.ulElement_);for(var o=0,a=n.length;o<a;++o){var s=document.createElement("li");s.innerHTML=n[o],this.ulElement_.appendChild(s)}this.renderedAttributions_=n}},t.prototype.handleClick_=function(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_},t.prototype.handleToggle_=function(){this.element.classList.toggle(og),this.collapsed_?sg(this.collapseLabel_,this.label_):sg(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))},t.prototype.getCollapsible=function(){return this.collapsible_},t.prototype.setCollapsible=function(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())},t.prototype.setCollapsed=function(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()},t.prototype.getCollapsed=function(){return this.collapsed_},t.prototype.render=function(e){this.updateElement_(e.frameState)},t}(yi);const Rm=zE;var VE=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),WE=function(i){VE(t,i);function t(e){var n=this,r=e||{};n=i.call(this,{element:document.createElement("div"),render:r.render,target:r.target})||this;var o=r.className!==void 0?r.className:"ol-rotate",a=r.label!==void 0?r.label:"⇧",s=r.compassClassName!==void 0?r.compassClassName:"ol-compass";n.label_=null,typeof a=="string"?(n.label_=document.createElement("span"),n.label_.className=s,n.label_.textContent=a):(n.label_=a,n.label_.classList.add(s));var l=r.tipLabel?r.tipLabel:"Reset rotation",u=document.createElement("button");u.className=o+"-reset",u.setAttribute("type","button"),u.title=l,u.appendChild(n.label_),u.addEventListener(Ie.CLICK,n.handleClick_.bind(n),!1);var c=o+" "+Ch+" "+uf,h=n.element;return h.className=c,h.appendChild(u),n.callResetNorth_=r.resetNorth?r.resetNorth:void 0,n.duration_=r.duration!==void 0?r.duration:250,n.autoHide_=r.autoHide!==void 0?r.autoHide:!0,n.rotation_=void 0,n.autoHide_&&n.element.classList.add(Mu),n}return t.prototype.handleClick_=function(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()},t.prototype.resetNorth_=function(){var e=this.getMap(),n=e.getView();if(n){var r=n.getRotation();r!==void 0&&(this.duration_>0&&r%(2*Math.PI)!==0?n.animate({rotation:0,duration:this.duration_,easing:qs}):n.setRotation(0))}},t.prototype.render=function(e){var n=e.frameState;if(n){var r=n.viewState.rotation;if(r!=this.rotation_){var o="rotate("+r+"rad)";if(this.autoHide_){var a=this.element.classList.contains(Mu);!a&&r===0?this.element.classList.add(Mu):a&&r!==0&&this.element.classList.remove(Mu)}this.label_.style.transform=o}this.rotation_=r}},t}(yi);const YE=WE;var HE=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),qE=function(i){HE(t,i);function t(e){var n=this,r=e||{};n=i.call(this,{element:document.createElement("div"),target:r.target})||this;var o=r.className!==void 0?r.className:"ol-zoom",a=r.delta!==void 0?r.delta:1,s=r.zoomInClassName!==void 0?r.zoomInClassName:o+"-in",l=r.zoomOutClassName!==void 0?r.zoomOutClassName:o+"-out",u=r.zoomInLabel!==void 0?r.zoomInLabel:"+",c=r.zoomOutLabel!==void 0?r.zoomOutLabel:"–",h=r.zoomInTipLabel!==void 0?r.zoomInTipLabel:"Zoom in",d=r.zoomOutTipLabel!==void 0?r.zoomOutTipLabel:"Zoom out",p=document.createElement("button");p.className=s,p.setAttribute("type","button"),p.title=h,p.appendChild(typeof u=="string"?document.createTextNode(u):u),p.addEventListener(Ie.CLICK,n.handleClick_.bind(n,a),!1);var f=document.createElement("button");f.className=l,f.setAttribute("type","button"),f.title=d,f.appendChild(typeof c=="string"?document.createTextNode(c):c),f.addEventListener(Ie.CLICK,n.handleClick_.bind(n,-a),!1);var g=o+" "+Ch+" "+uf,v=n.element;return v.className=g,v.appendChild(p),v.appendChild(f),n.duration_=r.duration!==void 0?r.duration:250,n}return t.prototype.handleClick_=function(e,n){n.preventDefault(),this.zoomByDelta_(e)},t.prototype.zoomByDelta_=function(e){var n=this.getMap(),r=n.getView();if(r){var o=r.getZoom();if(o!==void 0){var a=r.getConstrainedZoom(o+e);this.duration_>0?(r.getAnimating()&&r.cancelAnimations(),r.animate({zoom:a,duration:this.duration_,easing:qs})):r.setZoom(a)}}},t}(yi);const XE=qE,yn={BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right",CENTER_LEFT:"center-left",CENTER_CENTER:"center-center",CENTER_RIGHT:"center-right",TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right"};var ZE=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Di={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"},KE=function(i){ZE(t,i);function t(e){var n=i.call(this)||this;n.on,n.once,n.un,n.options=e,n.id=e.id,n.insertFirst=e.insertFirst!==void 0?e.insertFirst:!0,n.stopEvent=e.stopEvent!==void 0?e.stopEvent:!0,n.element=document.createElement("div"),n.element.className=e.className!==void 0?e.className:"ol-overlay-container "+$C,n.element.style.position="absolute",n.element.style.pointerEvents="auto";var r=e.autoPan;return r&&typeof r!="object"&&(r={animation:e.autoPanAnimation,margin:e.autoPanMargin}),n.autoPan=r||!1,n.rendered={transform_:"",visible:!0},n.mapPostrenderListenerKey=null,n.addChangeListener(Di.ELEMENT,n.handleElementChanged),n.addChangeListener(Di.MAP,n.handleMapChanged),n.addChangeListener(Di.OFFSET,n.handleOffsetChanged),n.addChangeListener(Di.POSITION,n.handlePositionChanged),n.addChangeListener(Di.POSITIONING,n.handlePositioningChanged),e.element!==void 0&&n.setElement(e.element),n.setOffset(e.offset!==void 0?e.offset:[0,0]),n.setPositioning(e.positioning!==void 0?e.positioning:yn.TOP_LEFT),e.position!==void 0&&n.setPosition(e.position),n}return t.prototype.getElement=function(){return this.get(Di.ELEMENT)},t.prototype.getId=function(){return this.id},t.prototype.getMap=function(){return this.get(Di.MAP)},t.prototype.getOffset=function(){return this.get(Di.OFFSET)},t.prototype.getPosition=function(){return this.get(Di.POSITION)},t.prototype.getPositioning=function(){return this.get(Di.POSITIONING)},t.prototype.handleElementChanged=function(){dm(this.element);var e=this.getElement();e&&this.element.appendChild(e)},t.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(Ac(this.element),Pt(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var e=this.getMap();if(e){this.mapPostrenderListenerKey=rt(e,wl.POSTRENDER,this.render,this),this.updatePixelPosition();var n=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?n.insertBefore(this.element,n.childNodes[0]||null):n.appendChild(this.element),this.performAutoPan()}},t.prototype.render=function(){this.updatePixelPosition()},t.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},t.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.performAutoPan()},t.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},t.prototype.setElement=function(e){this.set(Di.ELEMENT,e)},t.prototype.setMap=function(e){this.set(Di.MAP,e)},t.prototype.setOffset=function(e){this.set(Di.OFFSET,e)},t.prototype.setPosition=function(e){this.set(Di.POSITION,e)},t.prototype.performAutoPan=function(){this.autoPan&&this.panIntoView(this.autoPan)},t.prototype.panIntoView=function(e){var n=this.getMap();if(!(!n||!n.getTargetElement()||!this.get(Di.POSITION))){var r=this.getRect(n.getTargetElement(),n.getSize()),o=this.getElement(),a=this.getRect(o,[tI(o),iI(o)]),s=e||{},l=s.margin===void 0?20:s.margin;if(!zr(r,a)){var u=a[0]-r[0],c=r[2]-a[2],h=a[1]-r[1],d=r[3]-a[3],p=[0,0];if(u<0?p[0]=u-l:c<0&&(p[0]=Math.abs(c)+l),h<0?p[1]=h-l:d<0&&(p[1]=Math.abs(d)+l),p[0]!==0||p[1]!==0){var f=n.getView().getCenterInternal(),g=n.getPixelFromCoordinateInternal(f);if(!g)return;var v=[g[0]+p[0],g[1]+p[1]],y=s.animation||{};n.getView().animateInternal({center:n.getCoordinateFromPixelInternal(v),duration:y.duration,easing:y.easing})}}}},t.prototype.getRect=function(e,n){var r=e.getBoundingClientRect(),o=r.left+window.pageXOffset,a=r.top+window.pageYOffset;return[o,a,o+n[0],a+n[1]]},t.prototype.setPositioning=function(e){this.set(Di.POSITIONING,e)},t.prototype.setVisible=function(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)},t.prototype.updatePixelPosition=function(){var e=this.getMap(),n=this.getPosition();if(!e||!e.isRendered()||!n){this.setVisible(!1);return}var r=e.getPixelFromCoordinate(n),o=e.getSize();this.updateRenderedPosition(r,o)},t.prototype.updateRenderedPosition=function(e,n){var r=this.element.style,o=this.getOffset(),a=this.getPositioning();this.setVisible(!0);var s=Math.round(e[0]+o[0])+"px",l=Math.round(e[1]+o[1])+"px",u="0%",c="0%";a==yn.BOTTOM_RIGHT||a==yn.CENTER_RIGHT||a==yn.TOP_RIGHT?u="-100%":(a==yn.BOTTOM_CENTER||a==yn.CENTER_CENTER||a==yn.TOP_CENTER)&&(u="-50%"),a==yn.BOTTOM_LEFT||a==yn.BOTTOM_CENTER||a==yn.BOTTOM_RIGHT?c="-100%":(a==yn.CENTER_LEFT||a==yn.CENTER_CENTER||a==yn.CENTER_RIGHT)&&(c="-50%");var h="translate("+u+", "+c+") translate("+s+", "+l+")";this.rendered.transform_!=h&&(this.rendered.transform_=h,r.transform=h,r.msTransform=h)},t.prototype.getOptions=function(){return this.options},t}(ir);const dn=KE;function JE(i){var t=i||{},e=new oi,n=t.zoom!==void 0?t.zoom:!0;n&&e.push(new XE(t.zoomOptions));var r=t.rotate!==void 0?t.rotate:!0;r&&e.push(new YE(t.rotateOptions));var o=t.attribution!==void 0?t.attribution:!0;return o&&e.push(new Rm(t.attributionOptions)),e}const mp={ACTIVE:"active"};var QE=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),$E=function(i){QE(t,i);function t(e){var n=i.call(this)||this;return n.on,n.once,n.un,e&&e.handleEvent&&(n.handleEvent=e.handleEvent),n.map_=null,n.setActive(!0),n}return t.prototype.getActive=function(){return this.get(mp.ACTIVE)},t.prototype.getMap=function(){return this.map_},t.prototype.handleEvent=function(e){return!0},t.prototype.setActive=function(e){this.set(mp.ACTIVE,e)},t.prototype.setMap=function(e){this.map_=e},t}(ir);function e1(i,t,e){var n=i.getCenterInternal();if(n){var r=[n[0]+t[0],n[1]+t[1]];i.animateInternal({duration:e!==void 0?e:250,easing:eE,center:i.getConstrainedCenter(r)})}}function Tf(i,t,e,n){var r=i.getZoom();if(r!==void 0){var o=i.getConstrainedZoom(r+t),a=i.getResolutionForZoom(o);i.getAnimating()&&i.cancelAnimations(),i.animate({resolution:a,anchor:e,duration:n!==void 0?n:250,easing:qs})}}const Xs=$E;var t1=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),i1=function(i){t1(t,i);function t(e){var n=i.call(this)||this,r=e||{};return n.delta_=r.delta?r.delta:1,n.duration_=r.duration!==void 0?r.duration:250,n}return t.prototype.handleEvent=function(e){var n=!1;if(e.type==Je.DBLCLICK){var r=e.originalEvent,o=e.map,a=e.coordinate,s=r.shiftKey?-this.delta_:this.delta_,l=o.getView();Tf(l,s,a,this.duration_),r.preventDefault(),n=!0}return!n},t}(Xs);const n1=i1;var r1=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),o1=function(i){r1(t,i);function t(e){var n=this,r=e||{};return n=i.call(this,r)||this,r.handleDownEvent&&(n.handleDownEvent=r.handleDownEvent),r.handleDragEvent&&(n.handleDragEvent=r.handleDragEvent),r.handleMoveEvent&&(n.handleMoveEvent=r.handleMoveEvent),r.handleUpEvent&&(n.handleUpEvent=r.handleUpEvent),r.stopDown&&(n.stopDown=r.stopDown),n.handlingDownUpSequence=!1,n.trackedPointers_={},n.targetPointers=[],n}return t.prototype.getPointerCount=function(){return this.targetPointers.length},t.prototype.handleDownEvent=function(e){return!1},t.prototype.handleDragEvent=function(e){},t.prototype.handleEvent=function(e){if(!e.originalEvent)return!0;var n=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==Je.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==Je.POINTERUP){var r=this.handleUpEvent(e);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else if(e.type==Je.POINTERDOWN){var o=this.handleDownEvent(e);this.handlingDownUpSequence=o,n=this.stopDown(o)}else e.type==Je.POINTERMOVE&&this.handleMoveEvent(e);return!n},t.prototype.handleMoveEvent=function(e){},t.prototype.handleUpEvent=function(e){return!1},t.prototype.stopDown=function(e){return e},t.prototype.updateTrackedPointers_=function(e){if(a1(e)){var n=e.originalEvent,r=n.pointerId.toString();e.type==Je.POINTERUP?delete this.trackedPointers_[r]:e.type==Je.POINTERDOWN?this.trackedPointers_[r]=n:r in this.trackedPointers_&&(this.trackedPointers_[r]=n),this.targetPointers=rm(this.trackedPointers_)}},t}(Xs);function bf(i){for(var t=i.length,e=0,n=0,r=0;r<t;r++)e+=i[r].clientX,n+=i[r].clientY;return[e/t,n/t]}function a1(i){var t=i.type;return t===Je.POINTERDOWN||t===Je.POINTERDRAG||t===Je.POINTERUP}const Da=o1;function yp(i){var t=arguments;return function(e){for(var n=!0,r=0,o=t.length;r<o&&(n=n&&t[r](e),!!n);++r);return n}}var s1=function(i){var t=i.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey},l1=function(i){var t=i.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},u1=function(i){return i.target.getTargetElement().contains(document.activeElement)},Om=function(i){return i.map.getTargetElement().hasAttribute("tabindex")?u1(i):!0},Rf=Wr,Lm=function(i){var t=i.originalEvent;return t.button==0&&!(cC&&hC&&t.ctrlKey)},Sg=Vs,Of=function(i){return i.type=="pointermove"},Lf=function(i){return i.type==Je.SINGLECLICK},Gf=function(i){var t=i.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey},kf=function(i){var t=i.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},Gm=function(i){var t=i.originalEvent,e=t.target.tagName;return e!=="INPUT"&&e!=="SELECT"&&e!=="TEXTAREA"},hd=function(i){var t=i.originalEvent;return be(t!==void 0,56),t.pointerType=="mouse"},km=function(i){var t=i.originalEvent;return be(t!==void 0,56),t.isPrimary&&t.button===0},c1=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),h1=function(i){c1(t,i);function t(e){var n=i.call(this,{stopDown:Vs})||this,r=e||{};n.kinetic_=r.kinetic,n.lastCentroid=null,n.lastPointersCount_,n.panning_=!1;var o=r.condition?r.condition:yp(Gf,km);return n.condition_=r.onFocusOnly?yp(Om,o):o,n.noKinetic_=!1,n}return t.prototype.handleDragEvent=function(e){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var n=this.targetPointers,r=bf(n);if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){var o=[this.lastCentroid[0]-r[0],r[1]-this.lastCentroid[1]],a=e.map,s=a.getView();WC(o,s.getResolution()),sf(o,s.getRotation()),s.adjustCenterInternal(o)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=n.length,e.originalEvent.preventDefault()},t.prototype.handleUpEvent=function(e){var n=e.map,r=n.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var o=this.kinetic_.getDistance(),a=this.kinetic_.getAngle(),s=r.getCenterInternal(),l=n.getPixelFromCoordinateInternal(s),u=n.getCoordinateFromPixelInternal([l[0]-o*Math.cos(a),l[1]-o*Math.sin(a)]);r.animateInternal({center:r.getConstrainedCenter(u),duration:500,easing:qs})}return this.panning_&&(this.panning_=!1,r.endInteraction()),!1}else return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},t.prototype.handleDownEvent=function(e){if(this.targetPointers.length>0&&this.condition_(e)){var n=e.map,r=n.getView();return this.lastCentroid=null,r.getAnimating()&&r.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}else return!1},t}(Da);const d1=h1;var p1=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),f1=function(i){p1(t,i);function t(e){var n=this,r=e||{};return n=i.call(this,{stopDown:Vs})||this,n.condition_=r.condition?r.condition:l1,n.lastAngle_=void 0,n.duration_=r.duration!==void 0?r.duration:250,n}return t.prototype.handleDragEvent=function(e){if(hd(e)){var n=e.map,r=n.getView();if(r.getConstraints().rotation!==mf){var o=n.getSize(),a=e.pixel,s=Math.atan2(o[1]/2-a[1],a[0]-o[0]/2);if(this.lastAngle_!==void 0){var l=s-this.lastAngle_;r.adjustRotationInternal(-l)}this.lastAngle_=s}}},t.prototype.handleUpEvent=function(e){if(!hd(e))return!0;var n=e.map,r=n.getView();return r.endInteraction(this.duration_),!1},t.prototype.handleDownEvent=function(e){if(!hd(e))return!1;if(Lm(e)&&this.condition_(e)){var n=e.map;return n.getView().beginInteraction(),this.lastAngle_=void 0,!0}else return!1},t}(Da);const g1=f1;var v1=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),m1=function(i){v1(t,i);function t(e){var n=i.call(this)||this;return n.geometry_=null,n.element_=document.createElement("div"),n.element_.style.position="absolute",n.element_.style.pointerEvents="auto",n.element_.className="ol-box "+e,n.map_=null,n.startPixel_=null,n.endPixel_=null,n}return t.prototype.disposeInternal=function(){this.setMap(null)},t.prototype.render_=function(){var e=this.startPixel_,n=this.endPixel_,r="px",o=this.element_.style;o.left=Math.min(e[0],n[0])+r,o.top=Math.min(e[1],n[1])+r,o.width=Math.abs(n[0]-e[0])+r,o.height=Math.abs(n[1]-e[1])+r},t.prototype.setMap=function(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var n=this.element_.style;n.left="inherit",n.top="inherit",n.width="inherit",n.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},t.prototype.setPixels=function(e,n){this.startPixel_=e,this.endPixel_=n,this.createOrUpdateGeometry(),this.render_()},t.prototype.createOrUpdateGeometry=function(){var e=this.startPixel_,n=this.endPixel_,r=[e,[e[0],n[1]],n,[n[0],e[1]]],o=r.map(this.map_.getCoordinateFromPixelInternal,this.map_);o[4]=o[0].slice(),this.geometry_?this.geometry_.setCoordinates([o]):this.geometry_=new zi([o])},t.prototype.getGeometry=function(){return this.geometry_},t}(Jp);const y1=m1;var Dm=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Lu={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"},dd=function(i){Dm(t,i);function t(e,n,r){var o=i.call(this,e)||this;return o.coordinate=n,o.mapBrowserEvent=r,o}return t}(zn),A1=function(i){Dm(t,i);function t(e){var n=i.call(this)||this;n.on,n.once,n.un;var r=e||{};return n.box_=new y1(r.className||"ol-dragbox"),n.minArea_=r.minArea!==void 0?r.minArea:64,r.onBoxEnd&&(n.onBoxEnd=r.onBoxEnd),n.startPixel_=null,n.condition_=r.condition?r.condition:Lm,n.boxEndCondition_=r.boxEndCondition?r.boxEndCondition:n.defaultBoxEndCondition,n}return t.prototype.defaultBoxEndCondition=function(e,n,r){var o=r[0]-n[0],a=r[1]-n[1];return o*o+a*a>=this.minArea_},t.prototype.getGeometry=function(){return this.box_.getGeometry()},t.prototype.handleDragEvent=function(e){this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new dd(Lu.BOXDRAG,e.coordinate,e))},t.prototype.handleUpEvent=function(e){this.box_.setMap(null);var n=this.boxEndCondition_(e,this.startPixel_,e.pixel);return n&&this.onBoxEnd(e),this.dispatchEvent(new dd(n?Lu.BOXEND:Lu.BOXCANCEL,e.coordinate,e)),!1},t.prototype.handleDownEvent=function(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new dd(Lu.BOXSTART,e.coordinate,e)),!0):!1},t.prototype.onBoxEnd=function(e){},t}(Da);const _1=A1;var C1=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),I1=function(i){C1(t,i);function t(e){var n=this,r=e||{},o=r.condition?r.condition:kf;return n=i.call(this,{condition:o,className:r.className||"ol-dragzoom",minArea:r.minArea})||this,n.duration_=r.duration!==void 0?r.duration:200,n.out_=r.out!==void 0?r.out:!1,n}return t.prototype.onBoxEnd=function(e){var n=this.getMap(),r=n.getView(),o=this.getGeometry();if(this.out_){var a=r.rotatedExtentForGeometry(o),s=r.getResolutionForExtentInternal(a),l=r.getResolution()/s;o=o.clone(),o.scale(l*l)}r.fitInternal(o,{duration:this.duration_,easing:qs})},t}(_1);const E1=I1,qo={LEFT:37,UP:38,RIGHT:39,DOWN:40};var w1=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),S1=function(i){w1(t,i);function t(e){var n=i.call(this)||this,r=e||{};return n.defaultCondition_=function(o){return Gf(o)&&Gm(o)},n.condition_=r.condition!==void 0?r.condition:n.defaultCondition_,n.duration_=r.duration!==void 0?r.duration:100,n.pixelDelta_=r.pixelDelta!==void 0?r.pixelDelta:128,n}return t.prototype.handleEvent=function(e){var n=!1;if(e.type==Ie.KEYDOWN){var r=e.originalEvent,o=r.keyCode;if(this.condition_(e)&&(o==qo.DOWN||o==qo.LEFT||o==qo.RIGHT||o==qo.UP)){var a=e.map,s=a.getView(),l=s.getResolution()*this.pixelDelta_,u=0,c=0;o==qo.DOWN?c=-l:o==qo.LEFT?u=-l:o==qo.RIGHT?u=l:c=l;var h=[u,c];sf(h,s.getRotation()),e1(s,h,this.duration_),r.preventDefault(),n=!0}}return!n},t}(Xs);const P1=S1;var x1=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),M1=function(i){x1(t,i);function t(e){var n=i.call(this)||this,r=e||{};return n.condition_=r.condition?r.condition:Gm,n.delta_=r.delta?r.delta:1,n.duration_=r.duration!==void 0?r.duration:100,n}return t.prototype.handleEvent=function(e){var n=!1;if(e.type==Ie.KEYDOWN||e.type==Ie.KEYPRESS){var r=e.originalEvent,o=r.charCode;if(this.condition_(e)&&(o=="+".charCodeAt(0)||o=="-".charCodeAt(0))){var a=e.map,s=o=="+".charCodeAt(0)?this.delta_:-this.delta_,l=a.getView();Tf(l,s,void 0,this.duration_),r.preventDefault(),n=!0}}return!n},t}(Xs);const T1=M1;var b1=function(){function i(t,e,n){this.decay_=t,this.minVelocity_=e,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}return i.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},i.prototype.update=function(t,e){this.points_.push(t,e,Date.now())},i.prototype.end=function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;for(var n=e-3;n>0&&this.points_[n+2]>t;)n-=3;var r=this.points_[e+2]-this.points_[n+2];if(r<1e3/60)return!1;var o=this.points_[e]-this.points_[n],a=this.points_[e+1]-this.points_[n+1];return this.angle_=Math.atan2(a,o),this.initialVelocity_=Math.sqrt(o*o+a*a)/r,this.initialVelocity_>this.minVelocity_},i.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},i.prototype.getAngle=function(){return this.angle_},i}();const R1=b1;var O1=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),pd={TRACKPAD:"trackpad",WHEEL:"wheel"},L1=function(i){O1(t,i);function t(e){var n=this,r=e||{};n=i.call(this,r)||this,n.totalDelta_=0,n.lastDelta_=0,n.maxDelta_=r.maxDelta!==void 0?r.maxDelta:1,n.duration_=r.duration!==void 0?r.duration:250,n.timeout_=r.timeout!==void 0?r.timeout:80,n.useAnchor_=r.useAnchor!==void 0?r.useAnchor:!0,n.constrainResolution_=r.constrainResolution!==void 0?r.constrainResolution:!1;var o=r.condition?r.condition:Rf;return n.condition_=r.onFocusOnly?yp(Om,o):o,n.lastAnchor_=null,n.startTime_=void 0,n.timeoutId_,n.mode_=void 0,n.trackpadEventGap_=400,n.trackpadTimeoutId_,n.deltaPerZoom_=300,n}return t.prototype.endInteraction_=function(){this.trackpadTimeoutId_=void 0;var e=this.getMap().getView();e.endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)},t.prototype.handleEvent=function(e){if(!this.condition_(e))return!0;var n=e.type;if(n!==Ie.WHEEL)return!0;var r=e.map,o=e.originalEvent;o.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.coordinate);var a;if(e.type==Ie.WHEEL&&(a=o.deltaY,uC&&o.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(a/=Xv),o.deltaMode===WheelEvent.DOM_DELTA_LINE&&(a*=40)),a===0)return!1;this.lastDelta_=a;var s=Date.now();this.startTime_===void 0&&(this.startTime_=s),(!this.mode_||s-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(a)<4?pd.TRACKPAD:pd.WHEEL);var l=r.getView();if(this.mode_===pd.TRACKPAD&&!(l.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(l.getAnimating()&&l.cancelAnimations(),l.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),l.adjustZoom(-a/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=s,!1;this.totalDelta_+=a;var u=Math.max(this.timeout_-(s-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,r),u),!1},t.prototype.handleWheelZoom_=function(e){var n=e.getView();n.getAnimating()&&n.cancelAnimations();var r=-ri(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(n.getConstrainResolution()||this.constrainResolution_)&&(r=r?r>0?1:-1:0),Tf(n,r,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},t.prototype.setMouseAnchor=function(e){this.useAnchor_=e,e||(this.lastAnchor_=null)},t}(Xs);const G1=L1;var k1=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),D1=function(i){k1(t,i);function t(e){var n=this,r=e||{},o=r;return o.stopDown||(o.stopDown=Vs),n=i.call(this,o)||this,n.anchor_=null,n.lastAngle_=void 0,n.rotating_=!1,n.rotationDelta_=0,n.threshold_=r.threshold!==void 0?r.threshold:.3,n.duration_=r.duration!==void 0?r.duration:250,n}return t.prototype.handleDragEvent=function(e){var n=0,r=this.targetPointers[0],o=this.targetPointers[1],a=Math.atan2(o.clientY-r.clientY,o.clientX-r.clientX);if(this.lastAngle_!==void 0){var s=a-this.lastAngle_;this.rotationDelta_+=s,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),n=s}this.lastAngle_=a;var l=e.map,u=l.getView();if(u.getConstraints().rotation!==mf){var c=l.getViewport().getBoundingClientRect(),h=bf(this.targetPointers);h[0]-=c.left,h[1]-=c.top,this.anchor_=l.getCoordinateFromPixelInternal(h),this.rotating_&&(l.render(),u.adjustRotationInternal(n,this.anchor_))}},t.prototype.handleUpEvent=function(e){if(this.targetPointers.length<2){var n=e.map,r=n.getView();return r.endInteraction(this.duration_),!1}else return!0},t.prototype.handleDownEvent=function(e){if(this.targetPointers.length>=2){var n=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}else return!1},t}(Da);const N1=D1;var F1=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),U1=function(i){F1(t,i);function t(e){var n=this,r=e||{},o=r;return o.stopDown||(o.stopDown=Vs),n=i.call(this,o)||this,n.anchor_=null,n.duration_=r.duration!==void 0?r.duration:400,n.lastDistance_=void 0,n.lastScaleDelta_=1,n}return t.prototype.handleDragEvent=function(e){var n=1,r=this.targetPointers[0],o=this.targetPointers[1],a=r.clientX-o.clientX,s=r.clientY-o.clientY,l=Math.sqrt(a*a+s*s);this.lastDistance_!==void 0&&(n=this.lastDistance_/l),this.lastDistance_=l;var u=e.map,c=u.getView();n!=1&&(this.lastScaleDelta_=n);var h=u.getViewport().getBoundingClientRect(),d=bf(this.targetPointers);d[0]-=h.left,d[1]-=h.top,this.anchor_=u.getCoordinateFromPixelInternal(d),u.render(),c.adjustResolutionInternal(n,this.anchor_)},t.prototype.handleUpEvent=function(e){if(this.targetPointers.length<2){var n=e.map,r=n.getView(),o=this.lastScaleDelta_>1?1:-1;return r.endInteraction(this.duration_,o),!1}else return!0},t.prototype.handleDownEvent=function(e){if(this.targetPointers.length>=2){var n=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}else return!1},t}(Da);const B1=U1,fo={ARRAY_BUFFER:"arraybuffer",JSON:"json",TEXT:"text",XML:"xml"};var j1=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Nm=function(i){j1(t,i);function t(e,n,r){var o=i.call(this)||this;if(r!==void 0&&n===void 0)o.setFlatCoordinates(r,e);else{var a=n||0;o.setCenterAndRadius(e,a,r)}return o}return t.prototype.clone=function(){var e=new t(this.flatCoordinates.slice(),void 0,this.layout);return e.applyProperties(this),e},t.prototype.closestPointXY=function(e,n,r,o){var a=this.flatCoordinates,s=e-a[0],l=n-a[1],u=s*s+l*l;if(u<o){if(u===0)for(var c=0;c<this.stride;++c)r[c]=a[c];else{var h=this.getRadius()/Math.sqrt(u);r[0]=a[0]+h*s,r[1]=a[1]+h*l;for(var c=2;c<this.stride;++c)r[c]=a[c]}return r.length=this.stride,u}else return o},t.prototype.containsXY=function(e,n){var r=this.flatCoordinates,o=e-r[0],a=n-r[1];return o*o+a*a<=this.getRadiusSquared_()},t.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},t.prototype.computeExtent=function(e){var n=this.flatCoordinates,r=n[this.stride]-n[0];return er(n[0]-r,n[1]-r,n[0]+r,n[1]+r,e)},t.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},t.prototype.getRadiusSquared_=function(){var e=this.flatCoordinates[this.stride]-this.flatCoordinates[0],n=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return e*e+n*n},t.prototype.getType=function(){return b.CIRCLE},t.prototype.intersectsExtent=function(e){var n=this.getExtent();if(Vt(e,n)){var r=this.getCenter();return e[0]<=r[0]&&e[2]>=r[0]||e[1]<=r[1]&&e[3]>=r[1]?!0:nf(e,this.intersectsCoordinate.bind(this))}return!1},t.prototype.setCenter=function(e){var n=this.stride,r=this.flatCoordinates[n]-this.flatCoordinates[0],o=e.slice();o[n]=o[0]+r;for(var a=1;a<n;++a)o[n+a]=e[a];this.setFlatCoordinates(this.layout,o),this.changed()},t.prototype.setCenterAndRadius=function(e,n,r){this.setLayout(r,e,0),this.flatCoordinates||(this.flatCoordinates=[]);var o=this.flatCoordinates,a=Im(o,0,e,this.stride);o[a++]=o[0]+n;for(var s=1,l=this.stride;s<l;++s)o[a++]=o[s];o.length=a,this.changed()},t.prototype.getCoordinates=function(){return null},t.prototype.setCoordinates=function(e,n){},t.prototype.setRadius=function(e){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+e,this.changed()},t.prototype.rotate=function(e,n){var r=this.getCenter(),o=this.getStride();this.setCenter(yf(r,0,r.length,o,e,n,r)),this.changed()},t.prototype.translate=function(e,n){var r=this.getCenter(),o=this.getStride();this.setCenter(_m(r,0,r.length,o,e,n,r)),this.changed()},t}(Bo);Nm.prototype.transform;const z1=Nm;var V1=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),W1=function(i){V1(t,i);function t(e){var n=i.call(this)||this;if(n.on,n.once,n.un,n.id_=void 0,n.geometryName_="geometry",n.style_=null,n.styleFunction_=void 0,n.geometryChangeKey_=null,n.addChangeListener(n.geometryName_,n.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){var r=e;n.setGeometry(r)}else{var o=e;n.setProperties(o)}return n}return t.prototype.clone=function(){var e=new t(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());var n=this.getGeometry();n&&e.setGeometry(n.clone());var r=this.getStyle();return r&&e.setStyle(r),e},t.prototype.getGeometry=function(){return this.get(this.geometryName_)},t.prototype.getId=function(){return this.id_},t.prototype.getGeometryName=function(){return this.geometryName_},t.prototype.getStyle=function(){return this.style_},t.prototype.getStyleFunction=function(){return this.styleFunction_},t.prototype.handleGeometryChange_=function(){this.changed()},t.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(Pt(this.geometryChangeKey_),this.geometryChangeKey_=null);var e=this.getGeometry();e&&(this.geometryChangeKey_=rt(e,Ie.CHANGE,this.handleGeometryChange_,this)),this.changed()},t.prototype.setGeometry=function(e){this.set(this.geometryName_,e)},t.prototype.setStyle=function(e){this.style_=e,this.styleFunction_=e?Y1(e):void 0,this.changed()},t.prototype.setId=function(e){this.id_=e,this.changed()},t.prototype.setGeometryName=function(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()},t}(ir);function Y1(i){if(typeof i=="function")return i;var t;if(Array.isArray(i))t=i;else{be(typeof i.getZIndex=="function",41);var e=i;t=[e]}return function(){return t}}const ii=W1;function Sc(i,t,e,n,r,o,a){var s,l,u=(e-t)/n;if(u===1)s=t;else if(u===2)s=t,l=r;else if(u!==0){for(var c=i[t],h=i[t+1],d=0,p=[0],f=t+n;f<e;f+=n){var g=i[f],v=i[f+1];d+=Math.sqrt((g-c)*(g-c)+(v-h)*(v-h)),p.push(d),c=g,h=v}var y=r*d,m=nC(p,y);m<0?(l=(y-p[-m-2])/(p[-m-1]-p[-m-2]),s=t+(-m-2)*n):s=t+m*n}for(var A=a>1?a:2,_=o||new Array(A),f=0;f<A;++f)_[f]=s===void 0?NaN:l===void 0?i[s+f]:Ur(i[s+f],i[s+n+f],l);return _}function Ap(i,t,e,n,r,o){if(e==t)return null;var a;if(r<i[t+n-1])return o?(a=i.slice(t,t+n),a[n-1]=r,a):null;if(i[e-1]<r)return o?(a=i.slice(e-n,e),a[n-1]=r,a):null;if(r==i[t+n-1])return i.slice(t,t+n);for(var s=t/n,l=e/n;s<l;){var u=s+l>>1;r<i[(u+1)*n-1]?l=u:s=u+1}var c=i[s*n-1];if(r==c)return i.slice((s-1)*n,(s-1)*n+n);var h=i[(s+1)*n-1],d=(r-c)/(h-c);a=[];for(var p=0;p<n-1;++p)a.push(Ur(i[(s-1)*n+p],i[s*n+p],d));return a.push(r),a}function H1(i,t,e,n,r,o,a){if(a)return Ap(i,t,e[e.length-1],n,r,o);var s;if(r<i[n-1])return o?(s=i.slice(0,n),s[n-1]=r,s):null;if(i[i.length-1]<r)return o?(s=i.slice(i.length-n),s[n-1]=r,s):null;for(var l=0,u=e.length;l<u;++l){var c=e[l];if(t!=c){if(r<i[t+n-1])return null;if(r<=i[c-1])return Ap(i,t,c,n,r,!1);t=c}}return null}function Fm(i,t,e,n){for(var r=i[t],o=i[t+1],a=0,s=t+n;s<e;s+=n){var l=i[s],u=i[s+1];a+=Math.sqrt((l-r)*(l-r)+(u-o)*(u-o)),r=l,o=u}return a}var q1=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),X1=function(i){q1(t,i);function t(e,n){var r=i.call(this)||this;return r.flatMidpoint_=null,r.flatMidpointRevision_=-1,r.maxDelta_=-1,r.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(e[0])?r.setFlatCoordinates(n,e):r.setCoordinates(e,n),r}return t.prototype.appendCoordinate=function(e){this.flatCoordinates?St(this.flatCoordinates,e):this.flatCoordinates=e.slice(),this.changed()},t.prototype.clone=function(){var e=new t(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e},t.prototype.closestPointXY=function(e,n,r,o){return o<ka(this.getExtent(),e,n)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Af(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Cf(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,n,r,o))},t.prototype.forEachSegment=function(e){return xm(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)},t.prototype.getCoordinateAtM=function(e,n){if(this.layout!=De.XYM&&this.layout!=De.XYZM)return null;var r=n!==void 0?n:!1;return Ap(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,r)},t.prototype.getCoordinates=function(){return mo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},t.prototype.getCoordinateAt=function(e,n){return Sc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,n,this.stride)},t.prototype.getLength=function(){return Fm(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},t.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},t.prototype.getSimplifiedGeometryInternal=function(e){var n=[];return n.length=wf(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,n,0),new t(n,De.XY)},t.prototype.getType=function(){return b.LINE_STRING},t.prototype.intersectsExtent=function(e){return Ph(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)},t.prototype.setCoordinates=function(e,n){this.setLayout(n,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Sh(this.flatCoordinates,0,e,this.stride),this.changed()},t}(Bo);const xn=X1;var Z1=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),K1=function(i){Z1(t,i);function t(e,n,r){var o=i.call(this)||this;if(o.ends_=[],o.maxDelta_=-1,o.maxDeltaRevision_=-1,Array.isArray(e[0]))o.setCoordinates(e,n);else if(n!==void 0&&r)o.setFlatCoordinates(n,e),o.ends_=r;else{for(var a=o.getLayout(),s=e,l=[],u=[],c=0,h=s.length;c<h;++c){var d=s[c];c===0&&(a=d.getLayout()),St(l,d.getFlatCoordinates()),u.push(l.length)}o.setFlatCoordinates(a,l),o.ends_=u}return o}return t.prototype.appendLineString=function(e){this.flatCoordinates?St(this.flatCoordinates,e.getFlatCoordinates().slice()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},t.prototype.clone=function(){var e=new t(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e},t.prototype.closestPointXY=function(e,n,r,o){return o<ka(this.getExtent(),e,n)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(_f(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),If(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,n,r,o))},t.prototype.getCoordinateAtM=function(e,n,r){if(this.layout!=De.XYM&&this.layout!=De.XYZM||this.flatCoordinates.length===0)return null;var o=n!==void 0?n:!1,a=r!==void 0?r:!1;return H1(this.flatCoordinates,0,this.ends_,this.stride,e,o,a)},t.prototype.getCoordinates=function(){return Hl(this.flatCoordinates,0,this.ends_,this.stride)},t.prototype.getEnds=function(){return this.ends_},t.prototype.getLineString=function(e){return e<0||this.ends_.length<=e?null:new xn(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)},t.prototype.getLineStrings=function(){for(var e=this.flatCoordinates,n=this.ends_,r=this.layout,o=[],a=0,s=0,l=n.length;s<l;++s){var u=n[s],c=new xn(e.slice(a,u),r);o.push(c),a=u}return o},t.prototype.getFlatMidpoints=function(){for(var e=[],n=this.flatCoordinates,r=0,o=this.ends_,a=this.stride,s=0,l=o.length;s<l;++s){var u=o[s],c=Sc(n,r,u,a,.5);St(e,c),r=u}return e},t.prototype.getSimplifiedGeometryInternal=function(e){var n=[],r=[];return n.length=hE(this.flatCoordinates,0,this.ends_,this.stride,e,n,0,r),new t(n,De.XY,r)},t.prototype.getType=function(){return b.MULTI_LINE_STRING},t.prototype.intersectsExtent=function(e){return CE(this.flatCoordinates,0,this.ends_,this.stride,e)},t.prototype.setCoordinates=function(e,n){this.setLayout(n,e,2),this.flatCoordinates||(this.flatCoordinates=[]);var r=Ef(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()},t}(Bo);const Zr=K1;var J1=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Q1=function(i){J1(t,i);function t(e,n){var r=i.call(this)||this;return n&&!Array.isArray(e[0])?r.setFlatCoordinates(n,e):r.setCoordinates(e,n),r}return t.prototype.appendPoint=function(e){this.flatCoordinates?St(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.changed()},t.prototype.clone=function(){var e=new t(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e},t.prototype.closestPointXY=function(e,n,r,o){if(o<ka(this.getExtent(),e,n))return o;for(var a=this.flatCoordinates,s=this.stride,l=0,u=a.length;l<u;l+=s){var c=da(e,n,a[l],a[l+1]);if(c<o){o=c;for(var h=0;h<s;++h)r[h]=a[l+h];r.length=s}}return o},t.prototype.getCoordinates=function(){return mo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},t.prototype.getPoint=function(e){var n=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return e<0||n<=e?null:new Wi(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)},t.prototype.getPoints=function(){for(var e=this.flatCoordinates,n=this.layout,r=this.stride,o=[],a=0,s=e.length;a<s;a+=r){var l=new Wi(e.slice(a,a+r),n);o.push(l)}return o},t.prototype.getType=function(){return b.MULTI_POINT},t.prototype.intersectsExtent=function(e){for(var n=this.flatCoordinates,r=this.stride,o=0,a=n.length;o<a;o+=r){var s=n[o],l=n[o+1];if(ef(e,s,l))return!0}return!1},t.prototype.setCoordinates=function(e,n){this.setLayout(n,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Sh(this.flatCoordinates,0,e,this.stride),this.changed()},t}(Bo);const Ea=Q1;function Um(i,t,e,n){for(var r=[],o=pn(),a=0,s=e.length;a<s;++a){var l=e[a];o=tf(i,t,l[0],n),r.push((o[0]+o[2])/2,(o[1]+o[3])/2),t=l[l.length-1]}return r}var $1=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),ew=function(i){$1(t,i);function t(e,n,r){var o=i.call(this)||this;if(o.endss_=[],o.flatInteriorPointsRevision_=-1,o.flatInteriorPoints_=null,o.maxDelta_=-1,o.maxDeltaRevision_=-1,o.orientedRevision_=-1,o.orientedFlatCoordinates_=null,!r&&!Array.isArray(e[0])){for(var a=o.getLayout(),s=e,l=[],u=[],c=0,h=s.length;c<h;++c){var d=s[c];c===0&&(a=d.getLayout());for(var p=l.length,f=d.getEnds(),g=0,v=f.length;g<v;++g)f[g]+=p;St(l,d.getFlatCoordinates()),u.push(f)}n=a,e=l,r=u}return n!==void 0&&r?(o.setFlatCoordinates(n,e),o.endss_=r):o.setCoordinates(e,n),o}return t.prototype.appendPolygon=function(e){var n;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),n=e.getEnds().slice(),this.endss_.push();else{var r=this.flatCoordinates.length;St(this.flatCoordinates,e.getFlatCoordinates()),n=e.getEnds().slice();for(var o=0,a=n.length;o<a;++o)n[o]+=r}this.endss_.push(n),this.changed()},t.prototype.clone=function(){for(var e=this.endss_.length,n=new Array(e),r=0;r<e;++r)n[r]=this.endss_[r].slice();var o=new t(this.flatCoordinates.slice(),this.layout,n);return o.applyProperties(this),o},t.prototype.closestPointXY=function(e,n,r,o){return o<ka(this.getExtent(),e,n)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(lE(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),uE(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,n,r,o))},t.prototype.containsXY=function(e,n){return _E(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,n)},t.prototype.getArea=function(){return fE(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},t.prototype.getCoordinates=function(e){var n;return e!==void 0?(n=this.getOrientedFlatCoordinates().slice(),Cg(n,0,this.endss_,this.stride,e)):n=this.flatCoordinates,fp(n,0,this.endss_,this.stride)},t.prototype.getEndss=function(){return this.endss_},t.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var e=Um(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=Pm(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},t.prototype.getInteriorPoints=function(){return new Ea(this.getFlatInteriorPoints().slice(),De.XYM)},t.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var e=this.flatCoordinates;SE(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=Cg(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},t.prototype.getSimplifiedGeometryInternal=function(e){var n=[],r=[];return n.length=pE(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),n,0,r),new t(n,De.XY,r)},t.prototype.getPolygon=function(e){if(e<0||this.endss_.length<=e)return null;var n;if(e===0)n=0;else{var r=this.endss_[e-1];n=r[r.length-1]}var o=this.endss_[e].slice(),a=o[o.length-1];if(n!==0)for(var s=0,l=o.length;s<l;++s)o[s]-=n;return new zi(this.flatCoordinates.slice(n,a),this.layout,o)},t.prototype.getPolygons=function(){for(var e=this.layout,n=this.flatCoordinates,r=this.endss_,o=[],a=0,s=0,l=r.length;s<l;++s){var u=r[s].slice(),c=u[u.length-1];if(a!==0)for(var h=0,d=u.length;h<d;++h)u[h]-=a;var p=new zi(n.slice(a,c),e,u);o.push(p),a=c}return o},t.prototype.getType=function(){return b.MULTI_POLYGON},t.prototype.intersectsExtent=function(e){return EE(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)},t.prototype.setCoordinates=function(e,n){this.setLayout(n,e,3),this.flatCoordinates||(this.flatCoordinates=[]);var r=cE(this.flatCoordinates,0,e,this.stride,this.endss_);if(r.length===0)this.flatCoordinates.length=0;else{var o=r[r.length-1];this.flatCoordinates.length=o.length===0?0:o[o.length-1]}this.changed()},t}(Bo);const wa=ew;function tw(i,t,e,n,r){Bm(i,t,e||0,n||i.length-1,r||iw)}function Bm(i,t,e,n,r){for(;n>e;){if(n-e>600){var o=n-e+1,a=t-e+1,s=Math.log(o),l=.5*Math.exp(2*s/3),u=.5*Math.sqrt(s*l*(o-l)/o)*(a-o/2<0?-1:1),c=Math.max(e,Math.floor(t-a*l/o+u)),h=Math.min(n,Math.floor(t+(o-a)*l/o+u));Bm(i,t,c,h,r)}var d=i[t],p=e,f=n;for(ol(i,e,t),r(i[n],d)>0&&ol(i,e,n);p<f;){for(ol(i,p,f),p++,f--;r(i[p],d)<0;)p++;for(;r(i[f],d)>0;)f--}r(i[e],d)===0?ol(i,e,f):(f++,ol(i,f,n)),f<=t&&(e=f+1),t<=f&&(n=f-1)}}function ol(i,t,e){var n=i[t];i[t]=i[e],i[e]=n}function iw(i,t){return i<t?-1:i>t?1:0}let jm=class{constructor(t=9){this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(t){let e=this.data;const n=[];if(!ku(t,e))return n;const r=this.toBBox,o=[];for(;e;){for(let a=0;a<e.children.length;a++){const s=e.children[a],l=e.leaf?r(s):s;ku(t,l)&&(e.leaf?n.push(s):gd(t,l)?this._all(s,n):o.push(s))}e=o.pop()}return n}collides(t){let e=this.data;if(!ku(t,e))return!1;const n=[];for(;e;){for(let r=0;r<e.children.length;r++){const o=e.children[r],a=e.leaf?this.toBBox(o):o;if(ku(t,a)){if(e.leaf||gd(t,a))return!0;n.push(o)}}e=n.pop()}return!1}load(t){if(!(t&&t.length))return this;if(t.length<this._minEntries){for(let n=0;n<t.length;n++)this.insert(t[n]);return this}let e=this._build(t.slice(),0,t.length-1,0);if(!this.data.children.length)this.data=e;else if(this.data.height===e.height)this._splitRoot(this.data,e);else{if(this.data.height<e.height){const n=this.data;this.data=e,e=n}this._insert(e,this.data.height-e.height-1,!0)}return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=Ja([]),this}remove(t,e){if(!t)return this;let n=this.data;const r=this.toBBox(t),o=[],a=[];let s,l,u;for(;n||o.length;){if(n||(n=o.pop(),l=o[o.length-1],s=a.pop(),u=!0),n.leaf){const c=nw(t,n.children,e);if(c!==-1)return n.children.splice(c,1),o.push(n),this._condense(o),this}!u&&!n.leaf&&gd(n,r)?(o.push(n),a.push(s),s=0,l=n,n=n.children[0]):l?(s++,n=l.children[s],u=!1):n=null}return this}toBBox(t){return t}compareMinX(t,e){return t.minX-e.minX}compareMinY(t,e){return t.minY-e.minY}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,e){const n=[];for(;t;)t.leaf?e.push(...t.children):n.push(...t.children),t=n.pop();return e}_build(t,e,n,r){const o=n-e+1;let a=this._maxEntries,s;if(o<=a)return s=Ja(t.slice(e,n+1)),za(s,this.toBBox),s;r||(r=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,r-1))),s=Ja([]),s.leaf=!1,s.height=r;const l=Math.ceil(o/a),u=l*Math.ceil(Math.sqrt(a));Pg(t,e,n,u,this.compareMinX);for(let c=e;c<=n;c+=u){const h=Math.min(c+u-1,n);Pg(t,c,h,l,this.compareMinY);for(let d=c;d<=h;d+=l){const p=Math.min(d+l-1,h);s.children.push(this._build(t,d,p,r-1))}}return za(s,this.toBBox),s}_chooseSubtree(t,e,n,r){for(;r.push(e),!(e.leaf||r.length-1===n);){let o=1/0,a=1/0,s;for(let l=0;l<e.children.length;l++){const u=e.children[l],c=fd(u),h=aw(t,u)-c;h<a?(a=h,o=c<o?c:o,s=u):h===a&&c<o&&(o=c,s=u)}e=s||e.children[0]}return e}_insert(t,e,n){const r=n?t:this.toBBox(t),o=[],a=this._chooseSubtree(r,this.data,e,o);for(a.children.push(t),pl(a,r);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(r,o,e)}_split(t,e){const n=t[e],r=n.children.length,o=this._minEntries;this._chooseSplitAxis(n,o,r);const a=this._chooseSplitIndex(n,o,r),s=Ja(n.children.splice(a,n.children.length-a));s.height=n.height,s.leaf=n.leaf,za(n,this.toBBox),za(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)}_splitRoot(t,e){this.data=Ja([t,e]),this.data.height=t.height+1,this.data.leaf=!1,za(this.data,this.toBBox)}_chooseSplitIndex(t,e,n){let r,o=1/0,a=1/0;for(let s=e;s<=n-e;s++){const l=dl(t,0,s,this.toBBox),u=dl(t,s,n,this.toBBox),c=sw(l,u),h=fd(l)+fd(u);c<o?(o=c,r=s,a=h<a?h:a):c===o&&h<a&&(a=h,r=s)}return r||n-e}_chooseSplitAxis(t,e,n){const r=t.leaf?this.compareMinX:rw,o=t.leaf?this.compareMinY:ow,a=this._allDistMargin(t,e,n,r),s=this._allDistMargin(t,e,n,o);a<s&&t.children.sort(r)}_allDistMargin(t,e,n,r){t.children.sort(r);const o=this.toBBox,a=dl(t,0,e,o),s=dl(t,n-e,n,o);let l=Gu(a)+Gu(s);for(let u=e;u<n-e;u++){const c=t.children[u];pl(a,t.leaf?o(c):c),l+=Gu(a)}for(let u=n-e-1;u>=e;u--){const c=t.children[u];pl(s,t.leaf?o(c):c),l+=Gu(s)}return l}_adjustParentBBoxes(t,e,n){for(let r=n;r>=0;r--)pl(e[r],t)}_condense(t){for(let e=t.length-1,n;e>=0;e--)t[e].children.length===0?e>0?(n=t[e-1].children,n.splice(n.indexOf(t[e]),1)):this.clear():za(t[e],this.toBBox)}};function nw(i,t,e){if(!e)return t.indexOf(i);for(let n=0;n<t.length;n++)if(e(i,t[n]))return n;return-1}function za(i,t){dl(i,0,i.children.length,t,i)}function dl(i,t,e,n,r){r||(r=Ja(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let o=t;o<e;o++){const a=i.children[o];pl(r,i.leaf?n(a):a)}return r}function pl(i,t){return i.minX=Math.min(i.minX,t.minX),i.minY=Math.min(i.minY,t.minY),i.maxX=Math.max(i.maxX,t.maxX),i.maxY=Math.max(i.maxY,t.maxY),i}function rw(i,t){return i.minX-t.minX}function ow(i,t){return i.minY-t.minY}function fd(i){return(i.maxX-i.minX)*(i.maxY-i.minY)}function Gu(i){return i.maxX-i.minX+(i.maxY-i.minY)}function aw(i,t){return(Math.max(t.maxX,i.maxX)-Math.min(t.minX,i.minX))*(Math.max(t.maxY,i.maxY)-Math.min(t.minY,i.minY))}function sw(i,t){const e=Math.max(i.minX,t.minX),n=Math.max(i.minY,t.minY),r=Math.min(i.maxX,t.maxX),o=Math.min(i.maxY,t.maxY);return Math.max(0,r-e)*Math.max(0,o-n)}function gd(i,t){return i.minX<=t.minX&&i.minY<=t.minY&&t.maxX<=i.maxX&&t.maxY<=i.maxY}function ku(i,t){return t.minX<=i.maxX&&t.minY<=i.maxY&&t.maxX>=i.minX&&t.maxY>=i.minY}function Ja(i){return{children:i,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Pg(i,t,e,n,r){const o=[t,e];for(;o.length;){if(e=o.pop(),t=o.pop(),e-t<=n)continue;const a=t+Math.ceil((e-t)/n/2)*n;tw(i,a,t,e,r),o.push(t,a,a,e)}}const ke={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};var lw=function(){function i(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=Bi(t.scale),this.displacement_=t.displacement}return i.prototype.clone=function(){var t=this.getScale();return new i({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()})},i.prototype.getOpacity=function(){return this.opacity_},i.prototype.getRotateWithView=function(){return this.rotateWithView_},i.prototype.getRotation=function(){return this.rotation_},i.prototype.getScale=function(){return this.scale_},i.prototype.getScaleArray=function(){return this.scaleArray_},i.prototype.getDisplacement=function(){return this.displacement_},i.prototype.getAnchor=function(){return we()},i.prototype.getImage=function(t){return we()},i.prototype.getHitDetectionImage=function(){return we()},i.prototype.getPixelRatio=function(t){return 1},i.prototype.getImageState=function(){return we()},i.prototype.getImageSize=function(){return we()},i.prototype.getOrigin=function(){return we()},i.prototype.getSize=function(){return we()},i.prototype.setOpacity=function(t){this.opacity_=t},i.prototype.setRotateWithView=function(t){this.rotateWithView_=t},i.prototype.setRotation=function(t){this.rotation_=t},i.prototype.setScale=function(t){this.scale_=t,this.scaleArray_=Bi(t)},i.prototype.listenImageChange=function(t){we()},i.prototype.load=function(){we()},i.prototype.unlistenImageChange=function(t){we()},i}();const Pc=lw;function mr(i){return Array.isArray(i)?nm(i):i}var uw=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),cw=function(i){uw(t,i);function t(e){var n=this,r=e.rotateWithView!==void 0?e.rotateWithView:!1;return n=i.call(this,{opacity:1,rotateWithView:r,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0]})||this,n.canvas_=void 0,n.hitDetectionCanvas_=null,n.fill_=e.fill!==void 0?e.fill:null,n.origin_=[0,0],n.points_=e.points,n.radius_=e.radius!==void 0?e.radius:e.radius1,n.radius2_=e.radius2,n.angle_=e.angle!==void 0?e.angle:0,n.stroke_=e.stroke!==void 0?e.stroke:null,n.anchor_=null,n.size_=null,n.renderOptions_=null,n.render(),n}return t.prototype.clone=function(){var e=this.getScale(),n=new t({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice()});return n.setOpacity(this.getOpacity()),n},t.prototype.getAnchor=function(){return this.anchor_},t.prototype.getAngle=function(){return this.angle_},t.prototype.getFill=function(){return this.fill_},t.prototype.getHitDetectionImage=function(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_},t.prototype.getImage=function(e){var n=this.canvas_[e];if(!n){var r=this.renderOptions_,o=Mn(r.size*e,r.size*e);this.draw_(r,o,e),n=o.canvas,this.canvas_[e]=n}return n},t.prototype.getPixelRatio=function(e){return e},t.prototype.getImageSize=function(){return this.size_},t.prototype.getImageState=function(){return ke.LOADED},t.prototype.getOrigin=function(){return this.origin_},t.prototype.getPoints=function(){return this.points_},t.prototype.getRadius=function(){return this.radius_},t.prototype.getRadius2=function(){return this.radius2_},t.prototype.getSize=function(){return this.size_},t.prototype.getStroke=function(){return this.stroke_},t.prototype.listenImageChange=function(e){},t.prototype.load=function(){},t.prototype.unlistenImageChange=function(e){},t.prototype.calculateLineJoinSize_=function(e,n,r){if(n===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return n;var o=this.radius_,a=this.radius2_===void 0?o:this.radius2_;if(o<a){var s=o;o=a,a=s}var l=this.radius2_===void 0?this.points_:this.points_*2,u=2*Math.PI/l,c=a*Math.sin(u),h=Math.sqrt(a*a-c*c),d=o-h,p=Math.sqrt(c*c+d*d),f=p/c;if(e==="miter"&&f<=r)return f*n;var g=n/2/f,v=n/2*(d/p),y=Math.sqrt((o+g)*(o+g)+v*v),m=y-o;if(this.radius2_===void 0||e==="bevel")return m*2;var A=o*Math.sin(u),_=Math.sqrt(o*o-A*A),C=a-_,I=Math.sqrt(A*A+C*C),E=I/A;if(E<=r){var w=E*n/2-a-o;return 2*Math.max(m,w)}return m*2},t.prototype.createRenderOptions=function(){var e=ws,n=0,r=null,o=0,a,s=0;this.stroke_&&(a=this.stroke_.getColor(),a===null&&(a=jl),a=mr(a),s=this.stroke_.getWidth(),s===void 0&&(s=Vl),r=this.stroke_.getLineDash(),o=this.stroke_.getLineDashOffset(),e=this.stroke_.getLineJoin(),e===void 0&&(e=ws),n=this.stroke_.getMiterLimit(),n===void 0&&(n=Bl));var l=this.calculateLineJoinSize_(e,s,n),u=Math.max(this.radius_,this.radius2_||0),c=Math.ceil(2*u+l);return{strokeStyle:a,strokeWidth:s,size:c,lineDash:r,lineDashOffset:o,lineJoin:e,miterLimit:n}},t.prototype.render=function(){this.renderOptions_=this.createRenderOptions();var e=this.renderOptions_.size,n=this.getDisplacement();this.canvas_={},this.anchor_=[e/2-n[0],e/2+n[1]],this.size_=[e,e]},t.prototype.draw_=function(e,n,r){if(n.scale(r,r),n.translate(e.size/2,e.size/2),this.createPath_(n),this.fill_){var o=this.fill_.getColor();o===null&&(o=Yr),n.fillStyle=mr(o),n.fill()}this.stroke_&&(n.strokeStyle=e.strokeStyle,n.lineWidth=e.strokeWidth,n.setLineDash&&e.lineDash&&(n.setLineDash(e.lineDash),n.lineDashOffset=e.lineDashOffset),n.lineJoin=e.lineJoin,n.miterLimit=e.miterLimit,n.stroke())},t.prototype.createHitDetectionCanvas_=function(e){if(this.fill_){var n=this.fill_.getColor(),r=0;if(typeof n=="string"&&(n=af(n)),n===null?r=1:Array.isArray(n)&&(r=n.length===4?n[3]:1),r===0){var o=Mn(e.size,e.size);this.hitDetectionCanvas_=o.canvas,this.drawHitDetectionCanvas_(e,o)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))},t.prototype.createPath_=function(e){var n=this.points_,r=this.radius_;if(n===1/0)e.arc(0,0,r,0,2*Math.PI);else{var o=this.radius2_===void 0?r:this.radius2_;this.radius2_!==void 0&&(n*=2);for(var a=this.angle_-Math.PI/2,s=2*Math.PI/n,l=0;l<n;l++){var u=a+l*s,c=l%2===0?r:o;e.lineTo(c*Math.cos(u),c*Math.sin(u))}e.closePath()}},t.prototype.drawHitDetectionCanvas_=function(e,n){n.translate(e.size/2,e.size/2),this.createPath_(n),n.fillStyle=Yr,n.fill(),this.stroke_&&(n.strokeStyle=e.strokeStyle,n.lineWidth=e.strokeWidth,e.lineDash&&(n.setLineDash(e.lineDash),n.lineDashOffset=e.lineDashOffset),n.lineJoin=e.lineJoin,n.miterLimit=e.miterLimit,n.stroke())},t}(Pc);const hw=cw;var dw=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),pw=function(i){dw(t,i);function t(e){var n=this,r=e||{};return n=i.call(this,{points:1/0,fill:r.fill,radius:r.radius,stroke:r.stroke,scale:r.scale!==void 0?r.scale:1,rotation:r.rotation!==void 0?r.rotation:0,rotateWithView:r.rotateWithView!==void 0?r.rotateWithView:!1,displacement:r.displacement!==void 0?r.displacement:[0,0]})||this,n}return t.prototype.clone=function(){var e=this.getScale(),n=new t({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()});return n.setOpacity(this.getOpacity()),n},t.prototype.setRadius=function(e){this.radius_=e,this.render()},t}(hw);const gi=pw;var fw=function(){function i(t){var e=t||{};this.color_=e.color!==void 0?e.color:null}return i.prototype.clone=function(){var t=this.getColor();return new i({color:Array.isArray(t)?t.slice():t||void 0})},i.prototype.getColor=function(){return this.color_},i.prototype.setColor=function(t){this.color_=t},i}();const Ge=fw;var gw=function(){function i(t){var e=t||{};this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}return i.prototype.clone=function(){var t=this.getColor();return new i({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},i.prototype.getColor=function(){return this.color_},i.prototype.getLineCap=function(){return this.lineCap_},i.prototype.getLineDash=function(){return this.lineDash_},i.prototype.getLineDashOffset=function(){return this.lineDashOffset_},i.prototype.getLineJoin=function(){return this.lineJoin_},i.prototype.getMiterLimit=function(){return this.miterLimit_},i.prototype.getWidth=function(){return this.width_},i.prototype.setColor=function(t){this.color_=t},i.prototype.setLineCap=function(t){this.lineCap_=t},i.prototype.setLineDash=function(t){this.lineDash_=t},i.prototype.setLineDashOffset=function(t){this.lineDashOffset_=t},i.prototype.setLineJoin=function(t){this.lineJoin_=t},i.prototype.setMiterLimit=function(t){this.miterLimit_=t},i.prototype.setWidth=function(t){this.width_=t},i}();const Me=gw;var ns=function(){function i(t){var e=t||{};this.geometry_=null,this.geometryFunction_=xg,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}return i.prototype.clone=function(){var t=this.getGeometry();return t&&typeof t=="object"&&(t=t.clone()),new i({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},i.prototype.getRenderer=function(){return this.renderer_},i.prototype.setRenderer=function(t){this.renderer_=t},i.prototype.setHitDetectionRenderer=function(t){this.hitDetectionRenderer_=t},i.prototype.getHitDetectionRenderer=function(){return this.hitDetectionRenderer_},i.prototype.getGeometry=function(){return this.geometry_},i.prototype.getGeometryFunction=function(){return this.geometryFunction_},i.prototype.getFill=function(){return this.fill_},i.prototype.setFill=function(t){this.fill_=t},i.prototype.getImage=function(){return this.image_},i.prototype.setImage=function(t){this.image_=t},i.prototype.getStroke=function(){return this.stroke_},i.prototype.setStroke=function(t){this.stroke_=t},i.prototype.getText=function(){return this.text_},i.prototype.setText=function(t){this.text_=t},i.prototype.getZIndex=function(){return this.zIndex_},i.prototype.setGeometry=function(t){typeof t=="function"?this.geometryFunction_=t:typeof t=="string"?this.geometryFunction_=function(e){return e.get(t)}:t?t!==void 0&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=xg,this.geometry_=t},i.prototype.setZIndex=function(t){this.zIndex_=t},i}();function vw(i){var t;if(typeof i=="function")t=i;else{var e;if(Array.isArray(i))e=i;else{be(typeof i.getZIndex=="function",41);var n=i;e=[n]}t=function(){return e}}return t}var vd=null;function mw(i,t){if(!vd){var e=new Ge({color:"rgba(255,255,255,0.4)"}),n=new Me({color:"#3399CC",width:1.25});vd=[new ns({image:new gi({fill:e,stroke:n,radius:5}),fill:e,stroke:n})]}return vd}function Df(){var i={},t=[255,255,255,1],e=[0,153,255,1],n=3;return i[b.POLYGON]=[new ns({fill:new Ge({color:[255,255,255,.5]})})],i[b.MULTI_POLYGON]=i[b.POLYGON],i[b.LINE_STRING]=[new ns({stroke:new Me({color:t,width:n+2})}),new ns({stroke:new Me({color:e,width:n})})],i[b.MULTI_LINE_STRING]=i[b.LINE_STRING],i[b.CIRCLE]=i[b.POLYGON].concat(i[b.LINE_STRING]),i[b.POINT]=[new ns({image:new gi({radius:n*2,fill:new Ge({color:e}),stroke:new Me({color:t,width:n/2})}),zIndex:1/0})],i[b.MULTI_POINT]=i[b.POINT],i[b.GEOMETRY_COLLECTION]=i[b.POLYGON].concat(i[b.LINE_STRING],i[b.POINT]),i}function xg(i){return i.getGeometry()}const de=ns;var yw=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Mg={RENDER_ORDER:"renderOrder"},Aw=function(i){yw(t,i);function t(e){var n=this,r=e||{},o=dt({},r);return delete o.style,delete o.renderBuffer,delete o.updateWhileAnimating,delete o.updateWhileInteracting,n=i.call(this,o)||this,n.declutter_=r.declutter!==void 0?r.declutter:!1,n.renderBuffer_=r.renderBuffer!==void 0?r.renderBuffer:100,n.style_=null,n.styleFunction_=void 0,n.setStyle(r.style),n.updateWhileAnimating_=r.updateWhileAnimating!==void 0?r.updateWhileAnimating:!1,n.updateWhileInteracting_=r.updateWhileInteracting!==void 0?r.updateWhileInteracting:!1,n}return t.prototype.getDeclutter=function(){return this.declutter_},t.prototype.getFeatures=function(e){return i.prototype.getFeatures.call(this,e)},t.prototype.getRenderBuffer=function(){return this.renderBuffer_},t.prototype.getRenderOrder=function(){return this.get(Mg.RENDER_ORDER)},t.prototype.getStyle=function(){return this.style_},t.prototype.getStyleFunction=function(){return this.styleFunction_},t.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},t.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},t.prototype.renderDeclutter=function(e){e.declutterTree||(e.declutterTree=new jm(9)),this.getRenderer().renderDeclutter(e)},t.prototype.setRenderOrder=function(e){this.set(Mg.RENDER_ORDER,e)},t.prototype.setStyle=function(e){this.style_=e!==void 0?e:mw,this.styleFunction_=e===null?void 0:vw(this.style_),this.changed()},t}(sm);const zm=Aw;var du={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Du=[du.FILL],yo=[du.STROKE],ua=[du.BEGIN_PATH],Tg=[du.CLOSE_PATH];const xe=du;var _w=function(){function i(){}return i.prototype.drawCustom=function(t,e,n,r){},i.prototype.drawGeometry=function(t){},i.prototype.setStyle=function(t){},i.prototype.drawCircle=function(t,e){},i.prototype.drawFeature=function(t,e){},i.prototype.drawGeometryCollection=function(t,e){},i.prototype.drawLineString=function(t,e){},i.prototype.drawMultiLineString=function(t,e){},i.prototype.drawMultiPoint=function(t,e){},i.prototype.drawMultiPolygon=function(t,e){},i.prototype.drawPoint=function(t,e){},i.prototype.drawPolygon=function(t,e){},i.prototype.drawText=function(t,e){},i.prototype.setFillStrokeStyle=function(t,e){},i.prototype.setImageStyle=function(t,e){},i.prototype.setTextStyle=function(t,e){},i}();const Vm=_w;var Cw=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Iw=function(i){Cw(t,i);function t(e,n,r,o){var a=i.call(this)||this;return a.tolerance=e,a.maxExtent=n,a.pixelRatio=o,a.maxLineWidth=0,a.resolution=r,a.beginGeometryInstruction1_=null,a.beginGeometryInstruction2_=null,a.bufferedMaxExtent_=null,a.instructions=[],a.coordinates=[],a.tmpCoordinate_=[],a.hitDetectionInstructions=[],a.state={},a}return t.prototype.applyPixelRatio=function(e){var n=this.pixelRatio;return n==1?e:e.map(function(r){return r*n})},t.prototype.appendFlatPointCoordinates=function(e,n){for(var r=this.getBufferedMaxExtent(),o=this.tmpCoordinate_,a=this.coordinates,s=a.length,l=0,u=e.length;l<u;l+=n)o[0]=e[l],o[1]=e[l+1],mh(r,o)&&(a[s++]=o[0],a[s++]=o[1]);return s},t.prototype.appendFlatLineCoordinates=function(e,n,r,o,a,s){var l=this.coordinates,u=l.length,c=this.getBufferedMaxExtent();s&&(n+=o);var h=e[n],d=e[n+1],p=this.tmpCoordinate_,f=!0,g,v,y;for(g=n+o;g<r;g+=o)p[0]=e[g],p[1]=e[g+1],y=ap(c,p),y!==v?(f&&(l[u++]=h,l[u++]=d,f=!1),l[u++]=p[0],l[u++]=p[1]):y===_i.INTERSECTING?(l[u++]=p[0],l[u++]=p[1],f=!1):f=!0,h=p[0],d=p[1],v=y;return(a&&f||g===n+o)&&(l[u++]=h,l[u++]=d),u},t.prototype.drawCustomCoordinates_=function(e,n,r,o,a){for(var s=0,l=r.length;s<l;++s){var u=r[s],c=this.appendFlatLineCoordinates(e,n,u,o,!1,!1);a.push(c),n=u}return n},t.prototype.drawCustom=function(e,n,r,o){this.beginGeometry(e,n);var a=e.getType(),s=e.getStride(),l=this.coordinates.length,u,c,h,d,p;switch(a){case b.MULTI_POLYGON:u=e.getOrientedFlatCoordinates(),d=[];var f=e.getEndss();p=0;for(var g=0,v=f.length;g<v;++g){var y=[];p=this.drawCustomCoordinates_(u,p,f[g],s,y),d.push(y)}this.instructions.push([xe.CUSTOM,l,d,e,r,fp]),this.hitDetectionInstructions.push([xe.CUSTOM,l,d,e,o||r,fp]);break;case b.POLYGON:case b.MULTI_LINE_STRING:h=[],u=a==b.POLYGON?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),p=this.drawCustomCoordinates_(u,0,e.getEnds(),s,h),this.instructions.push([xe.CUSTOM,l,h,e,r,Hl]),this.hitDetectionInstructions.push([xe.CUSTOM,l,h,e,o||r,Hl]);break;case b.LINE_STRING:case b.CIRCLE:u=e.getFlatCoordinates(),c=this.appendFlatLineCoordinates(u,0,u.length,s,!1,!1),this.instructions.push([xe.CUSTOM,l,c,e,r,mo]),this.hitDetectionInstructions.push([xe.CUSTOM,l,c,e,o||r,mo]);break;case b.MULTI_POINT:u=e.getFlatCoordinates(),c=this.appendFlatPointCoordinates(u,s),c>l&&(this.instructions.push([xe.CUSTOM,l,c,e,r,mo]),this.hitDetectionInstructions.push([xe.CUSTOM,l,c,e,o||r,mo]));break;case b.POINT:u=e.getFlatCoordinates(),this.coordinates.push(u[0],u[1]),c=this.coordinates.length,this.instructions.push([xe.CUSTOM,l,c,e,r]),this.hitDetectionInstructions.push([xe.CUSTOM,l,c,e,o||r]);break}this.endGeometry(n)},t.prototype.beginGeometry=function(e,n){this.beginGeometryInstruction1_=[xe.BEGIN_GEOMETRY,n,0,e],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[xe.BEGIN_GEOMETRY,n,0,e],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},t.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}},t.prototype.reverseHitDetectionInstructions=function(){var e=this.hitDetectionInstructions;e.reverse();var n,r=e.length,o,a,s=-1;for(n=0;n<r;++n)o=e[n],a=o[0],a==xe.END_GEOMETRY?s=n:a==xe.BEGIN_GEOMETRY&&(o[2]=n,rC(this.hitDetectionInstructions,s,n),s=-1)},t.prototype.setFillStrokeStyle=function(e,n){var r=this.state;if(e){var o=e.getColor();r.fillStyle=mr(o||Yr)}else r.fillStyle=void 0;if(n){var a=n.getColor();r.strokeStyle=mr(a||jl);var s=n.getLineCap();r.lineCap=s!==void 0?s:_c;var l=n.getLineDash();r.lineDash=l?l.slice():Fl;var u=n.getLineDashOffset();r.lineDashOffset=u||Ul;var c=n.getLineJoin();r.lineJoin=c!==void 0?c:ws;var h=n.getWidth();r.lineWidth=h!==void 0?h:Vl;var d=n.getMiterLimit();r.miterLimit=d!==void 0?d:Bl,r.lineWidth>this.maxLineWidth&&(this.maxLineWidth=r.lineWidth,this.bufferedMaxExtent_=null)}else r.strokeStyle=void 0,r.lineCap=void 0,r.lineDash=null,r.lineDashOffset=void 0,r.lineJoin=void 0,r.lineWidth=void 0,r.miterLimit=void 0},t.prototype.createFill=function(e){var n=e.fillStyle,r=[xe.SET_FILL_STYLE,n];return typeof n!="string"&&r.push(!0),r},t.prototype.applyStroke=function(e){this.instructions.push(this.createStroke(e))},t.prototype.createStroke=function(e){return[xe.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]},t.prototype.updateFillStyle=function(e,n){var r=e.fillStyle;(typeof r!="string"||e.currentFillStyle!=r)&&(r!==void 0&&this.instructions.push(n.call(this,e)),e.currentFillStyle=r)},t.prototype.updateStrokeStyle=function(e,n){var r=e.strokeStyle,o=e.lineCap,a=e.lineDash,s=e.lineDashOffset,l=e.lineJoin,u=e.lineWidth,c=e.miterLimit;(e.currentStrokeStyle!=r||e.currentLineCap!=o||a!=e.currentLineDash&&!Ga(e.currentLineDash,a)||e.currentLineDashOffset!=s||e.currentLineJoin!=l||e.currentLineWidth!=u||e.currentMiterLimit!=c)&&(r!==void 0&&n.call(this,e),e.currentStrokeStyle=r,e.currentLineCap=o,e.currentLineDash=a,e.currentLineDashOffset=s,e.currentLineJoin=l,e.currentLineWidth=u,e.currentMiterLimit=c)},t.prototype.endGeometry=function(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var n=[xe.END_GEOMETRY,e];this.instructions.push(n),this.hitDetectionInstructions.push(n)},t.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=$v(this.maxExtent),this.maxLineWidth>0)){var e=this.resolution*(this.maxLineWidth+1)/2;Jn(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_},t}(Vm);const pu=Iw;var Ew=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),ww=function(i){Ew(t,i);function t(e,n,r,o){var a=i.call(this,e,n,r,o)||this;return a.hitDetectionImage_=null,a.image_=null,a.imagePixelRatio_=void 0,a.anchorX_=void 0,a.anchorY_=void 0,a.height_=void 0,a.opacity_=void 0,a.originX_=void 0,a.originY_=void 0,a.rotateWithView_=void 0,a.rotation_=void 0,a.scale_=void 0,a.width_=void 0,a.declutterImageWithText_=void 0,a}return t.prototype.drawPoint=function(e,n){if(this.image_){this.beginGeometry(e,n);var r=e.getFlatCoordinates(),o=e.getStride(),a=this.coordinates.length,s=this.appendFlatPointCoordinates(r,o);this.instructions.push([xe.DRAW_IMAGE,a,s,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterImageWithText_]),this.hitDetectionInstructions.push([xe.DRAW_IMAGE,a,s,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterImageWithText_]),this.endGeometry(n)}},t.prototype.drawMultiPoint=function(e,n){if(this.image_){this.beginGeometry(e,n);var r=e.getFlatCoordinates(),o=e.getStride(),a=this.coordinates.length,s=this.appendFlatPointCoordinates(r,o);this.instructions.push([xe.DRAW_IMAGE,a,s,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterImageWithText_]),this.hitDetectionInstructions.push([xe.DRAW_IMAGE,a,s,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterImageWithText_]),this.endGeometry(n)}},t.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,i.prototype.finish.call(this)},t.prototype.setImageStyle=function(e,n){var r=e.getAnchor(),o=e.getSize(),a=e.getHitDetectionImage(),s=e.getImage(this.pixelRatio),l=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=r[0],this.anchorY_=r[1],this.hitDetectionImage_=a,this.image_=s,this.height_=o[1],this.opacity_=e.getOpacity(),this.originX_=l[0]*this.imagePixelRatio_,this.originY_=l[1]*this.imagePixelRatio_,this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=o[0],this.declutterImageWithText_=n},t}(pu);const Sw=ww;var Pw=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),xw=function(i){Pw(t,i);function t(e,n,r,o){return i.call(this,e,n,r,o)||this}return t.prototype.drawFlatCoordinates_=function(e,n,r,o){var a=this.coordinates.length,s=this.appendFlatLineCoordinates(e,n,r,o,!1,!1),l=[xe.MOVE_TO_LINE_TO,a,s];return this.instructions.push(l),this.hitDetectionInstructions.push(l),r},t.prototype.drawLineString=function(e,n){var r=this.state,o=r.strokeStyle,a=r.lineWidth;if(!(o===void 0||a===void 0)){this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(e,n),this.hitDetectionInstructions.push([xe.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,Fl,Ul],ua);var s=e.getFlatCoordinates(),l=e.getStride();this.drawFlatCoordinates_(s,0,s.length,l),this.hitDetectionInstructions.push(yo),this.endGeometry(n)}},t.prototype.drawMultiLineString=function(e,n){var r=this.state,o=r.strokeStyle,a=r.lineWidth;if(!(o===void 0||a===void 0)){this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(e,n),this.hitDetectionInstructions.push([xe.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset],ua);for(var s=e.getEnds(),l=e.getFlatCoordinates(),u=e.getStride(),c=0,h=0,d=s.length;h<d;++h)c=this.drawFlatCoordinates_(l,c,s[h],u);this.hitDetectionInstructions.push(yo),this.endGeometry(n)}},t.prototype.finish=function(){var e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(yo),this.reverseHitDetectionInstructions(),this.state=null,i.prototype.finish.call(this)},t.prototype.applyStroke=function(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(yo),e.lastStroke=this.coordinates.length),e.lastStroke=0,i.prototype.applyStroke.call(this,e),this.instructions.push(ua)},t}(pu);const Mw=xw;var Tw=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),bw=function(i){Tw(t,i);function t(e,n,r,o){return i.call(this,e,n,r,o)||this}return t.prototype.drawFlatCoordinatess_=function(e,n,r,o){var a=this.state,s=a.fillStyle!==void 0,l=a.strokeStyle!==void 0,u=r.length;this.instructions.push(ua),this.hitDetectionInstructions.push(ua);for(var c=0;c<u;++c){var h=r[c],d=this.coordinates.length,p=this.appendFlatLineCoordinates(e,n,h,o,!0,!l),f=[xe.MOVE_TO_LINE_TO,d,p];this.instructions.push(f),this.hitDetectionInstructions.push(f),l&&(this.instructions.push(Tg),this.hitDetectionInstructions.push(Tg)),n=h}return s&&(this.instructions.push(Du),this.hitDetectionInstructions.push(Du)),l&&(this.instructions.push(yo),this.hitDetectionInstructions.push(yo)),n},t.prototype.drawCircle=function(e,n){var r=this.state,o=r.fillStyle,a=r.strokeStyle;if(!(o===void 0&&a===void 0)){this.setFillStrokeStyles_(),this.beginGeometry(e,n),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([xe.SET_FILL_STYLE,Yr]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([xe.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset]);var s=e.getFlatCoordinates(),l=e.getStride(),u=this.coordinates.length;this.appendFlatLineCoordinates(s,0,s.length,l,!1,!1);var c=[xe.CIRCLE,u];this.instructions.push(ua,c),this.hitDetectionInstructions.push(ua,c),r.fillStyle!==void 0&&(this.instructions.push(Du),this.hitDetectionInstructions.push(Du)),r.strokeStyle!==void 0&&(this.instructions.push(yo),this.hitDetectionInstructions.push(yo)),this.endGeometry(n)}},t.prototype.drawPolygon=function(e,n){var r=this.state,o=r.fillStyle,a=r.strokeStyle;if(!(o===void 0&&a===void 0)){this.setFillStrokeStyles_(),this.beginGeometry(e,n),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([xe.SET_FILL_STYLE,Yr]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([xe.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset]);var s=e.getEnds(),l=e.getOrientedFlatCoordinates(),u=e.getStride();this.drawFlatCoordinatess_(l,0,s,u),this.endGeometry(n)}},t.prototype.drawMultiPolygon=function(e,n){var r=this.state,o=r.fillStyle,a=r.strokeStyle;if(!(o===void 0&&a===void 0)){this.setFillStrokeStyles_(),this.beginGeometry(e,n),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([xe.SET_FILL_STYLE,Yr]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([xe.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset]);for(var s=e.getEndss(),l=e.getOrientedFlatCoordinates(),u=e.getStride(),c=0,h=0,d=s.length;h<d;++h)c=this.drawFlatCoordinatess_(l,c,s[h],u);this.endGeometry(n)}},t.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var e=this.tolerance;if(e!==0)for(var n=this.coordinates,r=0,o=n.length;r<o;++r)n[r]=ra(n[r],e);return i.prototype.finish.call(this)},t.prototype.setFillStrokeStyles_=function(){var e=this.state,n=e.fillStyle;n!==void 0&&this.updateFillStyle(e,this.createFill),e.strokeStyle!==void 0&&this.updateStrokeStyle(e,this.applyStroke)},t}(pu);const bg=bw,Wm={POINT:"point",LINE:"line"};function Rw(i,t,e,n,r){var o=e,a=e,s=0,l=0,u=e,c,h,d,p,f,g,v,y,m,A;for(h=e;h<n;h+=r){var _=t[h],C=t[h+1];f!==void 0&&(m=_-f,A=C-g,p=Math.sqrt(m*m+A*A),v!==void 0&&(l+=d,c=Math.acos((v*m+y*A)/(d*p)),c>i&&(l>s&&(s=l,o=u,a=h),l=0,u=h-r)),d=p,v=m,y=A),f=_,g=C}return l+=p,l>s?[u,h]:[o,a]}var Ow=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),xc={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},Lw=function(i){Ow(t,i);function t(e,n,r,o){var a=i.call(this,e,n,r,o)||this;return a.labels_=null,a.text_="",a.textOffsetX_=0,a.textOffsetY_=0,a.textRotateWithView_=void 0,a.textRotation_=0,a.textFillState_=null,a.fillStates={},a.textStrokeState_=null,a.strokeStates={},a.textState_={},a.textStates={},a.textKey_="",a.fillKey_="",a.strokeKey_="",a.declutterImageWithText_=void 0,a}return t.prototype.finish=function(){var e=i.prototype.finish.call(this);return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e},t.prototype.drawText=function(e,n){var r=this.textFillState_,o=this.textStrokeState_,a=this.textState_;if(!(this.text_===""||!a||!r&&!o)){var s=this.coordinates,l=s.length,u=e.getType(),c=null,h=e.getStride();if(a.placement===Wm.LINE&&(u==b.LINE_STRING||u==b.MULTI_LINE_STRING||u==b.POLYGON||u==b.MULTI_POLYGON)){if(!Vt(this.getBufferedMaxExtent(),e.getExtent()))return;var d=void 0;if(c=e.getFlatCoordinates(),u==b.LINE_STRING)d=[c.length];else if(u==b.MULTI_LINE_STRING)d=e.getEnds();else if(u==b.POLYGON)d=e.getEnds().slice(0,1);else if(u==b.MULTI_POLYGON){var p=e.getEndss();d=[];for(var f=0,g=p.length;f<g;++f)d.push(p[f][0])}this.beginGeometry(e,n);for(var v=a.textAlign,y=0,m=void 0,A=0,_=d.length;A<_;++A){if(v==null){var C=Rw(a.maxAngle,c,y,d[A],h);y=C[0],m=C[1]}else m=d[A];for(var f=y;f<m;f+=h)s.push(c[f],c[f+1]);var I=s.length;y=d[A],this.drawChars_(l,I),l=I}this.endGeometry(n)}else{var E=a.overflow?null:[];switch(u){case b.POINT:case b.MULTI_POINT:c=e.getFlatCoordinates();break;case b.LINE_STRING:c=e.getFlatMidpoint();break;case b.CIRCLE:c=e.getCenter();break;case b.MULTI_LINE_STRING:c=e.getFlatMidpoints(),h=2;break;case b.POLYGON:c=e.getFlatInteriorPoint(),a.overflow||E.push(c[2]/this.resolution),h=3;break;case b.MULTI_POLYGON:var w=e.getFlatInteriorPoints();c=[];for(var f=0,g=w.length;f<g;f+=3)a.overflow||E.push(w[f+2]/this.resolution),c.push(w[f],w[f+1]);if(c.length===0)return;h=2;break}var I=this.appendFlatPointCoordinates(c,h);if(I===l)return;if(E&&(I-l)/2!==c.length/h){var S=l/2;E=E.filter(function(z,F){var O=s[(S+F)*2]===c[F*h]&&s[(S+F)*2+1]===c[F*h+1];return O||--S,O})}this.saveTextStates_(),(a.backgroundFill||a.backgroundStroke)&&(this.setFillStrokeStyle(a.backgroundFill,a.backgroundStroke),a.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),a.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e,n);var x=a.padding;if(x!=sa&&(a.scale[0]<0||a.scale[1]<0)){var T=a.padding[0],L=a.padding[1],G=a.padding[2],N=a.padding[3];a.scale[0]<0&&(L=-L,N=-N),a.scale[1]<0&&(T=-T,G=-G),x=[T,L,G,N]}var B=this.pixelRatio;this.instructions.push([xe.DRAW_IMAGE,l,I,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterImageWithText_,x==sa?sa:x.map(function(z){return z*B}),!!a.backgroundFill,!!a.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,E]);var U=1/B;this.hitDetectionInstructions.push([xe.DRAW_IMAGE,l,I,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[U,U],NaN,this.declutterImageWithText_,x,!!a.backgroundFill,!!a.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,E]),this.endGeometry(n)}}},t.prototype.saveTextStates_=function(){var e=this.textStrokeState_,n=this.textState_,r=this.textFillState_,o=this.strokeKey_;e&&(o in this.strokeStates||(this.strokeStates[o]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));var a=this.textKey_;a in this.textStates||(this.textStates[a]={font:n.font,textAlign:n.textAlign||zl,textBaseline:n.textBaseline||Cc,scale:n.scale});var s=this.fillKey_;r&&(s in this.fillStates||(this.fillStates[s]={fillStyle:r.fillStyle}))},t.prototype.drawChars_=function(e,n){var r=this.textStrokeState_,o=this.textState_,a=this.strokeKey_,s=this.textKey_,l=this.fillKey_;this.saveTextStates_();var u=this.pixelRatio,c=xc[o.textBaseline],h=this.textOffsetY_*u,d=this.text_,p=r?r.lineWidth*Math.abs(o.scale[0])/2:0;this.instructions.push([xe.DRAW_CHARS,e,n,c,o.overflow,l,o.maxAngle,u,h,a,p*u,d,s,1]),this.hitDetectionInstructions.push([xe.DRAW_CHARS,e,n,c,o.overflow,l,o.maxAngle,1,h,a,p,d,s,1/u])},t.prototype.setTextStyle=function(e,n){var r,o,a;if(!e)this.text_="";else{var s=e.getFill();s?(o=this.textFillState_,o||(o={},this.textFillState_=o),o.fillStyle=mr(s.getColor()||Yr)):(o=null,this.textFillState_=o);var l=e.getStroke();if(!l)a=null,this.textStrokeState_=a;else{a=this.textStrokeState_,a||(a={},this.textStrokeState_=a);var u=l.getLineDash(),c=l.getLineDashOffset(),h=l.getWidth(),d=l.getMiterLimit();a.lineCap=l.getLineCap()||_c,a.lineDash=u?u.slice():Fl,a.lineDashOffset=c===void 0?Ul:c,a.lineJoin=l.getLineJoin()||ws,a.lineWidth=h===void 0?Vl:h,a.miterLimit=d===void 0?Bl:d,a.strokeStyle=mr(l.getColor()||jl)}r=this.textState_;var p=e.getFont()||pm;rI(p);var f=e.getScaleArray();r.overflow=e.getOverflow(),r.font=p,r.maxAngle=e.getMaxAngle(),r.placement=e.getPlacement(),r.textAlign=e.getTextAlign(),r.textBaseline=e.getTextBaseline()||Cc,r.backgroundFill=e.getBackgroundFill(),r.backgroundStroke=e.getBackgroundStroke(),r.padding=e.getPadding()||sa,r.scale=f===void 0?[1,1]:f;var g=e.getOffsetX(),v=e.getOffsetY(),y=e.getRotateWithView(),m=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=g===void 0?0:g,this.textOffsetY_=v===void 0?0:v,this.textRotateWithView_=y===void 0?!1:y,this.textRotation_=m===void 0?0:m,this.strokeKey_=a?(typeof a.strokeStyle=="string"?a.strokeStyle:_e(a.strokeStyle))+a.lineCap+a.lineDashOffset+"|"+a.lineWidth+a.lineJoin+a.miterLimit+"["+a.lineDash.join()+"]":"",this.textKey_=r.font+r.scale+(r.textAlign||"?")+(r.textBaseline||"?"),this.fillKey_=o?typeof o.fillStyle=="string"?o.fillStyle:"|"+_e(o.fillStyle):""}this.declutterImageWithText_=n},t}(pu);const Gw=Lw;var kw={Circle:bg,Default:pu,Image:Sw,LineString:Mw,Polygon:bg,Text:Gw},Dw=function(){function i(t,e,n,r){this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=r,this.resolution_=n,this.buildersByZIndex_={}}return i.prototype.finish=function(){var t={};for(var e in this.buildersByZIndex_){t[e]=t[e]||{};var n=this.buildersByZIndex_[e];for(var r in n){var o=n[r].finish();t[e][r]=o}}return t},i.prototype.getBuilder=function(t,e){var n=t!==void 0?t.toString():"0",r=this.buildersByZIndex_[n];r===void 0&&(r={},this.buildersByZIndex_[n]=r);var o=r[e];if(o===void 0){var a=kw[e];o=new a(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[e]=o}return o},i}();const Mc=Dw;var Nw=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Fw=function(i){Nw(t,i);function t(e){var n=i.call(this)||this;return n.boundHandleImageChange_=n.handleImageChange_.bind(n),n.layer_=e,n.declutterExecutorGroup=null,n}return t.prototype.getFeatures=function(e){return we()},t.prototype.prepareFrame=function(e){return we()},t.prototype.renderFrame=function(e,n){return we()},t.prototype.loadedTileCallback=function(e,n,r){e[n]||(e[n]={}),e[n][r.tileCoord.toString()]=r},t.prototype.createLoadedTileFinder=function(e,n,r){return(function(o,a){var s=this.loadedTileCallback.bind(this,r,o);return e.forEachLoadedTile(n,o,a,s)}).bind(this)},t.prototype.forEachFeatureAtCoordinate=function(e,n,r,o,a){},t.prototype.getDataAtPixel=function(e,n,r){return null},t.prototype.getLayer=function(){return this.layer_},t.prototype.handleFontsChanged=function(){},t.prototype.handleImageChange_=function(e){var n=e.target;n.getState()===ke.LOADED&&this.renderIfReadyAndVisible()},t.prototype.loadImage=function(e){var n=e.getState();return n!=ke.LOADED&&n!=ke.ERROR&&e.addEventListener(Ie.CHANGE,this.boundHandleImageChange_),n==ke.IDLE&&(e.load(),n=e.getState()),n==ke.LOADED},t.prototype.renderIfReadyAndVisible=function(){var e=this.getLayer();e.getVisible()&&e.getSourceState()==Ar.READY&&e.changed()},t}(cu);const Uw=Fw;var Bw=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),jw=function(i){Bw(t,i);function t(e){var n=i.call(this,e)||this;return n.container=null,n.renderedResolution,n.tempTransform=Dn(),n.pixelTransform=Dn(),n.inversePixelTransform=Dn(),n.context=null,n.containerReused=!1,n}return t.prototype.useContainer=function(e,n,r){var o=this.getLayer().getClassName(),a,s;if(e&&e.style.opacity===cf(r)&&e.className===o){var l=e.firstElementChild;l instanceof HTMLCanvasElement&&(s=l.getContext("2d"))}if(s&&s.canvas.style.transform===n?(this.container=e,this.context=s,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){a=document.createElement("div"),a.className=o;var u=a.style;u.position="absolute",u.width="100%",u.height="100%",s=Mn();var l=s.canvas;a.appendChild(l),u=l.style,u.position="absolute",u.left="0",u.transformOrigin="top left",this.container=a,this.context=s}},t.prototype.clipUnrotated=function(e,n,r){var o=Uo(r),a=_h(r),s=Ah(r),l=yh(r);ei(n.coordinateToPixelTransform,o),ei(n.coordinateToPixelTransform,a),ei(n.coordinateToPixelTransform,s),ei(n.coordinateToPixelTransform,l);var u=this.inversePixelTransform;ei(u,o),ei(u,a),ei(u,s),ei(u,l),e.save(),e.beginPath(),e.moveTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(l[0]),Math.round(l[1])),e.clip()},t.prototype.dispatchRenderEvent_=function(e,n,r){var o=this.getLayer();if(o.hasListener(e)){var a=new cm(e,this.inversePixelTransform,r,n);o.dispatchEvent(a)}},t.prototype.preRender=function(e,n){this.dispatchRenderEvent_(Ca.PRERENDER,e,n)},t.prototype.postRender=function(e,n){this.dispatchRenderEvent_(Ca.POSTRENDER,e,n)},t.prototype.getRenderTransform=function(e,n,r,o,a,s,l){var u=a/2,c=s/2,h=o/n,d=-h,p=-e[0]+l,f=-e[1];return wr(this.tempTransform,u,c,h,d,-r,p,f)},t.prototype.getDataAtPixel=function(e,n,r){var o=ei(this.inversePixelTransform,e.slice()),a=this.context,s=this.getLayer(),l=s.getExtent();if(l){var u=ei(n.pixelToCoordinateTransform,e.slice());if(!mh(l,u))return null}var c;try{var h=Math.round(o[0]),d=Math.round(o[1]),p=document.createElement("canvas"),f=p.getContext("2d");p.width=1,p.height=1,f.clearRect(0,0,1,1),f.drawImage(a.canvas,h,d,1,1,0,0,1,1),c=f.getImageData(0,0,1,1).data}catch(g){return g.name==="SecurityError"?new Uint8Array:c}return c[3]===0?null:c},t}(Uw);const Ym=jw,Ke={CIRCLE:"Circle",DEFAULT:"Default",IMAGE:"Image",LINE_STRING:"LineString",POLYGON:"Polygon",TEXT:"Text"};function zw(i,t,e,n,r,o,a,s,l,u,c,h){var d=i[t],p=i[t+1],f=0,g=0,v=0,y=0;function m(){f=d,g=p,t+=n,d=i[t],p=i[t+1],y+=v,v=Math.sqrt((d-f)*(d-f)+(p-g)*(p-g))}do m();while(t<e-n&&y+v<o);for(var A=v===0?0:(o-y)/v,_=Ur(f,d,A),C=Ur(g,p,A),I=t-n,E=y,w=o+s*l(u,r,c);t<e-n&&y+v<w;)m();A=v===0?0:(w-y)/v;var S=Ur(f,d,A),x=Ur(g,p,A),T;if(h){var L=[_,C,S,x];yf(L,0,4,2,h,L,L),T=L[0]>L[2]}else T=_>S;var G=Math.PI,N=[],B=I+n===t;t=I,v=0,y=E,d=i[t],p=i[t+1];var U;if(B){m(),U=Math.atan2(p-g,d-f),T&&(U+=U>0?-G:G);var D=(S+_)/2,z=(x+C)/2;return N[0]=[D,z,(w-o)/2,U,r],N}for(var F=0,O=r.length;F<O;){m();var R=Math.atan2(p-g,d-f);if(T&&(R+=R>0?-G:G),U!==void 0){var M=R-U;if(M+=M>G?-2*G:M<-G?2*G:0,Math.abs(M)>a)return null}U=R;for(var ie=F,Y=0;F<O;++F){var K=T?O-F-1:F,Q=s*l(u,r[K],c);if(t+n<e&&y+v<o+Y+Q/2)break;Y+=Q}if(F!==ie){var me=T?r.substring(O-ie,O-F):r.substring(ie,F);A=v===0?0:(o+Y/2-y)/v;var D=Ur(f,d,A),z=Ur(g,p,A);N.push([D,z,Y/2,R,me]),o+=Y}}return N}var Va=pn(),lo=[],Gr=[],kr=[],uo=[];function Rg(i){return i[3].declutterBox}var Vw=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function Og(i,t){return(t==="start"||t==="end")&&!Vw.test(i)&&(t=t==="start"?"left":"right"),xc[t]}var Ww=function(){function i(t,e,n,r){this.overlaps=n,this.pixelRatio=e,this.resolution=t,this.alignFill_,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=Dn(),this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={}}return i.prototype.createLabel=function(t,e,n,r){var o=t+e+n+r;if(this.labels_[o])return this.labels_[o];var a=r?this.strokeStates[r]:null,s=n?this.fillStates[n]:null,l=this.textStates[e],u=this.pixelRatio,c=[l.scale[0]*u,l.scale[1]*u],h=Og(t,l.textAlign||zl),d=r&&a.lineWidth?a.lineWidth:0,p=t.split(`
`),f=p.length,g=[],v=aI(l.font,p,g),y=oI(l.font),m=y*f,A=v+d,_=[],C=(A+2)*c[0],I=(m+d)*c[1],E={width:C<0?Math.floor(C):Math.ceil(C),height:I<0?Math.floor(I):Math.ceil(I),contextInstructions:_};if((c[0]!=1||c[1]!=1)&&_.push("scale",c),_.push("font",l.font),r){_.push("strokeStyle",a.strokeStyle),_.push("lineWidth",d),_.push("lineCap",a.lineCap),_.push("lineJoin",a.lineJoin),_.push("miterLimit",a.miterLimit);var w=gh?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D;w.prototype.setLineDash&&(_.push("setLineDash",[a.lineDash]),_.push("lineDashOffset",a.lineDashOffset))}n&&_.push("fillStyle",s.fillStyle),_.push("textBaseline","middle"),_.push("textAlign","center");var S=.5-h,x=h*A+S*d,T;if(r)for(T=0;T<f;++T)_.push("strokeText",[p[T],x+S*g[T],.5*(d+y)+T*y]);if(n)for(T=0;T<f;++T)_.push("fillText",[p[T],x+S*g[T],.5*(d+y)+T*y]);return this.labels_[o]=E,E},i.prototype.replayTextBackground_=function(t,e,n,r,o,a,s){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,n),t.lineTo.apply(t,r),t.lineTo.apply(t,o),t.lineTo.apply(t,e),a&&(this.alignFill_=a[2],this.fill_(t)),s&&(this.setStrokeStyle_(t,s),t.stroke())},i.prototype.calculateImageOrLabelDimensions_=function(t,e,n,r,o,a,s,l,u,c,h,d,p,f,g,v){s*=d[0],l*=d[1];var y=n-s,m=r-l,A=o+u>t?t-u:o,_=a+c>e?e-c:a,C=f[3]+A*d[0]+f[1],I=f[0]+_*d[1]+f[2],E=y-f[3],w=m-f[0];(g||h!==0)&&(lo[0]=E,uo[0]=E,lo[1]=w,Gr[1]=w,Gr[0]=E+C,kr[0]=Gr[0],kr[1]=w+I,uo[1]=kr[1]);var S;return h!==0?(S=wr(Dn(),n,r,1,1,h,-n,-r),ei(S,lo),ei(S,Gr),ei(S,kr),ei(S,uo),er(Math.min(lo[0],Gr[0],kr[0],uo[0]),Math.min(lo[1],Gr[1],kr[1],uo[1]),Math.max(lo[0],Gr[0],kr[0],uo[0]),Math.max(lo[1],Gr[1],kr[1],uo[1]),Va)):er(Math.min(E,E+C),Math.min(w,w+I),Math.max(E,E+C),Math.max(w,w+I),Va),p&&(y=Math.round(y),m=Math.round(m)),{drawImageX:y,drawImageY:m,drawImageW:A,drawImageH:_,originX:u,originY:c,declutterBox:{minX:Va[0],minY:Va[1],maxX:Va[2],maxY:Va[3],value:v},canvasTransform:S,scale:d}},i.prototype.replayImageOrLabel_=function(t,e,n,r,o,a,s){var l=!!(a||s),u=r.declutterBox,c=t.canvas,h=s?s[2]*r.scale[0]/2:0,d=u.minX-h<=c.width/e&&u.maxX+h>=0&&u.minY-h<=c.height/e&&u.maxY+h>=0;return d&&(l&&this.replayTextBackground_(t,lo,Gr,kr,uo,a,s),sI(t,r.canvasTransform,o,n,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0},i.prototype.fill_=function(t){if(this.alignFill_){var e=ei(this.renderedTransform_,[0,0]),n=512*this.pixelRatio;t.save(),t.translate(e[0]%n,e[1]%n),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()},i.prototype.setStrokeStyle_=function(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.setLineDash&&(t.lineDashOffset=e[7],t.setLineDash(e[6]))},i.prototype.drawLabelWithPointPlacement_=function(t,e,n,r){var o=this.textStates[e],a=this.createLabel(t,e,r,n),s=this.strokeStates[n],l=this.pixelRatio,u=Og(t,o.textAlign||zl),c=xc[o.textBaseline||Cc],h=s&&s.lineWidth?s.lineWidth:0,d=a.width/l-2*o.scale[0],p=u*d+2*(.5-u)*h,f=c*a.height/l+2*(.5-c)*h;return{label:a,anchorX:p,anchorY:f}},i.prototype.execute_=function(t,e,n,r,o,a,s,l){var u;this.pixelCoordinates_&&Ga(n,this.renderedTransform_)?u=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),u=bo(this.coordinates,0,this.coordinates.length,2,n,this.pixelCoordinates_),gC(this.renderedTransform_,n));for(var c=0,h=r.length,d=0,p,f,g,v,y,m,A,_,C,I,E,w,S=0,x=0,T=null,L=null,G=this.coordinateCache_,N=this.viewRotation_,B=Math.round(Math.atan2(-n[1],n[0])*1e12)/1e12,U={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:N},D=this.instructions!=r||this.overlaps?0:200,z,F,O,R;c<h;){var M=r[c],ie=M[0];switch(ie){case xe.BEGIN_GEOMETRY:z=M[1],R=M[3],z.getGeometry()?s!==void 0&&!Vt(s,R.getExtent())?c=M[2]+1:++c:c=M[2];break;case xe.BEGIN_PATH:S>D&&(this.fill_(t),S=0),x>D&&(t.stroke(),x=0),!S&&!x&&(t.beginPath(),v=NaN,y=NaN),++c;break;case xe.CIRCLE:d=M[1];var Y=u[d],K=u[d+1],Q=u[d+2],me=u[d+3],pe=Q-Y,V=me-K,ze=Math.sqrt(pe*pe+V*V);t.moveTo(Y+ze,K),t.arc(Y,K,ze,0,2*Math.PI,!0),++c;break;case xe.CLOSE_PATH:t.closePath(),++c;break;case xe.CUSTOM:d=M[1],p=M[2];var Ce=M[3],Qe=M[4],At=M.length==6?M[5]:void 0;U.geometry=Ce,U.feature=z,c in G||(G[c]=[]);var $e=G[c];At?At(u,d,p,2,$e):($e[0]=u[d],$e[1]=u[d+1],$e.length=2),Qe($e,U),++c;break;case xe.DRAW_IMAGE:d=M[1],p=M[2],_=M[3],f=M[4],g=M[5];var it=M[6],ue=M[7],gt=M[8],et=M[9],J=M[10],He=M[11],Ve=M[12],_t=M[13],k=M[14];if(!_&&M.length>=19){C=M[18],I=M[19],E=M[20],w=M[21];var W=this.drawLabelWithPointPlacement_(C,I,E,w);_=W.label,M[3]=_;var q=M[22];f=(W.anchorX-q)*this.pixelRatio,M[4]=f;var se=M[23];g=(W.anchorY-se)*this.pixelRatio,M[5]=g,it=_.height,M[6]=it,_t=_.width,M[13]=_t}var ye=void 0;M.length>24&&(ye=M[24]);var Ae=void 0,qe=void 0,Fe=void 0;M.length>16?(Ae=M[15],qe=M[16],Fe=M[17]):(Ae=sa,qe=!1,Fe=!1),J&&B?He+=N:!J&&!B&&(He-=N);for(var Gt=0;d<p;d+=2)if(!(ye&&ye[Gt++]<_t/this.pixelRatio)){var Et=this.calculateImageOrLabelDimensions_(_.width,_.height,u[d],u[d+1],_t,it,f,g,gt,et,He,Ve,o,Ae,qe||Fe,z),We=[t,e,_,Et,ue,qe?T:null,Fe?L:null],on=void 0,bt=void 0;if(l&&k){var Ft=p-d;if(!k[Ft]){k[Ft]=We;continue}if(on=k[Ft],delete k[Ft],bt=Rg(on),l.collides(bt))continue}l&&l.collides(Et.declutterBox)||(on&&(l&&l.insert(bt),this.replayImageOrLabel_.apply(this,on)),l&&l.insert(Et.declutterBox),this.replayImageOrLabel_.apply(this,We))}++c;break;case xe.DRAW_CHARS:var Gi=M[1],Mt=M[2],Xi=M[3],Or=M[4];w=M[5];var Zi=M[6],Ai=M[7],ki=M[8];E=M[9];var si=M[10];C=M[11],I=M[12];var Vn=[M[13],M[13]],Wo=this.textStates[I],Wn=Wo.font,nt=[Wo.scale[0]*Ai,Wo.scale[1]*Ai],Ii=void 0;Wn in this.widths_?Ii=this.widths_[Wn]:(Ii={},this.widths_[Wn]=Ii);var ao=Fm(u,Gi,Mt,2),so=Math.abs(nt[0])*lg(Wn,C,Ii);if(Or||so<=ao){var Fa=this.textStates[I].textAlign,Ua=(ao-so)*xc[Fa],ar=zw(u,Gi,Mt,2,C,Ua,Zi,Math.abs(nt[0]),lg,Wn,Ii,B?0:this.viewRotation_);e:if(ar){var li=[],Rt=void 0,Ei=void 0,sr=void 0,Jt=void 0,ui=void 0;if(E)for(Rt=0,Ei=ar.length;Rt<Ei;++Rt){ui=ar[Rt],sr=ui[4],Jt=this.createLabel(sr,I,"",E),f=ui[2]+(nt[0]<0?-si:si),g=Xi*Jt.height+(.5-Xi)*2*si*nt[1]/nt[0]-ki;var Et=this.calculateImageOrLabelDimensions_(Jt.width,Jt.height,ui[0],ui[1],Jt.width,Jt.height,f,g,0,0,ui[3],Vn,!1,sa,!1,z);if(l&&l.collides(Et.declutterBox))break e;li.push([t,e,Jt,Et,1,null,null])}if(w)for(Rt=0,Ei=ar.length;Rt<Ei;++Rt){ui=ar[Rt],sr=ui[4],Jt=this.createLabel(sr,I,w,""),f=ui[2],g=Xi*Jt.height-ki;var Et=this.calculateImageOrLabelDimensions_(Jt.width,Jt.height,ui[0],ui[1],Jt.width,Jt.height,f,g,0,0,ui[3],Vn,!1,sa,!1,z);if(l&&l.collides(Et.declutterBox))break e;li.push([t,e,Jt,Et,1,null,null])}l&&l.load(li.map(Rg));for(var an=0,Lr=li.length;an<Lr;++an)this.replayImageOrLabel_.apply(this,li[an])}}++c;break;case xe.END_GEOMETRY:if(a!==void 0){z=M[1];var Tn=a(z,R);if(Tn)return Tn}++c;break;case xe.FILL:D?S++:this.fill_(t),++c;break;case xe.MOVE_TO_LINE_TO:for(d=M[1],p=M[2],F=u[d],O=u[d+1],m=F+.5|0,A=O+.5|0,(m!==v||A!==y)&&(t.moveTo(F,O),v=m,y=A),d+=2;d<p;d+=2)F=u[d],O=u[d+1],m=F+.5|0,A=O+.5|0,(d==p-2||m!==v||A!==y)&&(t.lineTo(F,O),v=m,y=A);++c;break;case xe.SET_FILL_STYLE:T=M,this.alignFill_=M[2],S&&(this.fill_(t),S=0,x&&(t.stroke(),x=0)),t.fillStyle=M[1],++c;break;case xe.SET_STROKE_STYLE:L=M,x&&(t.stroke(),x=0),this.setStrokeStyle_(t,M),++c;break;case xe.STROKE:D?x++:t.stroke(),++c;break;default:++c;break}}S&&this.fill_(t),x&&t.stroke()},i.prototype.execute=function(t,e,n,r,o,a){this.viewRotation_=r,this.execute_(t,e,n,this.instructions,o,void 0,void 0,a)},i.prototype.executeHitDetection=function(t,e,n,r,o){return this.viewRotation_=n,this.execute_(t,1,e,this.hitDetectionInstructions,!0,r,o)},i}();const Yw=Ww;var md=[Ke.POLYGON,Ke.CIRCLE,Ke.LINE_STRING,Ke.IMAGE,Ke.TEXT,Ke.DEFAULT],Hw=function(){function i(t,e,n,r,o,a){this.maxExtent_=t,this.overlaps_=r,this.pixelRatio_=n,this.resolution_=e,this.renderBuffer_=a,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Dn(),this.createExecutors_(o)}return i.prototype.clip=function(t,e){var n=this.getClipCoords(e);t.beginPath(),t.moveTo(n[0],n[1]),t.lineTo(n[2],n[3]),t.lineTo(n[4],n[5]),t.lineTo(n[6],n[7]),t.clip()},i.prototype.createExecutors_=function(t){for(var e in t){var n=this.executorsByZIndex_[e];n===void 0&&(n={},this.executorsByZIndex_[e]=n);var r=t[e];for(var o in r){var a=r[o];n[o]=new Yw(this.resolution_,this.pixelRatio_,this.overlaps_,a)}}},i.prototype.hasExecutors=function(t){for(var e in this.executorsByZIndex_)for(var n=this.executorsByZIndex_[e],r=0,o=t.length;r<o;++r)if(t[r]in n)return!0;return!1},i.prototype.forEachFeatureAtCoordinate=function(t,e,n,r,o,a){r=Math.round(r);var s=r*2+1,l=wr(this.hitDetectionTransform_,r+.5,r+.5,1/e,-1/e,-n,-t[0],-t[1]),u=!this.hitDetectionContext_;u&&(this.hitDetectionContext_=Mn(s,s));var c=this.hitDetectionContext_;c.canvas.width!==s||c.canvas.height!==s?(c.canvas.width=s,c.canvas.height=s):u||c.clearRect(0,0,s,s);var h;this.renderBuffer_!==void 0&&(h=pn(),El(h,t),Jn(h,e*(this.renderBuffer_+r),h));var d=qw(r),p;function f(I,E){for(var w=c.getImageData(0,0,s,s).data,S=0,x=d.length;S<x;S++)if(w[d[S]]>0){if(!a||p!==Ke.IMAGE&&p!==Ke.TEXT||a.indexOf(I)!==-1){var T=(d[S]-3)/4,L=r-T%s,G=r-(T/s|0),N=o(I,E,L*L+G*G);if(N)return N}c.clearRect(0,0,s,s);break}}var g=Object.keys(this.executorsByZIndex_).map(Number);g.sort(va);var v,y,m,A,_;for(v=g.length-1;v>=0;--v){var C=g[v].toString();for(m=this.executorsByZIndex_[C],y=md.length-1;y>=0;--y)if(p=md[y],A=m[p],A!==void 0&&(_=A.executeHitDetection(c,l,n,f,h),_))return _}},i.prototype.getClipCoords=function(t){var e=this.maxExtent_;if(!e)return null;var n=e[0],r=e[1],o=e[2],a=e[3],s=[n,r,n,a,o,a,o,r];return bo(s,0,8,2,t,s),s},i.prototype.isEmpty=function(){return _a(this.executorsByZIndex_)},i.prototype.execute=function(t,e,n,r,o,a,s){var l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(va),this.maxExtent_&&(t.save(),this.clip(t,n));var u=a||md,c,h,d,p,f,g;for(s&&l.reverse(),c=0,h=l.length;c<h;++c){var v=l[c].toString();for(f=this.executorsByZIndex_[v],d=0,p=u.length;d<p;++d){var y=u[d];g=f[y],g!==void 0&&g.execute(t,e,n,r,o,s)}}this.maxExtent_&&t.restore()},i}(),yd={};function qw(i){if(yd[i]!==void 0)return yd[i];for(var t=i*2+1,e=i*i,n=new Array(e+1),r=0;r<=i;++r)for(var o=0;o<=i;++o){var a=r*r+o*o;if(a>e)break;var s=n[a];s||(s=[],n[a]=s),s.push(((i+r)*t+(i+o))*4+3),r>0&&s.push(((i-r)*t+(i+o))*4+3),o>0&&(s.push(((i+r)*t+(i-o))*4+3),r>0&&s.push(((i-r)*t+(i-o))*4+3))}for(var l=[],r=0,u=n.length;r<u;++r)n[r]&&l.push.apply(l,n[r]);return yd[i]=l,l}const Tc=Hw;var Xw=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Zw=function(i){Xw(t,i);function t(e,n,r,o,a,s,l){var u=i.call(this)||this;return u.context_=e,u.pixelRatio_=n,u.extent_=r,u.transform_=o,u.viewRotation_=a,u.squaredTolerance_=s,u.userTransform_=l,u.contextFillState_=null,u.contextStrokeState_=null,u.contextTextState_=null,u.fillState_=null,u.strokeState_=null,u.image_=null,u.imageAnchorX_=0,u.imageAnchorY_=0,u.imageHeight_=0,u.imageOpacity_=0,u.imageOriginX_=0,u.imageOriginY_=0,u.imageRotateWithView_=!1,u.imageRotation_=0,u.imageScale_=[0,0],u.imageWidth_=0,u.text_="",u.textOffsetX_=0,u.textOffsetY_=0,u.textRotateWithView_=!1,u.textRotation_=0,u.textScale_=[0,0],u.textFillState_=null,u.textStrokeState_=null,u.textState_=null,u.pixelCoordinates_=[],u.tmpLocalTransform_=Dn(),u}return t.prototype.drawImages_=function(e,n,r,o){if(this.image_){var a=bo(e,n,r,o,this.transform_,this.pixelCoordinates_),s=this.context_,l=this.tmpLocalTransform_,u=s.globalAlpha;this.imageOpacity_!=1&&(s.globalAlpha=u*this.imageOpacity_);var c=this.imageRotation_;this.imageRotateWithView_&&(c+=this.viewRotation_);for(var h=0,d=a.length;h<d;h+=2){var p=a[h]-this.imageAnchorX_,f=a[h+1]-this.imageAnchorY_;if(c!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){var g=p+this.imageAnchorX_,v=f+this.imageAnchorY_;wr(l,g,v,1,1,c,-g,-v),s.setTransform.apply(s,l),s.translate(g,v),s.scale(this.imageScale_[0],this.imageScale_[1]),s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),s.setTransform(1,0,0,1,0,0)}else s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,p,f,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(s.globalAlpha=u)}},t.prototype.drawText_=function(e,n,r,o){if(!(!this.textState_||this.text_==="")){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var a=bo(e,n,r,o,this.transform_,this.pixelCoordinates_),s=this.context_,l=this.textRotation_;for(this.textRotateWithView_&&(l+=this.viewRotation_);n<r;n+=o){var u=a[n]+this.textOffsetX_,c=a[n+1]+this.textOffsetY_;if(l!==0||this.textScale_[0]!=1||this.textScale_[1]!=1){var h=wr(this.tmpLocalTransform_,u,c,1,1,l,-u,-c);s.setTransform.apply(s,h),s.translate(u,c),s.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&s.strokeText(this.text_,0,0),this.textFillState_&&s.fillText(this.text_,0,0),s.setTransform(1,0,0,1,0,0)}else this.textStrokeState_&&s.strokeText(this.text_,u,c),this.textFillState_&&s.fillText(this.text_,u,c)}}},t.prototype.moveToLineTo_=function(e,n,r,o,a){var s=this.context_,l=bo(e,n,r,o,this.transform_,this.pixelCoordinates_);s.moveTo(l[0],l[1]);var u=l.length;a&&(u-=2);for(var c=2;c<u;c+=2)s.lineTo(l[c],l[c+1]);return a&&s.closePath(),r},t.prototype.drawRings_=function(e,n,r,o){for(var a=0,s=r.length;a<s;++a)n=this.moveToLineTo_(e,n,r[a],o,!0);return n},t.prototype.drawCircle=function(e){if(Vt(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var n=sE(e,this.transform_,this.pixelCoordinates_),r=n[2]-n[0],o=n[3]-n[1],a=Math.sqrt(r*r+o*o),s=this.context_;s.beginPath(),s.arc(n[0],n[1],a,0,2*Math.PI),this.fillState_&&s.fill(),this.strokeState_&&s.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}},t.prototype.setStyle=function(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())},t.prototype.setTransform=function(e){this.transform_=e},t.prototype.drawGeometry=function(e){var n=e.getType();switch(n){case b.POINT:this.drawPoint(e);break;case b.LINE_STRING:this.drawLineString(e);break;case b.POLYGON:this.drawPolygon(e);break;case b.MULTI_POINT:this.drawMultiPoint(e);break;case b.MULTI_LINE_STRING:this.drawMultiLineString(e);break;case b.MULTI_POLYGON:this.drawMultiPolygon(e);break;case b.GEOMETRY_COLLECTION:this.drawGeometryCollection(e);break;case b.CIRCLE:this.drawCircle(e);break}},t.prototype.drawFeature=function(e,n){var r=n.getGeometryFunction()(e);!r||!Vt(this.extent_,r.getExtent())||(this.setStyle(n),this.drawGeometry(r))},t.prototype.drawGeometryCollection=function(e){for(var n=e.getGeometriesArray(),r=0,o=n.length;r<o;++r)this.drawGeometry(n[r])},t.prototype.drawPoint=function(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var n=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(n,0,n.length,r),this.text_!==""&&this.drawText_(n,0,n.length,r)},t.prototype.drawMultiPoint=function(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var n=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(n,0,n.length,r),this.text_!==""&&this.drawText_(n,0,n.length,r)},t.prototype.drawLineString=function(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Vt(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var n=this.context_,r=e.getFlatCoordinates();n.beginPath(),this.moveToLineTo_(r,0,r.length,e.getStride(),!1),n.stroke()}if(this.text_!==""){var o=e.getFlatMidpoint();this.drawText_(o,0,2,2)}}},t.prototype.drawMultiLineString=function(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var n=e.getExtent();if(Vt(this.extent_,n)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var r=this.context_,o=e.getFlatCoordinates(),a=0,s=e.getEnds(),l=e.getStride();r.beginPath();for(var u=0,c=s.length;u<c;++u)a=this.moveToLineTo_(o,a,s[u],l,!1);r.stroke()}if(this.text_!==""){var h=e.getFlatMidpoints();this.drawText_(h,0,h.length,2)}}},t.prototype.drawPolygon=function(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Vt(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var n=this.context_;n.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}if(this.text_!==""){var r=e.getFlatInteriorPoint();this.drawText_(r,0,2,2)}}},t.prototype.drawMultiPolygon=function(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Vt(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var n=this.context_,r=e.getOrientedFlatCoordinates(),o=0,a=e.getEndss(),s=e.getStride();n.beginPath();for(var l=0,u=a.length;l<u;++l){var c=a[l];o=this.drawRings_(r,o,c,s)}this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}if(this.text_!==""){var h=e.getFlatInteriorPoints();this.drawText_(h,0,h.length,2)}}},t.prototype.setContextFillState_=function(e){var n=this.context_,r=this.contextFillState_;r?r.fillStyle!=e.fillStyle&&(r.fillStyle=e.fillStyle,n.fillStyle=e.fillStyle):(n.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})},t.prototype.setContextStrokeState_=function(e){var n=this.context_,r=this.contextStrokeState_;r?(r.lineCap!=e.lineCap&&(r.lineCap=e.lineCap,n.lineCap=e.lineCap),n.setLineDash&&(Ga(r.lineDash,e.lineDash)||n.setLineDash(r.lineDash=e.lineDash),r.lineDashOffset!=e.lineDashOffset&&(r.lineDashOffset=e.lineDashOffset,n.lineDashOffset=e.lineDashOffset)),r.lineJoin!=e.lineJoin&&(r.lineJoin=e.lineJoin,n.lineJoin=e.lineJoin),r.lineWidth!=e.lineWidth&&(r.lineWidth=e.lineWidth,n.lineWidth=e.lineWidth),r.miterLimit!=e.miterLimit&&(r.miterLimit=e.miterLimit,n.miterLimit=e.miterLimit),r.strokeStyle!=e.strokeStyle&&(r.strokeStyle=e.strokeStyle,n.strokeStyle=e.strokeStyle)):(n.lineCap=e.lineCap,n.setLineDash&&(n.setLineDash(e.lineDash),n.lineDashOffset=e.lineDashOffset),n.lineJoin=e.lineJoin,n.lineWidth=e.lineWidth,n.miterLimit=e.miterLimit,n.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})},t.prototype.setContextTextState_=function(e){var n=this.context_,r=this.contextTextState_,o=e.textAlign?e.textAlign:zl;r?(r.font!=e.font&&(r.font=e.font,n.font=e.font),r.textAlign!=o&&(r.textAlign=o,n.textAlign=o),r.textBaseline!=e.textBaseline&&(r.textBaseline=e.textBaseline,n.textBaseline=e.textBaseline)):(n.font=e.font,n.textAlign=o,n.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:o,textBaseline:e.textBaseline})},t.prototype.setFillStrokeStyle=function(e,n){var r=this;if(!e)this.fillState_=null;else{var o=e.getColor();this.fillState_={fillStyle:mr(o||Yr)}}if(!n)this.strokeState_=null;else{var a=n.getColor(),s=n.getLineCap(),l=n.getLineDash(),u=n.getLineDashOffset(),c=n.getLineJoin(),h=n.getWidth(),d=n.getMiterLimit(),p=l||Fl;this.strokeState_={lineCap:s!==void 0?s:_c,lineDash:this.pixelRatio_===1?p:p.map(function(f){return f*r.pixelRatio_}),lineDashOffset:(u||Ul)*this.pixelRatio_,lineJoin:c!==void 0?c:ws,lineWidth:(h!==void 0?h:Vl)*this.pixelRatio_,miterLimit:d!==void 0?d:Bl,strokeStyle:mr(a||jl)}}},t.prototype.setImageStyle=function(e){var n;if(!e||!(n=e.getSize())){this.image_=null;return}var r=e.getAnchor(),o=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*this.pixelRatio_,this.imageAnchorY_=r[1]*this.pixelRatio_,this.imageHeight_=n[1]*this.pixelRatio_,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=o[0],this.imageOriginY_=o[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation(),this.imageScale_=e.getScaleArray(),this.imageWidth_=n[0]*this.pixelRatio_},t.prototype.setTextStyle=function(e){if(!e)this.text_="";else{var n=e.getFill();if(!n)this.textFillState_=null;else{var r=n.getColor();this.textFillState_={fillStyle:mr(r||Yr)}}var o=e.getStroke();if(!o)this.textStrokeState_=null;else{var a=o.getColor(),s=o.getLineCap(),l=o.getLineDash(),u=o.getLineDashOffset(),c=o.getLineJoin(),h=o.getWidth(),d=o.getMiterLimit();this.textStrokeState_={lineCap:s!==void 0?s:_c,lineDash:l||Fl,lineDashOffset:u||Ul,lineJoin:c!==void 0?c:ws,lineWidth:h!==void 0?h:Vl,miterLimit:d!==void 0?d:Bl,strokeStyle:mr(a||jl)}}var p=e.getFont(),f=e.getOffsetX(),g=e.getOffsetY(),v=e.getRotateWithView(),y=e.getRotation(),m=e.getScaleArray(),A=e.getText(),_=e.getTextAlign(),C=e.getTextBaseline();this.textState_={font:p!==void 0?p:pm,textAlign:_!==void 0?_:zl,textBaseline:C!==void 0?C:Cc},this.text_=A!==void 0?A:"",this.textOffsetX_=f!==void 0?this.pixelRatio_*f:0,this.textOffsetY_=g!==void 0?this.pixelRatio_*g:0,this.textRotateWithView_=v!==void 0?v:!1,this.textRotation_=y!==void 0?y:0,this.textScale_=[this.pixelRatio_*m[0],this.pixelRatio_*m[1]]}},t}(Vm);const Kw=Zw,Qi={FRACTION:"fraction",PIXELS:"pixels"},hi={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"};var Jw=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Qw=function(i){Jw(t,i);function t(e,n,r,o){var a=i.call(this)||this;return a.extent=e,a.pixelRatio_=r,a.resolution=n,a.state=o,a}return t.prototype.changed=function(){this.dispatchEvent(Ie.CHANGE)},t.prototype.getExtent=function(){return this.extent},t.prototype.getImage=function(){return we()},t.prototype.getPixelRatio=function(){return this.pixelRatio_},t.prototype.getResolution=function(){return this.resolution},t.prototype.getState=function(){return this.state},t.prototype.load=function(){we()},t}(Ys);const Hm=Qw;var $w=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),eS=function(i){$w(t,i);function t(e,n,r,o,a,s){var l=i.call(this,e,n,r,ke.IDLE)||this;return l.src_=o,l.image_=new Image,a!==null&&(l.image_.crossOrigin=a),l.unlisten_=null,l.state=ke.IDLE,l.imageLoadFunction_=s,l}return t.prototype.getImage=function(){return this.image_},t.prototype.handleImageError_=function(){this.state=ke.ERROR,this.unlistenImage_(),this.changed()},t.prototype.handleImageLoad_=function(){this.resolution===void 0&&(this.resolution=Ti(this.extent)/this.image_.height),this.state=ke.LOADED,this.unlistenImage_(),this.changed()},t.prototype.load=function(){(this.state==ke.IDLE||this.state==ke.ERROR)&&(this.state=ke.LOADING,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=Nf(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},t.prototype.setImage=function(e){this.image_=e,this.resolution=Ti(this.extent)/this.image_.height},t.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},t}(Hm);function Nf(i,t,e){var n=i;if(n.src&&dC){var r=n.decode(),o=!0,a=function(){o=!1};return r.then(function(){o&&t()}).catch(function(l){o&&(l.name==="EncodingError"&&l.message==="Invalid image type."?t():e())}),a}var s=[mc(n,Ie.LOAD,t),mc(n,Ie.ERROR,e)];return function(){s.forEach(Pt)}}const tS=eS;var iS=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),al=null,nS=function(i){iS(t,i);function t(e,n,r,o,a,s){var l=i.call(this)||this;return l.hitDetectionImage_=null,l.image_=e||new Image,o!==null&&(l.image_.crossOrigin=o),l.canvas_={},l.color_=s,l.unlisten_=null,l.imageState_=a,l.size_=r,l.src_=n,l.tainted_,l}return t.prototype.isTainted_=function(){if(this.tainted_===void 0&&this.imageState_===ke.LOADED){al||(al=Mn(1,1)),al.drawImage(this.image_,0,0);try{al.getImageData(0,0,1,1),this.tainted_=!1}catch{al=null,this.tainted_=!0}}return this.tainted_===!0},t.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(Ie.CHANGE)},t.prototype.handleImageError_=function(){this.imageState_=ke.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()},t.prototype.handleImageLoad_=function(){this.imageState_=ke.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()},t.prototype.getImage=function(e){return this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_},t.prototype.getPixelRatio=function(e){return this.replaceColor_(e),this.canvas_[e]?e:1},t.prototype.getImageState=function(){return this.imageState_},t.prototype.getHitDetectionImage=function(){if(!this.hitDetectionImage_)if(this.isTainted_()){var e=this.size_[0],n=this.size_[1],r=Mn(e,n);r.fillRect(0,0,e,n),this.hitDetectionImage_=r.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},t.prototype.getSize=function(){return this.size_},t.prototype.getSrc=function(){return this.src_},t.prototype.load=function(){if(this.imageState_==ke.IDLE){this.imageState_=ke.LOADING;try{this.image_.src=this.src_}catch{this.handleImageError_()}this.unlisten_=Nf(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}},t.prototype.replaceColor_=function(e){if(!(!this.color_||this.canvas_[e]||this.imageState_!==ke.LOADED)){var n=document.createElement("canvas");this.canvas_[e]=n,n.width=Math.ceil(this.image_.width*e),n.height=Math.ceil(this.image_.height*e);var r=n.getContext("2d");if(r.scale(e,e),r.drawImage(this.image_,0,0),r.globalCompositeOperation="multiply",r.globalCompositeOperation==="multiply"||this.isTainted_())r.fillStyle=im(this.color_),r.fillRect(0,0,n.width/e,n.height/e),r.globalCompositeOperation="destination-in",r.drawImage(this.image_,0,0);else{for(var o=r.getImageData(0,0,n.width,n.height),a=o.data,s=this.color_[0]/255,l=this.color_[1]/255,u=this.color_[2]/255,c=this.color_[3],h=0,d=a.length;h<d;h+=4)a[h]*=s,a[h+1]*=l,a[h+2]*=u,a[h+3]*=c;r.putImageData(o,0,0)}}},t.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},t}(Ys);function rS(i,t,e,n,r,o){var a=vc.get(t,n,o);return a||(a=new nS(i,t,e,n,r,o),vc.set(t,n,o,a)),a}var oS=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),aS=function(i){oS(t,i);function t(e){var n=this,r=e||{},o=r.opacity!==void 0?r.opacity:1,a=r.rotation!==void 0?r.rotation:0,s=r.scale!==void 0?r.scale:1,l=r.rotateWithView!==void 0?r.rotateWithView:!1;n=i.call(this,{opacity:o,rotation:a,scale:s,displacement:r.displacement!==void 0?r.displacement:[0,0],rotateWithView:l})||this,n.anchor_=r.anchor!==void 0?r.anchor:[.5,.5],n.normalizedAnchor_=null,n.anchorOrigin_=r.anchorOrigin!==void 0?r.anchorOrigin:hi.TOP_LEFT,n.anchorXUnits_=r.anchorXUnits!==void 0?r.anchorXUnits:Qi.FRACTION,n.anchorYUnits_=r.anchorYUnits!==void 0?r.anchorYUnits:Qi.FRACTION,n.crossOrigin_=r.crossOrigin!==void 0?r.crossOrigin:null;var u=r.img!==void 0?r.img:null,c=r.imgSize!==void 0?r.imgSize:null,h=r.src;be(!(h!==void 0&&u),4),be(!u||u&&c,5),(h===void 0||h.length===0)&&u&&(h=u.src||_e(u)),be(h!==void 0&&h.length>0,6);var d=r.src!==void 0?ke.IDLE:ke.LOADED;return n.color_=r.color!==void 0?af(r.color):null,n.iconImage_=rS(u,h,c,n.crossOrigin_,d,n.color_),n.offset_=r.offset!==void 0?r.offset:[0,0],n.offsetOrigin_=r.offsetOrigin!==void 0?r.offsetOrigin:hi.TOP_LEFT,n.origin_=null,n.size_=r.size!==void 0?r.size:null,n}return t.prototype.clone=function(){var e=this.getScale();return new t({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:this.size_!==null?this.size_.slice():void 0,opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},t.prototype.getAnchor=function(){if(this.normalizedAnchor_)return this.normalizedAnchor_;var e=this.anchor_,n=this.getSize();if(this.anchorXUnits_==Qi.FRACTION||this.anchorYUnits_==Qi.FRACTION){if(!n)return null;e=this.anchor_.slice(),this.anchorXUnits_==Qi.FRACTION&&(e[0]*=n[0]),this.anchorYUnits_==Qi.FRACTION&&(e[1]*=n[1])}if(this.anchorOrigin_!=hi.TOP_LEFT){if(!n)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_==hi.TOP_RIGHT||this.anchorOrigin_==hi.BOTTOM_RIGHT)&&(e[0]=-e[0]+n[0]),(this.anchorOrigin_==hi.BOTTOM_LEFT||this.anchorOrigin_==hi.BOTTOM_RIGHT)&&(e[1]=-e[1]+n[1])}var r=this.getDisplacement();return e[0]-=r[0],e[1]+=r[1],this.normalizedAnchor_=e,this.normalizedAnchor_},t.prototype.setAnchor=function(e){this.anchor_=e,this.normalizedAnchor_=null},t.prototype.getColor=function(){return this.color_},t.prototype.getImage=function(e){return this.iconImage_.getImage(e)},t.prototype.getPixelRatio=function(e){return this.iconImage_.getPixelRatio(e)},t.prototype.getImageSize=function(){return this.iconImage_.getSize()},t.prototype.getImageState=function(){return this.iconImage_.getImageState()},t.prototype.getHitDetectionImage=function(){return this.iconImage_.getHitDetectionImage()},t.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var e=this.offset_;if(this.offsetOrigin_!=hi.TOP_LEFT){var n=this.getSize(),r=this.iconImage_.getSize();if(!n||!r)return null;e=e.slice(),(this.offsetOrigin_==hi.TOP_RIGHT||this.offsetOrigin_==hi.BOTTOM_RIGHT)&&(e[0]=r[0]-n[0]-e[0]),(this.offsetOrigin_==hi.BOTTOM_LEFT||this.offsetOrigin_==hi.BOTTOM_RIGHT)&&(e[1]=r[1]-n[1]-e[1])}return this.origin_=e,this.origin_},t.prototype.getSrc=function(){return this.iconImage_.getSrc()},t.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},t.prototype.listenImageChange=function(e){this.iconImage_.addEventListener(Ie.CHANGE,e)},t.prototype.load=function(){this.iconImage_.load()},t.prototype.unlistenImageChange=function(e){this.iconImage_.removeEventListener(Ie.CHANGE,e)},t}(Pc);const ni=aS;var sS="#333",lS=function(){function i(t){var e=t||{};this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.scaleArray_=Bi(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new Ge({color:sS}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:Wm.POINT,this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding}return i.prototype.clone=function(){var t=this.getScale();return new i({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()})},i.prototype.getOverflow=function(){return this.overflow_},i.prototype.getFont=function(){return this.font_},i.prototype.getMaxAngle=function(){return this.maxAngle_},i.prototype.getPlacement=function(){return this.placement_},i.prototype.getOffsetX=function(){return this.offsetX_},i.prototype.getOffsetY=function(){return this.offsetY_},i.prototype.getFill=function(){return this.fill_},i.prototype.getRotateWithView=function(){return this.rotateWithView_},i.prototype.getRotation=function(){return this.rotation_},i.prototype.getScale=function(){return this.scale_},i.prototype.getScaleArray=function(){return this.scaleArray_},i.prototype.getStroke=function(){return this.stroke_},i.prototype.getText=function(){return this.text_},i.prototype.getTextAlign=function(){return this.textAlign_},i.prototype.getTextBaseline=function(){return this.textBaseline_},i.prototype.getBackgroundFill=function(){return this.backgroundFill_},i.prototype.getBackgroundStroke=function(){return this.backgroundStroke_},i.prototype.getPadding=function(){return this.padding_},i.prototype.setOverflow=function(t){this.overflow_=t},i.prototype.setFont=function(t){this.font_=t},i.prototype.setMaxAngle=function(t){this.maxAngle_=t},i.prototype.setOffsetX=function(t){this.offsetX_=t},i.prototype.setOffsetY=function(t){this.offsetY_=t},i.prototype.setPlacement=function(t){this.placement_=t},i.prototype.setRotateWithView=function(t){this.rotateWithView_=t},i.prototype.setFill=function(t){this.fill_=t},i.prototype.setRotation=function(t){this.rotation_=t},i.prototype.setScale=function(t){this.scale_=t,this.scaleArray_=Bi(t!==void 0?t:1)},i.prototype.setStroke=function(t){this.stroke_=t},i.prototype.setText=function(t){this.text_=t},i.prototype.setTextAlign=function(t){this.textAlign_=t},i.prototype.setTextBaseline=function(t){this.textBaseline_=t},i.prototype.setBackgroundFill=function(t){this.backgroundFill_=t},i.prototype.setBackgroundStroke=function(t){this.backgroundStroke_=t},i.prototype.setPadding=function(t){this.padding_=t},i}();const Cr=lS;var En=.5;function qm(i,t,e,n,r,o,a){var s=i[0]*En,l=i[1]*En,u=Mn(s,l);u.imageSmoothingEnabled=!1;for(var c=u.canvas,h=new Kw(u,En,r,null,a),d=e.length,p=Math.floor((256*256*256-1)/d),f={},g=1;g<=d;++g){var v=e[g-1],y=v.getStyleFunction()||n;if(n){var m=y(v,o);if(m){Array.isArray(m)||(m=[m]);for(var A=g*p,_="#"+("000000"+A.toString(16)).slice(-6),C=0,I=m.length;C<I;++C){var E=m[C],w=E.getGeometryFunction()(v);if(!(!w||!Vt(r,w.getExtent()))){var S=E.clone(),x=S.getFill();x&&x.setColor(_);var T=S.getStroke();T&&(T.setColor(_),T.setLineDash(null)),S.setText(void 0);var L=E.getImage();if(L&&L.getOpacity()!==0){var G=L.getImageSize();if(!G)continue;var N=Mn(G[0],G[1],void 0,{alpha:!1}),B=N.canvas;N.fillStyle=_,N.fillRect(0,0,B.width,B.height),S.setImage(new ni({img:B,imgSize:G,anchor:L.getAnchor(),anchorXUnits:Qi.PIXELS,anchorYUnits:Qi.PIXELS,offset:L.getOrigin(),opacity:1,size:L.getSize(),scale:L.getScale(),rotation:L.getRotation(),rotateWithView:L.getRotateWithView()}))}var U=S.getZIndex()||0,D=f[U];D||(D={},f[U]=D,D[b.POLYGON]=[],D[b.CIRCLE]=[],D[b.LINE_STRING]=[],D[b.POINT]=[]),D[w.getType().replace("Multi","")].push(w,S)}}}}}for(var z=Object.keys(f).map(Number).sort(va),g=0,F=z.length;g<F;++g){var D=f[z[g]];for(var O in D)for(var R=D[O],C=0,I=R.length;C<I;C+=2){h.setStyle(R[C+1]);for(var M=0,ie=t.length;M<ie;++M)h.setTransform(t[M]),h.drawGeometry(R[C])}}return u.getImageData(0,0,c.width,c.height)}function Xm(i,t,e){var n=[];if(e){var r=Math.floor(Math.round(i[0])*En),o=Math.floor(Math.round(i[1])*En),a=(ri(r,0,e.width-1)+ri(o,0,e.height-1)*e.width)*4,s=e.data[a],l=e.data[a+1],u=e.data[a+2],c=u+256*(l+256*s),h=Math.floor((256*256*256-1)/t.length);c&&c%h===0&&n.push(t[c/h-1])}return n}var uS=.5,Zm={Point:mS,LineString:fS,Polygon:AS,MultiPoint:yS,MultiLineString:gS,MultiPolygon:vS,GeometryCollection:pS,Circle:hS};function cS(i,t){return parseInt(_e(i),10)-parseInt(_e(t),10)}function Km(i,t){var e=_p(i,t);return e*e}function _p(i,t){return uS*i/t}function hS(i,t,e,n,r){var o=e.getFill(),a=e.getStroke();if(o||a){var s=i.getBuilder(e.getZIndex(),Ke.CIRCLE);s.setFillStrokeStyle(o,a),s.drawCircle(t,n)}var l=e.getText();if(l&&l.getText()){var u=(r||i).getBuilder(e.getZIndex(),Ke.TEXT);u.setTextStyle(l),u.drawText(t,n)}}function bc(i,t,e,n,r,o,a){var s=!1,l=e.getImage();if(l){var u=l.getImageState();u==ke.LOADED||u==ke.ERROR?l.unlistenImageChange(r):(u==ke.IDLE&&l.load(),u=l.getImageState(),l.listenImageChange(r),s=!0)}return dS(i,t,e,n,o,a),s}function dS(i,t,e,n,r,o){var a=e.getGeometryFunction()(t);if(a){var s=a.simplifyTransformed(n,r),l=e.getRenderer();if(l)Jm(i,s,e,t);else{var u=Zm[s.getType()];u(i,s,e,t,o)}}}function Jm(i,t,e,n){if(t.getType()==b.GEOMETRY_COLLECTION){for(var r=t.getGeometries(),o=0,a=r.length;o<a;++o)Jm(i,r[o],e,n);return}var s=i.getBuilder(e.getZIndex(),Ke.DEFAULT);s.drawCustom(t,n,e.getRenderer(),e.getHitDetectionRenderer())}function pS(i,t,e,n,r){var o=t.getGeometriesArray(),a,s;for(a=0,s=o.length;a<s;++a){var l=Zm[o[a].getType()];l(i,o[a],e,n,r)}}function fS(i,t,e,n,r){var o=e.getStroke();if(o){var a=i.getBuilder(e.getZIndex(),Ke.LINE_STRING);a.setFillStrokeStyle(null,o),a.drawLineString(t,n)}var s=e.getText();if(s&&s.getText()){var l=(r||i).getBuilder(e.getZIndex(),Ke.TEXT);l.setTextStyle(s),l.drawText(t,n)}}function gS(i,t,e,n,r){var o=e.getStroke();if(o){var a=i.getBuilder(e.getZIndex(),Ke.LINE_STRING);a.setFillStrokeStyle(null,o),a.drawMultiLineString(t,n)}var s=e.getText();if(s&&s.getText()){var l=(r||i).getBuilder(e.getZIndex(),Ke.TEXT);l.setTextStyle(s),l.drawText(t,n)}}function vS(i,t,e,n,r){var o=e.getFill(),a=e.getStroke();if(a||o){var s=i.getBuilder(e.getZIndex(),Ke.POLYGON);s.setFillStrokeStyle(o,a),s.drawMultiPolygon(t,n)}var l=e.getText();if(l&&l.getText()){var u=(r||i).getBuilder(e.getZIndex(),Ke.TEXT);u.setTextStyle(l),u.drawText(t,n)}}function mS(i,t,e,n,r){var o=e.getImage(),a=e.getText(),s;if(r&&(i=r,s=o&&a&&a.getText()?{}:void 0),o){if(o.getImageState()!=ke.LOADED)return;var l=i.getBuilder(e.getZIndex(),Ke.IMAGE);l.setImageStyle(o,s),l.drawPoint(t,n)}if(a&&a.getText()){var u=i.getBuilder(e.getZIndex(),Ke.TEXT);u.setTextStyle(a,s),u.drawText(t,n)}}function yS(i,t,e,n,r){var o=e.getImage(),a=e.getText(),s;if(r&&(i=r,s=o&&a&&a.getText()?{}:void 0),o){if(o.getImageState()!=ke.LOADED)return;var l=i.getBuilder(e.getZIndex(),Ke.IMAGE);l.setImageStyle(o,s),l.drawMultiPoint(t,n)}if(a&&a.getText()){var u=(r||i).getBuilder(e.getZIndex(),Ke.TEXT);u.setTextStyle(a,s),u.drawText(t,n)}}function AS(i,t,e,n,r){var o=e.getFill(),a=e.getStroke();if(o||a){var s=i.getBuilder(e.getZIndex(),Ke.POLYGON);s.setFillStrokeStyle(o,a),s.drawPolygon(t,n)}var l=e.getText();if(l&&l.getText()){var u=(r||i).getBuilder(e.getZIndex(),Ke.TEXT);u.setTextStyle(l),u.drawText(t,n)}}var _S=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),CS=function(i){_S(t,i);function t(e){var n=i.call(this,e)||this;return n.boundHandleStyleImageChange_=n.handleStyleImageChange_.bind(n),n.animatingOrInteracting_,n.dirty_=!1,n.hitDetectionImageData_=null,n.renderedFeatures_=null,n.renderedRevision_=-1,n.renderedResolution_=NaN,n.renderedExtent_=pn(),n.wrappedRenderedExtent_=pn(),n.renderedRotation_,n.renderedCenter_=null,n.renderedProjection_=null,n.renderedRenderOrder_=null,n.replayGroup_=null,n.replayGroupChanged=!0,n.declutterExecutorGroup=null,n.clipping=!0,n}return t.prototype.useContainer=function(e,n,r){r<1&&(e=null),i.prototype.useContainer.call(this,e,n,r)},t.prototype.renderWorlds=function(e,n,r){var o=n.extent,a=n.viewState,s=a.center,l=a.resolution,u=a.projection,c=a.rotation,h=u.getExtent(),d=this.getLayer().getSource(),p=n.pixelRatio,f=n.viewHints,g=!(f[jt.ANIMATING]||f[jt.INTERACTING]),v=this.context,y=Math.round(n.size[0]*p),m=Math.round(n.size[1]*p),A=d.getWrapX()&&u.canWrapX(),_=A?Ct(h):null,C=A?Math.ceil((o[2]-h[2])/_)+1:1,I=A?Math.floor((o[0]-h[0])/_):0;do{var E=this.getRenderTransform(s,l,c,p,y,m,I*_);e.execute(v,1,E,c,g,void 0,r)}while(++I<C)},t.prototype.renderDeclutter=function(e){this.declutterExecutorGroup&&this.renderWorlds(this.declutterExecutorGroup,e,e.declutterTree)},t.prototype.renderFrame=function(e,n){var r=e.pixelRatio,o=e.layerStatesArray[e.layerIndex];vC(this.pixelTransform,1/r,1/r),$p(this.inversePixelTransform,this.pixelTransform);var a=Qv(this.pixelTransform);this.useContainer(n,a,o.opacity);var s=this.context,l=s.canvas,u=this.replayGroup_,c=this.declutterExecutorGroup;if((!u||u.isEmpty())&&(!c||c.isEmpty()))return null;var h=Math.round(e.size[0]*r),d=Math.round(e.size[1]*r);l.width!=h||l.height!=d?(l.width=h,l.height=d,l.style.transform!==a&&(l.style.transform=a)):this.containerReused||s.clearRect(0,0,h,d),this.preRender(s,e);var p=e.viewState;p.projection;var f=!1,g=!0;if(o.extent&&this.clipping){var v=Vr(o.extent);g=Vt(v,e.extent),f=g&&!zr(v,e.extent),f&&this.clipUnrotated(s,e,v)}g&&this.renderWorlds(u,e),f&&s.restore(),this.postRender(s,e);var y=cf(o.opacity),m=this.container;return y!==m.style.opacity&&(m.style.opacity=y),this.renderedRotation_!==p.rotation&&(this.renderedRotation_=p.rotation,this.hitDetectionImageData_=null),this.container},t.prototype.getFeatures=function(e){return new Promise((function(n){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){var r=[this.context.canvas.width,this.context.canvas.height];ei(this.pixelTransform,r);var o=this.renderedCenter_,a=this.renderedResolution_,s=this.renderedRotation_,l=this.renderedProjection_,u=this.wrappedRenderedExtent_,c=this.getLayer(),h=[],d=r[0]*En,p=r[1]*En;h.push(this.getRenderTransform(o,a,s,En,d,p,0).slice());var f=c.getSource(),g=l.getExtent();if(f.getWrapX()&&l.canWrapX()&&!zr(g,u)){for(var v=u[0],y=Ct(g),m=0,A=void 0;v<g[0];)--m,A=y*m,h.push(this.getRenderTransform(o,a,s,En,d,p,A).slice()),v+=y;for(m=0,v=u[2];v>g[2];)++m,A=y*m,h.push(this.getRenderTransform(o,a,s,En,d,p,A).slice()),v-=y}this.hitDetectionImageData_=qm(r,h,this.renderedFeatures_,c.getStyleFunction(),u,a,s)}n(Xm(e,this.renderedFeatures_,this.hitDetectionImageData_))}).bind(this))},t.prototype.forEachFeatureAtCoordinate=function(e,n,r,o,a){var s=this;if(this.replayGroup_){var l=n.viewState.resolution,u=n.viewState.rotation,c=this.getLayer(),h={},d=function(g,v,y){var m=_e(g),A=h[m];if(A){if(A!==!0&&y<A.distanceSq){if(y===0)return h[m]=!0,a.splice(a.lastIndexOf(A),1),o(g,c,v);A.geometry=v,A.distanceSq=y}}else{if(y===0)return h[m]=!0,o(g,c,v);a.push(h[m]={feature:g,layer:c,geometry:v,distanceSq:y,callback:o})}},p,f=[this.replayGroup_];return this.declutterExecutorGroup&&f.push(this.declutterExecutorGroup),f.some(function(g){return p=g.forEachFeatureAtCoordinate(e,l,u,r,d,g===s.declutterExecutorGroup?n.declutterTree.all().map(function(v){return v.value}):null)}),p}},t.prototype.handleFontsChanged=function(){var e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()},t.prototype.handleStyleImageChange_=function(e){this.renderIfReadyAndVisible()},t.prototype.prepareFrame=function(e){var n=this.getLayer(),r=n.getSource();if(!r)return!1;var o=e.viewHints[jt.ANIMATING],a=e.viewHints[jt.INTERACTING],s=n.getUpdateWhileAnimating(),l=n.getUpdateWhileInteracting();if(!this.dirty_&&!s&&o||!l&&a)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;var u=e.extent,c=e.viewState,h=c.projection,d=c.resolution,p=e.pixelRatio,f=n.getRevision(),g=n.getRenderBuffer(),v=n.getRenderOrder();v===void 0&&(v=cS);var y=c.center.slice(),m=Jn(u,g*d),A=m.slice(),_=[m.slice()],C=h.getExtent();if(r.getWrapX()&&h.canWrapX()&&!zr(C,e.extent)){var I=Ct(C),E=Math.max(Ct(m)/2,I);m[0]=C[0]-E,m[2]=C[2]+E,lf(y,h);var w=wC(_[0],h);w[0]<C[0]&&w[2]<C[2]?_.push([w[0]+I,w[1],w[2]+I,w[3]]):w[0]>C[0]&&w[2]>C[2]&&_.push([w[0]-I,w[1],w[2]-I,w[3]])}if(!this.dirty_&&this.renderedResolution_==d&&this.renderedRevision_==f&&this.renderedRenderOrder_==v&&zr(this.wrappedRenderedExtent_,m))return Ga(this.renderedExtent_,A)||(this.hitDetectionImageData_=null,this.renderedExtent_=A),this.renderedCenter_=y,this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;var S=new Mc(_p(d,p),m,d,p),x;this.getLayer().getDeclutter()&&(x=new Mc(_p(d,p),m,d,p));for(var T,L,G,L=0,G=_.length;L<G;++L)r.loadFeatures(_[L],d,h);var N=Km(d,p),B=(function(O){var R,M=O.getStyleFunction()||n.getStyleFunction();if(M&&(R=M(O,d)),R){var ie=this.renderFeature(O,N,R,S,T,x);this.dirty_=this.dirty_||ie}}).bind(this),U=wh(m),D=r.getFeaturesInExtent(U);v&&D.sort(v);for(var L=0,G=D.length;L<G;++L)B(D[L]);this.renderedFeatures_=D;var z=S.finish(),F=new Tc(m,d,p,r.getOverlaps(),z,n.getRenderBuffer());return x&&(this.declutterExecutorGroup=new Tc(m,d,p,r.getOverlaps(),x.finish(),n.getRenderBuffer())),this.renderedResolution_=d,this.renderedRevision_=f,this.renderedRenderOrder_=v,this.renderedExtent_=A,this.wrappedRenderedExtent_=m,this.renderedCenter_=y,this.renderedProjection_=h,this.replayGroup_=F,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0},t.prototype.renderFeature=function(e,n,r,o,a,s){if(!r)return!1;var l=!1;if(Array.isArray(r))for(var u=0,c=r.length;u<c;++u)l=bc(o,e,r[u],n,this.boundHandleStyleImageChange_,a,s)||l;else l=bc(o,e,r,n,this.boundHandleStyleImageChange_,a,s);return l},t}(Ym);const IS=CS;var ES=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),wS=function(i){ES(t,i);function t(e){return i.call(this,e)||this}return t.prototype.createRenderer=function(){return new IS(this)},t}(zm);const mi=wS;var SS=function(){function i(t){this.rbush_=new jm(t),this.items_={}}return i.prototype.insert=function(t,e){var n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(n),this.items_[_e(e)]=n},i.prototype.load=function(t,e){for(var n=new Array(e.length),r=0,o=e.length;r<o;r++){var a=t[r],s=e[r],l={minX:a[0],minY:a[1],maxX:a[2],maxY:a[3],value:s};n[r]=l,this.items_[_e(s)]=l}this.rbush_.load(n)},i.prototype.remove=function(t){var e=_e(t),n=this.items_[e];return delete this.items_[e],this.rbush_.remove(n)!==null},i.prototype.update=function(t,e){var n=this.items_[_e(e)],r=[n.minX,n.minY,n.maxX,n.maxY];ya(r,t)||(this.remove(e),this.insert(t,e))},i.prototype.getAll=function(){var t=this.rbush_.all();return t.map(function(e){return e.value})},i.prototype.getInExtent=function(t){var e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]},n=this.rbush_.search(e);return n.map(function(r){return r.value})},i.prototype.forEach=function(t){return this.forEach_(this.getAll(),t)},i.prototype.forEachInExtent=function(t,e){return this.forEach_(this.getInExtent(t),e)},i.prototype.forEach_=function(t,e){for(var n,r=0,o=t.length;r<o;r++)if(n=e(t[r]),n)return n;return n},i.prototype.isEmpty=function(){return _a(this.items_)},i.prototype.clear=function(){this.rbush_.clear(),this.items_={}},i.prototype.getExtent=function(t){var e=this.rbush_.toJSON();return er(e.minX,e.minY,e.maxX,e.maxY,t)},i.prototype.concat=function(t){this.rbush_.load(t.rbush_.all());for(var e in t.items_)this.items_[e]=t.items_[e]},i}();const Cp=SS;var PS=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),xS=function(i){PS(t,i);function t(e){var n=i.call(this)||this;n.projection=Ee(e.projection),n.attributions_=Lg(e.attributions),n.attributionsCollapsible_=e.attributionsCollapsible!==void 0?e.attributionsCollapsible:!0,n.loading=!1,n.state_=e.state!==void 0?e.state:Ar.READY,n.wrapX_=e.wrapX!==void 0?e.wrapX:!1,n.viewResolver=null,n.viewRejector=null;var r=n;return n.viewPromise_=new Promise(function(o,a){r.viewResolver=o,r.viewRejector=a}),n}return t.prototype.getAttributions=function(){return this.attributions_},t.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},t.prototype.getProjection=function(){return this.projection},t.prototype.getResolutions=function(){return we()},t.prototype.getView=function(){return this.viewPromise_},t.prototype.getState=function(){return this.state_},t.prototype.getWrapX=function(){return this.wrapX_},t.prototype.getContextOptions=function(){},t.prototype.refresh=function(){this.changed()},t.prototype.setAttributions=function(e){this.attributions_=Lg(e),this.changed()},t.prototype.setState=function(e){this.state_=e,this.changed()},t}(ir);function Lg(i){return i?Array.isArray(i)?function(t){return i}:typeof i=="function"?i:function(t){return[i]}:null}const Ff=xS,bn={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function MS(i,t){return[[-1/0,-1/0,1/0,1/0]]}function TS(i){return function(t,e,n){var r=i.getZForResolution(HI(e)),o=i.getTileRangeForExtentAndZ(Vr(t),r),a=[],s=[r,0,0];for(s[1]=o.minX;s[1]<=o.maxX;++s[1])for(s[2]=o.minY;s[2]<=o.maxY;++s[2])a.push(wh(i.getTileCoordExtent(s)));return a}}var bS=!1;function Qm(i,t,e,n,r,o,a){var s=new XMLHttpRequest;s.open("GET",typeof i=="function"?i(e,n,r):i,!0),t.getType()==fo.ARRAY_BUFFER&&(s.responseType="arraybuffer"),s.withCredentials=bS,s.onload=function(l){if(!s.status||s.status>=200&&s.status<300){var u=t.getType(),c=void 0;u==fo.JSON||u==fo.TEXT?c=s.responseText:u==fo.XML?(c=s.responseXML,c||(c=new DOMParser().parseFromString(s.responseText,"application/xml"))):u==fo.ARRAY_BUFFER&&(c=s.response),c?o(t.readFeatures(c,{extent:e,featureProjection:r}),t.readProjection(c)):a()}else a()},s.onerror=a,s.send()}function Gg(i,t){return function(e,n,r,o,a){var s=this;Qm(i,t,e,n,r,function(l,u){s.addFeatures(l),o!==void 0&&o(l)},a||ma)}}var $m=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),co=function(i){$m(t,i);function t(e,n,r){var o=i.call(this,e)||this;return o.feature=n,o.features=r,o}return t}(zn),RS=function(i){$m(t,i);function t(e){var n=this,r=e||{};n=i.call(this,{attributions:r.attributions,projection:void 0,state:Ar.READY,wrapX:r.wrapX!==void 0?r.wrapX:!0})||this,n.on,n.once,n.un,n.loader_=ma,n.format_=r.format,n.overlaps_=r.overlaps===void 0?!0:r.overlaps,n.url_=r.url,r.loader!==void 0?n.loader_=r.loader:n.url_!==void 0&&(be(n.format_,7),n.loader_=Gg(n.url_,n.format_)),n.strategy_=r.strategy!==void 0?r.strategy:MS;var o=r.useSpatialIndex!==void 0?r.useSpatialIndex:!0;n.featuresRtree_=o?new Cp:null,n.loadedExtentsRtree_=new Cp,n.loadingExtentsCount_=0,n.nullGeometryFeatures_={},n.idIndex_={},n.uidIndex_={},n.featureChangeKeys_={},n.featuresCollection_=null;var a,s;return Array.isArray(r.features)?s=r.features:r.features&&(a=r.features,s=a.getArray()),!o&&a===void 0&&(a=new oi(s)),s!==void 0&&n.addFeaturesInternal(s),a!==void 0&&n.bindFeaturesCollection_(a),n}return t.prototype.addFeature=function(e){this.addFeatureInternal(e),this.changed()},t.prototype.addFeatureInternal=function(e){var n=_e(e);if(!this.addToIndex_(n,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(n,e);var r=e.getGeometry();if(r){var o=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(o,e)}else this.nullGeometryFeatures_[n]=e;this.dispatchEvent(new co(bn.ADDFEATURE,e))},t.prototype.setupChangeEvents_=function(e,n){this.featureChangeKeys_[e]=[rt(n,Ie.CHANGE,this.handleFeatureChange_,this),rt(n,Aa.PROPERTYCHANGE,this.handleFeatureChange_,this)]},t.prototype.addToIndex_=function(e,n){var r=!0,o=n.getId();return o!==void 0&&(o.toString()in this.idIndex_?r=!1:this.idIndex_[o.toString()]=n),r&&(be(!(e in this.uidIndex_),30),this.uidIndex_[e]=n),r},t.prototype.addFeatures=function(e){this.addFeaturesInternal(e),this.changed()},t.prototype.addFeaturesInternal=function(e){for(var n=[],r=[],o=[],a=0,s=e.length;a<s;a++){var l=e[a],u=_e(l);this.addToIndex_(u,l)&&r.push(l)}for(var a=0,c=r.length;a<c;a++){var l=r[a],u=_e(l);this.setupChangeEvents_(u,l);var h=l.getGeometry();if(h){var d=h.getExtent();n.push(d),o.push(l)}else this.nullGeometryFeatures_[u]=l}this.featuresRtree_&&this.featuresRtree_.load(n,o);for(var a=0,p=r.length;a<p;a++)this.dispatchEvent(new co(bn.ADDFEATURE,r[a]))},t.prototype.bindFeaturesCollection_=function(e){var n=!1;this.addEventListener(bn.ADDFEATURE,function(r){n||(n=!0,e.push(r.feature),n=!1)}),this.addEventListener(bn.REMOVEFEATURE,function(r){n||(n=!0,e.remove(r.feature),n=!1)}),e.addEventListener(ti.ADD,(function(r){n||(n=!0,this.addFeature(r.element),n=!1)}).bind(this)),e.addEventListener(ti.REMOVE,(function(r){n||(n=!0,this.removeFeature(r.element),n=!1)}).bind(this)),this.featuresCollection_=e},t.prototype.clear=function(e){if(e){for(var n in this.featureChangeKeys_){var r=this.featureChangeKeys_[n];r.forEach(Pt)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(this.removeFeatureInternal.bind(this));for(var o in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[o])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};var a=new co(bn.CLEAR);this.dispatchEvent(a),this.changed()},t.prototype.forEachFeature=function(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)},t.prototype.forEachFeatureAtCoordinateDirect=function(e,n){var r=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(r,function(o){var a=o.getGeometry();if(a.intersectsCoordinate(e))return n(o)})},t.prototype.forEachFeatureInExtent=function(e,n){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,n);this.featuresCollection_&&this.featuresCollection_.forEach(n)},t.prototype.forEachFeatureIntersectingExtent=function(e,n){return this.forEachFeatureInExtent(e,function(r){var o=r.getGeometry();if(o.intersectsExtent(e)){var a=n(r);if(a)return a}})},t.prototype.getFeaturesCollection=function(){return this.featuresCollection_},t.prototype.getFeatures=function(){var e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),_a(this.nullGeometryFeatures_)||St(e,rm(this.nullGeometryFeatures_))),e},t.prototype.getFeaturesAtCoordinate=function(e){var n=[];return this.forEachFeatureAtCoordinateDirect(e,function(r){n.push(r)}),n},t.prototype.getFeaturesInExtent=function(e){return this.featuresRtree_?this.featuresRtree_.getInExtent(e):this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]},t.prototype.getClosestFeatureToCoordinate=function(e,n){var r=e[0],o=e[1],a=null,s=[NaN,NaN],l=1/0,u=[-1/0,-1/0,1/0,1/0],c=n||Wr;return this.featuresRtree_.forEachInExtent(u,function(h){if(c(h)){var d=h.getGeometry(),p=l;if(l=d.closestPointXY(r,o,s,l),l<p){a=h;var f=Math.sqrt(l);u[0]=r-f,u[1]=o-f,u[2]=r+f,u[3]=o+f}}}),a},t.prototype.getExtent=function(e){return this.featuresRtree_.getExtent(e)},t.prototype.getFeatureById=function(e){var n=this.idIndex_[e.toString()];return n!==void 0?n:null},t.prototype.getFeatureByUid=function(e){var n=this.uidIndex_[e];return n!==void 0?n:null},t.prototype.getFormat=function(){return this.format_},t.prototype.getOverlaps=function(){return this.overlaps_},t.prototype.getUrl=function(){return this.url_},t.prototype.handleFeatureChange_=function(e){var n=e.target,r=_e(n),o=n.getGeometry();if(!o)r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(n),this.nullGeometryFeatures_[r]=n);else{var a=o.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(a,n)):this.featuresRtree_&&this.featuresRtree_.update(a,n)}var s=n.getId();if(s!==void 0){var l=s.toString();this.idIndex_[l]!==n&&(this.removeFromIdIndex_(n),this.idIndex_[l]=n)}else this.removeFromIdIndex_(n),this.uidIndex_[r]=n;this.changed(),this.dispatchEvent(new co(bn.CHANGEFEATURE,n))},t.prototype.hasFeature=function(e){var n=e.getId();return n!==void 0?n in this.idIndex_:_e(e)in this.uidIndex_},t.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&_a(this.nullGeometryFeatures_)},t.prototype.loadFeatures=function(e,n,r){for(var o=this.loadedExtentsRtree_,a=this.strategy_(e,n,r),s=function(h,d){var p=a[h],f=o.forEachInExtent(p,function(g){return zr(g.extent,p)});f||(++l.loadingExtentsCount_,l.dispatchEvent(new co(bn.FEATURESLOADSTART)),l.loader_.call(l,p,n,r,(function(g){--this.loadingExtentsCount_,this.dispatchEvent(new co(bn.FEATURESLOADEND,void 0,g))}).bind(l),(function(){--this.loadingExtentsCount_,this.dispatchEvent(new co(bn.FEATURESLOADERROR))}).bind(l)),o.insert(p,{extent:p.slice()}))},l=this,u=0,c=a.length;u<c;++u)s(u);this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0},t.prototype.refresh=function(){this.clear(!0),this.loadedExtentsRtree_.clear(),i.prototype.refresh.call(this)},t.prototype.removeLoadedExtent=function(e){var n=this.loadedExtentsRtree_,r;n.forEachInExtent(e,function(o){if(ya(o.extent,e))return r=o,!0}),r&&n.remove(r)},t.prototype.removeFeature=function(e){var n=_e(e);n in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[n]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.removeFeatureInternal(e),this.changed()},t.prototype.removeFeatureInternal=function(e){var n=_e(e);this.featureChangeKeys_[n].forEach(Pt),delete this.featureChangeKeys_[n];var r=e.getId();r!==void 0&&delete this.idIndex_[r.toString()],delete this.uidIndex_[n],this.dispatchEvent(new co(bn.REMOVEFEATURE,e))},t.prototype.removeFromIdIndex_=function(e){var n=!1;for(var r in this.idIndex_)if(this.idIndex_[r]===e){delete this.idIndex_[r],n=!0;break}return n},t.prototype.setLoader=function(e){this.loader_=e},t.prototype.setUrl=function(e){be(this.format_,7),this.url_=e,this.setLoader(Gg(e,this.format_))},t}(Ff);const fn=RS;var ey=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),ot={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon",CIRCLE:"Circle"},Nu={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"},Fu=function(i){ey(t,i);function t(e,n){var r=i.call(this,e)||this;return r.feature=n,r}return t}(zn),OS=function(i){ey(t,i);function t(e){var n=this,r=e;r.stopDown||(r.stopDown=Vs),n=i.call(this,r)||this,n.on,n.once,n.un,n.shouldHandle_=!1,n.downPx_=null,n.downTimeout_,n.lastDragTime_,n.pointerType_,n.freehand_=!1,n.source_=e.source?e.source:null,n.features_=e.features?e.features:null,n.snapTolerance_=e.snapTolerance?e.snapTolerance:12,n.type_=e.type,n.mode_=GS(n.type_),n.stopClick_=!!e.stopClick,n.minPoints_=e.minPoints?e.minPoints:n.mode_===ot.POLYGON?3:2,n.maxPoints_=n.mode_===ot.CIRCLE?2:e.maxPoints?e.maxPoints:1/0,n.finishCondition_=e.finishCondition?e.finishCondition:Wr;var o=e.geometryFunction;if(!o){var a=n.mode_;if(a===ot.CIRCLE)o=function(l,u,c){var h=u||new z1([NaN,NaN]),d=Xt(l[0]),p=Es(d,Xt(l[l.length-1]));return h.setCenterAndRadius(d,Math.sqrt(p)),h};else{var s;a===ot.POINT?s=Wi:a===ot.LINE_STRING?s=xn:a===ot.POLYGON&&(s=zi),o=function(l,u,c){return u?a===ot.POLYGON?l[0].length?u.setCoordinates([l[0].concat([l[0][0]])]):u.setCoordinates([]):u.setCoordinates(l):u=new s(l),u}}}return n.geometryFunction_=o,n.dragVertexDelay_=e.dragVertexDelay!==void 0?e.dragVertexDelay:500,n.finishCoordinate_=null,n.sketchFeature_=null,n.sketchPoint_=null,n.sketchCoords_=null,n.sketchLine_=null,n.sketchLineCoords_=null,n.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,n.overlay_=new mi({source:new fn({useSpatialIndex:!1,wrapX:e.wrapX?e.wrapX:!1}),style:e.style?e.style:LS(),updateWhileInteracting:!0}),n.geometryName_=e.geometryName,n.condition_=e.condition?e.condition:Gf,n.freehandCondition_,e.freehand?n.freehandCondition_=Rf:n.freehandCondition_=e.freehandCondition?e.freehandCondition:kf,n.addChangeListener(mp.ACTIVE,n.updateState_),n}return t.prototype.setMap=function(e){i.prototype.setMap.call(this,e),this.updateState_()},t.prototype.getOverlay=function(){return this.overlay_},t.prototype.handleEvent=function(e){e.originalEvent.type===Ie.CONTEXTMENU&&e.originalEvent.preventDefault(),this.freehand_=this.mode_!==ot.POINT&&this.freehandCondition_(e);var n=e.type===Je.POINTERMOVE,r=!0;if(!this.freehand_&&this.lastDragTime_&&e.type===Je.POINTERDRAG){var o=Date.now();o-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,n=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_!==void 0&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)}return this.freehand_&&e.type===Je.POINTERDRAG&&this.sketchFeature_!==null?(this.addToDrawing_(e.coordinate),r=!1):this.freehand_&&e.type===Je.POINTERDOWN?r=!1:n&&this.getPointerCount()<2?(r=e.type===Je.POINTERMOVE,r&&this.freehand_?(this.handlePointerMove_(e),this.shouldHandle_&&e.originalEvent.preventDefault()):(e.originalEvent.pointerType==="mouse"||e.type===Je.POINTERDRAG&&this.downTimeout_===void 0)&&this.handlePointerMove_(e)):e.type===Je.DBLCLICK&&(r=!1),i.prototype.handleEvent.call(this,e)&&r},t.prototype.handleDownEvent=function(e){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=e.pixel,this.finishCoordinate_||this.startDrawing_(e.coordinate),!0):this.condition_(e)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout((function(){this.handlePointerMove_(new Fr(Je.POINTERMOVE,e.map,e.originalEvent,!1,e.frameState))}).bind(this),this.dragVertexDelay_),this.downPx_=e.pixel,!0):(this.lastDragTime_=void 0,!1)},t.prototype.handleUpEvent=function(e){var n=!0;if(this.getPointerCount()===0)if(this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(e),this.shouldHandle_){var r=!this.finishCoordinate_;r&&this.startDrawing_(e.coordinate),!r&&this.freehand_?this.finishDrawing():!this.freehand_&&(!r||this.mode_===ot.POINT)&&(this.atFinish_(e.pixel)?this.finishCondition_(e)&&this.finishDrawing():this.addToDrawing_(e.coordinate)),n=!1}else this.freehand_&&this.abortDrawing();return!n&&this.stopClick_&&e.preventDefault(),n},t.prototype.handlePointerMove_=function(e){if(this.pointerType_=e.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var n=this.downPx_,r=e.pixel,o=n[0]-r[0],a=n[1]-r[1],s=o*o+a*a;if(this.shouldHandle_=this.freehand_?s>this.squaredClickTolerance_:s<=this.squaredClickTolerance_,!this.shouldHandle_)return}this.finishCoordinate_?this.modifyDrawing_(e.coordinate):this.createOrUpdateSketchPoint_(e.coordinate.slice())},t.prototype.atFinish_=function(e){var n=!1;if(this.sketchFeature_){var r=!1,o=[this.finishCoordinate_],a=this.mode_;if(a===ot.POINT)n=!0;else if(a===ot.CIRCLE)n=this.sketchCoords_.length===2;else if(a===ot.LINE_STRING)r=this.sketchCoords_.length>this.minPoints_;else if(a===ot.POLYGON){var s=this.sketchCoords_;r=s[0].length>this.minPoints_,o=[s[0][0],s[0][s[0].length-2]]}if(r)for(var l=this.getMap(),u=0,c=o.length;u<c;u++){var h=o[u],d=l.getPixelFromCoordinate(h),p=e[0]-d[0],f=e[1]-d[1],g=this.freehand_?1:this.snapTolerance_;if(n=Math.sqrt(p*p+f*f)<=g,n){this.finishCoordinate_=h;break}}}return n},t.prototype.createOrUpdateSketchPoint_=function(e){if(!this.sketchPoint_)this.sketchPoint_=new ii(new Wi(e)),this.updateSketchFeatures_();else{var n=this.sketchPoint_.getGeometry();n.setCoordinates(e)}},t.prototype.createOrUpdateCustomSketchLine_=function(e){this.sketchLine_||(this.sketchLine_=new ii);var n=e.getLinearRing(0),r=this.sketchLine_.getGeometry();r?(r.setFlatCoordinates(n.getLayout(),n.getFlatCoordinates()),r.changed()):(r=new xn(n.getFlatCoordinates(),n.getLayout()),this.sketchLine_.setGeometry(r))},t.prototype.startDrawing_=function(e){var n=this.getMap().getView().getProjection();this.finishCoordinate_=e,this.mode_===ot.POINT?this.sketchCoords_=e.slice():this.mode_===ot.POLYGON?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new ii(new xn(this.sketchLineCoords_)));var r=this.geometryFunction_(this.sketchCoords_,void 0,n);this.sketchFeature_=new ii,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(r),this.updateSketchFeatures_(),this.dispatchEvent(new Fu(Nu.DRAWSTART,this.sketchFeature_))},t.prototype.modifyDrawing_=function(e){var n=this.getMap(),r=this.sketchFeature_.getGeometry(),o=n.getView().getProjection(),a,s;if(this.mode_===ot.POINT?s=this.sketchCoords_:this.mode_===ot.POLYGON?(a=this.sketchCoords_[0],s=a[a.length-1],this.atFinish_(n.getPixelFromCoordinate(e))&&(e=this.finishCoordinate_.slice())):(a=this.sketchCoords_,s=a[a.length-1]),s[0]=e[0],s[1]=e[1],this.geometryFunction_(this.sketchCoords_,r,o),this.sketchPoint_){var l=this.sketchPoint_.getGeometry();l.setCoordinates(e)}if(r.getType()===b.POLYGON&&this.mode_!==ot.POLYGON)this.createOrUpdateCustomSketchLine_(r);else if(this.sketchLineCoords_){var u=this.sketchLine_.getGeometry();u.setCoordinates(this.sketchLineCoords_)}this.updateSketchFeatures_()},t.prototype.addToDrawing_=function(e){var n=this.sketchFeature_.getGeometry(),r=this.getMap().getView().getProjection(),o,a,s=this.mode_;s===ot.LINE_STRING||s===ot.CIRCLE?(this.finishCoordinate_=e.slice(),a=this.sketchCoords_,a.length>=this.maxPoints_&&(this.freehand_?a.pop():o=!0),a.push(e.slice()),this.geometryFunction_(a,n,r)):s===ot.POLYGON&&(a=this.sketchCoords_[0],a.length>=this.maxPoints_&&(this.freehand_?a.pop():o=!0),a.push(e.slice()),o&&(this.finishCoordinate_=a[0]),this.geometryFunction_(this.sketchCoords_,n,r)),this.createOrUpdateSketchPoint_(e.slice()),this.updateSketchFeatures_(),o&&this.finishDrawing()},t.prototype.removeLastPoint=function(){if(this.sketchFeature_){var e=this.sketchFeature_.getGeometry(),n=this.getMap().getView().getProjection(),r,o=this.mode_;if(o===ot.LINE_STRING||o===ot.CIRCLE){if(r=this.sketchCoords_,r.splice(-2,1),r.length>=2){this.finishCoordinate_=r[r.length-2].slice();var a=this.finishCoordinate_.slice();r[r.length-1]=a,this.createOrUpdateSketchPoint_(a)}this.geometryFunction_(r,e,n),e.getType()===b.POLYGON&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(e)}else if(o===ot.POLYGON){r=this.sketchCoords_[0],r.splice(-2,1);var s=this.sketchLine_.getGeometry();if(r.length>=2){var a=r[r.length-2].slice();r[r.length-1]=a,this.createOrUpdateSketchPoint_(a)}s.setCoordinates(r),this.geometryFunction_(this.sketchCoords_,e,n)}r.length===1&&this.abortDrawing(),this.updateSketchFeatures_()}},t.prototype.finishDrawing=function(){var e=this.abortDrawing_();if(e){var n=this.sketchCoords_,r=e.getGeometry(),o=this.getMap().getView().getProjection();this.mode_===ot.LINE_STRING?(n.pop(),this.geometryFunction_(n,r,o)):this.mode_===ot.POLYGON&&(n[0].pop(),this.geometryFunction_(n,r,o),n=r.getCoordinates()),this.type_===b.MULTI_POINT?e.setGeometry(new Ea([n])):this.type_===b.MULTI_LINE_STRING?e.setGeometry(new Zr([n])):this.type_===b.MULTI_POLYGON&&e.setGeometry(new wa([n])),this.dispatchEvent(new Fu(Nu.DRAWEND,e)),this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e)}},t.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var e=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),e},t.prototype.abortDrawing=function(){var e=this.abortDrawing_();e&&this.dispatchEvent(new Fu(Nu.DRAWABORT,e))},t.prototype.appendCoordinates=function(e){var n=this.mode_,r=!this.sketchFeature_;r&&this.startDrawing_(e[0]);var o;if(n===ot.LINE_STRING||n===ot.CIRCLE)o=this.sketchCoords_;else if(n===ot.POLYGON)o=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[];else return;r&&o.shift(),o.pop();for(var a=0;a<e.length;a++)this.addToDrawing_(e[a]);var s=e[e.length-1];this.addToDrawing_(s),this.modifyDrawing_(s)},t.prototype.extend=function(e){var n=e.getGeometry(),r=n;this.sketchFeature_=e,this.sketchCoords_=r.getCoordinates();var o=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=o.slice(),this.sketchCoords_.push(o.slice()),this.sketchPoint_=new ii(new Wi(o)),this.updateSketchFeatures_(),this.dispatchEvent(new Fu(Nu.DRAWSTART,this.sketchFeature_))},t.prototype.updateSketchFeatures_=function(){var e=[];this.sketchFeature_&&e.push(this.sketchFeature_),this.sketchLine_&&e.push(this.sketchLine_),this.sketchPoint_&&e.push(this.sketchPoint_);var n=this.overlay_.getSource();n.clear(!0),n.addFeatures(e)},t.prototype.updateState_=function(){var e=this.getMap(),n=this.getActive();(!e||!n)&&this.abortDrawing(),this.overlay_.setMap(n?e:null)},t}(Da);function LS(){var i=Df();return function(t,e){return i[t.getGeometry().getType()]}}function GS(i){switch(i){case b.POINT:case b.MULTI_POINT:return ot.POINT;case b.LINE_STRING:case b.MULTI_LINE_STRING:return ot.LINE_STRING;case b.POLYGON:case b.MULTI_POLYGON:return ot.POLYGON;case b.CIRCLE:return ot.CIRCLE;default:throw new Error("Invalid type: "+i)}}const Ln=OS;var ty=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),kg=0,Sl=1,Dg=[0,0,0,0],hs=[],Ad={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"},_d=function(i){ty(t,i);function t(e,n,r){var o=i.call(this,e)||this;return o.features=n,o.mapBrowserEvent=r,o}return t}(zn),kS=function(i){ty(t,i);function t(e){var n=i.call(this,e)||this;n.on,n.once,n.un,n.boundHandleFeatureChange_=n.handleFeatureChange_.bind(n),n.condition_=e.condition?e.condition:km,n.defaultDeleteCondition_=function(o){return s1(o)&&Lf(o)},n.deleteCondition_=e.deleteCondition?e.deleteCondition:n.defaultDeleteCondition_,n.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:Rf,n.vertexFeature_=null,n.vertexSegments_=null,n.lastPixel_=[0,0],n.ignoreNextSingleClick_=!1,n.featuresBeingModified_=null,n.rBush_=new Cp,n.pixelTolerance_=e.pixelTolerance!==void 0?e.pixelTolerance:10,n.snappedToVertex_=!1,n.changingFeature_=!1,n.dragSegments_=[],n.overlay_=new mi({source:new fn({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:NS(),updateWhileAnimating:!0,updateWhileInteracting:!0}),n.SEGMENT_WRITERS_={Point:n.writePointGeometry_.bind(n),LineString:n.writeLineStringGeometry_.bind(n),LinearRing:n.writeLineStringGeometry_.bind(n),Polygon:n.writePolygonGeometry_.bind(n),MultiPoint:n.writeMultiPointGeometry_.bind(n),MultiLineString:n.writeMultiLineStringGeometry_.bind(n),MultiPolygon:n.writeMultiPolygonGeometry_.bind(n),Circle:n.writeCircleGeometry_.bind(n),GeometryCollection:n.writeGeometryCollectionGeometry_.bind(n)},n.source_=null,n.hitDetection_=null;var r;if(e.features?r=e.features:e.source&&(n.source_=e.source,r=new oi(n.source_.getFeatures()),n.source_.addEventListener(bn.ADDFEATURE,n.handleSourceAdd_.bind(n)),n.source_.addEventListener(bn.REMOVEFEATURE,n.handleSourceRemove_.bind(n))),!r)throw new Error("The modify interaction requires features, a source or a layer");return e.hitDetection&&(n.hitDetection_=e.hitDetection),n.features_=r,n.features_.forEach(n.addFeature_.bind(n)),n.features_.addEventListener(ti.ADD,n.handleFeatureAdd_.bind(n)),n.features_.addEventListener(ti.REMOVE,n.handleFeatureRemove_.bind(n)),n.lastPointerEvent_=null,n.delta_=[0,0],n.snapToPointer_=e.snapToPointer===void 0?!n.hitDetection_:e.snapToPointer,n}return t.prototype.addFeature_=function(e){var n=e.getGeometry();if(n){var r=this.SEGMENT_WRITERS_[n.getType()];r&&r(e,n)}var o=this.getMap();o&&o.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,o),e.addEventListener(Ie.CHANGE,this.boundHandleFeatureChange_)},t.prototype.willModifyFeatures_=function(e,n){if(!this.featuresBeingModified_){this.featuresBeingModified_=new oi;for(var r=this.featuresBeingModified_.getArray(),o=0,a=n.length;o<a;++o)for(var s=n[o],l=0,u=s.length;l<u;++l){var c=s[l].feature;c&&r.indexOf(c)===-1&&this.featuresBeingModified_.push(c)}this.featuresBeingModified_.getLength()===0?this.featuresBeingModified_=null:this.dispatchEvent(new _d(Ad.MODIFYSTART,this.featuresBeingModified_,e))}},t.prototype.removeFeature_=function(e){this.removeFeatureSegmentData_(e),this.vertexFeature_&&this.features_.getLength()===0&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.removeEventListener(Ie.CHANGE,this.boundHandleFeatureChange_)},t.prototype.removeFeatureSegmentData_=function(e){var n=this.rBush_,r=[];n.forEach(function(l){e===l.feature&&r.push(l)});for(var o=r.length-1;o>=0;--o){for(var a=r[o],s=this.dragSegments_.length-1;s>=0;--s)this.dragSegments_[s][0]===a&&this.dragSegments_.splice(s,1);n.remove(a)}},t.prototype.setActive=function(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),i.prototype.setActive.call(this,e)},t.prototype.setMap=function(e){this.overlay_.setMap(e),i.prototype.setMap.call(this,e)},t.prototype.getOverlay=function(){return this.overlay_},t.prototype.handleSourceAdd_=function(e){e.feature&&this.features_.push(e.feature)},t.prototype.handleSourceRemove_=function(e){e.feature&&this.features_.remove(e.feature)},t.prototype.handleFeatureAdd_=function(e){this.addFeature_(e.element)},t.prototype.handleFeatureChange_=function(e){if(!this.changingFeature_){var n=e.target;this.removeFeature_(n),this.addFeature_(n)}},t.prototype.handleFeatureRemove_=function(e){var n=e.element;this.removeFeature_(n)},t.prototype.writePointGeometry_=function(e,n){var r=n.getCoordinates(),o={feature:e,geometry:n,segment:[r,r]};this.rBush_.insert(n.getExtent(),o)},t.prototype.writeMultiPointGeometry_=function(e,n){for(var r=n.getCoordinates(),o=0,a=r.length;o<a;++o){var s=r[o],l={feature:e,geometry:n,depth:[o],index:o,segment:[s,s]};this.rBush_.insert(n.getExtent(),l)}},t.prototype.writeLineStringGeometry_=function(e,n){for(var r=n.getCoordinates(),o=0,a=r.length-1;o<a;++o){var s=r.slice(o,o+2),l={feature:e,geometry:n,index:o,segment:s};this.rBush_.insert(Cn(s),l)}},t.prototype.writeMultiLineStringGeometry_=function(e,n){for(var r=n.getCoordinates(),o=0,a=r.length;o<a;++o)for(var s=r[o],l=0,u=s.length-1;l<u;++l){var c=s.slice(l,l+2),h={feature:e,geometry:n,depth:[o],index:l,segment:c};this.rBush_.insert(Cn(c),h)}},t.prototype.writePolygonGeometry_=function(e,n){for(var r=n.getCoordinates(),o=0,a=r.length;o<a;++o)for(var s=r[o],l=0,u=s.length-1;l<u;++l){var c=s.slice(l,l+2),h={feature:e,geometry:n,depth:[o],index:l,segment:c};this.rBush_.insert(Cn(c),h)}},t.prototype.writeMultiPolygonGeometry_=function(e,n){for(var r=n.getCoordinates(),o=0,a=r.length;o<a;++o)for(var s=r[o],l=0,u=s.length;l<u;++l)for(var c=s[l],h=0,d=c.length-1;h<d;++h){var p=c.slice(h,h+2),f={feature:e,geometry:n,depth:[l,o],index:h,segment:p};this.rBush_.insert(Cn(p),f)}},t.prototype.writeCircleGeometry_=function(e,n){var r=n.getCenter(),o={feature:e,geometry:n,index:kg,segment:[r,r]},a={feature:e,geometry:n,index:Sl,segment:[r,r]},s=[o,a];o.featureSegments=s,a.featureSegments=s,this.rBush_.insert(Il(r),o);var l=n;this.rBush_.insert(l.getExtent(),a)},t.prototype.writeGeometryCollectionGeometry_=function(e,n){for(var r=n.getGeometriesArray(),o=0;o<r.length;++o){var a=r[o],s=this.SEGMENT_WRITERS_[a.getType()];s(e,a)}},t.prototype.createOrUpdateVertexFeature_=function(e,n,r){var o=this.vertexFeature_;if(!o)o=new ii(new Wi(e)),this.vertexFeature_=o,this.overlay_.getSource().addFeature(o);else{var a=o.getGeometry();a.setCoordinates(e)}return o.set("features",n),o.set("geometries",r),o},t.prototype.handleEvent=function(e){if(!e.originalEvent)return!0;this.lastPointerEvent_=e;var n;return!e.map.getView().getInteracting()&&e.type==Je.POINTERMOVE&&!this.handlingDownUpSequence&&this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(e.type!=Je.SINGLECLICK||!this.ignoreNextSingleClick_?n=this.removePoint():n=!0),e.type==Je.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),i.prototype.handleEvent.call(this,e)&&!n},t.prototype.handleDragEvent=function(e){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(e,this.dragSegments_);for(var n=[e.coordinate[0]+this.delta_[0],e.coordinate[1]+this.delta_[1]],r=[],o=[],a=0,s=this.dragSegments_.length;a<s;++a){var l=this.dragSegments_[a],u=l[0],c=u.feature;r.indexOf(c)===-1&&r.push(c);var h=u.geometry;o.indexOf(h)===-1&&o.push(h);for(var d=u.depth,p=void 0,f=u.segment,g=l[1];n.length<h.getStride();)n.push(f[g][n.length]);switch(h.getType()){case b.POINT:p=n,f[0]=n,f[1]=n;break;case b.MULTI_POINT:p=h.getCoordinates(),p[u.index]=n,f[0]=n,f[1]=n;break;case b.LINE_STRING:p=h.getCoordinates(),p[u.index+g]=n,f[g]=n;break;case b.MULTI_LINE_STRING:p=h.getCoordinates(),p[d[0]][u.index+g]=n,f[g]=n;break;case b.POLYGON:p=h.getCoordinates(),p[d[0]][u.index+g]=n,f[g]=n;break;case b.MULTI_POLYGON:p=h.getCoordinates(),p[d[1]][d[0]][u.index+g]=n,f[g]=n;break;case b.CIRCLE:if(f[0]=n,f[1]=n,u.index===kg)this.changingFeature_=!0,h.setCenter(n),this.changingFeature_=!1;else{this.changingFeature_=!0;var v=e.map.getView().getProjection(),y=rg(Xt(h.getCenter()),Xt(n)),m=Wl();if(m){var A=h.clone().transform(m,v);A.setRadius(y),y=A.transform(v,m).getRadius()}h.setRadius(y),this.changingFeature_=!1}break}p&&this.setGeometryCoordinates_(h,p)}this.createOrUpdateVertexFeature_(n,r,o)},t.prototype.handleDownEvent=function(e){if(!this.condition_(e))return!1;var n=e.coordinate;this.handlePointerAtPixel_(e.pixel,e.map,n),this.dragSegments_.length=0,this.featuresBeingModified_=null;var r=this.vertexFeature_;if(r){var o=e.map.getView().getProjection(),a=[],s=r.getGeometry().getCoordinates(),l=Cn([s]),u=this.rBush_.getInExtent(l),c={};u.sort(DS);for(var h=0,d=u.length;h<d;++h){var p=u[h],f=p.segment,g=_e(p.geometry),v=p.depth;if(v&&(g+="-"+v.join("-")),c[g]||(c[g]=new Array(2)),p.geometry.getType()===b.CIRCLE&&p.index===Sl){var y=Fg(n,p,o);dr(y,s)&&!c[g][0]&&(this.dragSegments_.push([p,0]),c[g][0]=p);continue}if(dr(f[0],s)&&!c[g][0]){this.dragSegments_.push([p,0]),c[g][0]=p;continue}if(dr(f[1],s)&&!c[g][1]){if((p.geometry.getType()===b.LINE_STRING||p.geometry.getType()===b.MULTI_LINE_STRING)&&c[g][0]&&c[g][0].index===0)continue;this.dragSegments_.push([p,1]),c[g][1]=p;continue}_e(f)in this.vertexSegments_&&!c[g][0]&&!c[g][1]&&this.insertVertexCondition_(e)&&a.push(p)}a.length&&this.willModifyFeatures_(e,[a]);for(var m=a.length-1;m>=0;--m)this.insertVertex_(a[m],s)}return!!this.vertexFeature_},t.prototype.handleUpEvent=function(e){for(var n=this.dragSegments_.length-1;n>=0;--n){var r=this.dragSegments_[n][0],o=r.geometry;if(o.getType()===b.CIRCLE){var a=o.getCenter(),s=r.featureSegments[0],l=r.featureSegments[1];s.segment[0]=a,s.segment[1]=a,l.segment[0]=a,l.segment[1]=a,this.rBush_.update(Il(a),s);var u=o,c=Wl();if(c){var h=e.map.getView().getProjection();u=u.clone().transform(c,h),u=xE(u).transform(h,c)}this.rBush_.update(u.getExtent(),l)}else this.rBush_.update(Cn(r.segment),r)}return this.featuresBeingModified_&&(this.dispatchEvent(new _d(Ad.MODIFYEND,this.featuresBeingModified_,e)),this.featuresBeingModified_=null),!1},t.prototype.handlePointerMove_=function(e){this.lastPixel_=e.pixel,this.handlePointerAtPixel_(e.pixel,e.map,e.coordinate)},t.prototype.handlePointerAtPixel_=function(e,n,r){var o=this,a=r||n.getCoordinateFromPixel(e),s=n.getView().getProjection(),l=function(N,B){return Ng(a,N,s)-Ng(a,B,s)},u,c;if(this.hitDetection_){var h=typeof this.hitDetection_=="object"?function(N){return N===o.hitDetection_}:void 0;n.forEachFeatureAtPixel(e,function(N,B,U){if(U=U||N.getGeometry(),U.getType()===b.POINT&&cn(o.features_.getArray(),N)){c=U;var D=U.getFlatCoordinates().slice(0,2);u=[{feature:N,geometry:U,segment:[D,D]}]}return!0},{layerFilter:h})}if(!u){var d=Vr(Il(a,Dg)),p=n.getView().getResolution()*this.pixelTolerance_,f=wh(Jn(d,p,Dg));u=this.rBush_.getInExtent(f)}if(u&&u.length>0){var g=u.sort(l)[0],v=g.segment,y=Fg(a,g,s),m=n.getPixelFromCoordinate(y),A=rg(e,m);if(c||A<=this.pixelTolerance_){var _={};if(_[_e(v)]=!0,this.snapToPointer_||(this.delta_[0]=y[0]-a[0],this.delta_[1]=y[1]-a[1]),g.geometry.getType()===b.CIRCLE&&g.index===Sl)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(y,[g.feature],[g.geometry]);else{var C=n.getPixelFromCoordinate(v[0]),I=n.getPixelFromCoordinate(v[1]),E=Es(m,C),w=Es(m,I);A=Math.sqrt(Math.min(E,w)),this.snappedToVertex_=A<=this.pixelTolerance_,this.snappedToVertex_&&(y=E>w?v[1]:v[0]),this.createOrUpdateVertexFeature_(y,[g.feature],[g.geometry]);var S={};S[_e(g.geometry)]=!0;for(var x=1,T=u.length;x<T;++x){var L=u[x].segment;if(dr(v[0],L[0])&&dr(v[1],L[1])||dr(v[0],L[1])&&dr(v[1],L[0])){var G=_e(u[x].geometry);G in S||(S[G]=!0,_[_e(L)]=!0)}else break}}this.vertexSegments_=_;return}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},t.prototype.insertVertex_=function(e,n){for(var r=e.segment,o=e.feature,a=e.geometry,s=e.depth,l=e.index,u;n.length<a.getStride();)n.push(0);switch(a.getType()){case b.MULTI_LINE_STRING:u=a.getCoordinates(),u[s[0]].splice(l+1,0,n);break;case b.POLYGON:u=a.getCoordinates(),u[s[0]].splice(l+1,0,n);break;case b.MULTI_POLYGON:u=a.getCoordinates(),u[s[1]][s[0]].splice(l+1,0,n);break;case b.LINE_STRING:u=a.getCoordinates(),u.splice(l+1,0,n);break;default:return}this.setGeometryCoordinates_(a,u);var c=this.rBush_;c.remove(e),this.updateSegmentIndices_(a,l,s,1);var h={segment:[r[0],n],feature:o,geometry:a,depth:s,index:l};c.insert(Cn(h.segment),h),this.dragSegments_.push([h,1]);var d={segment:[n,r[1]],feature:o,geometry:a,depth:s,index:l+1};c.insert(Cn(d.segment),d),this.dragSegments_.push([d,0]),this.ignoreNextSingleClick_=!0},t.prototype.removePoint=function(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=Je.POINTERDRAG){var e=this.lastPointerEvent_;this.willModifyFeatures_(e,this.dragSegments_);var n=this.removeVertex_();return this.dispatchEvent(new _d(Ad.MODIFYEND,this.featuresBeingModified_,e)),this.featuresBeingModified_=null,n}return!1},t.prototype.removeVertex_=function(){var e=this.dragSegments_,n={},r=!1,o,a,s,l,u,c,h,d,p,f,g;for(u=e.length-1;u>=0;--u)s=e[u],f=s[0],g=_e(f.feature),f.depth&&(g+="-"+f.depth.join("-")),g in n||(n[g]={}),s[1]===0?(n[g].right=f,n[g].index=f.index):s[1]==1&&(n[g].left=f,n[g].index=f.index+1);for(g in n){switch(p=n[g].right,h=n[g].left,c=n[g].index,d=c-1,h!==void 0?f=h:f=p,d<0&&(d=0),l=f.geometry,a=l.getCoordinates(),o=a,r=!1,l.getType()){case b.MULTI_LINE_STRING:a[f.depth[0]].length>2&&(a[f.depth[0]].splice(c,1),r=!0);break;case b.LINE_STRING:a.length>2&&(a.splice(c,1),r=!0);break;case b.MULTI_POLYGON:o=o[f.depth[1]];case b.POLYGON:o=o[f.depth[0]],o.length>4&&(c==o.length-1&&(c=0),o.splice(c,1),r=!0,c===0&&(o.pop(),o.push(o[0]),d=o.length-1));break}if(r){this.setGeometryCoordinates_(l,a);var v=[];if(h!==void 0&&(this.rBush_.remove(h),v.push(h.segment[0])),p!==void 0&&(this.rBush_.remove(p),v.push(p.segment[1])),h!==void 0&&p!==void 0){var y={depth:f.depth,feature:f.feature,geometry:f.geometry,index:d,segment:v};this.rBush_.insert(Cn(y.segment),y)}this.updateSegmentIndices_(l,c,f.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.length=0}}return r},t.prototype.setGeometryCoordinates_=function(e,n){this.changingFeature_=!0,e.setCoordinates(n),this.changingFeature_=!1},t.prototype.updateSegmentIndices_=function(e,n,r,o){this.rBush_.forEachInExtent(e.getExtent(),function(a){a.geometry===e&&(r===void 0||a.depth===void 0||Ga(a.depth,r))&&a.index>n&&(a.index+=o)})},t}(Da);function DS(i,t){return i.index-t.index}function Ng(i,t,e){var n=t.geometry;if(n.getType()===b.CIRCLE){var r=n;if(t.index===Sl){var o=Wl();o&&(r=r.clone().transform(o,e));var a=Es(r.getCenter(),Xt(i)),s=Math.sqrt(a)-r.getRadius();return s*s}}var l=Xt(i);return hs[0]=Xt(t.segment[0]),hs[1]=Xt(t.segment[1]),YC(l,hs)}function Fg(i,t,e){var n=t.geometry;if(n.getType()===b.CIRCLE&&t.index===Sl){var r=n,o=Wl();return o&&(r=r.clone().transform(o,e)),Yl(r.getClosestPoint(Xt(i)))}var a=Xt(i);return hs[0]=Xt(t.segment[0]),hs[1]=Xt(t.segment[1]),Yl(um(a,hs))}function NS(){var i=Df();return function(t,e){return i[b.POINT]}}const Uf=kS;var iy=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),FS={SELECT:"select"},US=function(i){iy(t,i);function t(e,n,r,o){var a=i.call(this,e)||this;return a.selected=n,a.deselected=r,a.mapBrowserEvent=o,a}return t}(zn),Uu={},BS=function(i){iy(t,i);function t(e){var n=i.call(this)||this;n.on,n.once,n.un;var r=e||{};n.boundAddFeature_=n.addFeature_.bind(n),n.boundRemoveFeature_=n.removeFeature_.bind(n),n.condition_=r.condition?r.condition:Lf,n.addCondition_=r.addCondition?r.addCondition:Sg,n.removeCondition_=r.removeCondition?r.removeCondition:Sg,n.toggleCondition_=r.toggleCondition?r.toggleCondition:kf,n.multi_=r.multi?r.multi:!1,n.filter_=r.filter?r.filter:Wr,n.hitTolerance_=r.hitTolerance?r.hitTolerance:0,n.style_=r.style!==void 0?r.style:jS(),n.features_=r.features||new oi;var o;if(r.layers)if(typeof r.layers=="function")o=r.layers;else{var a=r.layers;o=function(s){return cn(a,s)}}else o=Wr;return n.layerFilter_=o,n.featureLayerAssociation_={},n}return t.prototype.addFeatureLayerAssociation_=function(e,n){this.featureLayerAssociation_[_e(e)]=n},t.prototype.getFeatures=function(){return this.features_},t.prototype.getHitTolerance=function(){return this.hitTolerance_},t.prototype.getLayer=function(e){return this.featureLayerAssociation_[_e(e)]},t.prototype.setHitTolerance=function(e){this.hitTolerance_=e},t.prototype.setMap=function(e){var n=this.getMap();n&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),i.prototype.setMap.call(this,e),e?(this.features_.addEventListener(ti.ADD,this.boundAddFeature_),this.features_.addEventListener(ti.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(ti.ADD,this.boundAddFeature_),this.features_.removeEventListener(ti.REMOVE,this.boundRemoveFeature_))},t.prototype.addFeature_=function(e){var n=e.element;this.style_&&this.applySelectedStyle_(n)},t.prototype.removeFeature_=function(e){var n=e.element;this.style_&&this.restorePreviousStyle_(n)},t.prototype.getStyle=function(){return this.style_},t.prototype.applySelectedStyle_=function(e){var n=_e(e);n in Uu||(Uu[n]=e.getStyle()),e.setStyle(this.style_)},t.prototype.restorePreviousStyle_=function(e){for(var n=this.getMap().getInteractions().getArray(),r=n.length-1;r>=0;--r){var o=n[r];if(o!==this&&o instanceof t&&o.getStyle()&&o.getFeatures().getArray().lastIndexOf(e)!==-1){e.setStyle(o.getStyle());return}}var a=_e(e);e.setStyle(Uu[a]),delete Uu[a]},t.prototype.removeFeatureLayerAssociation_=function(e){delete this.featureLayerAssociation_[_e(e)]},t.prototype.handleEvent=function(e){if(!this.condition_(e))return!0;var n=this.addCondition_(e),r=this.removeCondition_(e),o=this.toggleCondition_(e),a=!n&&!r&&!o,s=e.map,l=this.getFeatures(),u=[],c=[];if(a){Ws(this.featureLayerAssociation_),s.forEachFeatureAtPixel(e.pixel,(function(g,v){if(this.filter_(g,v))return c.push(g),this.addFeatureLayerAssociation_(g,v),!this.multi_}).bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var h=l.getLength()-1;h>=0;--h){var d=l.item(h),p=c.indexOf(d);p>-1?c.splice(p,1):(l.remove(d),u.push(d))}c.length!==0&&l.extend(c)}else{s.forEachFeatureAtPixel(e.pixel,(function(g,v){if(this.filter_(g,v))return(n||o)&&!cn(l.getArray(),g)?(c.push(g),this.addFeatureLayerAssociation_(g,v)):(r||o)&&cn(l.getArray(),g)&&(u.push(g),this.removeFeatureLayerAssociation_(g)),!this.multi_}).bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var f=u.length-1;f>=0;--f)l.remove(u[f]);l.extend(c)}return(c.length>0||u.length>0)&&this.dispatchEvent(new US(FS.SELECT,c,u,e)),!0},t}(Xs);function jS(){var i=Df();return St(i[b.POLYGON],i[b.LINE_STRING]),St(i[b.GEOMETRY_COLLECTION],i[b.LINE_STRING]),function(t){return t.getGeometry()?i[t.getGeometry().getType()]:null}}const qn=BS;function zS(i){var t=i||{},e=new oi,n=new R1(-.005,.05,100),r=t.altShiftDragRotate!==void 0?t.altShiftDragRotate:!0;r&&e.push(new g1);var o=t.doubleClickZoom!==void 0?t.doubleClickZoom:!0;o&&e.push(new n1({delta:t.zoomDelta,duration:t.zoomDuration}));var a=t.dragPan!==void 0?t.dragPan:!0;a&&e.push(new d1({onFocusOnly:t.onFocusOnly,kinetic:n}));var s=t.pinchRotate!==void 0?t.pinchRotate:!0;s&&e.push(new N1);var l=t.pinchZoom!==void 0?t.pinchZoom:!0;l&&e.push(new B1({duration:t.zoomDuration}));var u=t.keyboard!==void 0?t.keyboard:!0;u&&(e.push(new P1),e.push(new T1({delta:t.zoomDelta,duration:t.zoomDuration})));var c=t.mouseWheelZoom!==void 0?t.mouseWheelZoom:!0;c&&e.push(new G1({onFocusOnly:t.onFocusOnly,duration:t.zoomDuration}));var h=t.shiftDragZoom!==void 0?t.shiftDragZoom:!0;return h&&e.push(new E1({duration:t.zoomDuration})),e}var VS=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),WS=function(i){VS(t,i);function t(e){var n=this;return e=dt({},e),e.controls||(e.controls=JE()),e.interactions||(e.interactions=zS({onFocusOnly:!0})),n=i.call(this,e)||this,n}return t.prototype.createRenderer=function(){return new hI(this)},t}(FE);const YS=WS,Ao={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};var HS=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),qS=function(i){HS(t,i);function t(e){var n=this,r=e||{},o=dt({},r);return delete o.preload,delete o.useInterimTilesOnError,n=i.call(this,o)||this,n.on,n.once,n.un,n.setPreload(r.preload!==void 0?r.preload:0),n.setUseInterimTilesOnError(r.useInterimTilesOnError!==void 0?r.useInterimTilesOnError:!0),n}return t.prototype.getPreload=function(){return this.get(Ao.PRELOAD)},t.prototype.setPreload=function(e){this.set(Ao.PRELOAD,e)},t.prototype.getUseInterimTilesOnError=function(){return this.get(Ao.USE_INTERIM_TILES_ON_ERROR)},t.prototype.setUseInterimTilesOnError=function(e){this.set(Ao.USE_INTERIM_TILES_ON_ERROR,e)},t}(sm);const XS=qS;var ny=function(){function i(t,e,n,r){this.minX=t,this.maxX=e,this.minY=n,this.maxY=r}return i.prototype.contains=function(t){return this.containsXY(t[1],t[2])},i.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},i.prototype.containsXY=function(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY},i.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},i.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},i.prototype.getHeight=function(){return this.maxY-this.minY+1},i.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},i.prototype.getWidth=function(){return this.maxX-this.minX+1},i.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY},i}();function Wa(i,t,e,n,r){return r!==void 0?(r.minX=i,r.maxX=t,r.minY=e,r.maxY=n,r):new ny(i,t,e,n)}const ry=ny;var ZS=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),oy=function(i){ZS(t,i);function t(e){var n=i.call(this,e)||this;return n.extentChanged=!0,n.renderedExtent_=null,n.renderedPixelRatio,n.renderedProjection=null,n.renderedRevision,n.renderedTiles=[],n.newTiles_=!1,n.tmpExtent=pn(),n.tmpTileRange_=new ry(0,0,0,0),n}return t.prototype.isDrawableTile=function(e){var n=this.getLayer(),r=e.getState(),o=n.getUseInterimTilesOnError();return r==oe.LOADED||r==oe.EMPTY||r==oe.ERROR&&!o},t.prototype.getTile=function(e,n,r,o){var a=o.pixelRatio,s=o.viewState.projection,l=this.getLayer(),u=l.getSource(),c=u.getTile(e,n,r,a,s);return c.getState()==oe.ERROR&&(l.getUseInterimTilesOnError()?l.getPreload()>0&&(this.newTiles_=!0):c.setState(oe.LOADED)),this.isDrawableTile(c)||(c=c.getInterimTile()),c},t.prototype.loadedTileCallback=function(e,n,r){return this.isDrawableTile(r)?i.prototype.loadedTileCallback.call(this,e,n,r):!1},t.prototype.prepareFrame=function(e){return!!this.getLayer().getSource()},t.prototype.renderFrame=function(e,n){var r=e.layerStatesArray[e.layerIndex],o=e.viewState,a=o.projection,s=o.resolution,l=o.center,u=o.rotation,c=e.pixelRatio,h=this.getLayer(),d=h.getSource(),p=d.getRevision(),f=d.getTileGridForProjection(a),g=f.getZForResolution(s,d.zDirection),v=f.getResolution(g),y=e.extent,m=r.extent&&Vr(r.extent);m&&(y=xo(y,Vr(r.extent)));var A=d.getTilePixelRatio(c),_=Math.round(e.size[0]*A),C=Math.round(e.size[1]*A);if(u){var I=Math.round(Math.sqrt(_*_+C*C));_=I,C=I}var E=v*_/2/A,w=v*C/2/A,S=[l[0]-E,l[1]-w,l[0]+E,l[1]+w],x=f.getTileRangeForExtentAndZ(y,g),T={};T[g]={};var L=this.createLoadedTileFinder(d,a,T),G=this.tmpExtent,N=this.tmpTileRange_;this.newTiles_=!1;for(var B=x.minX;B<=x.maxX;++B)for(var U=x.minY;U<=x.maxY;++U){var D=this.getTile(g,B,U,e);if(this.isDrawableTile(D)){var z=_e(this);if(D.getState()==oe.LOADED){T[g][D.tileCoord.toString()]=D;var F=D.inTransition(z);!this.newTiles_&&(F||this.renderedTiles.indexOf(D)===-1)&&(this.newTiles_=!0)}if(D.getAlpha(z,e.time)===1)continue}var O=f.getTileCoordChildTileRange(D.tileCoord,N,G),R=!1;O&&(R=L(g+1,O)),R||f.forEachTileCoordParentTileRange(D.tileCoord,L,N,G)}var M=v/s;wr(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/A,1/A,u,-_/2,-C/2);var ie=Qv(this.pixelTransform);this.useContainer(n,ie,r.opacity);var Y=this.context,K=Y.canvas;$p(this.inversePixelTransform,this.pixelTransform),wr(this.tempTransform,_/2,C/2,M,M,0,-_/2,-C/2),K.width!=_||K.height!=C?(K.width=_,K.height=C):this.containerReused||Y.clearRect(0,0,_,C),m&&this.clipUnrotated(Y,e,m),dt(Y,d.getContextOptions()),this.preRender(Y,e),this.renderedTiles.length=0;var Q=Object.keys(T).map(Number);Q.sort(va);var me,pe,V;r.opacity===1&&(!this.containerReused||d.getOpaque(e.viewState.projection))?Q=Q.reverse():(me=[],pe=[]);for(var ze=Q.length-1;ze>=0;--ze){var Ce=Q[ze],Qe=d.getTilePixelSize(Ce,c,a),At=f.getResolution(Ce),$e=At/v,it=Qe[0]*$e*M,ue=Qe[1]*$e*M,gt=f.getTileCoordForCoordAndZ(Uo(S),Ce),et=f.getTileCoordExtent(gt),J=ei(this.tempTransform,[A*(et[0]-S[0])/v,A*(S[3]-et[3])/v]),He=A*d.getGutterForProjection(a),Ve=T[Ce];for(var _t in Ve){var D=Ve[_t],k=D.tileCoord,W=gt[1]-k[1],q=Math.round(J[0]-(W-1)*it),se=gt[2]-k[2],ye=Math.round(J[1]-(se-1)*ue),B=Math.round(J[0]-W*it),U=Math.round(J[1]-se*ue),Ae=q-B,qe=ye-U,Fe=g===Ce,F=Fe&&D.getAlpha(_e(this),e.time)!==1;if(!F)if(me){Y.save(),V=[B,U,B+Ae,U,B+Ae,U+qe,B,U+qe];for(var Gt=0,Et=me.length;Gt<Et;++Gt)if(g!==Ce&&Ce<pe[Gt]){var We=me[Gt];Y.beginPath(),Y.moveTo(V[0],V[1]),Y.lineTo(V[2],V[3]),Y.lineTo(V[4],V[5]),Y.lineTo(V[6],V[7]),Y.moveTo(We[6],We[7]),Y.lineTo(We[4],We[5]),Y.lineTo(We[2],We[3]),Y.lineTo(We[0],We[1]),Y.clip()}me.push(V),pe.push(Ce)}else Y.clearRect(B,U,Ae,qe);this.drawTileImage(D,e,B,U,Ae,qe,He,Fe),me&&!F?(Y.restore(),this.renderedTiles.unshift(D)):this.renderedTiles.push(D),this.updateUsedTiles(e.usedTiles,d,D)}}this.renderedRevision=p,this.renderedResolution=v,this.extentChanged=!this.renderedExtent_||!ya(this.renderedExtent_,S),this.renderedExtent_=S,this.renderedPixelRatio=c,this.renderedProjection=a,this.manageTilePyramid(e,d,f,c,a,y,g,h.getPreload()),this.scheduleExpireCache(e,d),this.postRender(Y,e),r.extent&&Y.restore(),ie!==K.style.transform&&(K.style.transform=ie);var on=cf(r.opacity),bt=this.container;return on!==bt.style.opacity&&(bt.style.opacity=on),this.container},t.prototype.drawTileImage=function(e,n,r,o,a,s,l,u){var c=this.getTileImage(e);if(c){var h=_e(this),d=u?e.getAlpha(h,n.time):1,p=d!==this.context.globalAlpha;p&&(this.context.save(),this.context.globalAlpha=d),this.context.drawImage(c,l,l,c.width-2*l,c.height-2*l,r,o,a,s),p&&this.context.restore(),d!==1?n.animate=!0:u&&e.endTransition(h)}},t.prototype.getImage=function(){var e=this.context;return e?e.canvas:null},t.prototype.getTileImage=function(e){return e.getImage()},t.prototype.scheduleExpireCache=function(e,n){if(n.canExpireCache()){var r=(function(o,a,s){var l=_e(o);l in s.usedTiles&&o.expireCache(s.viewState.projection,s.usedTiles[l])}).bind(null,n);e.postRenderFunctions.push(r)}},t.prototype.updateUsedTiles=function(e,n,r){var o=_e(n);o in e||(e[o]={}),e[o][r.getKey()]=!0},t.prototype.manageTilePyramid=function(e,n,r,o,a,s,l,u,c){var h=_e(n);h in e.wantedTiles||(e.wantedTiles[h]={});var d=e.wantedTiles[h],p=e.tileQueue,f=r.getMinZoom(),g=0,v,y,m,A,_,C;for(C=f;C<=l;++C)for(y=r.getTileRangeForExtentAndZ(s,C,y),m=r.getResolution(C),A=y.minX;A<=y.maxX;++A)for(_=y.minY;_<=y.maxY;++_)l-C<=u?(++g,v=n.getTile(C,A,_,o,a),v.getState()==oe.IDLE&&(d[v.getKey()]=!0,p.isKeyQueued(v.getKey())||p.enqueue([v,h,r.getTileCoordCenter(v.tileCoord),m])),c!==void 0&&c(v)):n.useTile(C,A,_,a);n.updateCacheSize(g,a)},t}(Ym);oy.prototype.getLayer;const ay=oy;var KS=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),JS=function(i){KS(t,i);function t(e){return i.call(this,e)||this}return t.prototype.createRenderer=function(){return new ay(this)},t}(XS);const xs=JS;var QS=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),$S=function(i){QS(t,i);function t(e,n,r){var o=i.call(this)||this,a=r||{};return o.tileCoord=e,o.state=n,o.interimTile=null,o.key="",o.transition_=a.transition===void 0?250:a.transition,o.transitionStarts_={},o}return t.prototype.changed=function(){this.dispatchEvent(Ie.CHANGE)},t.prototype.release=function(){},t.prototype.getKey=function(){return this.key+"/"+this.tileCoord},t.prototype.getInterimTile=function(){if(!this.interimTile)return this;var e=this.interimTile;do{if(e.getState()==oe.LOADED)return this.transition_=0,e;e=e.interimTile}while(e);return this},t.prototype.refreshInterimChain=function(){if(this.interimTile){var e=this.interimTile,n=this;do{if(e.getState()==oe.LOADED){e.interimTile=null;break}else e.getState()==oe.LOADING?n=e:e.getState()==oe.IDLE?n.interimTile=e.interimTile:n=e;e=n.interimTile}while(e)}},t.prototype.getTileCoord=function(){return this.tileCoord},t.prototype.getState=function(){return this.state},t.prototype.setState=function(e){if(this.state!==oe.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()},t.prototype.load=function(){we()},t.prototype.getAlpha=function(e,n){if(!this.transition_)return 1;var r=this.transitionStarts_[e];if(!r)r=n,this.transitionStarts_[e]=r;else if(r===-1)return 1;var o=n-r+1e3/60;return o>=this.transition_?1:Am(o/this.transition_)},t.prototype.inTransition=function(e){return this.transition_?this.transitionStarts_[e]!==-1:!1},t.prototype.endTransition=function(e){this.transition_&&(this.transitionStarts_[e]=-1)},t}(Ys);const xh=$S;var eP=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),tP=function(i){eP(t,i);function t(e,n,r,o,a,s){var l=i.call(this,e,n,s)||this;return l.crossOrigin_=o,l.src_=r,l.key=r,l.image_=new Image,o!==null&&(l.image_.crossOrigin=o),l.unlisten_=null,l.tileLoadFunction_=a,l}return t.prototype.getImage=function(){return this.image_},t.prototype.setImage=function(e){this.image_=e,this.state=oe.LOADED,this.unlistenImage_(),this.changed()},t.prototype.handleImageError_=function(){this.state=oe.ERROR,this.unlistenImage_(),this.image_=iP(),this.changed()},t.prototype.handleImageLoad_=function(){var e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=oe.LOADED:this.state=oe.EMPTY,this.unlistenImage_(),this.changed()},t.prototype.load=function(){this.state==oe.ERROR&&(this.state=oe.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==oe.IDLE&&(this.state=oe.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=Nf(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},t.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},t}(xh);function iP(){var i=Mn(1,1);return i.fillStyle="rgba(0,0,0,0)",i.fillRect(0,0,1,1),i.canvas}const nP=tP;var sy=.5,rP=10,Ug=.25,oP=function(){function i(t,e,n,r,o,a){this.sourceProj_=t,this.targetProj_=e;var s={},l=Ps(this.targetProj_,this.sourceProj_);this.transformInv_=function(A){var _=A[0]+"/"+A[1];return s[_]||(s[_]=l(A)),s[_]},this.maxSourceExtent_=r,this.errorThresholdSquared_=o*o,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&Ct(r)==Ct(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Ct(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Ct(this.targetProj_.getExtent()):null;var u=Uo(n),c=_h(n),h=Ah(n),d=yh(n),p=this.transformInv_(u),f=this.transformInv_(c),g=this.transformInv_(h),v=this.transformInv_(d),y=rP+(a?Math.max(0,Math.ceil(PC(sp(n)/(a*a*256*256)))):0);if(this.addQuad_(u,c,h,d,p,f,g,v,y),this.wrapsXInSource_){var m=1/0;this.triangles_.forEach(function(A,_,C){m=Math.min(m,A.source[0][0],A.source[1][0],A.source[2][0])}),this.triangles_.forEach((function(A){if(Math.max(A.source[0][0],A.source[1][0],A.source[2][0])-m>this.sourceWorldWidth_/2){var _=[[A.source[0][0],A.source[0][1]],[A.source[1][0],A.source[1][1]],[A.source[2][0],A.source[2][1]]];_[0][0]-m>this.sourceWorldWidth_/2&&(_[0][0]-=this.sourceWorldWidth_),_[1][0]-m>this.sourceWorldWidth_/2&&(_[1][0]-=this.sourceWorldWidth_),_[2][0]-m>this.sourceWorldWidth_/2&&(_[2][0]-=this.sourceWorldWidth_);var C=Math.min(_[0][0],_[1][0],_[2][0]),I=Math.max(_[0][0],_[1][0],_[2][0]);I-C<this.sourceWorldWidth_/2&&(A.source=_)}}).bind(this))}s={}}return i.prototype.addTriangle_=function(t,e,n,r,o,a){this.triangles_.push({source:[r,o,a],target:[t,e,n]})},i.prototype.addQuad_=function(t,e,n,r,o,a,s,l,u){var c=Cn([o,a,s,l]),h=this.sourceWorldWidth_?Ct(c)/this.sourceWorldWidth_:null,d=this.sourceWorldWidth_,p=this.sourceProj_.canWrapX()&&h>.5&&h<1,f=!1;if(u>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){var g=Cn([t,e,n,r]),v=Ct(g)/this.targetWorldWidth_;f=v>Ug||f}!p&&this.sourceProj_.isGlobal()&&h&&(f=h>Ug||f)}if(!(!f&&this.maxSourceExtent_&&isFinite(c[0])&&isFinite(c[1])&&isFinite(c[2])&&isFinite(c[3])&&!Vt(c,this.maxSourceExtent_))){var y=0;if(!f&&(!isFinite(o[0])||!isFinite(o[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(s[0])||!isFinite(s[1])||!isFinite(l[0])||!isFinite(l[1]))){if(u>0)f=!0;else if(y=(!isFinite(o[0])||!isFinite(o[1])?8:0)+(!isFinite(a[0])||!isFinite(a[1])?4:0)+(!isFinite(s[0])||!isFinite(s[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),y!=1&&y!=2&&y!=4&&y!=8)return}if(u>0){if(!f){var m=[(t[0]+n[0])/2,(t[1]+n[1])/2],A=this.transformInv_(m),_=void 0;if(p){var C=(To(o[0],d)+To(s[0],d))/2;_=C-To(A[0],d)}else _=(o[0]+s[0])/2-A[0];var I=(o[1]+s[1])/2-A[1],E=_*_+I*I;f=E>this.errorThresholdSquared_}if(f){if(Math.abs(t[0]-n[0])<=Math.abs(t[1]-n[1])){var w=[(e[0]+n[0])/2,(e[1]+n[1])/2],S=this.transformInv_(w),x=[(r[0]+t[0])/2,(r[1]+t[1])/2],T=this.transformInv_(x);this.addQuad_(t,e,w,x,o,a,S,T,u-1),this.addQuad_(x,w,n,r,T,S,s,l,u-1)}else{var L=[(t[0]+e[0])/2,(t[1]+e[1])/2],G=this.transformInv_(L),N=[(n[0]+r[0])/2,(n[1]+r[1])/2],B=this.transformInv_(N);this.addQuad_(t,L,N,r,o,G,B,l,u-1),this.addQuad_(L,e,n,N,G,a,s,B,u-1)}return}}if(p){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}y&11||this.addTriangle_(t,n,r,o,s,l),y&14||this.addTriangle_(t,n,e,o,s,a),y&&(y&13||this.addTriangle_(e,r,t,a,l,o),y&7||this.addTriangle_(e,r,n,a,l,s))}},i.prototype.calculateSourceExtent=function(){var t=pn();return this.triangles_.forEach(function(e,n,r){var o=e.source;El(t,o[0]),El(t,o[1]),El(t,o[2])}),t},i.prototype.getTriangles=function(){return this.triangles_},i}();const ly=oP;var _o="1.3.0",Bf={imageSmoothingEnabled:!1,msImageSmoothingEnabled:!1},Cd;function Bg(i,t,e,n,r){i.beginPath(),i.moveTo(0,0),i.lineTo(t,e),i.lineTo(n,r),i.closePath(),i.save(),i.clip(),i.fillRect(0,0,Math.max(t,n)+1,Math.max(e,r)),i.restore()}function Id(i,t){return Math.abs(i[t*4]-210)>2||Math.abs(i[t*4+3]-.75*255)>2}function aP(){if(Cd===void 0){var i=document.createElement("canvas").getContext("2d");i.globalCompositeOperation="lighter",i.fillStyle="rgba(210, 0, 0, 0.75)",Bg(i,4,5,4,0),Bg(i,4,5,0,5);var t=i.getImageData(0,0,3,3).data;Cd=Id(t,0)||Id(t,4)||Id(t,8)}return Cd}function ql(i,t,e,n){var r=ut(e,t,i),o=pg(t,n,e),a=t.getMetersPerUnit();a!==void 0&&(o*=a);var s=i.getMetersPerUnit();s!==void 0&&(o/=s);var l=i.getExtent();if(!l||mh(l,r)){var u=pg(i,o,r)/o;isFinite(u)&&u>0&&(o/=u)}return o}function sP(i,t,e,n){var r=Sr(e),o=ql(i,t,r,n);return(!isFinite(o)||o<=0)&&nf(e,function(a){return o=ql(i,t,a,n),isFinite(o)&&o>0}),o}function uy(i,t,e,n,r,o,a,s,l,u,c,h){var d=Mn(Math.round(e*i),Math.round(e*t));if(dt(d,h),l.length===0)return d.canvas;d.scale(e,e);function p(_){return Math.round(_*e)/e}d.globalCompositeOperation="lighter";var f=pn();l.forEach(function(_,C,I){em(f,_.extent)});var g=Ct(f),v=Ti(f),y=Mn(Math.round(e*g/n),Math.round(e*v/n));dt(y,h);var m=e/n;l.forEach(function(_,C,I){var E=_.extent[0]-f[0],w=-(_.extent[3]-f[3]),S=Ct(_.extent),x=Ti(_.extent);_.image.width>0&&_.image.height>0&&y.drawImage(_.image,u,u,_.image.width-2*u,_.image.height-2*u,E*m,w*m,S*m,x*m)});var A=Uo(a);return s.getTriangles().forEach(function(_,C,I){var E=_.source,w=_.target,S=E[0][0],x=E[0][1],T=E[1][0],L=E[1][1],G=E[2][0],N=E[2][1],B=p((w[0][0]-A[0])/o),U=p(-(w[0][1]-A[1])/o),D=p((w[1][0]-A[0])/o),z=p(-(w[1][1]-A[1])/o),F=p((w[2][0]-A[0])/o),O=p(-(w[2][1]-A[1])/o),R=S,M=x;S=0,x=0,T-=R,L-=M,G-=R,N-=M;var ie=[[T,L,0,0,D-B],[G,N,0,0,F-B],[0,0,T,L,z-U],[0,0,G,N,O-U]],Y=MC(ie);if(Y){if(d.save(),d.beginPath(),aP()||h===Bf){d.moveTo(D,z);for(var K=4,Q=B-D,me=U-z,pe=0;pe<K;pe++)d.lineTo(D+p((pe+1)*Q/K),z+p(pe*me/(K-1))),pe!=K-1&&d.lineTo(D+p((pe+1)*Q/K),z+p((pe+1)*me/(K-1)));d.lineTo(F,O)}else d.moveTo(D,z),d.lineTo(B,U),d.lineTo(F,O);d.clip(),d.transform(Y[0],Y[2],Y[1],Y[3],B,U),d.translate(f[0]-R,f[3]-M),d.scale(n/e,-n/e),d.drawImage(y.canvas,0,0),d.restore()}}),c&&(d.save(),d.globalCompositeOperation="source-over",d.strokeStyle="black",d.lineWidth=1,s.getTriangles().forEach(function(_,C,I){var E=_.target,w=(E[0][0]-A[0])/o,S=-(E[0][1]-A[1])/o,x=(E[1][0]-A[0])/o,T=-(E[1][1]-A[1])/o,L=(E[2][0]-A[0])/o,G=-(E[2][1]-A[1])/o;d.beginPath(),d.moveTo(x,T),d.lineTo(w,S),d.lineTo(L,G),d.closePath(),d.stroke()}),d.restore()),d.canvas}var lP=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),uP=function(i){lP(t,i);function t(e,n,r,o,a,s,l,u,c,h,d,p){var f=i.call(this,a,oe.IDLE)||this;f.renderEdges_=d!==void 0?d:!1,f.contextOptions_=p,f.pixelRatio_=l,f.gutter_=u,f.canvas_=null,f.sourceTileGrid_=n,f.targetTileGrid_=o,f.wrappedTileCoord_=s||a,f.sourceTiles_=[],f.sourcesListenerKeys_=null,f.sourceZ_=0;var g=o.getTileCoordExtent(f.wrappedTileCoord_),v=f.targetTileGrid_.getExtent(),y=f.sourceTileGrid_.getExtent(),m=v?xo(g,v):g;if(sp(m)===0)return f.state=oe.EMPTY,f;var A=e.getExtent();A&&(y?y=xo(y,A):y=A);var _=o.getResolution(f.wrappedTileCoord_[0]),C=sP(e,r,m,_);if(!isFinite(C)||C<=0)return f.state=oe.EMPTY,f;var I=h!==void 0?h:sy;if(f.triangulation_=new ly(e,r,m,y,C*I,_),f.triangulation_.getTriangles().length===0)return f.state=oe.EMPTY,f;f.sourceZ_=n.getZForResolution(C);var E=f.triangulation_.calculateSourceExtent();if(y&&(e.canWrapX()?(E[1]=ri(E[1],y[1],y[3]),E[3]=ri(E[3],y[1],y[3])):E=xo(E,y)),!sp(E))f.state=oe.EMPTY;else{for(var w=n.getTileRangeForExtentAndZ(E,f.sourceZ_),S=w.minX;S<=w.maxX;S++)for(var x=w.minY;x<=w.maxY;x++){var T=c(f.sourceZ_,S,x,l);T&&f.sourceTiles_.push(T)}f.sourceTiles_.length===0&&(f.state=oe.EMPTY)}return f}return t.prototype.getImage=function(){return this.canvas_},t.prototype.reproject_=function(){var e=[];if(this.sourceTiles_.forEach((function(c,h,d){c&&c.getState()==oe.LOADED&&e.push({extent:this.sourceTileGrid_.getTileCoordExtent(c.tileCoord),image:c.getImage()})}).bind(this)),this.sourceTiles_.length=0,e.length===0)this.state=oe.ERROR;else{var n=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(n),o=typeof r=="number"?r:r[0],a=typeof r=="number"?r:r[1],s=this.targetTileGrid_.getResolution(n),l=this.sourceTileGrid_.getResolution(this.sourceZ_),u=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=uy(o,a,this.pixelRatio_,l,this.sourceTileGrid_.getExtent(),s,u,this.triangulation_,e,this.gutter_,this.renderEdges_,this.contextOptions_),this.state=oe.LOADED}this.changed()},t.prototype.load=function(){if(this.state==oe.IDLE){this.state=oe.LOADING,this.changed();var e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach((function(n,r,o){var a=n.getState();if(a==oe.IDLE||a==oe.LOADING){e++;var s=rt(n,Ie.CHANGE,function(l){var u=n.getState();(u==oe.LOADED||u==oe.ERROR||u==oe.EMPTY)&&(Pt(s),e--,e===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(s)}}).bind(this)),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(n,r,o){var a=n.getState();a==oe.IDLE&&n.load()})}},t.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(Pt),this.sourcesListenerKeys_=null},t}(xh);const cP=uP;var hP=function(){function i(t){this.highWaterMark=t!==void 0?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return i.prototype.canExpireCache=function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark},i.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null},i.prototype.containsKey=function(t){return this.entries_.hasOwnProperty(t)},i.prototype.forEach=function(t){for(var e=this.oldest_;e;)t(e.value_,e.key_,this),e=e.newer},i.prototype.get=function(t,e){var n=this.entries_[t];return be(n!==void 0,15),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_},i.prototype.remove=function(t){var e=this.entries_[t];return be(e!==void 0,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_},i.prototype.getCount=function(){return this.count_},i.prototype.getKeys=function(){var t=new Array(this.count_),e=0,n;for(n=this.newest_;n;n=n.older)t[e++]=n.key_;return t},i.prototype.getValues=function(){var t=new Array(this.count_),e=0,n;for(n=this.newest_;n;n=n.older)t[e++]=n.value_;return t},i.prototype.peekLast=function(){return this.oldest_.value_},i.prototype.peekLastKey=function(){return this.oldest_.key_},i.prototype.peekFirstKey=function(){return this.newest_.key_},i.prototype.pop=function(){var t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_},i.prototype.replace=function(t,e){this.get(t),this.entries_[t].value_=e},i.prototype.set=function(t,e){be(!(t in this.entries_),16);var n={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[t]=n,++this.count_},i.prototype.setSize=function(t){this.highWaterMark=t},i}();const dP=hP;function jg(i,t,e,n){return n!==void 0?(n[0]=i,n[1]=t,n[2]=e,n):[i,t,e]}function Zs(i,t,e){return i+"/"+t+"/"+e}function cy(i){return Zs(i[0],i[1],i[2])}function pP(i){var t=i.substring(i.lastIndexOf("/")+1,i.length).split(",").map(Number),e=t[0],n=t[1],r=t[2];return Zs(e,n,r)}function hy(i){return i.split("/").map(Number)}function dy(i){return(i[1]<<i[0])+i[2]}function fP(i,t){var e=i[0],n=i[1],r=i[2];if(t.getMinZoom()>e||e>t.getMaxZoom())return!1;var o=t.getFullTileRange(e);return o?o.containsXY(n,r):!0}var gP=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),vP=function(i){gP(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.expireCache=function(e){for(;this.canExpireCache();){var n=this.peekLast();if(n.getKey()in e)break;this.pop().release()}},t.prototype.pruneExceptNewestZ=function(){if(this.getCount()!==0){var e=this.peekFirstKey(),n=hy(e),r=n[0];this.forEach((function(o){o.tileCoord[0]!==r&&(this.remove(cy(o.tileCoord)),o.release())}).bind(this))}},t}(dP);const jf=vP,Ed={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};var mP=[0,0,0],yP=function(){function i(t){this.minZoom=t.minZoom!==void 0?t.minZoom:0,this.resolutions_=t.resolutions,be(oC(this.resolutions_,function(a,s){return s-a},!0),17);var e;if(!t.origins){for(var n=0,r=this.resolutions_.length-1;n<r;++n)if(!e)e=this.resolutions_[n]/this.resolutions_[n+1];else if(this.resolutions_[n]/this.resolutions_[n+1]!==e){e=void 0;break}}this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=t.origin!==void 0?t.origin:null,this.origins_=null,t.origins!==void 0&&(this.origins_=t.origins,be(this.origins_.length==this.resolutions_.length,20));var o=t.extent;o!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=Uo(o)),be(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,t.tileSizes!==void 0&&(this.tileSizes_=t.tileSizes,be(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=t.tileSize!==void 0?t.tileSize:this.tileSizes_?null:hf,be(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=o!==void 0?o:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],t.sizes!==void 0?this.fullTileRanges_=t.sizes.map(function(a,s){var l=new ry(Math.min(0,a[0]),Math.max(a[0]-1,-1),Math.min(0,a[1]),Math.max(a[1]-1,-1));if(o){var u=this.getTileRangeForExtentAndZ(o,s);l.minX=Math.max(u.minX,l.minX),l.maxX=Math.min(u.maxX,l.maxX),l.minY=Math.max(u.minY,l.minY),l.maxY=Math.min(u.maxY,l.maxY)}return l},this):o&&this.calculateTileRanges_(o)}return i.prototype.forEachTileCoord=function(t,e,n){for(var r=this.getTileRangeForExtentAndZ(t,e),o=r.minX,a=r.maxX;o<=a;++o)for(var s=r.minY,l=r.maxY;s<=l;++s)n([e,o,s])},i.prototype.forEachTileCoordParentTileRange=function(t,e,n,r){var o,a,s,l=null,u=t[0]-1;for(this.zoomFactor_===2?(a=t[1],s=t[2]):l=this.getTileCoordExtent(t,r);u>=this.minZoom;){if(this.zoomFactor_===2?(a=Math.floor(a/2),s=Math.floor(s/2),o=Wa(a,a,s,s,n)):o=this.getTileRangeForExtentAndZ(l,u,n),e(u,o))return!0;--u}return!1},i.prototype.getExtent=function(){return this.extent_},i.prototype.getMaxZoom=function(){return this.maxZoom},i.prototype.getMinZoom=function(){return this.minZoom},i.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},i.prototype.getResolution=function(t){return this.resolutions_[t]},i.prototype.getResolutions=function(){return this.resolutions_},i.prototype.getTileCoordChildTileRange=function(t,e,n){if(t[0]<this.maxZoom){if(this.zoomFactor_===2){var r=t[1]*2,o=t[2]*2;return Wa(r,r+1,o,o+1,e)}var a=this.getTileCoordExtent(t,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,t[0]+1,e)}return null},i.prototype.getTileRangeForTileCoordAndZ=function(t,e,n){if(e>this.maxZoom||e<this.minZoom)return null;var r=t[0],o=t[1],a=t[2];if(e===r)return Wa(o,a,o,a,n);if(this.zoomFactor_){var s=Math.pow(this.zoomFactor_,e-r),l=Math.floor(o*s),u=Math.floor(a*s);if(e<r)return Wa(l,l,u,u,n);var c=Math.floor(s*(o+1))-1,h=Math.floor(s*(a+1))-1;return Wa(l,c,u,h,n)}var d=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(d,e,n)},i.prototype.getTileRangeExtent=function(t,e,n){var r=this.getOrigin(t),o=this.getResolution(t),a=Bi(this.getTileSize(t),this.tmpSize_),s=r[0]+e.minX*a[0]*o,l=r[0]+(e.maxX+1)*a[0]*o,u=r[1]+e.minY*a[1]*o,c=r[1]+(e.maxY+1)*a[1]*o;return er(s,u,l,c,n)},i.prototype.getTileRangeForExtentAndZ=function(t,e,n){var r=mP;this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,r);var o=r[1],a=r[2];return this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,r),Wa(o,r[1],a,r[2],n)},i.prototype.getTileCoordCenter=function(t){var e=this.getOrigin(t[0]),n=this.getResolution(t[0]),r=Bi(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*r[0]*n,e[1]-(t[2]+.5)*r[1]*n]},i.prototype.getTileCoordExtent=function(t,e){var n=this.getOrigin(t[0]),r=this.getResolution(t[0]),o=Bi(this.getTileSize(t[0]),this.tmpSize_),a=n[0]+t[1]*o[0]*r,s=n[1]-(t[2]+1)*o[1]*r,l=a+o[0]*r,u=s+o[1]*r;return er(a,s,l,u,e)},i.prototype.getTileCoordForCoordAndResolution=function(t,e,n){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,n)},i.prototype.getTileCoordForXYAndResolution_=function(t,e,n,r,o){var a=this.getZForResolution(n),s=n/this.getResolution(a),l=this.getOrigin(a),u=Bi(this.getTileSize(a),this.tmpSize_),c=r?.5:0,h=r?.5:0,d=Math.floor((t-l[0])/n+c),p=Math.floor((l[1]-e)/n+h),f=s*d/u[0],g=s*p/u[1];return r?(f=Math.ceil(f)-1,g=Math.ceil(g)-1):(f=Math.floor(f),g=Math.floor(g)),jg(a,f,g,o)},i.prototype.getTileCoordForXYAndZ_=function(t,e,n,r,o){var a=this.getOrigin(n),s=this.getResolution(n),l=Bi(this.getTileSize(n),this.tmpSize_),u=r?.5:0,c=r?.5:0,h=Math.floor((t-a[0])/s+u),d=Math.floor((a[1]-e)/s+c),p=h/l[0],f=d/l[1];return r?(p=Math.ceil(p)-1,f=Math.ceil(f)-1):(p=Math.floor(p),f=Math.floor(f)),jg(n,p,f,o)},i.prototype.getTileCoordForCoordAndZ=function(t,e,n){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,n)},i.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},i.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},i.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null},i.prototype.getZForResolution=function(t,e){var n=fh(this.resolutions_,t,e||0);return ri(n,this.minZoom,this.maxZoom)},i.prototype.calculateTileRanges_=function(t){for(var e=this.resolutions_.length,n=new Array(e),r=this.minZoom;r<e;++r)n[r]=this.getTileRangeForExtentAndZ(t,r);this.fullTileRanges_=n},i}();const zf=yP;function py(i){var t=i.getDefaultTileGrid();return t||(t=gy(i),i.setDefaultTileGrid(t)),t}function AP(i,t,e){var n=t[0],r=i.getTileCoordCenter(t),o=Mh(e);if(mh(o,r))return t;var a=Ct(o),s=Math.ceil((o[0]-r[0])/a);return r[0]+=a*s,i.getTileCoordForCoordAndZ(r,n)}function _P(i,t,e,n){var r=n!==void 0?n:hl.TOP_LEFT,o=fy(i,t,e);return new zf({extent:i,origin:CC(i,r),resolutions:o,tileSize:e})}function Rc(i){var t=i||{},e=t.extent||Ee("EPSG:3857").getExtent(),n={extent:e,minZoom:t.minZoom,tileSize:t.tileSize,resolutions:fy(e,t.maxZoom,t.tileSize,t.maxResolution)};return new zf(n)}function fy(i,t,e,n){for(var r=t!==void 0?t:TI,o=Ti(i),a=Ct(i),s=Bi(e!==void 0?e:hf),l=n>0?n:Math.max(a/s[0],o/s[1]),u=r+1,c=new Array(u),h=0;h<u;++h)c[h]=l/Math.pow(2,h);return c}function gy(i,t,e,n){var r=Mh(i);return _P(r,t,e,n)}function Mh(i){i=Ee(i);var t=i.getExtent();if(!t){var e=180*Pr[_r.DEGREES]/i.getMetersPerUnit();t=er(-e,-e,e,e)}return t}var vy=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),CP=function(i){vy(t,i);function t(e){var n=i.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX})||this;n.on,n.once,n.un,n.opaque_=e.opaque!==void 0?e.opaque:!1,n.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,n.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;var r=[256,256],o=e.tileGrid;return o&&Bi(o.getTileSize(o.getMinZoom()),r),n.tileCache=new jf(e.cacheSize||0),n.tmpSize=[0,0],n.key_=e.key||"",n.tileOptions={transition:e.transition},n.zDirection=e.zDirection?e.zDirection:0,n}return t.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},t.prototype.expireCache=function(e,n){var r=this.getTileCacheForProjection(e);r&&r.expireCache(n)},t.prototype.forEachLoadedTile=function(e,n,r,o){var a=this.getTileCacheForProjection(e);if(!a)return!1;for(var s=!0,l,u,c,h=r.minX;h<=r.maxX;++h)for(var d=r.minY;d<=r.maxY;++d)u=Zs(n,h,d),c=!1,a.containsKey(u)&&(l=a.get(u),c=l.getState()===oe.LOADED,c&&(c=o(l)!==!1)),c||(s=!1);return s},t.prototype.getGutterForProjection=function(e){return 0},t.prototype.getKey=function(){return this.key_},t.prototype.setKey=function(e){this.key_!==e&&(this.key_=e,this.changed())},t.prototype.getOpaque=function(e){return this.opaque_},t.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},t.prototype.getTile=function(e,n,r,o,a){return we()},t.prototype.getTileGrid=function(){return this.tileGrid},t.prototype.getTileGridForProjection=function(e){return this.tileGrid?this.tileGrid:py(e)},t.prototype.getTileCacheForProjection=function(e){return be(jr(this.getProjection(),e),68),this.tileCache},t.prototype.getTilePixelRatio=function(e){return this.tilePixelRatio_},t.prototype.getTilePixelSize=function(e,n,r){var o=this.getTileGridForProjection(r),a=this.getTilePixelRatio(n),s=Bi(o.getTileSize(e),this.tmpSize);return a==1?s:bm(s,a,this.tmpSize)},t.prototype.getTileCoordForTileUrlFunction=function(e,n){var r=n!==void 0?n:this.getProjection(),o=this.getTileGridForProjection(r);return this.getWrapX()&&r.isGlobal()&&(e=AP(o,e,r)),fP(e,o)?e:null},t.prototype.clear=function(){this.tileCache.clear()},t.prototype.refresh=function(){this.clear(),i.prototype.refresh.call(this)},t.prototype.updateCacheSize=function(e,n){var r=this.getTileCacheForProjection(n);e>r.highWaterMark&&(r.highWaterMark=e)},t.prototype.useTile=function(e,n,r,o){},t}(Ff),IP=function(i){vy(t,i);function t(e,n){var r=i.call(this,e)||this;return r.tile=n,r}return t}(zn);const EP=CP;function wP(i,t){var e=/\{z\}/g,n=/\{x\}/g,r=/\{y\}/g,o=/\{-y\}/g;return function(a,s,l){if(a)return i.replace(e,a[0].toString()).replace(n,a[1].toString()).replace(r,a[2].toString()).replace(o,function(){var u=a[0],c=t.getFullTileRange(u);be(c,55);var h=c.getHeight()-a[2]-1;return h.toString()})}}function my(i,t){for(var e=i.length,n=new Array(e),r=0;r<e;++r)n[r]=wP(i[r],t);return Ip(n)}function Ip(i){return i.length===1?i[0]:function(t,e,n){if(t){var r=dy(t),o=To(r,i.length);return i[o](t,e,n)}else return}}function yy(i){var t=[],e=/\{([a-z])-([a-z])\}/.exec(i);if(e){var n=e[1].charCodeAt(0),r=e[2].charCodeAt(0),o=void 0;for(o=n;o<=r;++o)t.push(i.replace(e[0],String.fromCharCode(o)));return t}if(e=/\{(\d+)-(\d+)\}/.exec(i),e){for(var a=parseInt(e[2],10),s=parseInt(e[1],10);s<=a;s++)t.push(i.replace(e[0],s.toString()));return t}return t.push(i),t}var SP=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),PP=function(i){SP(t,i);function t(e){var n=i.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection})||this;return n.generateTileUrlFunction_=n.tileUrlFunction===t.prototype.tileUrlFunction,n.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(n.tileUrlFunction=e.tileUrlFunction),n.urls=null,e.urls?n.setUrls(e.urls):e.url&&n.setUrl(e.url),n.tileLoadingKeys_={},n}return t.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},t.prototype.getTileUrlFunction=function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction},t.prototype.getUrls=function(){return this.urls},t.prototype.handleTileChange=function(e){var n=e.target,r=_e(n),o=n.getState(),a;o==oe.LOADING?(this.tileLoadingKeys_[r]=!0,a=Ed.TILELOADSTART):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],a=o==oe.ERROR?Ed.TILELOADERROR:o==oe.LOADED?Ed.TILELOADEND:void 0),a!=null&&this.dispatchEvent(new IP(a,n))},t.prototype.setTileLoadFunction=function(e){this.tileCache.clear(),this.tileLoadFunction=e,this.changed()},t.prototype.setTileUrlFunction=function(e,n){this.tileUrlFunction=e,this.tileCache.pruneExceptNewestZ(),typeof n<"u"?this.setKey(n):this.changed()},t.prototype.setUrl=function(e){var n=yy(e);this.urls=n,this.setUrls(n)},t.prototype.setUrls=function(e){this.urls=e;var n=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(my(e,this.tileGrid),n):this.setKey(n)},t.prototype.tileUrlFunction=function(e,n,r){},t.prototype.useTile=function(e,n,r){var o=Zs(e,n,r);this.tileCache.containsKey(o)&&this.tileCache.get(o)},t}(EP);const Ay=PP;var xP=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),MP=function(i){xP(t,i);function t(e){var n=i.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:TP,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection})||this;return n.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,n.tileClass=e.tileClass!==void 0?e.tileClass:nP,n.tileCacheForProjection={},n.tileGridForProjection={},n.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,n.contextOptions_=e.imageSmoothing===!1?Bf:void 0,n.renderReprojectionEdges_=!1,n}return t.prototype.canExpireCache=function(){if(this.tileCache.canExpireCache())return!0;for(var e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1},t.prototype.expireCache=function(e,n){var r=this.getTileCacheForProjection(e);this.tileCache.expireCache(this.tileCache==r?n:{});for(var o in this.tileCacheForProjection){var a=this.tileCacheForProjection[o];a.expireCache(a==r?n:{})}},t.prototype.getContextOptions=function(){return this.contextOptions_},t.prototype.getGutterForProjection=function(e){return this.getProjection()&&e&&!jr(this.getProjection(),e)?0:this.getGutter()},t.prototype.getGutter=function(){return 0},t.prototype.getKey=function(){return i.prototype.getKey.call(this)+(this.contextOptions_?`
`+JSON.stringify(this.contextOptions_):"")},t.prototype.getOpaque=function(e){return this.getProjection()&&e&&!jr(this.getProjection(),e)?!1:i.prototype.getOpaque.call(this,e)},t.prototype.getTileGridForProjection=function(e){var n=this.getProjection();if(this.tileGrid&&(!n||jr(n,e)))return this.tileGrid;var r=_e(e);return r in this.tileGridForProjection||(this.tileGridForProjection[r]=py(e)),this.tileGridForProjection[r]},t.prototype.getTileCacheForProjection=function(e){var n=this.getProjection();if(!n||jr(n,e))return this.tileCache;var r=_e(e);return r in this.tileCacheForProjection||(this.tileCacheForProjection[r]=new jf(this.tileCache.highWaterMark)),this.tileCacheForProjection[r]},t.prototype.createTile_=function(e,n,r,o,a,s){var l=[e,n,r],u=this.getTileCoordForTileUrlFunction(l,a),c=u?this.tileUrlFunction(u,o,a):void 0,h=new this.tileClass(l,c!==void 0?oe.IDLE:oe.EMPTY,c!==void 0?c:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return h.key=s,h.addEventListener(Ie.CHANGE,this.handleTileChange.bind(this)),h},t.prototype.getTile=function(e,n,r,o,a){var s=this.getProjection();if(!s||!a||jr(s,a))return this.getTileInternal(e,n,r,o,s||a);var l=this.getTileCacheForProjection(a),u=[e,n,r],c=void 0,h=cy(u);l.containsKey(h)&&(c=l.get(h));var d=this.getKey();if(c&&c.key==d)return c;var p=this.getTileGridForProjection(s),f=this.getTileGridForProjection(a),g=this.getTileCoordForTileUrlFunction(u,a),v=new cP(s,p,a,f,u,g,this.getTilePixelRatio(o),this.getGutter(),(function(y,m,A,_){return this.getTileInternal(y,m,A,_,s)}).bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.contextOptions_);return v.key=d,c?(v.interimTile=c,v.refreshInterimChain(),l.replace(h,v)):l.set(h,v),v},t.prototype.getTileInternal=function(e,n,r,o,a){var s=null,l=Zs(e,n,r),u=this.getKey();if(!this.tileCache.containsKey(l))s=this.createTile_(e,n,r,o,a,u),this.tileCache.set(l,s);else if(s=this.tileCache.get(l),s.key!=u){var c=s;s=this.createTile_(e,n,r,o,a,u),c.getState()==oe.IDLE?s.interimTile=c.interimTile:s.interimTile=c,s.refreshInterimChain(),this.tileCache.replace(l,s)}return s},t.prototype.setRenderReprojectionEdges=function(e){if(this.renderReprojectionEdges_!=e){this.renderReprojectionEdges_=e;for(var n in this.tileCacheForProjection)this.tileCacheForProjection[n].clear();this.changed()}},t.prototype.setTileGridForProjection=function(e,n){{var r=Ee(e);if(r){var o=_e(r);o in this.tileGridForProjection||(this.tileGridForProjection[o]=n)}}},t}(Ay);function TP(i,t){i.getImage().src=t}const Vf=MP,Bu={KVP:"KVP",REST:"REST"};function Ms(i,t){var e=[];Object.keys(t).forEach(function(r){t[r]!==null&&t[r]!==void 0&&e.push(r+"="+encodeURIComponent(t[r]))});var n=e.join("&");return i=i.replace(/[?&]$/,""),i=i.indexOf("?")===-1?i+"?":i+"&",i+n}var bP=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),RP=function(i){bP(t,i);function t(e){var n=i.call(this,{extent:e.extent,origin:e.origin,origins:e.origins,resolutions:e.resolutions,tileSize:e.tileSize,tileSizes:e.tileSizes,sizes:e.sizes})||this;return n.matrixIds_=e.matrixIds,n}return t.prototype.getMatrixId=function(e){return this.matrixIds_[e]},t.prototype.getMatrixIds=function(){return this.matrixIds_},t}(zf);const Wf=RP;var OP=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),LP=function(i){OP(t,i);function t(e){var n=this,r=e.requestEncoding!==void 0?e.requestEncoding:Bu.KVP,o=e.tileGrid,a=e.urls;return a===void 0&&e.url!==void 0&&(a=yy(e.url)),n=i.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,imageSmoothing:e.imageSmoothing,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:o,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,urls:a,wrapX:e.wrapX!==void 0?e.wrapX:!1,transition:e.transition,zDirection:e.zDirection})||this,n.version_=e.version!==void 0?e.version:"1.0.0",n.format_=e.format!==void 0?e.format:"image/jpeg",n.dimensions_=e.dimensions!==void 0?e.dimensions:{},n.layer_=e.layer,n.matrixSet_=e.matrixSet,n.style_=e.style,n.requestEncoding_=r,n.setKey(n.getKeyForDimensions_()),a&&a.length>0&&(n.tileUrlFunction=Ip(a.map(n.createFromWMTSTemplate.bind(n)))),n}return t.prototype.setUrls=function(e){this.urls=e;var n=e.join(`
`);this.setTileUrlFunction(Ip(e.map(this.createFromWMTSTemplate.bind(this))),n)},t.prototype.getDimensions=function(){return this.dimensions_},t.prototype.getFormat=function(){return this.format_},t.prototype.getLayer=function(){return this.layer_},t.prototype.getMatrixSet=function(){return this.matrixSet_},t.prototype.getRequestEncoding=function(){return this.requestEncoding_},t.prototype.getStyle=function(){return this.style_},t.prototype.getVersion=function(){return this.version_},t.prototype.getKeyForDimensions_=function(){var e=0,n=[];for(var r in this.dimensions_)n[e++]=r+"-"+this.dimensions_[r];return n.join("/")},t.prototype.updateDimensions=function(e){dt(this.dimensions_,e),this.setKey(this.getKeyForDimensions_())},t.prototype.createFromWMTSTemplate=function(e){var n=this.requestEncoding_,r={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};n==Bu.KVP&&dt(r,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),e=n==Bu.KVP?Ms(e,r):e.replace(/\{(\w+?)\}/g,function(s,l){return l.toLowerCase()in r?r[l.toLowerCase()]:s});var o=this.tileGrid,a=this.dimensions_;return function(s,l,u){if(s){var c={TileMatrix:o.getMatrixId(s[0]),TileCol:s[1],TileRow:s[2]};dt(c,a);var h=e;return n==Bu.KVP?h=Ms(h,c):h=h.replace(/\{(\w+?)\}/g,function(d,p){return c[p]}),h}else return}},t}(Vf);const Xl=LP;var GP=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),kP=function(i){GP(t,i);function t(e){var n=i.call(this)||this;return n.geometries_=e||null,n.changeEventsKeys_=[],n.listenGeometriesChange_(),n}return t.prototype.unlistenGeometriesChange_=function(){this.changeEventsKeys_.forEach(Pt),this.changeEventsKeys_.length=0},t.prototype.listenGeometriesChange_=function(){if(this.geometries_)for(var e=0,n=this.geometries_.length;e<n;++e)this.changeEventsKeys_.push(rt(this.geometries_[e],Ie.CHANGE,this.changed,this))},t.prototype.clone=function(){var e=new t(null);return e.setGeometries(this.geometries_),e.applyProperties(this),e},t.prototype.closestPointXY=function(e,n,r,o){if(o<ka(this.getExtent(),e,n))return o;for(var a=this.geometries_,s=0,l=a.length;s<l;++s)o=a[s].closestPointXY(e,n,r,o);return o},t.prototype.containsXY=function(e,n){for(var r=this.geometries_,o=0,a=r.length;o<a;++o)if(r[o].containsXY(e,n))return!0;return!1},t.prototype.computeExtent=function(e){uu(e);for(var n=this.geometries_,r=0,o=n.length;r<o;++r)em(e,n[r].getExtent());return e},t.prototype.getGeometries=function(){return zg(this.geometries_)},t.prototype.getGeometriesArray=function(){return this.geometries_},t.prototype.getGeometriesArrayRecursive=function(){for(var e=[],n=this.geometries_,r=0,o=n.length;r<o;++r)n[r].getType()===this.getType()?e=e.concat(n[r].getGeometriesArrayRecursive()):e.push(n[r]);return e},t.prototype.getSimplifiedGeometry=function(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;for(var n=[],r=this.geometries_,o=!1,a=0,s=r.length;a<s;++a){var l=r[a],u=l.getSimplifiedGeometry(e);n.push(u),u!==l&&(o=!0)}if(o){var c=new t(null);return c.setGeometriesArray(n),c}else return this.simplifiedGeometryMaxMinSquaredTolerance=e,this},t.prototype.getType=function(){return b.GEOMETRY_COLLECTION},t.prototype.intersectsExtent=function(e){for(var n=this.geometries_,r=0,o=n.length;r<o;++r)if(n[r].intersectsExtent(e))return!0;return!1},t.prototype.isEmpty=function(){return this.geometries_.length===0},t.prototype.rotate=function(e,n){for(var r=this.geometries_,o=0,a=r.length;o<a;++o)r[o].rotate(e,n);this.changed()},t.prototype.scale=function(e,n,r){var o=r;o||(o=Sr(this.getExtent()));for(var a=this.geometries_,s=0,l=a.length;s<l;++s)a[s].scale(e,n,o);this.changed()},t.prototype.setGeometries=function(e){this.setGeometriesArray(zg(e))},t.prototype.setGeometriesArray=function(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()},t.prototype.applyTransform=function(e){for(var n=this.geometries_,r=0,o=n.length;r<o;++r)n[r].applyTransform(e);this.changed()},t.prototype.translate=function(e,n){for(var r=this.geometries_,o=0,a=r.length;o<a;++o)r[o].translate(e,n);this.changed()},t.prototype.disposeInternal=function(){this.unlistenGeometriesChange_(),i.prototype.disposeInternal.call(this)},t}(Cm);function zg(i){for(var t=[],e=0,n=i.length;e<n;++e)t.push(i[e].clone());return t}const pa=kP;var DP=function(){function i(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}return i.prototype.getReadOptions=function(t,e){var n;if(e){var r=e.dataProjection?Ee(e.dataProjection):this.readProjection(t);e.extent&&r&&r.getUnits()===_r.TILE_PIXELS&&(r=Ee(r),r.setWorldExtent(e.extent)),n={dataProjection:r,featureProjection:e.featureProjection}}return this.adaptOptions(n)},i.prototype.adaptOptions=function(t){return dt({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)},i.prototype.getType=function(){return we()},i.prototype.readFeature=function(t,e){return we()},i.prototype.readFeatures=function(t,e){return we()},i.prototype.readGeometry=function(t,e){return we()},i.prototype.readProjection=function(t){return we()},i.prototype.writeFeature=function(t,e){return we()},i.prototype.writeFeatures=function(t,e){return we()},i.prototype.writeGeometry=function(t,e){return we()},i}();const Yf=DP;function nr(i,t,e){var n=e?Ee(e.featureProjection):null,r=e?Ee(e.dataProjection):null,o;if(n&&r&&!jr(n,r)?o=(t?i.clone():i).transform(t?n:r,t?r:n):o=i,t&&e&&e.decimals!==void 0){var a=Math.pow(10,e.decimals),s=function(l){for(var u=0,c=l.length;u<c;++u)l[u]=Math.round(l[u]*a)/a;return l};o===i&&(o=i.clone()),o.applyTransform(s)}return o}var NP=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),FP=function(i){NP(t,i);function t(){return i.call(this)||this}return t.prototype.getType=function(){return fo.JSON},t.prototype.readFeature=function(e,n){return this.readFeatureFromObject(ju(e),this.getReadOptions(e,n))},t.prototype.readFeatures=function(e,n){return this.readFeaturesFromObject(ju(e),this.getReadOptions(e,n))},t.prototype.readFeatureFromObject=function(e,n){return we()},t.prototype.readFeaturesFromObject=function(e,n){return we()},t.prototype.readGeometry=function(e,n){return this.readGeometryFromObject(ju(e),this.getReadOptions(e,n))},t.prototype.readGeometryFromObject=function(e,n){return we()},t.prototype.readProjection=function(e){return this.readProjectionFromObject(ju(e))},t.prototype.readProjectionFromObject=function(e){return we()},t.prototype.writeFeature=function(e,n){return JSON.stringify(this.writeFeatureObject(e,n))},t.prototype.writeFeatureObject=function(e,n){return we()},t.prototype.writeFeatures=function(e,n){return JSON.stringify(this.writeFeaturesObject(e,n))},t.prototype.writeFeaturesObject=function(e,n){return we()},t.prototype.writeGeometry=function(e,n){return JSON.stringify(this.writeGeometryObject(e,n))},t.prototype.writeGeometryObject=function(e,n){return we()},t}(Yf);function ju(i){if(typeof i=="string"){var t=JSON.parse(i);return t||null}else return i!==null?i:null}const UP=FP;var BP=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),jP=function(i){BP(t,i);function t(e){var n=this,r=e||{};return n=i.call(this)||this,n.dataProjection=Ee(r.dataProjection?r.dataProjection:"EPSG:4326"),r.featureProjection&&(n.defaultFeatureProjection=Ee(r.featureProjection)),n.geometryName_=r.geometryName,n.extractGeometryName_=r.extractGeometryName,n.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"],n}return t.prototype.readFeatureFromObject=function(e,n){var r=null;e.type==="Feature"?r=e:r={type:"Feature",geometry:e,properties:null};var o=Ep(r.geometry,n),a=new ii;return this.geometryName_?a.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in r!==void 0&&a.setGeometryName(r.geometry_name),a.setGeometry(o),"id"in r&&a.setId(r.id),r.properties&&a.setProperties(r.properties,!0),a},t.prototype.readFeaturesFromObject=function(e,n){var r=e,o=null;if(r.type==="FeatureCollection"){var a=e;o=[];for(var s=a.features,l=0,u=s.length;l<u;++l)o.push(this.readFeatureFromObject(s[l],n))}else o=[this.readFeatureFromObject(e,n)];return o},t.prototype.readGeometryFromObject=function(e,n){return Ep(e,n)},t.prototype.readProjectionFromObject=function(e){var n=e.crs,r;return n?n.type=="name"?r=Ee(n.properties.name):n.type==="EPSG"?r=Ee("EPSG:"+n.properties.code):be(!1,36):r=this.dataProjection,r},t.prototype.writeFeatureObject=function(e,n){n=this.adaptOptions(n);var r={type:"Feature",geometry:null,properties:null},o=e.getId();if(o!==void 0&&(r.id=o),!e.hasProperties())return r;var a=e.getProperties(),s=e.getGeometry();return s&&(r.geometry=wp(s,n),delete a[e.getGeometryName()]),_a(a)||(r.properties=a),r},t.prototype.writeFeaturesObject=function(e,n){n=this.adaptOptions(n);for(var r=[],o=0,a=e.length;o<a;++o)r.push(this.writeFeatureObject(e[o],n));return{type:"FeatureCollection",features:r}},t.prototype.writeGeometryObject=function(e,n){return wp(e,this.adaptOptions(n))},t}(UP);function Ep(i,t){if(!i)return null;var e;switch(i.type){case b.POINT:{e=VP(i);break}case b.LINE_STRING:{e=WP(i);break}case b.POLYGON:{e=XP(i);break}case b.MULTI_POINT:{e=HP(i);break}case b.MULTI_LINE_STRING:{e=YP(i);break}case b.MULTI_POLYGON:{e=qP(i);break}case b.GEOMETRY_COLLECTION:{e=zP(i);break}default:throw new Error("Unsupported GeoJSON type: "+i.type)}return nr(e,!1,t)}function zP(i,t){var e=i.geometries.map(function(n){return Ep(n,t)});return new pa(e)}function VP(i){return new Wi(i.coordinates)}function WP(i){return new xn(i.coordinates)}function YP(i){return new Zr(i.coordinates)}function HP(i){return new Ea(i.coordinates)}function qP(i){return new wa(i.coordinates)}function XP(i){return new zi(i.coordinates)}function wp(i,t){i=nr(i,!0,t);var e=i.getType(),n;switch(e){case b.POINT:{n=ex(i);break}case b.LINE_STRING:{n=KP(i);break}case b.POLYGON:{n=tx(i,t);break}case b.MULTI_POINT:{n=QP(i);break}case b.MULTI_LINE_STRING:{n=JP(i);break}case b.MULTI_POLYGON:{n=$P(i,t);break}case b.GEOMETRY_COLLECTION:{n=ZP(i,t);break}case b.CIRCLE:{n={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+e)}return n}function ZP(i,t){var e=i.getGeometriesArray().map(function(n){var r=dt({},t);return delete r.featureProjection,wp(n,r)});return{type:"GeometryCollection",geometries:e}}function KP(i,t){return{type:"LineString",coordinates:i.getCoordinates()}}function JP(i,t){return{type:"MultiLineString",coordinates:i.getCoordinates()}}function QP(i,t){return{type:"MultiPoint",coordinates:i.getCoordinates()}}function $P(i,t){var e;return t&&(e=t.rightHanded),{type:"MultiPolygon",coordinates:i.getCoordinates(e)}}function ex(i,t){return{type:"Point",coordinates:i.getCoordinates()}}function tx(i,t){var e;return t&&(e=t.rightHanded),{type:"Polygon",coordinates:i.getCoordinates(e)}}const Hf=jP,ix={0:"INDETERMINE",1:"PIERRE",2:"MEULIERE",3:"BETON",4:"BRIQUES",5:"AGGLOMERE",6:"BOIS",9:"AUTRES",10:"PIERRE",11:"PIERRE",12:"MEULIERE - PIERRE",13:"BETON - PIERRE",14:"BRIQUES - PIERRE",15:"AGGLOMERE - PIERRE",16:"BOIS - PIERRE",19:"PIERRE - AUTRES",20:"MEULIERE",21:"MEULIERE - PIERRE",22:"MEULIERE",23:"BETON - MEULIERE",24:"BRIQUES - MEULIERE",25:"AGGLOMERE - MEULIERE",26:"BOIS - MEULIERE",29:"MEULIERE - AUTRES",30:"BETON",31:"BETON - PIERRE",32:"BETON - MEULIERE",33:"BETON",34:"BETON - BRIQUES",35:"AGGLOMERE - BETON",36:"BETON - BOIS",39:"BETON - AUTRES",40:"BRIQUES",41:"BRIQUES - PIERRE",42:"BRIQUES - MEULIERE",43:"BETON - BRIQUES",44:"BRIQUES",45:"AGGLOMERE - BRIQUES",46:"BOIS - BRIQUES",49:"BRIQUES - AUTRES",50:"AGGLOMERE",51:"AGGLOMERE - PIERRE",52:"AGGLOMERE - MEULIERE",53:"AGGLOMERE - BETON",54:"AGGLOMERE - BRIQUES",55:"AGGLOMERE",56:"AGGLOMERE - BOIS",59:"AGGLOMERE - AUTRES",60:"BOIS",61:"BOIS - PIERRE",62:"BOIS - MEULIERE",63:"BETON - BOIS",64:"BOIS - BRIQUES",65:"AGGLOMERE - BOIS",66:"BOIS",69:"BOIS - AUTRES",90:"AUTRES",91:"PIERRE - AUTRES",92:"MEULIERE - AUTRES",93:"BETON - AUTRES",94:"BRIQUES - AUTRES",95:"AGGLOMERE - AUTRES",96:"BOIS - AUTRES",99:"AUTRES","00":"INDETERMINE","01":"PIERRE","02":"MEULIERE","03":"BETON","04":"BRIQUES","05":"AGGLOMERE","06":"BOIS","09":"AUTRES"},nx={0:"INDETERMINE",1:"TUILES",2:"ARDOISES",3:"ZINC ALUMINIUM",4:"BETON",9:"AUTRES",10:"TUILES",11:"TUILES",12:"ARDOISES - TUILES",13:"TUILES - ZINC ALUMINIUM",14:"BETON - TUILES",19:"TUILES - AUTRES",20:"ARDOISES",21:"ARDOISES - TUILES",22:"ARDOISES",23:"ARDOISES - ZINC ALUMINIUM",24:"ARDOISES - BETON",29:"ARDOISES - AUTRES",30:"ZINC ALUMINIUM",31:"TUILES - ZINC ALUMINIUM",32:"ARDOISES - ZINC ALUMINIUM",33:"ZINC ALUMINIUM",34:"BETON - ZINC ALUMINIUM",39:"ZINC ALUMINIUM - AUTRES",40:"BETON",41:"BETON - TUILES",42:"ARDOISES - BETON",43:"BETON - ZINC ALUMINIUM",44:"BETON",49:"BETON - AUTRES",90:"AUTRES",91:"TUILES - AUTRES",92:"ARDOISES - AUTRES",93:"ZINC ALUMINIUM - AUTRES",94:"BETON - AUTRES",99:"AUTRES","00":"INDETERMINE","01":"TUILES","02":"ARDOISES","03":"ZINC ALUMINIUM","04":"BETON","09":"AUTRES"},rx="geoportal-extensions-openlayers",ox={type:"git",url:"https://github.com/IGNF/geoportal-extensions.git"},ax={},sx="src/OpenLayers/index.d.ts",lx={},ux="CECILL-B",cx=["geoportail","plugin","javascript","OpenLayers"],hx="28/08/2023",dx="src/OpenLayers/index.js",px={loglevel:"1.6.6",sortablejs:"1.14.0",eventbusjs:"0.2.0",xmldom:"^0.1.27","geoportal-access-lib":"3.3.3","node-fetch":"^2.6.1",ol:"6.9.0","@mapbox/mapbox-gl-style-spec":"13.20.1",proj4:"2.7.5"},fx="3.3.4",gx={},vx={},mx=["dist/","src/","LICENCE.md","README.md","package.json"],yx={},Oc={name:rx,repository:ox,peerDependencies:ax,types:sx,scripts:lx,license:ux,keywords:cx,date:hx,module:dx,dependencies:px,version:fx,bugs:gx,devDependencies:vx,files:mx,directories:yx};var Ax=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),_x=function(i){Ax(t,i);function t(e,n,r,o,a,s){var l=i.call(this,e,n,s)||this;return l.extent=null,l.format_=o,l.features_=null,l.loader_,l.projection=null,l.resolution,l.tileLoadFunction_=a,l.url_=r,l.key=r,l}return t.prototype.getFormat=function(){return this.format_},t.prototype.getFeatures=function(){return this.features_},t.prototype.load=function(){this.state==oe.IDLE&&(this.setState(oe.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))},t.prototype.onLoad=function(e,n){this.setFeatures(e)},t.prototype.onError=function(){this.setState(oe.ERROR)},t.prototype.setFeatures=function(e){this.features_=e,this.setState(oe.LOADED)},t.prototype.setLoader=function(e){this.loader_=e},t}(xh);const Cx=_x;var Ix=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Vg=[],Ex=function(i){Ix(t,i);function t(e,n,r,o){var a=i.call(this,e,n,{transition:0})||this;return a.context_={},a.executorGroups={},a.declutterExecutorGroups={},a.loadingSourceTiles=0,a.hitDetectionImageData={},a.replayState_={},a.sourceTiles=[],a.errorTileKeys={},a.wantedResolution,a.getSourceTiles=o.bind(void 0,a),a.wrappedTileCoord=r,a}return t.prototype.getContext=function(e){var n=_e(e);return n in this.context_||(this.context_[n]=Mn(1,1,Vg)),this.context_[n]},t.prototype.hasContext=function(e){return _e(e)in this.context_},t.prototype.getImage=function(e){return this.hasContext(e)?this.getContext(e).canvas:null},t.prototype.getReplayState=function(e){var n=_e(e);return n in this.replayState_||(this.replayState_[n]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[n]},t.prototype.load=function(){this.getSourceTiles()},t.prototype.release=function(){for(var e in this.context_)Vg.push(this.context_[e].canvas),delete this.context_[e];i.prototype.release.call(this)},t}(xh);const wx=Ex;var Sx=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Px=function(i){Sx(t,i);function t(e){var n=this,r=e.projection||"EPSG:3857",o=e.extent||Mh(r),a=e.tileGrid||Rc({extent:o,maxResolution:e.maxResolution,maxZoom:e.maxZoom!==void 0?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});return n=i.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,opaque:!1,projection:r,state:e.state,tileGrid:a,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:xx,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX===void 0?!0:e.wrapX,transition:e.transition,zDirection:e.zDirection===void 0?1:e.zDirection})||this,n.format_=e.format?e.format:null,n.sourceTileCache=new jf(n.tileCache.highWaterMark),n.overlaps_=e.overlaps==null?!0:e.overlaps,n.tileClass=e.tileClass?e.tileClass:Cx,n.tileGrids_={},n}return t.prototype.getFeaturesInExtent=function(e){var n=[],r=this.tileCache;if(r.getCount()===0)return n;var o=hy(r.peekFirstKey())[0],a=this.tileGrid;return r.forEach(function(s){if(!(s.tileCoord[0]!==o||s.getState()!==oe.LOADED))for(var l=s.getSourceTiles(),u=0,c=l.length;u<c;++u){var h=l[u],d=h.tileCoord;if(Vt(e,a.getTileCoordExtent(d))){var p=h.getFeatures();if(p)for(var f=0,g=p.length;f<g;++f){var v=p[f],y=v.getGeometry();Vt(e,y.getExtent())&&n.push(v)}}}}),n},t.prototype.getOverlaps=function(){return this.overlaps_},t.prototype.clear=function(){this.tileCache.clear(),this.sourceTileCache.clear()},t.prototype.expireCache=function(e,n){var r=this.getTileCacheForProjection(e),o=Object.keys(n).reduce(function(a,s){var l=pP(s);if(r.containsKey(l))for(var u=r.get(l).sourceTiles,c=0,h=u.length;c<h;++c)a[u[c].getKey()]=!0;return a},{});i.prototype.expireCache.call(this,e,n),this.sourceTileCache.expireCache(o)},t.prototype.getSourceTiles=function(e,n,r){var o=this;if(r.getState()===oe.IDLE){r.setState(oe.LOADING);var a=r.wrappedTileCoord,s=this.getTileGridForProjection(n),l=s.getTileCoordExtent(a),u=a[0],c=s.getResolution(u);Jn(l,-c,l);var h=this.tileGrid,d=h.getExtent();d&&xo(l,d,l);var p=h.getZForResolution(c,1);h.forEachTileCoord(l,p,function(f){var g=o.tileUrlFunction(f,e,n),v=o.sourceTileCache.containsKey(g)?o.sourceTileCache.get(g):new o.tileClass(f,g?oe.IDLE:oe.EMPTY,g,o.format_,o.tileLoadFunction);r.sourceTiles.push(v);var y=v.getState();if(y<oe.LOADED){var m=function(A){o.handleTileChange(A);var _=v.getState();if(_===oe.LOADED||_===oe.ERROR){var C=v.getKey();C in r.errorTileKeys?v.getState()===oe.LOADED&&delete r.errorTileKeys[C]:r.loadingSourceTiles--,_===oe.ERROR?r.errorTileKeys[C]=!0:v.removeEventListener(Ie.CHANGE,m),r.loadingSourceTiles===0&&r.setState(_a(r.errorTileKeys)?oe.LOADED:oe.ERROR)}};v.addEventListener(Ie.CHANGE,m),r.loadingSourceTiles++}y===oe.IDLE&&(v.extent=h.getTileCoordExtent(f),v.projection=n,v.resolution=h.getResolution(f[0]),o.sourceTileCache.set(g,v),v.load())}),r.loadingSourceTiles||r.setState(r.sourceTiles.some(function(f){return f.getState()===oe.ERROR})?oe.ERROR:oe.LOADED)}return r.sourceTiles},t.prototype.getTile=function(e,n,r,o,a){var s=Zs(e,n,r),l=this.getKey(),u;if(this.tileCache.containsKey(s)&&(u=this.tileCache.get(s),u.key===l))return u;var c=[e,n,r],h=this.getTileCoordForTileUrlFunction(c,a),d=this.getTileGrid().getExtent(),p=this.getTileGridForProjection(a);if(h&&d){var f=p.getTileCoordExtent(h);Jn(f,-p.getResolution(e),f),Vt(d,f)||(h=null)}var g=!0;if(h!==null){var v=this.tileGrid,y=p.getResolution(e),m=v.getZForResolution(y,1),A=p.getTileCoordExtent(h);Jn(A,-y,A),v.forEachTileCoord(A,m,(function(C){g=g&&!this.tileUrlFunction(C,o,a)}).bind(this))}var _=new wx(c,g?oe.EMPTY:oe.IDLE,h,this.getSourceTiles.bind(this,o,a));return _.key=l,u?(_.interimTile=u,_.refreshInterimChain(),this.tileCache.replace(s,_)):this.tileCache.set(s,_),_},t.prototype.getTileGridForProjection=function(e){var n=e.getCode(),r=this.tileGrids_[n];if(!r){var o=this.tileGrid;r=gy(e,void 0,o?o.getTileSize(o.getMinZoom()):void 0),this.tileGrids_[n]=r}return r},t.prototype.getTilePixelRatio=function(e){return e},t.prototype.getTilePixelSize=function(e,n,r){var o=this.getTileGridForProjection(r),a=Bi(o.getTileSize(e),this.tmpSize);return[Math.round(a[0]*n),Math.round(a[1]*n)]},t.prototype.updateCacheSize=function(e,n){i.prototype.updateCacheSize.call(this,e*2,n),this.sourceTileCache.highWaterMark=this.getTileCacheForProjection(n).highWaterMark},t}(Ay);const Pl=Px;function xx(i,t){i.setLoader(function(e,n,r){Qm(t,i.getFormat(),e,n,r,i.onLoad.bind(i),i.onError.bind(i))})}const Co={CARMENTA_SERVER:"carmentaserver",GEOSERVER:"geoserver",MAPSERVER:"mapserver",QGIS:"qgis"};var Mx=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Tx=function(i){Mx(t,i);function t(e){var n=this,r=e||{},o=r.params||{},a="TRANSPARENT"in o?o.TRANSPARENT:!0;return n=i.call(this,{attributions:r.attributions,attributionsCollapsible:r.attributionsCollapsible,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,imageSmoothing:r.imageSmoothing,opaque:!a,projection:r.projection,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileClass:r.tileClass,tileGrid:r.tileGrid,tileLoadFunction:r.tileLoadFunction,url:r.url,urls:r.urls,wrapX:r.wrapX!==void 0?r.wrapX:!0,transition:r.transition,zDirection:r.zDirection})||this,n.gutter_=r.gutter!==void 0?r.gutter:0,n.params_=o,n.v13_=!0,n.serverType_=r.serverType,n.hidpi_=r.hidpi!==void 0?r.hidpi:!0,n.tmpExtent_=pn(),n.updateV13_(),n.setKey(n.getKeyForParams_()),n}return t.prototype.getFeatureInfoUrl=function(e,n,r,o){var a=Ee(r),s=this.getProjection(),l=this.getTileGrid();l||(l=this.getTileGridForProjection(a));var u=l.getZForResolution(n,this.zDirection),c=l.getTileCoordForCoordAndZ(e,u);if(!(l.getResolutions().length<=c[0])){var h=l.getResolution(c[0]),d=l.getTileCoordExtent(c,this.tmpExtent_),p=Bi(l.getTileSize(c[0]),this.tmpSize),f=this.gutter_;f!==0&&(p=Eg(p,f,this.tmpSize),d=Jn(d,h*f,d)),s&&s!==a&&(h=ql(s,a,e,h),d=vr(d,a,s),e=ut(e,a,s));var g={SERVICE:"WMS",VERSION:_o,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};dt(g,this.params_,o);var v=Math.floor((e[0]-d[0])/h),y=Math.floor((d[3]-e[1])/h);return g[this.v13_?"I":"X"]=v,g[this.v13_?"J":"Y"]=y,this.getRequestUrl_(c,p,d,1,s||a,g)}},t.prototype.getLegendUrl=function(e,n){if(this.urls[0]!==void 0){var r={SERVICE:"WMS",VERSION:_o,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(n===void 0||n.LAYER===void 0){var o=this.params_.LAYERS,a=!Array.isArray(o)||o.length===1;if(!a)return;r.LAYER=o}if(e!==void 0){var s=this.getProjection()?this.getProjection().getMetersPerUnit():1,l=28e-5;r.SCALE=e*s/l}return dt(r,n),Ms(this.urls[0],r)}},t.prototype.getGutter=function(){return this.gutter_},t.prototype.getParams=function(){return this.params_},t.prototype.getRequestUrl_=function(e,n,r,o,a,s){var l=this.urls;if(l){if(s.WIDTH=n[0],s.HEIGHT=n[1],s[this.v13_?"CRS":"SRS"]=a.getCode(),"STYLES"in this.params_||(s.STYLES=""),o!=1)switch(this.serverType_){case Co.GEOSERVER:var u=90*o+.5|0;"FORMAT_OPTIONS"in s?s.FORMAT_OPTIONS+=";dpi:"+u:s.FORMAT_OPTIONS="dpi:"+u;break;case Co.MAPSERVER:s.MAP_RESOLUTION=90*o;break;case Co.CARMENTA_SERVER:case Co.QGIS:s.DPI=90*o;break;default:be(!1,52);break}var c=a.getAxisOrientation(),h=r;if(this.v13_&&c.substr(0,2)=="ne"){var d=void 0;d=r[0],h[0]=r[1],h[1]=d,d=r[2],h[2]=r[3],h[3]=d}s.BBOX=h.join(",");var p;if(l.length==1)p=l[0];else{var f=To(dy(e),l.length);p=l[f]}return Ms(p,s)}},t.prototype.getTilePixelRatio=function(e){return!this.hidpi_||this.serverType_===void 0?1:e},t.prototype.getKeyForParams_=function(){var e=0,n=[];for(var r in this.params_)n[e++]=r+"-"+this.params_[r];return n.join("/")},t.prototype.updateParams=function(e){dt(this.params_,e),this.updateV13_(),this.setKey(this.getKeyForParams_())},t.prototype.updateV13_=function(){var e=this.params_.VERSION||_o;this.v13_=lm(e,"1.3")>=0},t.prototype.tileUrlFunction=function(e,n,r){var o=this.getTileGrid();if(o||(o=this.getTileGridForProjection(r)),!(o.getResolutions().length<=e[0])){n!=1&&(!this.hidpi_||this.serverType_===void 0)&&(n=1);var a=o.getResolution(e[0]),s=o.getTileCoordExtent(e,this.tmpExtent_),l=Bi(o.getTileSize(e[0]),this.tmpSize),u=this.gutter_;u!==0&&(l=Eg(l,u,this.tmpSize),s=Jn(s,a*u,s)),n!=1&&(l=bm(l,n,this.tmpSize));var c={SERVICE:"WMS",VERSION:_o,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return dt(c,this.params_),this.getRequestUrl_(e,l,s,n,r,c)}},t}(Vf);const qf=Tx;var bx=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Rx=function(i){bx(t,i);function t(e,n,r,o,a,s,l){var u=this,c=e.getExtent(),h=n.getExtent(),d=h?xo(r,h):r,p=Sr(d),f=ql(e,n,p,o),g=sy,v=new ly(e,n,d,c,f*g,o),y=v.calculateSourceExtent(),m=s(y,f,a),A=m?ke.IDLE:ke.EMPTY,_=m?m.getPixelRatio():1;return u=i.call(this,r,o,_,A)||this,u.targetProj_=n,u.maxSourceExtent_=c,u.triangulation_=v,u.targetResolution_=o,u.targetExtent_=r,u.sourceImage_=m,u.sourcePixelRatio_=_,u.contextOptions_=l,u.canvas_=null,u.sourceListenerKey_=null,u}return t.prototype.disposeInternal=function(){this.state==ke.LOADING&&this.unlistenSource_(),i.prototype.disposeInternal.call(this)},t.prototype.getImage=function(){return this.canvas_},t.prototype.getProjection=function(){return this.targetProj_},t.prototype.reproject_=function(){var e=this.sourceImage_.getState();if(e==ke.LOADED){var n=Ct(this.targetExtent_)/this.targetResolution_,r=Ti(this.targetExtent_)/this.targetResolution_;this.canvas_=uy(n,r,this.sourcePixelRatio_,this.sourceImage_.getResolution(),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.contextOptions_)}this.state=e,this.changed()},t.prototype.load=function(){if(this.state==ke.IDLE){this.state=ke.LOADING,this.changed();var e=this.sourceImage_.getState();e==ke.LOADED||e==ke.ERROR?this.reproject_():(this.sourceListenerKey_=rt(this.sourceImage_,Ie.CHANGE,function(n){var r=this.sourceImage_.getState();(r==ke.LOADED||r==ke.ERROR)&&(this.unlistenSource_(),this.reproject_())},this),this.sourceImage_.load())}},t.prototype.unlistenSource_=function(){Pt(this.sourceListenerKey_),this.sourceListenerKey_=null},t}(Hm);const Ox=Rx;var _y=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),wd={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"},Sd=function(i){_y(t,i);function t(e,n){var r=i.call(this,e)||this;return r.image=n,r}return t}(zn),Lx=function(i){_y(t,i);function t(e){var n=i.call(this,{attributions:e.attributions,projection:e.projection,state:e.state})||this;return n.on,n.once,n.un,n.resolutions_=e.resolutions!==void 0?e.resolutions:null,n.reprojectedImage_=null,n.reprojectedRevision_=0,n.contextOptions_=e.imageSmoothing===!1?Bf:void 0,n}return t.prototype.getResolutions=function(){return this.resolutions_},t.prototype.getContextOptions=function(){return this.contextOptions_},t.prototype.findNearestResolution=function(e){if(this.resolutions_){var n=fh(this.resolutions_,e,0);e=this.resolutions_[n]}return e},t.prototype.getImage=function(e,n,r,o){var a=this.getProjection();if(!a||!o||jr(a,o))return a&&(o=a),this.getImageInternal(e,n,r,o);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&jr(this.reprojectedImage_.getProjection(),o)&&this.reprojectedImage_.getResolution()==n&&ya(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new Ox(a,o,e,n,r,(function(s,l,u){return this.getImageInternal(s,l,u,a)}).bind(this),this.contextOptions_),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_},t.prototype.getImageInternal=function(e,n,r,o){return we()},t.prototype.handleImageChange=function(e){var n=e.target;switch(n.getState()){case ke.LOADING:this.loading=!0,this.dispatchEvent(new Sd(wd.IMAGELOADSTART,n));break;case ke.LOADED:this.loading=!1,this.dispatchEvent(new Sd(wd.IMAGELOADEND,n));break;case ke.ERROR:this.loading=!1,this.dispatchEvent(new Sd(wd.IMAGELOADERROR,n));break}},t}(Ff);function Gx(i,t){i.getImage().src=t}const kx=Lx;var Dx=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Wg=[101,101],Nx=function(i){Dx(t,i);function t(e){var n=this,r=e||{};return n=i.call(this,{attributions:r.attributions,imageSmoothing:r.imageSmoothing,projection:r.projection,resolutions:r.resolutions})||this,n.crossOrigin_=r.crossOrigin!==void 0?r.crossOrigin:null,n.url_=r.url,n.imageLoadFunction_=r.imageLoadFunction!==void 0?r.imageLoadFunction:Gx,n.params_=r.params||{},n.v13_=!0,n.updateV13_(),n.serverType_=r.serverType,n.hidpi_=r.hidpi!==void 0?r.hidpi:!0,n.image_=null,n.imageSize_=[0,0],n.renderedRevision_=0,n.ratio_=r.ratio!==void 0?r.ratio:1.5,n}return t.prototype.getFeatureInfoUrl=function(e,n,r,o){if(this.url_!==void 0){var a=Ee(r),s=this.getProjection();s&&s!==a&&(n=ql(s,a,e,n),e=ut(e,a,s));var l=us(e,n,0,Wg),u={SERVICE:"WMS",VERSION:_o,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};dt(u,this.params_,o);var c=Math.floor((e[0]-l[0])/n),h=Math.floor((l[3]-e[1])/n);return u[this.v13_?"I":"X"]=c,u[this.v13_?"J":"Y"]=h,this.getRequestUrl_(l,Wg,1,s||a,u)}},t.prototype.getLegendUrl=function(e,n){if(this.url_!==void 0){var r={SERVICE:"WMS",VERSION:_o,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(n===void 0||n.LAYER===void 0){var o=this.params_.LAYERS,a=!Array.isArray(o)||o.length===1;if(!a)return;r.LAYER=o}if(e!==void 0){var s=this.getProjection()?this.getProjection().getMetersPerUnit():1,l=28e-5;r.SCALE=e*s/l}return dt(r,n),Ms(this.url_,r)}},t.prototype.getParams=function(){return this.params_},t.prototype.getImageInternal=function(e,n,r,o){if(this.url_===void 0)return null;n=this.findNearestResolution(n),r!=1&&(!this.hidpi_||this.serverType_===void 0)&&(r=1);var a=n/r,s=Sr(e),l=Math.ceil(Ct(e)/a),u=Math.ceil(Ti(e)/a),c=us(s,a,0,[l,u]),h=Math.ceil(this.ratio_*Ct(e)/a),d=Math.ceil(this.ratio_*Ti(e)/a),p=us(s,a,0,[h,d]),f=this.image_;if(f&&this.renderedRevision_==this.getRevision()&&f.getResolution()==n&&f.getPixelRatio()==r&&zr(f.getExtent(),c))return f;var g={SERVICE:"WMS",VERSION:_o,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};dt(g,this.params_),this.imageSize_[0]=Math.round(Ct(p)/a),this.imageSize_[1]=Math.round(Ti(p)/a);var v=this.getRequestUrl_(p,this.imageSize_,r,o,g);return this.image_=new tS(p,n,r,v,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),this.image_.addEventListener(Ie.CHANGE,this.handleImageChange.bind(this)),this.image_},t.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},t.prototype.getRequestUrl_=function(e,n,r,o,a){if(be(this.url_!==void 0,9),a[this.v13_?"CRS":"SRS"]=o.getCode(),"STYLES"in this.params_||(a.STYLES=""),r!=1)switch(this.serverType_){case Co.GEOSERVER:var s=90*r+.5|0;"FORMAT_OPTIONS"in a?a.FORMAT_OPTIONS+=";dpi:"+s:a.FORMAT_OPTIONS="dpi:"+s;break;case Co.MAPSERVER:a.MAP_RESOLUTION=90*r;break;case Co.CARMENTA_SERVER:case Co.QGIS:a.DPI=90*r;break;default:be(!1,8);break}a.WIDTH=n[0],a.HEIGHT=n[1];var l=o.getAxisOrientation(),u;return this.v13_&&l.substr(0,2)=="ne"?u=[e[1],e[0],e[3],e[2]]:u=e,a.BBOX=u.join(","),Ms(this.url_,a)},t.prototype.getUrl=function(){return this.url_},t.prototype.setImageLoadFunction=function(e){this.image_=null,this.imageLoadFunction_=e,this.changed()},t.prototype.setUrl=function(e){e!=this.url_&&(this.url_=e,this.image_=null,this.changed())},t.prototype.updateParams=function(e){dt(this.params_,e),this.updateV13_(),this.image_=null,this.changed()},t.prototype.updateV13_=function(){var e=this.params_.VERSION||_o;this.v13_=lm(e,"1.3")>=0},t}(kx);const Fx=Nx;var ds=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fu(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Cy={exports:{}};(function(i){(function(t,e){i.exports?i.exports=e():t.log=e()})(ds,function(){var t=function(){},e="undefined",n=typeof window!==e&&/Trident\/|MSIE /.test(window.navigator.userAgent),r=["trace","debug","info","warn","error"];function o(g,v){var y=g[v];if(typeof y.bind=="function")return y.bind(g);try{return Function.prototype.bind.call(y,g)}catch{return function(){return Function.prototype.apply.apply(y,[g,arguments])}}}function a(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function s(g){return g==="debug"&&(g="log"),typeof console===e?!1:g==="trace"&&n?a:console[g]!==void 0?o(console,g):console.log!==void 0?o(console,"log"):t}function l(g,v){for(var y=0;y<r.length;y++){var m=r[y];this[m]=y<g?t:this.methodFactory(m,g,v)}this.log=this.debug}function u(g,v,y){return function(){typeof console!==e&&(l.call(this,v,y),this[g].apply(this,arguments))}}function c(g,v,y){return s(g)||u.apply(this,arguments)}function h(g,v,y){var m=this,A,_="loglevel";g&&(_+=":"+g);function C(w){var S=(r[w]||"silent").toUpperCase();if(typeof window!==e){try{window.localStorage[_]=S;return}catch{}try{window.document.cookie=encodeURIComponent(_)+"="+S+";"}catch{}}}function I(){var w;if(typeof window!==e){try{w=window.localStorage[_]}catch{}if(typeof w===e)try{var S=window.document.cookie,x=S.indexOf(encodeURIComponent(_)+"=");x!==-1&&(w=/^([^;]+)/.exec(S.slice(x))[1])}catch{}return m.levels[w]===void 0&&(w=void 0),w}}m.name=g,m.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},m.methodFactory=y||c,m.getLevel=function(){return A},m.setLevel=function(w,S){if(typeof w=="string"&&m.levels[w.toUpperCase()]!==void 0&&(w=m.levels[w.toUpperCase()]),typeof w=="number"&&w>=0&&w<=m.levels.SILENT){if(A=w,S!==!1&&C(w),l.call(m,w,g),typeof console===e&&w<m.levels.SILENT)return"No console available for logging"}else throw"log.setLevel() called with invalid level: "+w},m.setDefaultLevel=function(w){I()||m.setLevel(w,!1)},m.enableAll=function(w){m.setLevel(m.levels.TRACE,w)},m.disableAll=function(w){m.setLevel(m.levels.SILENT,w)};var E=I();E==null&&(E=v??"WARN"),m.setLevel(E,!1)}var d=new h,p={};d.getLogger=function(v){if(typeof v!="string"||v==="")throw new TypeError("You must supply a name when creating a logger.");var y=p[v];return y||(y=p[v]=new h(v,d.getLevel(),d.methodFactory)),y};var f=typeof window!==e?window.log:void 0;return d.noConflict=function(){return typeof window!==e&&window.log===d&&(window.log=f),d},d.getLoggers=function(){return p},d})})(Cy);var go=Cy.exports,ft={getLogger:function(i){"__PRODUCTION__".match(/true/)?go.disableAll():go.enableAll();var t=i||"default";return go.getLogger(t)}},ne={PARAM_MISSING:"Parameter(s) '%var%' missing",PARAM_EMPTY:"Parameter(s) '%var%' empty",PARAM_TYPE:"Wrong type(s) for parameter(s) '%var%'",PARAM_FORMAT:"Parameter(s) '%var%' not correctly formatted",PARAM_NOT_SUPPORT:"Value(s) for parameter(s) '%var%' not supported",PARAM_NOT_SUPPORT_NODEJS:"Value(s) for parameter(s) '%var%' not supported to NodeJS",PARAM_UNKNOWN:"Value(s) for parameter(s) '%var%' unknown",SERVICE_REQUEST_BUILD:"An error occurred during the request building of the service",SERVICE_REQUEST_EMPTY:"The request sent to the service is empty",SERVICE_RESPONSE_EXCEPTION:"The service returned an exception : '%var%'",SERVICE_RESPONSE_EXCEPTION_2:"The service returned an exception",SERVICE_RESPONSE_ANALYSE:"An error occurred while parsing the response '%var%' of the service",SERVICE_RESPONSE_ANALYSE_2:"An unknown error occurred while parsing the response",SERVICE_RESPONSE_EMPTY:"The response of the service is empty",SERVICE_RESPONSE_EMPTY_2:"The response from the service could not be analyzed or is empty",SERVICE_RESPONSE_FORMAT:"The format of the service response is not supported (handled format(s) : '%var%')",SERVICE_RESPONSE_FORMAT_2:"The format of the service response is not supported",SERVICE_RESPONSE_FORMAT_3:"No suggestion matching the search",CLASS_CONSTRUCTOR:"'%var%' constructor cannot be called as a function.",getMessage:function(i,t){if(Object.keys(arguments).length===0)return"Message indefined !";var e=Array.prototype.slice.call(arguments),n=e.shift(),r=e,o=this[n];try{Array.isArray(r)&&r.length>0?o=o.replace("%var%",r.join(" - ")):o=o.replace("%var%","%var% (not specified)")}catch{}return o}},Hr={normalyzeParameters:function(i){var t=null;if(i){var e=[];for(var n in i)if(i.hasOwnProperty(n)){var r=i[n];r||(r=""),e.push(n+"="+r)}t=e.join("&")}return t},normalyzeUrl:function(i,t,e){var n=i;if(i){var r=i.indexOf("?");r===-1&&(n+="?"),r!==-1&&r!==i.length-1&&(n+="&")}return t&&(typeof t=="string"?n+=t:n+=this.normalyzeParameters(t)),e&&(n=encodeURIComponent(n)),n},indent:function(i,t){var e=i||0;return new Array(e+1).join("	")+t}};function Ux(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Iy={exports:{}};/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */(function(i,t){(function(e,n){i.exports=n()})(ds,function(){function e(k){var W=typeof k;return k!==null&&(W==="object"||W==="function")}function n(k){return typeof k=="function"}var r=void 0;Array.isArray?r=Array.isArray:r=function(k){return Object.prototype.toString.call(k)==="[object Array]"};var o=r,a=0,s=void 0,l=void 0,u=function(W,q){I[a]=W,I[a+1]=q,a+=2,a===2&&(l?l(E):S())};function c(k){l=k}function h(k){u=k}var d=typeof window<"u"?window:void 0,p=d||{},f=p.MutationObserver||p.WebKitMutationObserver,g=typeof self>"u"&&typeof process<"u"&&{}.toString.call(process)==="[object process]",v=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function y(){return function(){return process.nextTick(E)}}function m(){return typeof s<"u"?function(){s(E)}:C()}function A(){var k=0,W=new f(E),q=document.createTextNode("");return W.observe(q,{characterData:!0}),function(){q.data=k=++k%2}}function _(){var k=new MessageChannel;return k.port1.onmessage=E,function(){return k.port2.postMessage(0)}}function C(){var k=setTimeout;return function(){return k(E,1)}}var I=new Array(1e3);function E(){for(var k=0;k<a;k+=2){var W=I[k],q=I[k+1];W(q),I[k]=void 0,I[k+1]=void 0}a=0}function w(){try{var k=Function("return this")().require("vertx");return s=k.runOnLoop||k.runOnContext,m()}catch{return C()}}var S=void 0;g?S=y():f?S=A():v?S=_():d===void 0&&typeof Ux=="function"?S=w():S=C();function x(k,W){var q=this,se=new this.constructor(G);se[L]===void 0&&At(se);var ye=q._state;if(ye){var Ae=arguments[ye-1];u(function(){return V(ye,se,Ae,q._result)})}else me(q,se,k,W);return se}function T(k){var W=this;if(k&&typeof k=="object"&&k.constructor===W)return k;var q=new W(G);return ie(q,k),q}var L=Math.random().toString(36).substring(2);function G(){}var N=void 0,B=1,U=2;function D(){return new TypeError("You cannot resolve a promise with itself")}function z(){return new TypeError("A promises callback cannot return that same promise.")}function F(k,W,q,se){try{k.call(W,q,se)}catch(ye){return ye}}function O(k,W,q){u(function(se){var ye=!1,Ae=F(q,W,function(qe){ye||(ye=!0,W!==qe?ie(se,qe):K(se,qe))},function(qe){ye||(ye=!0,Q(se,qe))},"Settle: "+(se._label||" unknown promise"));!ye&&Ae&&(ye=!0,Q(se,Ae))},k)}function R(k,W){W._state===B?K(k,W._result):W._state===U?Q(k,W._result):me(W,void 0,function(q){return ie(k,q)},function(q){return Q(k,q)})}function M(k,W,q){W.constructor===k.constructor&&q===x&&W.constructor.resolve===T?R(k,W):q===void 0?K(k,W):n(q)?O(k,W,q):K(k,W)}function ie(k,W){if(k===W)Q(k,D());else if(e(W)){var q=void 0;try{q=W.then}catch(se){Q(k,se);return}M(k,W,q)}else K(k,W)}function Y(k){k._onerror&&k._onerror(k._result),pe(k)}function K(k,W){k._state===N&&(k._result=W,k._state=B,k._subscribers.length!==0&&u(pe,k))}function Q(k,W){k._state===N&&(k._state=U,k._result=W,u(Y,k))}function me(k,W,q,se){var ye=k._subscribers,Ae=ye.length;k._onerror=null,ye[Ae]=W,ye[Ae+B]=q,ye[Ae+U]=se,Ae===0&&k._state&&u(pe,k)}function pe(k){var W=k._subscribers,q=k._state;if(W.length!==0){for(var se=void 0,ye=void 0,Ae=k._result,qe=0;qe<W.length;qe+=3)se=W[qe],ye=W[qe+q],se?V(q,se,ye,Ae):ye(Ae);k._subscribers.length=0}}function V(k,W,q,se){var ye=n(q),Ae=void 0,qe=void 0,Fe=!0;if(ye){try{Ae=q(se)}catch(Gt){Fe=!1,qe=Gt}if(W===Ae){Q(W,z());return}}else Ae=se;W._state!==N||(ye&&Fe?ie(W,Ae):Fe===!1?Q(W,qe):k===B?K(W,Ae):k===U&&Q(W,Ae))}function ze(k,W){try{W(function(se){ie(k,se)},function(se){Q(k,se)})}catch(q){Q(k,q)}}var Ce=0;function Qe(){return Ce++}function At(k){k[L]=Ce++,k._state=void 0,k._result=void 0,k._subscribers=[]}function $e(){return new Error("Array Methods must be provided an Array")}var it=function(){function k(W,q){this._instanceConstructor=W,this.promise=new W(G),this.promise[L]||At(this.promise),o(q)?(this.length=q.length,this._remaining=q.length,this._result=new Array(this.length),this.length===0?K(this.promise,this._result):(this.length=this.length||0,this._enumerate(q),this._remaining===0&&K(this.promise,this._result))):Q(this.promise,$e())}return k.prototype._enumerate=function(q){for(var se=0;this._state===N&&se<q.length;se++)this._eachEntry(q[se],se)},k.prototype._eachEntry=function(q,se){var ye=this._instanceConstructor,Ae=ye.resolve;if(Ae===T){var qe=void 0,Fe=void 0,Gt=!1;try{qe=q.then}catch(We){Gt=!0,Fe=We}if(qe===x&&q._state!==N)this._settledAt(q._state,se,q._result);else if(typeof qe!="function")this._remaining--,this._result[se]=q;else if(ye===Ve){var Et=new ye(G);Gt?Q(Et,Fe):M(Et,q,qe),this._willSettleAt(Et,se)}else this._willSettleAt(new ye(function(We){return We(q)}),se)}else this._willSettleAt(Ae(q),se)},k.prototype._settledAt=function(q,se,ye){var Ae=this.promise;Ae._state===N&&(this._remaining--,q===U?Q(Ae,ye):this._result[se]=ye),this._remaining===0&&K(Ae,this._result)},k.prototype._willSettleAt=function(q,se){var ye=this;me(q,void 0,function(Ae){return ye._settledAt(B,se,Ae)},function(Ae){return ye._settledAt(U,se,Ae)})},k}();function ue(k){return new it(this,k).promise}function gt(k){var W=this;return o(k)?new W(function(q,se){for(var ye=k.length,Ae=0;Ae<ye;Ae++)W.resolve(k[Ae]).then(q,se)}):new W(function(q,se){return se(new TypeError("You must pass an array to race."))})}function et(k){var W=this,q=new W(G);return Q(q,k),q}function J(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function He(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var Ve=function(){function k(W){this[L]=Qe(),this._result=this._state=void 0,this._subscribers=[],G!==W&&(typeof W!="function"&&J(),this instanceof k?ze(this,W):He())}return k.prototype.catch=function(q){return this.then(null,q)},k.prototype.finally=function(q){var se=this,ye=se.constructor;return n(q)?se.then(function(Ae){return ye.resolve(q()).then(function(){return Ae})},function(Ae){return ye.resolve(q()).then(function(){throw Ae})}):se.then(q,q)},k}();Ve.prototype.then=x,Ve.all=ue,Ve.race=gt,Ve.resolve=T,Ve.reject=et,Ve._setScheduler=c,Ve._setAsap=h,Ve._asap=u;function _t(){var k=void 0;if(typeof ds<"u")k=ds;else if(typeof self<"u")k=self;else try{k=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var W=k.Promise;if(W){var q=null;try{q=Object.prototype.toString.call(W.resolve())}catch{}if(q==="[object Promise]"&&!W.cast)return}k.Promise=Ve}return Ve.polyfill=_t,Ve.Promise=Ve,Ve})})(Iy);var Bx=Iy.exports;const jx=fu(Bx);var Ey={call:function(i){var t=ft.getLogger("XHR");if(t.trace("[XHR::call()]"),jx.polyfill(),!i.url)throw new Error("missing parameter : url is not defined !");if(!i.method)throw new Error("missing parameter : method is not defined !");i.format||(i.format="text");var e={};switch(e.url=i.url,e.data=i.data?i.data:null,e.method=i.method,e.timeOut=i.timeOut||0,e.scope=i.scope||this,e.proxy=i.proxy||null,e.content=i.content||null,e.headers=i.headers||{referer:"http://localhost"},i.method){case"DELETE":case"GET":break;case"PUT":case"POST":e.content=i.content?i.content:"application/x-www-form-urlencoded",e.headers=i.headers?i.headers:{referer:"http://localhost"};break;case"HEAD":case"OPTIONS":throw new Error("HTTP method not yet supported !");default:throw new Error("HTTP method unknown !")}switch(i.format){case"text":this.__call(e).then(function(n){t.trace(n),i.onResponse.call(this,n)}).catch(function(n){i.onFailure.call(this,n)});break;case"json":this.__callJSON(e).then(function(n){t.trace(n),i.onResponse.call(this,n)}).catch(function(n){i.onFailure.call(this,n)});break;case"xml":this.__callXML(e).then(function(n){t.trace(n),i.onResponse.call(this,n)}).catch(function(n){i.onFailure.call(this,n)});break;default:throw new Error("This output Format is not yet supported !")}},__call:function(i){var t=ft.getLogger("XHR");t.trace("[XHR::__call()]");var e=new Promise(function(n,r){var o=i.method==="POST"||i.method==="PUT"?1:0;i.data&&(typeof i.data=="object"&&Object.keys(i.data).length||typeof i.data=="string"&&i.data.length)&&!o&&(i.scope.CLASSNAME==="Geocode"||i.scope.CLASSNAME==="ReverseGeocode"?i.url=i.url+i.data:i.url=Hr.normalyzeUrl(i.url,i.data)),t.trace("URL = ",i.url);var a=null;if(typeof window>"u"){var s=require("node-fetch"),l={headers:{Referer:"https://localhost"}};return i.data&&typeof i.data=="string"&&o&&(l={method:i.method,body:i.data,headers:{"Content-Type":i.content,Referer:"https://localhost"}}),s(i.url,l).then(function(d){if(d.ok)n(d.text());else{var p="Errors Occured on Http Request (status : '"+d.statusText+"' | url : '"+d.url+"')",f=d.status;r({message:p,status:f})}}).catch(function(d){r({message:d,status:-1})})}else if(window.XMLHttpRequest){t.trace("XMLHttpRequest"),a=new XMLHttpRequest,a.open(i.method,i.url,!0),a.overrideMimeType=i.content;var u=null;i.timeOut>0&&(t.trace("XHR - TimeOut actif !"),u=window.setTimeout(function(){var d="TimeOut Occured on Http Request with XMLHttpRequest !";r({message:d,status:-1})},i.timeOut)),o&&(t.trace("data = ",i.data),a.setRequestHeader("Content-type",i.content)),a.onerror=function(d){console.log(d),r(new Error("Errors Occured on Http Request with XMLHttpRequest !"))},a.ontimeout=function(d){console.log(d),r(new Error("TimeOut Occured on Http Request with XMLHttpRequest !"))},a.onreadystatechange=function(d){if(a.readyState===4)if(a.status===200)window.clearTimeout(u),n(a.response);else{var p="Errors Occured on Http Request (status : '"+d.target.statusText+"' | url : '"+d.target.responseURL+"' | response : '"+d.target.response+"')",f=d.target.status;r({message:p,status:f})}};var c=i.data&&o?i.data:null;a.send(c)}else if(window.XDomainRequest){t.trace("XDomainRequest"),a=new XDomainRequest,a.open(i.method,i.url),a.overrideMimeType=i.content,i.timeOut>0&&(a.timeout=i.timeout,t.trace("XHR - TimeOut actif !")),o&&a.setRequestHeader("Content-type",i.content),a.onerror=function(){r(new Error("Errors Occured on Http Request with XMLHttpRequest !"))},a.ontimeout=function(){r(new Error("TimeOut Occured on Http Request with XMLHttpRequest !"))},a.onload=function(d){if(a.status===200)n(a.responseText);else{var p="Errors Occured on Http Request (status : '"+d.target.statusText+"' | url : '"+d.target.responseURL+"')",f=d.target.status;r({message:p,status:f})}};var h=i.data&&o?i.data:null;a.send(h)}else throw new Error("CORS not supported")});return e},__callJSON:function(i){return this.__call(i).then(JSON.parse).catch(function(t){console.log("_callJSON failed on : ",i.url,t)})},__callXML:function(i){return this.__call(i).then(function(t){var e;if(typeof window>"u"){var n=require("xmldom").DOMParser;e=new n().parseFromString(t,"text/xml")}else if(window.DOMParser){var r=new window.DOMParser;e=r.parseFromString(t,"text/xml")}else e=new window.ActiveXObject("Microsoft.XMLDOM"),e.async=!1,e.loadXML(t);return e}).catch(function(t){console.log("__callXML failed on : ",i.url,t)})}},zx={uuid:function(){var i=Math.floor(Date.now());return function(){return i++}}(),call:function(i){var t=ft.getLogger("JSONP");if(t.trace("[JSONP::call ()]"),!i)throw t.error("missing parameter : options !"),new Error("missing parameter : options !");if(!i.url)throw t.error("missing parameter : options.url !"),new Error("missing parameter : options.url !");if(i.timeOut||(t.info("setting 'options.timeOut' default value"),i.timeOut=0),!i.onResponse)throw t.error("missing parameter : options.onResponse !"),new Error("missing parameter : options.onResponse !");var e=typeof i.callbackSuffix=="string"?i.callbackSuffix:this.uuid(),n=!1,r=!1,o=i.url.indexOf("callback=");if(o!==-1){n=!0;var a=i.url.indexOf("&",o);a===-1&&(a=i.url.length);var s=i.url.substring(o+9,a);s&&(r=!0,i.callbackName=s,t.info("setting 'options.callbackName' value ("+i.callbackName+") from 'options.url' parameter"))}if(!n){var l=i.url.indexOf("?");l===-1?i.url=i.url+"?callback=":l===i.url.length?i.url=i.url+"callback=":i.url=i.url+"&callback=",t.info("setting callback default key in 'options.url' : "+i.url)}var u=i.callbackName?!0:r;if(r||(i.callbackName||(t.info("setting 'options.callbackName' default value"),i.callbackName="callback",(e||e==="")&&(i.callbackName+=e)),i.url=i.url.replace("callback=","callback="+i.callbackName),t.info("setting callback function name in 'options.url' : "+i.url)),i.onTimeOut||(t.info("setting 'options.onTimeOut' default value"),i.onTimeOut=function(){console.log("TimeOut while invoking url : "+i.url)}),!u){var c=this,h=null;i.timeOut>0&&(h=window.setTimeout(function(){window[i.callbackName]=function(){},i.onTimeOut(),c._deleteScript(e)},i.timeOut)),window[i.callbackName]=function(d){window.clearTimeout(h),i.onResponse(d),c._deleteScript(e)}}this._createScript(e,i.url)},_createScript:function(i,t){var e,n=document.getElementById("results"+i);e=document.createElement("script"),e.setAttribute("type","text/javascript"),e.setAttribute("src",t),e.setAttribute("charset","UTF-8"),e.setAttribute("id","results"+i),e.setAttribute("async","true");var r=document.documentElement||document.getElementsByTagName("head")[0];n===null?r.appendChild(e):r.replaceChild(e,n)},_deleteScript:function(i){var t=document.getElementById("results"+i);if(t){var e=t.parentNode||document.documentElement;if(!e)return;e.removeChild(t)}}},Vx={send:function(i){var t=i||{method:"GET",protocol:"XHR",timeOut:0,format:null,wrap:!0,nocache:!0,output:"json",callback:null,callbackSuffix:null};if(typeof window>"u"&&i.protocol==="JSONP"){console.log("Value (s) for parameter (s) 'protocol=JSONP (instead use XHR)' not supported to NodeJS");return}if(i.protocol==="XHR"||i.format==="json"?t.wrap=!1:i.protocol==="JSONP"&&i.format==="xml"&&(t.wrap=!0),t.callback=null,t.output=t.wrap?"json":null,t.wrap){var e={};e.output=t.output,e.callback=t.callback,delete e.callback,t.url=Hr.normalyzeUrl(i.url,e)}switch(t.protocol){case"XHR":i.method==="GET"&&i.nocache&&(t.url=Hr.normalyzeUrl(t.url,{t:new Date().getTime()})),Ey.call(t);break;case"JSONP":t.data&&(t.url=Hr.normalyzeUrl(t.url,t.data)),zx.call(t);break;default:throw new Error("protocol not supported (XHR|JSONP) !")}}};function le(i){if(!(this instanceof le))throw new TypeError("ErrorService constructor cannot be called as a function.");var t=i;typeof i=="string"||i instanceof String?(this.message=i,this.status=-1,this.type=le.TYPE_UNKERR):(this.message=t.message||"undefined!?",this.type=t.type,this.status=t.status||-1),this.name="ErrorService",this.stack=new Error().stack}le.TYPE_SRVERR="SERVICE_ERROR";le.TYPE_USEERR="USAGE_ERROR";le.TYPE_UNKERR="UNKNOWN_ERROR";le.prototype=Object.create(Error.prototype,{constructor:{value:le,writable:!0,configurable:!0}});var Wx="wxs.ign.fr",di={ssl:!0,url:function(i,t){var e;return di.ssl===!1?e="http://":e="https://",e+Wx.concat("/",i,t)},Alti:{_key:{"elevation-json":"/alti/rest/elevation.json","elevation-xml":"/alti/rest/elevation.xml","profil-json":"/alti/rest/elevationLine.json","profil-xml":"/alti/rest/elevationLine.xml",wps:"/alti/wps"},url:function(i){return{"elevation-json":di.url(i,this._key["elevation-json"]),"elevation-xml":di.url(i,this._key["elevation-xml"]),"profil-json":di.url(i,this._key["profil-json"]),"profil-xml":di.url(i,this._key["profil-xml"]),wps:di.url(i,this._key.wps)}}},ProcessIsoCurve:{_key:"/geoportail/isochrone/rest/1.0.0/isochrone",url:function(i){return di.url(i,this._key)}},Config:{_key:"https://raw.githubusercontent.com/IGNF/geoportal-configuration/main/dist/",url:function(i){Array.isArray(i)||(i=i.split(","));for(var t=[],e=0;e<i.length;e++)t[e]=this._key+i[e]+"Config.json";return t}},AutoComplete:{_key:"/ols/apis/completion",url:function(i){return di.url(i,this._key)}},ReverseGeocode:{_key:"/geoportail/ols",url:function(i){return di.url(i,this._key)}},Geocode:{_key:"/geoportail/ols",url:function(i){return di.url(i,this._key)}},Route:{_key:"/geoportail/itineraire/rest/1.0.0/route",url:function(i){return di.url(i,this._key)}}};const Yx="geoportal-access-lib",Hx="3.3.3",qx="02/08/2023",Xx="French Geoportal resources access library",Zx="src/Gp.js",Kx="dist/GpServices-src.js",Jx="https://github.com/IGNF/geoportal-access-lib#readme",Qx={clean:'echo "Warning: no yet implemented!" && exit 0',setup:"npm install",cover:"nyc --reporter=lcov --reporter=text npm run test",eslint:"eslint src/",build:"webpack --mode=none","build:prod":"webpack --mode=production","build:dev":"webpack --mode=development",test:'mocha-webpack --reporter mochawesome --reporter-options reportDir=test-report,reportFilename=index --webpack-config ./test/webpack/webpack.test.js --glob "test_*.js" test/spec/',"test:serve":"webpack-dev-server --hot --config ./test/webpack/webpack.test.serve.js","test:serve:docker":"webpack-dev-server --hot --config ./test/webpack/webpack.test.serve.docker.js","test:end-to-end:serve":"webpack-dev-server --hot --config ./test/webpack/webpack.end-to-end.serve.js","test:end-to-end:serve:docker":"webpack-dev-server --hot --config ./test/webpack/webpack.end-to-end.serve.docker.js",sample:"npm run sample:serve","sample:serve":"webpack-dev-server --mode=none --open-page samples/index-src.html --https --content-base . --output-public-path '/dist/' --port 9001 --open","sample:serve:prod":"webpack-dev-server --mode=production --open-page samples/index-prod.html --content-base . --output-public-path '/dist/' --port 9001 --open","sample:serve:dev":"webpack-dev-server --mode=development --open-page samples/index-map.html --content-base . --output-public-path '/dist/' --port 9001 --open",doc:"npm run doc:serve","doc:serve":"webpack-dev-server --content-base jsdoc --port 9001 --open"},$x={include:["src/**/*.js"],instrument:!1,sourceMap:!1},eM={type:"git",url:"https://github.com/IGNF/geoportal-access-lib.git"},tM=["geoportail","webservice","javascript","es6"],iM="IGNF",nM="CECILL-B",rM={"es6-promise":"^4.2.4","node-fetch":"^2.6.1",xmldom:"^0.1.27"},oM={"@babel/core":"^7.12.10","@babel/plugin-transform-template-literals":"^7.12.1","@babel/preset-env":"^7.12.11","babel-loader":"^8.2.2",chai:"^4.1.2","clean-webpack-plugin":"^3.0.0","copy-webpack-plugin":"^5.1.2",eslint:"^7.18.0","eslint-config-standard":"^16.0.2","eslint-loader":"^4.0.2","eslint-plugin-import":"^2.22.1","eslint-plugin-node":"^11.1.0","eslint-plugin-promise":"^4.2.1","eslint-plugin-standard":"^5.0.0",glob:"^7.1.2","handlebars-layouts":"^3.1.4","handlebars-webpack-plugin":"^1.4.1","html-webpack-plugin":"^4.5.1","istanbul-instrumenter-loader":"^3.0.1","jsdoc-webpack-plugin":"^0.3.0",loglevel:"^1.6.1",mocha:"^7.2.0","mocha-loader":"^5.1.5","mocha-webpack":"^2.0.0-beta.0",mochawesome:"^6.2.1",nyc:"^15.1.0",path:"^0.12.7","replace-bundle-webpack-plugin":"^1.0.0",sinon:"^9.2.4","sinon-es6":"0.0.3","speed-measure-webpack-plugin":"^1.4.2","string-template":"^1.0.0","terser-webpack-plugin":"^2.3.8",webpack:"^4.46.0","webpack-cli":"^3.3.12","webpack-dev-server":"^3.11.2","webpack-node-externals":"^2.5.2","webpack-shell-plugin":"^0.5.0"},aM=[],sM={},lM={},Xf={name:Yx,version:Hx,date:qx,description:Xx,module:Zx,main:Kx,homepage:Jx,scripts:Qx,nyc:$x,repository:eM,keywords:tM,author:iM,license:nM,dependencies:rM,devDependencies:oM,bundledDependencies:aM,peerDependencies:sM,optionalDependencies:lM};function Hi(i){if(!(this instanceof Hi))throw new TypeError(ne.getMessage("CLASS_CONSTRUCTOR"));this.logger=ft.getLogger("CommonService"),this.logger.trace("[Constructeur CommonService (options)]"),this.options={protocol:"XHR",ssl:!0,proxyURL:"",callbackSuffix:null,httpMethod:"GET",timeOut:0,rawResponse:!1,scope:this,onSuccess:function(r){console.log("onSuccess - la reponse est la suivante : ",r)},onFailure:function(r){r.status===200||!r.status?console.log("onFailure : ",r.message):console.log("onFailure - Erreur (",r.status,") : ",r.message)}};for(var t in i)i.hasOwnProperty(t)&&(this.options[t]=i[t]);this.options.rawResponse&&!this.options.onSuccess&&(this.options.onSuccess=function(r){console.log("onSuccess - la réponse brute du service est la suivante : ",r)});var e=this.options.onSuccess!==null&&typeof this.options.onSuccess=="function";if(!e)throw new Error(ne.getMessage("PARAM_MISSING","onSuccess()"));if(!this.options.serverUrl){di.ssl=this.options.ssl;var n=di[this.CLASSNAME].url("calcul");typeof n=="string"?this.options.serverUrl=n:this.logger.trace("URL par defaut à determiner au niveau du composant...")}switch(this.options.httpMethod=typeof i.httpMethod=="string"?i.httpMethod.toUpperCase():"GET",this.options.httpMethod){case"POST":case"GET":break;case"PUT":case"DELETE":case"HEAD":case"OPTIONS":throw new Error(ne.getMessage("PARAM_NOT_SUPPORT","httpMethod"));default:throw new Error(ne.getMessage("PARAM_UNKNOWN","httpMethod"))}switch(this.options.protocol=typeof i.protocol=="string"?i.protocol.toUpperCase():"XHR",this.options.protocol){case"JSONP":case"XHR":break;default:throw new Error(ne.getMessage("PARAM_UNKNOWN","protocol"))}if(typeof window>"u"&&this.options.protocol==="JSONP")throw new Error(ne.getMessage("PARAM_NOT_SUPPORT_NODEJS","protocol=JSONP (instead use XHR)"));this.options.protocol==="JSONP"&&(this.options.httpMethod="GET"),this.options.nocache=i.nocache||!1,this.options.outputFormat=null,this.request=null,this.response=null}Hi.prototype={constructor:Hi,call:function(){this.logger.trace("CommonService::call ()");var i=this;function t(){this.logger.trace("CommonService::run ()"),this.buildRequest.call(i,o,e)}t.call(i);function e(a){this.logger.trace("CommonService::onBuildRequest : ",a),this.callService.call(i,o,n)}function n(a){this.logger.trace("CommonService::onCallService : ",a),this.analyzeResponse.call(i,o,r)}function r(a){if(this.logger.trace("CommonService::onAnalyzeResponse : ",a),a)this.options.onSuccess.call(this,a);else return o.call(this,new le("Analyse de la reponse en échec !?"))}function o(a){this.logger.trace("CommonService::onError()");var s=a;s instanceof le||(s=new le(a.message)),this.options.onFailure.call(this,s)}},buildRequest:function(i,t){this.logger.error("overwritten method !"),i&&i.call(this,"This method must be overwritten !"),t.call(this,"This method must be overwritten !")},callService:function(i,t){var e=null,n=this.request,r=!!(this.options.proxyURL&&this.options.protocol==="XHR");this.CLASSNAME!=="Geocode"&&this.CLASSNAME!=="ReverseGeocode"&&this.CLASSNAME!=="AutoComplete"&&(this.options.serverUrl=Hr.normalyzeUrl(this.options.serverUrl,{"gp-access-lib":Xf.version},!1)),r&&(this.options.httpMethod==="GET"&&(e=this.options.proxyURL+Hr.normalyzeUrl(this.options.serverUrl,this.request,!0),n=null),this.options.httpMethod==="POST"&&(e=this.options.proxyURL+Hr.normalyzeUrl(this.options.serverUrl,null,!0),n=this.request));var o=this,a={url:e||this.options.serverUrl,method:this.options.httpMethod,protocol:this.options.protocol,timeOut:this.options.timeOut||0,format:this.options.outputFormat,nocache:this.options.nocache||!1,wrap:this.options.protocol!=="XHR",callbackSuffix:this.options.callbackSuffix,data:n,headers:null,content:this.options.contentType||"application/xml",scope:this.options.scope||this,onResponse:function(s){o.logger.trace("callService::onResponse()");var l=null;if(o.options.protocol==="XHR"&&(o.logger.trace("Response XHR",s),l=s),o.options.protocol==="JSONP")if(o.logger.trace("Response JSON",s),s)if(s.http)if(s.http.status!==200){i.call(o,new le({status:s.http.status,message:s.http.error,type:le.TYPE_SRVERR}));return}else l=s.xml,o.options.rawResponse&&(l=s);else l=s;else{i.call(o,new le("Le contenu de la reponse est vide !?"));return}if(typeof o.options.onBeforeParse=="function"){var u=o.options.onBeforeParse(l);typeof u=="string"&&(l=u)}o.response=l,t.call(o,l)},onFailure:function(s){o.logger.trace("callService::onFailure()"),s.type=le.TYPE_SRVERR,i.call(o,new le(s))},onTimeOut:function(){o.logger.trace("callService::onTimeOut()"),i.call(o,new le("TimeOut!"))}};Vx.send(a)},analyzeResponse:function(i,t){this.logger.error("overwritten method !"),i&&i.call(this,"This method must be overwritten !"),t.call(this,"This method must be overwritten !")}};function Lc(){if(!(this instanceof Lc))throw new TypeError("ConfigInterface constructor cannot be called as a function.");this.generalOptions={apiKeys:{},title:null,defaultGMLGFIStyle:null,theme:null,wgs84Resolutions:[]},this.layers={},this.tileMatrixSets={}}Lc.prototype={constructor:Lc,isKeyConfLoaded:function(i){if(i)return!!this.generalOptions.apiKeys[i]},getLayersId:function(i){return this.generalOptions.apiKeys[i]},getLayerId:function(i,t){if(!(!i||!t)){var e=null;if(this.layers){var n=this.layers;for(var r in n)if(n.hasOwnProperty(r)){var o=r.split("$");if(i===o[0]&&o[1]){var a=o[1].split(":"),s=o[1].split(";");if(s[1]===t.toUpperCase()){e=r;break}if(a[2]===t.toUpperCase()){e=r;break}}}}if(e)return e}},getLayersConf:function(i){var t={},e=this.getLayersId(i);if(e)for(var n=0;n<e.length;n++){var r=e[n];t[r]=this.layers[r]}return t},getLayerConf:function(i){if(this.layers)return this.layers[i]},getLayerParams:function(i,t){var e={};if((t==="WMS"||Object.keys(this.tileMatrixSets).length!==0)&&Object.keys(this.layers).length!==0){var n=this.getLayerId(i,t);if(n){var r=this.getLayerConf(n),o=this.getLayerKey(n);if(o.length===0)return;for(var a=0;a<o.length;a++)r.serviceParams.serverUrl[o[a]]&&(e.url=r.serviceParams.serverUrl[o[a]]);if(/\/v\//.test(e.url)?e.styles="":e.styles=r.styles[0].name,e.version=r.serviceParams.version,e.format=r.formats[0].name,e.projection=r.defaultProjection,e.minScale=r.globalConstraint.minScaleDenominator,e.maxScale=r.globalConstraint.maxScaleDenominator,e.extent=r.globalConstraint.bbox,e.legends=r.legends,e.title=r.title,e.description=r.description,t==="WMS"&&(e.metadata=r.metadata),r.wmtsOptions){e.tileMatrixSetLimits=r.wmtsOptions.tileMatrixSetLimits;var s=r.wmtsOptions.tileMatrixSetLink;if(s){e.TMSLink=s;var l=this.getTMSConf(s);e.matrixIds=Object.keys(l.tileMatrices),e.tileMatrices=l.tileMatrices,e.nativeResolutions=l.nativeResolutions||this.getTMSConf("PM").nativeResolutions}}}}return e},getLayerKey:function(i){var t=[];if(this.generalOptions&&this.generalOptions.apiKeys&&Object.keys(this.generalOptions.apiKeys).length!==0){var e=this.generalOptions.apiKeys;for(var n in e){var r=e[n];r.forEach(function(o){o===i&&t.push(n)})}}return t},getTileMatrixSets:function(){return this.tileMatrixSets},getTMSConf:function(i){if(this.tileMatrixSets)return this.tileMatrixSets[i]},getGlobalConstraints:function(i){var t={};if(i){var e=this.getLayerConf(i);t.projection=e.defaultProjection,t.minScale=e.globalConstraint.minScaleDenominator,t.maxScale=e.globalConstraint.maxScaleDenominator,t.extent=e.globalConstraint.bbox}return t}};function Kr(i){if(!(this instanceof Kr))throw new TypeError(ne.getMessage("CLASS_CONSTRUCTOR","Config"));this.CLASSNAME="Config",this.logger=ft.getLogger("Gp.Config"),this.logger.trace("[Constructeur Config (options)]");var t=i.onSuccess!==null&&typeof i.onSuccess=="function";if(!t)throw new Error(ne.getMessage("PARAM_MISSING","onSuccess()"));if(!i.apiKey&&!i.customConfigFile)throw new Error(ne.getMessage("PARAM_MISSING","apiKey","customConfigFile"));this.options={},this.options.onSuccess=i.onSuccess,this.options.onFailure=i.onFailure,this.options.sync=i.sync||!1,this.options.listConfigUrls=i.customConfigFile?[i.customConfigFile]:Array.isArray(i.apiKey)?di.Config.url(i.apiKey):di.Config.url(i.apiKey.split(","))}Kr.prototype=Object.create(Hi.prototype,{});Kr.prototype.constructor=Kr;Kr.prototype.buildRequest=function(i,t){if(this.listConfigUrls=this.options.listConfigUrls,!this.listConfigUrls){i.call(this,new Error("url by default not found !"));return}t.call(this,this.listConfigUrls)};Kr.prototype.callService=function(i,t){this.options.sync?cM.call(this,i,t):uM.call(this,i,t)};var uM=function(i,t){this.listConfigResults=[];let e=null;if(typeof window>"u"){var n=require("node-fetch");e=n}else e=window.fetch;var r=a=>e(a,{credentials:"same-origin"}).then(s=>{if(s.ok)return s.json().then(l=>l).catch(l=>{throw new Error("Exception Json : "+l)});throw new Error("Exception HTTP : "+s.status+" (status code) !")}).catch(s=>new Promise((l,u)=>{u(s)})),o=[];for(let a=0;a<this.listConfigUrls.length;a++){const s=this.listConfigUrls[a];o.push(r(s))}Promise.all(o).then(a=>{if(!a)throw new Error("results config empty !?");a.forEach(s=>{this.listConfigResults.push(s)})}).then(()=>{t.call(this,this.listConfigResults)}).catch(a=>{i.call(this,a)})},cM=function(i,t){this.listConfigResults=[];for(var e=0;e<this.listConfigUrls.length;e++){const r=this.listConfigUrls[e],o=new XMLHttpRequest;if(o.open("GET",r,!1),o.send(null),o.status===200){var n=JSON.parse(o.responseText);this.listConfigResults.push(n)}}this.listConfigResults.length!==0?t.call(this,this.listConfigResults):i.call(this,new Error("..."))};Kr.prototype.analyzeResponse=function(i,t){var e=function(s){for(var l={},u={},c={},h=0;h<s.length;h++){if(!s[h].generalOptions||!s[h].layers)return;u={...u,...s[h].generalOptions.apiKeys},l={...l,...s[h].layers},c={...c,...s[h].tileMatrixSets}}var d={generalOptions:{apiKeys:u},layers:l,tileMatrixSets:c};return d},n=e(this.listConfigResults);if(!n){i.call(this,new Error("configuration structure not conforme !"));return}var r=new Lc;Object.assign(r,n);var o=typeof window<"u"?window:{};if(o.Gp||(o.Gp={}),o.Gp.Config){Object.assign(o.Gp.Config,r);for(var a in r)o.Gp.Config[a]=r[a]}else o.Gp.Config=r;t.call(this,o.Gp.Config)};function Jr(i){if(!(this instanceof Jr))throw new TypeError("AltiRequest constructor cannot be called as a function.");this.logger=ft.getLogger(),this.logger.trace("[Constructeur AltiRequest ()]"),this.options=i||{},this.positions=this.options.positions||[],this.delimiter=this.options.delimiter||"|",this.indent=this.options.indent||!1,this.crs=this.options.crs||"CRS:84",this.format=this.options.format||"json"}Jr.CLASSNAME="AltiRequest";Jr.prototype={constructor:Jr,setPositions:function(i){for(var t=[],e=0;e<i.length;e++){var n=i[e];n.lon&&n.lat&&t.push(n)}this.positions=t},getPositions:function(i){if(!i)return this.positions;var t=this.positions.length-1;return i>t||i<t?(this.logger.warn("index out of range !"),this.positions):this.positions[i]},addPositions:function(i){for(var t=0;t<i.length;t++){var e=i[t];e.lon&&e.lat&&this.positions.push(i[t])}},getLon:function(){for(var i=[],t=0;t<this.positions.length;t++)i.push(this.positions[t].lon);return this.logger.trace(i),i.join(this.delimiter)},getLat:function(){for(var i=[],t=0;t<this.positions.length;t++)i.push(this.positions[t].lat);return this.logger.trace(i),i.join(this.delimiter)}};Jr.prototype.getData=function(){var i=[];return i.push({k:"lon",v:this.getLon()}),i.push({k:"lat",v:this.getLat()}),i.push({k:"delimiter",v:this.delimiter}),i.push({k:"indent",v:this.indent}),i.push({k:"crs",v:this.crs}),i.push({k:"format",v:this.format}),i};function Sa(i){if(!(this instanceof Sa))throw new TypeError("AltiElevationRequest constructor cannot be called as a function.");this.CLASSNAME="AltiElevationRequest",Jr.apply(this,arguments),this.logger=ft.getLogger(),this.logger.trace("[Constructeur AltiElevationRequest ()]"),this.zonly=this.options.zonly||!1}Sa.prototype=Object.create(Jr.prototype,{zonly:{get:function(){return this._zonly},set:function(i){this._zonly=i}}});Sa.prototype.constructor=Sa;Sa.prototype.getData=function(){var i=[];return i.push({k:"lon",v:this.getLon()}),i.push({k:"lat",v:this.getLat()}),i.push({k:"indent",v:this.indent}),i.push({k:"crs",v:this.crs}),i.push({k:"zonly",v:this.zonly}),i.push({k:"format",v:this.format}),i};function Pa(i){if(!(this instanceof Pa))throw new TypeError("AltiProfilRequest constructor cannot be called as a function.");this.CLASSNAME="AltiProfilRequest",Jr.apply(this,arguments),this.logger=ft.getLogger(),this.logger.trace("[Constructeur AltiProfilRequest ()]"),this.sampling=this.options.sampling||3}Pa.prototype=Object.create(Jr.prototype,{sampling:{get:function(){return this._sampling},set:function(i){this._sampling=i}}});Pa.prototype.constructor=Pa;Pa.prototype.getData=function(){var i=[];return i.push({k:"lon",v:this.getLon()}),i.push({k:"lat",v:this.getLat()}),i.push({k:"indent",v:this.indent}),i.push({k:"crs",v:this.crs}),i.push({k:"sampling",v:this.sampling}),i.push({k:"format",v:this.format}),i};function Gc(i){if(this.logger=ft.getLogger("AltiRequestREST"),this.logger.trace("[Constructeur AltiRequestREST ()]"),!(this instanceof Gc))throw new TypeError("AltiRequestREST constructor cannot be called as a function.");if(this.options=i||{},!this.options)throw new Error(ne.getMessage("PARAM_EMPTY","options"));if(!this.options.type)throw new Error(ne.getMessage("PARAM_EMPTY","type (Elevation or Profil)"));switch(this.DataObject=null,this.options.type){case"Elevation":this.DataObject=new Sa(this.options.param);break;case"Profil":this.DataObject=new Pa(this.options.param);break;default:throw new Error(ne.getMessage("PARAM_TYPE","type (Elevation or Profil)"))}this.method=this.options.method||"GET"}Gc.prototype={requestString:null,constructor:Gc,template:{get:{value:"lon=__LON__&lat=__LAT__&indent=__INDENT__&crs='__CRS__'",input:{point:"&zonly=__ZONLY__",profil:"&sampling=__SAMPLING__"}},post:{value:`lon=__LON__
lat=__LAT__
indent=__INDENT__
crs='__CRS__'
`,input:{point:"zonly=__ZONLY__",profil:"sampling=__SAMPLING__"}}},processRequestString:function(){this.logger.trace("AltiRequestREST::processRequestString ()");var i="";return this.method==="POST"?i=this.template.post.value:this.method==="GET"&&(i=this.template.get.value),i=i.replace(/__LON__/g,this.DataObject.getLon()),i=i.replace(/__LAT__/g,this.DataObject.getLat()),i=i.replace(/__INDENT__/g,this.DataObject.indent),i=i.replace(/__CRS__/g,this.DataObject.crs),i=i+this.__addDataInputs(),this.logger.trace("traduction tmpl",i),this.requestString=i,this.requestString},__addDataInputs:function(){this.logger.trace("AltiRequestREST::addDataInput ()");var i;if(this.method==="POST")i=this.template.post;else if(this.method==="GET")i=this.template.get;else throw new Error("No other HTTP method supported by the service !");var t=null;if(this.DataObject.CLASSNAME==="AltiElevationRequest")return t=i.input.point,t.replace(/__ZONLY__/g,this.DataObject.zonly);if(this.DataObject.CLASSNAME==="AltiProfilRequest")return t=i.input.profil,t.replace(/__SAMPLING__/g,this.DataObject.sampling);throw new Error("No other object supported than elevation or profil !?")}};function kc(i){if(this.logger=ft.getLogger(),this.logger.trace("[Constructeur WPS()]"),!(this instanceof kc))throw new TypeError("WPS constructor cannot be called as a function.");if(this.options=i||{},this.DataObject=this.options.data,!this.DataObject)throw new TypeError("This data object is not defined !");this.paramservice=this.options.param.service||"WPS",this.paramversion=this.options.param.version||"1.0.0",this.paramidentifier=this.options.param.identifier||"gs:WPS",this.paramrawdataoutput=this.options.param.rawdataoutput||"result",this.paramrequest=this.options.param.request||"Execute",this.method=this.options.method||"GET"}kc.prototype={requestString:null,constructor:kc,template:{get:{value:"service=__SERVICE__&version=__VERSION__&rawdataoutput=__RAWDATAOUTPUT__&identifier=__IDENTIFIER__&request=__REQUEST__&datainputs=<!-- __DATAINPUTS__ -->",input:"__KEY__=__DATA__"},post:{value:'<?xml version="1.0" encoding="UTF-8"?><wps:__REQUEST__ version="__VERSION__" service="__SERVICE__" __NAMESPACE__ __SCHEMALOCATION__><ows:Identifier>__IDENTIFIER__</ows:Identifier><wps:DataInputs><!-- __DATAINPUTS__ --></wps:DataInputs><wps:ResponseForm><wps:RawDataOutput><ows:Identifier>__RAWDATAOUTPUT__</ows:Identifier></wps:RawDataOutput></wps:ResponseForm></wps:__REQUEST__>',input:"<wps:Input><ows:Identifier>__KEY__</ows:Identifier><wps:Data><wps:LiteralData>__DATA__</wps:LiteralData></wps:Data></wps:Input>"}},namespaceByDefault:function(){var i=['xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"','xmlns="http://www.opengis.net/wps/1.0.0"','xmlns:wfs="http://www.opengis.net/wfs"','xmlns:wps="http://www.opengis.net/wps/1.0.0"','xmlns:ows="http://www.opengis.net/ows/1.1"','xmlns:gml="http://www.opengis.net/gml"','xmlns:ogc="http://www.opengis.net/ogc"','xmlns:wcs="http://www.opengis.net/wcs/1.1.1"','xmlns:xlink="http://www.w3.org/1999/xlink"'];return i.join(" ")},schemaLocationByDefault:function(){return'xsi:schemaLocation="http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd"'},processRequestString:function(){this.logger.trace("WPS::processRequestString ()");var i="";if(this.method==="POST")i=this.template.post.value;else if(this.method==="GET")i=this.template.get.value;else return this.logger.error("No other method supported by the service !"),!1;return i=i.replace(/__SERVICE__/g,this.paramservice),i=i.replace(/__VERSION__/g,this.paramversion),i=i.replace(/__RAWDATAOUTPUT__/g,this.paramrawdataoutput),i=i.replace(/__IDENTIFIER__/g,this.paramidentifier),i=i.replace(/__REQUEST__/g,this.paramrequest),this.method==="POST"&&(i=i.replace(/__NAMESPACE__/g,this.namespaceByDefault),i=i.replace(/__SCHEMALOCATION__/g,this.schemaLocationByDefault)),i=i.replace(/<!-- __DATAINPUTS__ -->/g,this.__addDataInputs()),i?(this.requestString=i,this.logger.trace("traduction tmpl",i),!0):(this.logger.warn("traduction tmpl : empty request !?"),!1)},__addDataInputs:function(){this.logger.trace("WPS::__addDataInputs ()");for(var i=this.method==="GET"?this.template.get.input:this.template.post.input,t=this.method==="GET"?";":"",e="",n=this,r=this.DataObject.getData(),o=0;o<r.length;o++)(function(a){t&&(t=a===r.length-1?"":";"),e=e.concat(n.__addDataInput(i,r[a].k,r[a].v),t)})(o);return e},__addDataInput:function(i,t,e){var n=i;return n=n.replace(/__KEY__/g,t),n=n.replace(/__DATA__/g,e),n},setMethod:function(i){i==="GET"||i==="POST"?this.method=i:this.logger.warn("support only GET and POST method !")},getMethod:function(){return this.method}};var hM={build:function(i){var t=ft.getLogger("AltiRequestWPS");if(t.trace(["AltiRequestWPS::build()"]),!i)throw new Error(ne.getMessage("PARAM_EMPTY","options"));if(!i.type)throw new Error(ne.getMessage("PARAM_EMPTY","type (Elevation or Profil)"));var e=null;switch(i.type){case"Elevation":i.wps.identifier="gs:WPSElevation",e=new Sa(i.param);break;case"Profil":i.wps.identifier="gs:WPSLineElevation",e=new Pa(i.param);break;default:throw new Error(ne.getMessage("PARAM_TYPE","type (Elevation or Profil)"))}var n={data:e,method:i.method,param:i.wps},r=new kc(n);if(!r.processRequestString())throw new Error("Enable to process request !");return r.requestString}},dM={build:function(i){var t=ft.getLogger("AltiRequestFactory");t.trace(["AltiRequestFactory::build()"]);var e=null,n={type:i.sampling?"Profil":"Elevation",method:i.httpMethod,param:{positions:null,delimiter:null,indent:null,crs:null,format:null,sampling:null,zonly:null}};n.param.positions=i.positions,n.param.format=i.outputFormat,n.param.sampling=i.sampling,n.param.zonly=i.zonly;var r=i.onError!==null&&typeof i.onError=="function",o=i.onSuccess!==null&&typeof i.onSuccess=="function",a=null;switch(i.api){case"REST":var s=new Gc(n);if(!s.processRequestString()){if(a="Error in process request (rest) !",r){i.onError.call(i.scope,new le(a));return}throw new Error(a)}e=s.requestString;break;case"WPS":if(n.wps={service:null,version:null,identifier:null,rawdataoutput:null,request:null},e=hM.build(n),!e){if(a="Error in process request (wps) !",r){i.onError.call(i.scope,new le(a));return}throw new Error(a)}break;default:if(a="Type of API is not supported by service (REST or WPS) !",r){i.onError.call(i.scope,new le(a));return}throw new Error(a)}return o&&i.onSuccess.call(i.scope,e),e}};function Dc(i){if(!(this instanceof Dc))throw new TypeError("XML constructor cannot be called as a function.");this.logger=ft.getLogger(),this.logger.trace("[Constructeur XML ()]"),this.xmlString=null,this.xmlDoc=null,this.reader=null,i&&(i.xmlString&&typeof i.xmlString=="string"&&(this.xmlString=i.xmlString,this.xmlDoc=Sp(i.xmlString)),i.reader&&this.setReader(i.reader))}Dc.prototype={constructor:Dc,getXMLString:function(){return this.xmlString},setXMLString:function(i){i&&typeof i=="string"&&(this.xmlString=i,this.xmlDoc=Sp(i))},getReader:function(){return this.reader},setReader:function(i){i&&i.read&&typeof i.read=="function"&&(this.reader=i)},getXMLDoc:function(){return this.xmlDoc},setXMLDoc:function(i){this.xmlDoc=i},parse:function(){if(!this.xmlDoc&&this.xmlString&&(this.xmlDoc=Sp(this.xmlString)),this.xmlDoc){var i=pM(this.xmlDoc);if(i){var t;return this.reader&&this.reader.read?t=this.reader.read(i):(t={},t[i.nodeName]=wy(i)),t}else return{}}}};function Sp(i){if(typeof window>"u"){var t=require("xmldom").DOMParser;return new t().parseFromString(i,"text/xml")}else{var e,n,r="Erreur lors du parsing de la réponse du service : XML non conforme";if(window.ActiveXObject){n=new window.ActiveXObject("Microsoft.XMLDOM"),n.async=!1,n.loadXML(i);var o=n.parseError;if(o.errorCode)throw o.line&&o.linepos&&(r+="( ligne "+o.line+", colonne "+o.linepos),o.reason&&(r+=":  "+o.reason+")"),new Error(r);return n}else if(window.DOMParser){e=new window.DOMParser;try{n=e.parseFromString(i,"text/xml")}catch(u){throw u.message==="SyntaxError"?new Error(r):new Error("Erreur lors du parsing de la réponse du service : "+u.message)}if(n.getElementsByTagName("parsererror").length>0)for(var a=n.getElementsByTagName("parsererror"),s=0;s<a.length;s++){var l=a[s].innerHTML;if(l.indexOf("Huge input lookup")===-1)throw r+="("+l+")",new Error(r)}else if(!n.documentElement)throw new Error(r);return n}else throw new Error("Incompatible DOM Parser pour ce navigateur !")}}function pM(i){var t;return i.nodeType===9?t=i.documentElement:i.nodeType===1&&(t=i),t}function wy(i){var t={};if(i.attributes.length>0){var e=fM(i);t.attributes=e}if(i.hasChildNodes()){for(var n={},r,o=i.childNodes,a=0;a<o.length;a++)if(r=o[a],r.nodeType===3)t.textContent=r.nodeValue;else if(r.nodeType===1)if(n=wy(r),!t[r.nodeName])t[r.nodeName]=n;else{if(!Array.isArray(t[r.nodeName])){var s=t[r.nodeName];t[r.nodeName]=[],t[r.nodeName].push(s)}t[r.nodeName].push(n)}}return t}function fM(i){if(i.attributes.length>0){for(var t={},e=i.attributes,n=0;n<e.length;n++){var r=e[n];t[r.nodeName]=r.nodeValue}return t}}function Ts(){if(!(this instanceof Ts))throw new TypeError("AltiResponse constructor cannot be called as a function.");this.elevations=[]}Ts.prototype={constructor:Ts};function xa(){if(!(this instanceof xa))throw new TypeError("Elevation constructor cannot be called as a function.");this.z=null}xa.prototype={constructor:xa};var Hn={};Hn.READERS={elevations:function(i){var t=new Ts;if(i.hasChildNodes())for(var e=i.childNodes,n,r,o=0;o<e.length;o++)n=e[o],Hn.READERS[n.nodeName]&&(r=Hn.READERS[n.nodeName](n),t.elevations.push(r));return t},elevation:function(i){var t=new xa;if(i.hasChildNodes())for(var e=i.childNodes,n,r=0;r<e.length;r++)n=e[r],Hn.READERS[n.nodeName]&&Hn.READERS[n.nodeName](n,t);return t},lat:function(i,t){var e=i.firstChild;if(e&&e.nodeType===3)t.lat=parseFloat(e.nodeValue);else throw new Error("Erreur dans la lecture de la réponse du service : latitude attendue mais absente")},lon:function(i,t){var e=i.firstChild;if(e&&e.nodeType===3)t.lon=parseFloat(e.nodeValue);else throw new Error("Erreur dans la lecture de la réponse du service : longitude attendue mais absente")},z:function(i,t){var e=i.firstChild;if(e&&e.nodeType===3)if(t)t.z=parseFloat(e.nodeValue);else return t=new xa,t.z=parseFloat(e.nodeValue),t;else throw new Error("Erreur dans la lecture de la réponse du service : altitude attendue mais absente")},acc:function(i,t){var e=i.firstChild;if(e&&e.nodeType===3)t.acc=parseFloat(e.nodeValue);else throw new Error("Erreur dans la lecture de la réponse du service : précision (acc) attendue mais absente")},exceptionreport:function(i){var t={};if(i.hasChildNodes())for(var e=i.childNodes,n,r=0;r<e.length;r++)n=e[r],n.nodeName==="Exception"&&(t.exceptionReport=Hn.READERS.exception(n));return t},exception:function(i){var t={},e=i.getAttribute("exceptionCode");e&&(t.exceptionCode=e);var n=i.firstChild;return n&&n.nodeType===3&&(t.exception=n.nodeValue),t},error:function(i){var t={error:{}};if(i.hasChildNodes())for(var e=i.childNodes,n,r=0;r<e.length;r++){n=e[r];var o;n.nodeType===1&&n.nodeName==="code"&&(o=n.firstChild,o&&o.nodeType===3&&(t.error.code=o.nodeValue)),n.nodeType===1&&n.nodeName==="description"&&(o=n.firstChild,o&&o.nodeType===3&&(t.error.description=o.nodeValue))}return t}};Hn.read=function(i){if(i.nodeName==="elevations"){var t=Hn.READERS.elevations(i);return t}else if(i.nodeName==="ExceptionReport"){var e=Hn.READERS.exceptionreport(i);return e}else if(i.nodeName==="error"){var n=Hn.READERS.error(i);return n}else throw new Error("Erreur lors de la lecture de la réponse : elle n'est pas au format attendu.")};var gM={build:function(i){var t=ft.getLogger("AltiResponseFactory");t.trace(["AltiResponseFactory::build()"]);var e=null;if(i.response)if(i.rawResponse)t.trace("analyze response : raw"),e=i.response;else{switch(i.outputFormat){case"xml":t.trace("analyze response : xml");try{var n=new Dc({reader:Hn});if(typeof i.response=="string"?n.setXMLString(i.response):n.setXMLDoc(i.response),e=n.parse(),!e)throw new Error(ne.getMessage("SERVICE_RESPONSE_EXCEPTION_2"))}catch(h){var r=h.message;i.onError.call(i.scope,new le({message:ne.getMessage("SERVICE_RESPONSE_EXCEPTION",r),status:200,type:le.TYPE_SRVERR}));return}break;case"json":t.trace("analyze response : json"),t.trace("analyze response : ",typeof i.response);var o=null;if(typeof i.response=="string"?o=JSON.parse(i.response):o=i.response,o&&o.error){i.onError.call(i.scope,new le({message:ne.getMessage("SERVICE_RESPONSE_EXCEPTION",o.error.description),status:200,type:le.TYPE_SRVERR}));return}if(o){var a=o.elevations,s=new Ts,l;if(Array.isArray(a)&&a.length)for(var u=0;u<a.length;u++)l=new xa,typeof a[u]=="object"?(a[u].lon&&(l.lon=a[u].lon),a[u].lat&&(l.lat=a[u].lat),a[u].z&&(l.z=a[u].z),a[u].acc&&(l.acc=a[u].acc)):typeof a[u]=="number"&&(l.z=a[u]),Array.isArray(s.elevations)&&s.elevations.push(l);e=s}if(!e){i.onError.call(i.scope,new le({message:ne.getMessage("SERVICE_RESPONSE_ANALYSE_2"),type:le.TYPE_UNKERR,status:-1}));return}break;default:i.onError.call(i.scope,new le({message:ne.getMessage("SERVICE_RESPONSE_FORMAT_2"),type:le.TYPE_UNKERR,status:-1}));return}if(e.exceptionReport){i.onError.call(i.scope,new le({message:ne.getMessage("SERVICE_RESPONSE_EXCEPTION",e.exceptionReport),type:le.TYPE_SRVERR,status:200}));return}else if(e.error){var c=e.error.description;i.onError.call(i.scope,new le({message:ne.getMessage("SERVICE_RESPONSE_EXCEPTION",c),type:le.TYPE_SRVERR,status:200}));return}}else{i.onError.call(i.scope,new le(ne.getMessage("SERVICE_RESPONSE_EMPTY")));return}i.onSuccess.call(i.scope,e)}};function Ma(i){if(!(this instanceof Ma))throw new TypeError(ne.getMessage("CLASS_CONSTRUCTOR","Alti"));if(this.CLASSNAME="Alti",Hi.apply(this,arguments),this.logger=ft.getLogger("Gp.Services.Alti"),this.logger.trace("[Constructeur Alti (options)]"),!i.positions)throw new Error(ne.getMessage("PARAM_MISSING","positions"));if(i.positions.length===0)throw new Error(ne.getMessage("PARAM_EMPTY","positions"));if(this.options.positions=i.positions,this.options.outputFormat=typeof i.outputFormat=="string"?i.outputFormat.toLowerCase():"xml",this.options.sampling=i.sampling||null,this.options.api=typeof i.api=="string"?i.api.toUpperCase():"REST",this.options.api==="REST"&&(this.options.httpMethod="GET"),this.options.zonly=i.zonly||!1,!this.options.serverUrl){var t=di.Alti.url("calcul"),e=null;switch(this.options.api){case"WPS":e=t.wps;break;case"REST":var n=(i.sampling?"profil":"elevation")+"-"+this.options.outputFormat;e=t[n];break;default:throw new Error(ne.getMessage("PARAM_UNKNOWN","api"))}if(!e)throw new Error("Url by default not found !");this.options.serverUrl=e,this.logger.trace("Server URL by default : "+this.options.serverUrl)}var r=this.options.serverUrl.lastIndexOf(".");if(r!==-1){var o=this.options.serverUrl.substring(r+1);if(o&&o.length<5)switch(this.logger.trace("Server Extension URL : "+o),o.toLowerCase()){case"json":case"xml":this.options.outputFormat=o.toLowerCase();break;default:throw new Error("type of service : unknown or unsupported (json or xml) !")}}}Ma.prototype=Object.create(Hi.prototype,{});Ma.prototype.constructor=Ma;Ma.prototype.buildRequest=function(i,t){var e={httpMethod:this.options.httpMethod,onSuccess:function(n){this.request=n,t.call(this,this.request)},onError:i,scope:this,positions:this.options.positions,outputFormat:this.options.outputFormat,sampling:this.options.sampling,api:this.options.api,zonly:this.options.zonly};dM.build(e)};Ma.prototype.analyzeResponse=function(i,t){if(this.response){var e={response:this.response,outputFormat:this.options.outputFormat,rawResponse:this.options.rawResponse,onError:i,onSuccess:t,scope:this};gM.build(e)}else i.call(this,new le(ne.getMessage("SERVICE_RESPONSE_EMPTY")))};function bs(i){if(!(this instanceof bs))throw new TypeError("GeocodeParamREST constructor cannot be called as a function.");if(this.logger=ft.getLogger(),this.logger.trace("[Constructeur GeocodeParamREST ()]"),this.options=i||{},!this.options.geocodeMethod||this.options.geocodeMethod!=="search"&&this.options.geocodeMethod!=="reverse")throw new Error("Error geocodeMethod not valid");this.geocodeMethod=this.options.geocodeMethod,this.query=typeof this.options<"u"?this.options.query:null,this.searchGeometry=this.options.searchGeometry||null,this.index=this.options.index||null,this.lon=this.options.position&&this.options.position.lon?this.options.position.lon:null,this.lat=this.options.position&&this.options.position.lat?this.options.position.lat:null,this.maxResp=this.options.maxResp||null,this.returnTrueGeometry=this.options.returnTrueGeometry||null,this.filters=this.options.filters||{}}bs.CLASSNAME="GeocodeParamREST";bs.prototype={constructor:bs,getFilters:function(){var i={};for(var t in this.filters)this.filters.hasOwnProperty(t)&&(i[t]=this.filters[t]);return i},getIndex:function(){return this.index===void 0?null:this.index==="StreetAddress"?"address":this.index==="CadastralParcel"?"parcel":this.index==="PositionOfInterest"?"poi":this.index==="location"?"location":this.index},getSearchGeometry:function(){return JSON.stringify(this.searchGeometry)}};bs.prototype.getParams=function(){var i=[];this.geocodeMethod==="search"&&i.push({k:"q",v:this.query}),this.index&&i.push({k:"index",v:this.getIndex()}),this.geocodeMethod==="reverse"&&this.searchGeometry&&i.push({k:"searchgeom",v:this.getSearchGeometry()}),this.lon&&this.lat&&(i.push({k:"lon",v:this.lon}),i.push({k:"lat",v:this.lat})),this.maxResp&&i.push({k:"limit",v:this.maxResp}),this.returnTrueGeometry&&i.push({k:"returntruegeometry",v:this.returnTrueGeometry});const t=this.getFilters();for(var e in t)i.push({k:e,v:t[e]});return i};function Nc(i){if(this.logger=ft.getLogger("GeocodeRequestREST"),this.logger.trace("[Constructeur GeocodeRequestREST ()]"),!(this instanceof Nc))throw new TypeError("GeocodeRequestREST constructor cannot be called as a function.");if(!i)throw new Error(ne.getMessage("PARAM_EMPTY","options"));this.settings=i}Nc.prototype={requestString:null,constructor:Nc,processRequestString:function(){var i="";const e=new bs(this.settings).getParams();for(var n=0;n<e.length;n++){var r=e[n];i&&(i+="&"),i+=r.k+"="+r.v}if(!this.settings.geocodeMethod||this.settings.geocodeMethod!=="search"&&this.settings.geocodeMethod!=="reverse")throw new Error("Error geocodeMethod not valid");return this.requestString="?"+i,this.logger.trace(this.requestString),this.requestString}};var Sy={build:function(i){var t=ft.getLogger("GeocodeRequestFactory");t.trace(["GeocodeRequestFactory::build()"]);var e=i||{},n=new Nc(e);if(!n.processRequestString())throw new Error("Error process request (rest) !");var r=n.requestString;return t.trace(r),r}};function Fc(){if(!(this instanceof Fc))throw new TypeError("GeocodeResponse constructor cannot be called as a function.");this.locations=[]}Fc.prototype={constructor:Fc};function Uc(){if(!(this instanceof Uc))throw new TypeError("GeocodedLocation constructor cannot be called as a function.");this.position=null,this.matchType=null,this.placeAttributes={},this.type=null,this.accuracy=null,this.CLASSNAME="GeocodedLocation"}Uc.prototype={constructor:Uc};function Bc(){if(!(this instanceof Bc))throw new TypeError("GeocodeResponseParser constructor cannot be called as a function.")}Bc.prototype={constructor:Bc,parse:function(i){var t=new Fc;const e=JSON.parse(i);if(e.type==="FeatureCollection")for(var n=0;n<e.features.length;++n)Yg(e.features[n],t);else if(e.type==="Feature")Yg(e,t);else{if(e.type==="SERVICE_ERROR")return vM(e);var r=ne.getMessage("SERVICE_RESPONSE_ANALYSE",e.type);throw new le({message:r,type:le.TYPE_UNKERR,status:200})}return t}};function Yg(i,t){var e=new Uc;if(i.geometry&&i.geometry.type==="Point"&&(e.position={lon:i.geometry.coordinates[0],lat:i.geometry.coordinates[1]}),i.properties){for(var n in i.properties)n==="_score"?e.accuracy=i.properties[n]:n==="_type"?i.properties[n]==="address"?e.type="StreetAddress":i.properties[n]==="poi"?e.type="PositionOfInterest":i.properties[n]==="parcel"&&(e.type="CadastralParcel"):e.placeAttributes[n]=i.properties[n];i.properties._type==="address"&&(e.matchType=i.properties.number!==void 0&&i.properties.number!==null?"street number":"street")}t.locations.push(e)}function vM(i){return{exceptionReport:i}}var Py={build:function(i){var t=null;if(i.response)if(i.rawResponse)t=i.response;else{try{if(t=new Bc().parse(i.response),!t)throw new Error("L'analyse de la réponse du service !?")}catch(n){var e=n.message;typeof i.response=="string"?e+="('"+i.response+"')":e+="('"+i.response.documentElement.innerHTML+"')",i.onError.call(i.scope,new le({message:ne.getMessage("SERVICE_RESPONSE_ANALYSE",e),type:le.TYPE_UNKERR,status:-1}));return}if(t.exceptionReport){i.onError.call(i.scope,new le({message:ne.getMessage("SERVICE_RESPONSE_EXCEPTION",t.exceptionReport),type:le.TYPE_SRVERR,status:200}));return}}else{i.onError.call(i.scope,new le({message:ne.getMessage("SERVICE_RESPONSE_EMPTY"),type:le.TYPE_SRVERR,status:-1}));return}i.onSuccess.call(i.scope,t)}};function Go(i){if(!(this instanceof Go))throw new TypeError(ne.getMessage("CLASS_CONSTRUCTOR","Geocode"));this.CLASSNAME="Geocode",this.logger=ft.getLogger("Gp.Services.Geocode"),this.logger.trace("[Constructeur Geocode (options)]");var t=this.patchOptionConvertor(i);if(t.serverUrl=t.serverUrl||"https://wxs.ign.fr/calcul/geoportail/geocodage/rest/0.1/search",Hi.apply(this,[t]),!t.hasOwnProperty("query"))throw new Error(ne.getMessage("PARAM_MISSING","query"));if(this.options.query=t.query,t.index||(this.options.index=t.index="StreetAddress"),t.filters)for(var e=Object.keys(t.filters),n=0;n<e.length;n++){var r=e[n];(typeof t.filters[r]>"u"||typeof t.filters[r]=="object"&&Object.keys(t.filters[r]).length===0||typeof t.filters[r]=="string"&&t.filters[r].length===0||Array.isArray(t.filters[r])&&t.filters[r].length===0)&&delete this.options.filters[r]}this.options.index=t.index||"StreetAddress",this.options.maximumResponses=t.maximumResponses||20}Go.prototype=Object.create(Hi.prototype,{});Go.prototype.constructor=Go;Go.prototype.patchOptionConvertor=function(i){const t=i;return t.hasOwnProperty("location")&&(this.logger.warn("The parameter 'location' is deprecated"),t.query||(t.query=t.location),delete t.location),t.filterOptions&&(this.logger.warn("The parameter 'filterOptions' is deprecated"),t.filters||(t.filters=t.filterOptions,t.filters.type&&(this.logger.warn("The parameter 'filterOptions.type' is deprecated"),t.index||(Array.isArray(t.filters.type)&&t.filters.type.length>0?t.index=t.filters.type[0]:t.index=t.filters.type),delete t.filters.type),t.filters.bbox&&(this.logger.warn("The parameter 'filterOptions.bbox' is deprecated"),delete t.filters.bbox)),delete t.filterOptions),t.position&&(t.position.x&&(this.logger.warn("The parameter 'position.x' is deprecated"),t.position.lon||(t.position.lon=t.position.x),delete t.position.x),t.position.y&&(this.logger.warn("The parameter 'position.y' is deprecated"),t.position.lat||(t.position.lat=t.position.y),delete t.position.y)),t.returnFreeForm&&(this.logger.warn("The parameter 'returnFreeForm' is deprecated"),delete t.returnFreeForm),t.srs&&(this.logger.warn("The parameter 'srs' is deprecated"),delete t.srs),t};Go.prototype.buildRequest=function(i,t){var e={httpMethod:this.options.httpMethod,geocodeMethod:"search",query:this.options.query,index:this.options.index,returnTrueGeometry:this.options.returnTrueGeometry,position:this.options.position,maxResp:this.options.maximumResponses,filters:this.options.filters};this.request=Sy.build(e),this.request?t.call(this,this.request):i.call(this,new le(ne.getMessage("SERVICE_REQUEST_BUILD")))};Go.prototype.analyzeResponse=function(i,t){if(this.response){var e={response:this.response,rawResponse:this.options.rawResponse,onError:i,onSuccess:t,scope:this};Py.build(e)}else i.call(this,new le(ne.getMessage("SERVICE_RESPONSE_EMPTY")))};function Fn(i){if(!(this instanceof Fn))throw new TypeError(ne.getMessage("CLASS_CONSTRUCTOR","ReverseGeocode"));this.CLASSNAME="ReverseGeocode",this.logger=ft.getLogger("Gp.Services.ReverseGeocode"),this.logger.trace("[Constructeur ReverseGeocode (options)]");var t=this.patchOptionConvertor(i);if(t.serverUrl=t.serverUrl||"https://wxs.ign.fr/calcul/geoportail/geocodage/rest/0.1/reverse",Hi.apply(this,[t]),t.searchGeometry)this.options.searchGeometry=t.searchGeometry;else if(!t.position)throw new Error(ne.getMessage("PARAM_MISSING","searchGeometry"));if(t.index||(this.options.index=t.index="StreetAddress"),t.filters)for(var e=Object.keys(t.filters),n=0;n<e.length;n++){var r=e[n];(typeof t.filters[r]>"u"||typeof t.filters[r]=="object"&&Object.keys(t.filters[r]).length===0||typeof t.filters[r]=="string"&&t.filters[r].length===0||Array.isArray(t.filters[r])&&t.filters[r].length===0)&&delete this.options.filters[r]}this.options.position=t.position,this.options.index=t.index||"StreetAddress",this.options.maximumResponses=t.maximumResponses||20}Fn.prototype=Object.create(Hi.prototype,{});Fn.prototype.constructor=Fn;Fn.prototype.patchOptionConvertor=function(i){var t=i;return t.filterOptions&&(this.logger.warn("The parameter 'filterOptions' is deprecated"),t.filterOptions.type&&(this.logger.warn("The parameter 'filterOptions.type' is deprecated"),t.index||(Array.isArray(t.filterOptions.type)&&t.filterOptions.type.length>0?t.index=t.filterOptions.type[0]:t.index=t.filterOptions.type),delete t.filterOptions.type),t.filterOptions.bbox&&(this.logger.warn("The parameter 'filterOptions.bbox' is deprecated"),t.searchGeometry||(t.searchGeometry=this.bbox2Json(t.filterOptions.bbox)),delete t.filterOptions.bbox),t.filterOptions.circle&&(this.logger.warn("The parameter 'filterOptions.circle' is deprecated"),t.searchGeometry||(t.searchGeometry=this.circle2Json(t.filterOptions.circle)),delete t.filterOptions.circle),t.filterOptions.polygon&&(this.logger.warn("The parameter 'filterOptions.polygon' is deprecated"),t.searchGeometry||(t.searchGeometry=this.polygon2Json(t.filterOptions.polygon)),delete t.filterOptions.polygon),!t.filters&&Object.keys(t.filterOptions).length>0&&(t.filters=t.filterOptions),delete t.filterOptions),t.position&&(t.position.x&&(this.logger.warn("The parameter 'position.x' is deprecated"),t.position.lon||(t.position.lon=t.position.x),delete t.position.x),t.position.y&&(this.logger.warn("The parameter 'position.y' is deprecated"),t.position.lat||(t.position.lat=t.position.y),delete t.position.y)),t.srs&&(this.logger.warn("The parameter 'srs' is deprecated"),delete t.srs),t};Fn.prototype.buildRequest=function(i,t){var e={httpMethod:this.options.httpMethod,geocodeMethod:"reverse",searchGeometry:this.options.searchGeometry,index:this.options.index,position:this.options.position,returnTrueGeometry:this.options.returnTrueGeometry,maxResp:this.options.maximumResponses,filters:this.options.filters};this.request=Sy.build(e),this.request?t.call(this,this.request):i.call(this,new le(ne.getMessage("SERVICE_REQUEST_BUILD")))};Fn.prototype.analyzeResponse=function(i,t){if(this.response){var e={response:this.response,rawResponse:this.options.rawResponse,onError:i,onSuccess:t,scope:this};Py.build(e)}else i.call(this,new le(ne.getMessage("SERVICE_RESPONSE_EMPTY")))};Fn.prototype.bbox2Json=function(i){return{type:"Polygon",coordinates:[[[i.left,i.top],[i.right,i.top],[i.right,i.bottom],[i.left,i.bottom],[i.left,i.top]]]}};Fn.prototype.circle2Json=function(i){return{type:"Circle",radius:i.radius,coordinates:[i.x,i.y]}};Fn.prototype.polygon2Json=function(i){for(var t={type:"Polygon",coordinates:[[]]},e=0;e<i.length;++e)t.coordinates[0].push([i[e].x,i[e].y]);return t};Fn.geoEPSG=["EPSG:4326"];function Zl(){if(!(this instanceof Zl))throw new TypeError("AutoCompleteResponse constructor cannot be called as a function.");this.suggestedLocations=[]}Zl.prototype={constructor:Zl};function Kl(){if(!(this instanceof Kl))throw new TypeError("SuggestedLocation constructor cannot be called as a function.");this.type=null,this.position={x:null,y:null},this.commune=null,this.fullText=null,this.postalCode=null,this.classification=null,this.street=null,this.poi=null,this.kind=null}Kl.prototype={constructor:Kl};var mM={build:function(i){var t=ft.getLogger("AutoCompleteResponseFactory");t.trace(["AutoCompleteResponseFactory::build()"]);var e=null;if(i.response)if(i.rawResponse)t.trace("analyze response : raw"),e=i.response;else{var n=null;if(typeof i.response=="string"?n=JSON.parse(i.response):n=i.response,n){if(n.error){i.onError.call(i.scope,new le({message:ne.getMessage("SERVICE_RESPONSE_EXCEPTION",n.error.description),status:n.error.code,type:le.TYPE_SRVERR}));return}if(e=new Zl,n.results&&Array.isArray(n.results))for(var r=null,o=0;o<n.results.length;o++){var a=n.results[o];r=new Kl,a&&(a.country==="StreetAddress"?(r.street=a.street,r.type="StreetAddress"):a.country==="PositionOfInterest"&&(r.poi=a.street,r.kind=a.kind,r.type="PositionOfInterest"),r.position&&(r.position.x=a.x,r.position.y=a.y),r.commune=a.city,r.fullText=a.fulltext,r.postalCode=a.zipcode,r.classification=a.classification),e.suggestedLocations.push(r)}else{i.onError.call(i.scope,new le(ne.getMessage("SERVICE_RESPONSE_FORMAT_3")));return}if(!e.suggestedLocations.length){i.onError.call(i.scope,new le(ne.getMessage("SERVICE_RESPONSE_FORMAT_3")));return}}if(!e){i.onError.call(i.scope,new le({message:ne.getMessage("SERVICE_RESPONSE_ANALYSE_2"),type:le.TYPE_UNKERR,status:-1}));return}if(e.exceptionReport){i.onError.call(i.scope,new le({message:ne.getMessage("SERVICE_RESPONSE_EXCEPTION",e.exceptionReport),type:le.TYPE_SRVERR,status:200}));return}}else{i.onError.call(i.scope,new le(ne.getMessage("SERVICE_RESPONSE_EMPTY")));return}i.onSuccess.call(i.scope,e)}};function ko(i){if(!(this instanceof ko))throw new TypeError(ne.getMessage("CLASS_CONSTRUCTOR","AutoComplete"));this.CLASSNAME="AutoComplete",this.logger=ft.getLogger("Gp.Services.AutoComplete"),this.logger.trace("[Constructeur AutoComplete (options)]");var t=this.patchOptionConvertor(i);if(t.serverUrl=t.serverUrl||"https://wxs.ign.fr/calcul/geoportail/geocodage/rest/0.1/completion",Hi.apply(this,arguments),!t.text)throw new Error(ne.getMessage("PARAM_MISSING","text"));this.options.text=t.text,t.type||(t.type=["StreetAddress,PositionOfInterest"]),this.options.type=t.type,this.options.territory=t.territory||"",this.options.maximumResponses=t.maximumResponses||10,this.options.protocol==="XHR"&&this.options.httpMethod==="POST"&&(this.logger.warn("Le service ne gére pas le mode d'interrogation en POST, on bascule sur du GET !"),this.options.httpMethod="GET"),this.options.outputFormat=this.options.rawResponse?"":"json"}ko.prototype=Object.create(Hi.prototype,{});ko.prototype.constructor=ko;ko.prototype.patchOptionConvertor=function(i){const t=i;return t.filterOptions&&(this.logger.warn("The parameter 'filterOptions' is deprecated"),t.filterOptions.type&&(this.logger.warn("The parameter 'filterOptions.type' is deprecated"),t.type||(t.type=t.filterOptions.type)),t.filterOptions.territory&&(this.logger.warn("The parameter 'filterOptions.territory' is deprecated"),t.terr||(t.terr=t.filterOptions.territory)),delete t.filterOptions),t};ko.prototype.buildRequest=function(i,t){var e="";this.options.territory&&(e=this.options.territory);var n="";this.options.type&&(n=this.options.type.join(",")),this.request=Hr.normalyzeParameters({text:encodeURIComponent(this.options.text),type:n,terr:e,maximumResponses:this.options.maximumResponses}),this.request?t.call(this,this.request):i.call(this,new le(ne.getMessage("SERVICE_REQUEST_BUILD")))};ko.prototype.analyzeResponse=function(i,t){if(this.response){var e={response:this.response,rawResponse:this.options.rawResponse,onSuccess:t,onError:i,scope:this};mM.build(e)}else i.call(this,new le(ne.getMessage("SERVICE_RESPONSE_EMPTY")))};function Rs(i){if(!(this instanceof Rs))throw new TypeError("RouteParamREST constructor cannot be called as a function.");this.logger=ft.getLogger(),this.logger.trace("[Constructeur RouteParamREST ()]"),this.options=i||{},this.resource=this.options.resource,this.start=this.options.startPoint.x+","+this.options.startPoint.y,this.end=this.options.endPoint.x+","+this.options.endPoint.y,this.intermediates=this.options.viaPoints,this.profile=this.options.graph,this.crs=this.options.srs,this.constraints=this.options.constraints,this.optimization=this.options.routePreference,this.getSteps=this.options.geometryInInstructions?"true":"false",this.distanceUnit=this.options.distanceUnit,this.timeUnit=this.options.timeUnit,this.waysAttributes=this.options.waysAttributes}Rs.CLASSNAME="RouteParamREST";Rs.prototype={constructor:Rs,getIntermediates:function(){var i=[];if(this.intermediates.length!==0)for(var t=0;t<this.intermediates.length;t++){var e=this.intermediates[t];i.push(e.x+","+e.y)}return i.join("|")},getWaysAttributes:function(){return this.waysAttributes.join("|")},getProfile:function(){return this.profile},getDistanceUnit:function(){return this.distanceUnit==="m"?"meter":this.distanceUnit==="km"?"kilometer":""},getOptimization:function(){return this.optimization?this.optimization:""},getConstraints:function(){var i=[];if(this.constraints.length!==0)for(var t=0;t<this.constraints.length;t++)i.push(JSON.stringify(this.constraints[t]));return i.join("|")}};Rs.prototype.getParams=function(){var i=[];return i.push({k:"resource",v:this.resource}),i.push({k:"start",v:this.start}),i.push({k:"end",v:this.end}),i.push({k:"geometryFormat",v:"geojson"}),this.optimization&&i.push({k:"optimization",v:this.getOptimization()}),this.intermediates&&i.push({k:"intermediates",v:this.getIntermediates()}),this.profile&&i.push({k:"profile",v:this.getProfile()}),this.constraints&&i.push({k:"constraints",v:this.getConstraints()}),this.crs&&i.push({k:"crs",v:this.crs}),this.distanceUnit&&i.push({k:"distanceUnit",v:this.getDistanceUnit()}),this.timeUnit&&i.push({k:"timeUnit",v:this.timeUnit}),this.waysAttributes&&i.push({k:"waysAttributes",v:this.getWaysAttributes()}),i};function jc(i){if(this.logger=ft.getLogger("RouteRequestREST"),this.logger.trace("[Constructeur RouteRequestREST ()]"),!(this instanceof jc))throw new TypeError("RouteRequestREST constructor cannot be called as a function.");if(!i)throw new Error(ne.getMessage("PARAM_EMPTY","options"));this.settings=i}jc.prototype={requestString:null,constructor:jc,processRequestString:function(){this.logger.warn(" PROTOTYPE !");for(var i=new Rs(this.settings),t=i.getParams(),e="",n=0;n<t.length;n++){var r=t[n];e&&(e+="&"),e+=r.k+"="+r.v}return this.logger.trace(e),this.requestString=e,this.requestString}};var yM={build:function(i){var t=ft.getLogger("RouteRequestFactory");t.trace(["RouteRequestFactory::build()"]);var e=null,n=i||{},r=i.onError!==null&&typeof i.onError=="function",o=null,a=new jc(n);if(!a.processRequestString()){if(o="Error process request (rest) !",r){i.onError.call(i.scope,new le(o));return}throw new Error(o)}return e=a.requestString,e}};function Jl(){if(!(this instanceof Jl))throw new TypeError("RouteResponse constructor cannot be called as a function.");this.totalTime=null,this.totalDistance=null,this.bbox={left:null,right:null,top:null,bottom:null},this.routeGeometry=null,this.routeInstructions=[]}Jl.prototype={constructor:Jl};function Ql(){if(!(this instanceof Ql))throw new TypeError("RouteInstruction constructor cannot be called as a function.");this.duration=null,this.distance=null,this.code=null,this.instruction=null,this.geometry=null}Ql.prototype={constructor:Ql};var AM={build:function(i){var t=ft.getLogger("RouteResponseFactory");t.trace("RouteResponseFactory::build()");var e=null;if(i.response)if(i.rawResponse)t.trace("analyze response : raw"),e=i.response;else{t.trace("analyze response : json");var n;if(typeof i.response=="string"?n=JSON.parse(i.response):n=i.response,n){if(n.message){i.onError.call(i.scope,new le(ne.getMessage("SERVICE_RESPONSE_EXCEPTION",n.message)));return}var r=[],o=[],a=[];if(e=new Jl,e.hasOwnProperty("totalTime")&&(e.totalTime=parseFloat(n.duration)),e.hasOwnProperty("totalDistance")&&(e.totalDistance=parseFloat(n.distance)),e.hasOwnProperty("bbox")&&(e.bbox.left=parseFloat(n.bbox[0]),e.bbox.bottom=parseFloat(n.bbox[1]),e.bbox.right=parseFloat(n.bbox[2]),e.bbox.top=parseFloat(n.bbox[3])),e.hasOwnProperty("routeGeometry")&&!i.geometryInInstructions&&(e.routeGeometry=n.geometry),e.hasOwnProperty("routeInstructions")&&i.geometryInInstructions){var s=n.portions,l;if(Array.isArray(s)&&s.length)for(l=0;l<s.length;l++)r.push(s[l]);if(r.length)for(l=0;l<r.length;l++)o.push(r[l].steps);if(o.length)for(l=0;l<o.length;l++)a=a.concat(o[l]);a.forEach(function(u){switch(e.routeInstructions.push(new Ql),e.routeInstructions[e.routeInstructions.length-1].duration=u.duration,e.routeInstructions[e.routeInstructions.length-1].distance=u.distance,e.routeInstructions[e.routeInstructions.length-1].code="",e.routeInstructions[e.routeInstructions.length-1].instruction="",e.routeInstructions[e.routeInstructions.length-1].geometry=u.geometry,u.name==="Valeur non renseignée"&&(u.name=""),u.instruction.type){case"turn":e.routeInstructions[e.routeInstructions.length-1].instruction+="Tourner";break;case"new name":e.routeInstructions[e.routeInstructions.length-1].instruction+="Continuer tout droit";break;case"depart":e.routeInstructions[e.routeInstructions.length-1].instruction+="Départ";break;case"arrive":e.routeInstructions[e.routeInstructions.length-1].instruction+="Arrivée";break;case"merge":e.routeInstructions[e.routeInstructions.length-1].instruction+="Rejoindre";break;case"ramp":e.routeInstructions[e.routeInstructions.length-1].instruction+="Prendre la bretelle";break;case"on ramp":e.routeInstructions[e.routeInstructions.length-1].instruction+="Prendre la bretelle";break;case"off ramp":e.routeInstructions[e.routeInstructions.length-1].instruction+="Prendre la sortie";break;case"fork":e.routeInstructions[e.routeInstructions.length-1].instruction+="Sur la bifurcation, prendre";break;case"end of road":e.routeInstructions[e.routeInstructions.length-1].instruction+="À la fin de la route, prendre";break;case"use lane":e.routeInstructions[e.routeInstructions.length-1].instruction+="Utiliser la file";break;case"continue":e.routeInstructions[e.routeInstructions.length-1].instruction+="Continuer";break;case"roundabout":e.routeInstructions[e.routeInstructions.length-1].instruction+="Au rond-point";break;case"rotary":e.routeInstructions[e.routeInstructions.length-1].instruction+="Au rond-point";break;case"roundabout turn":e.routeInstructions[e.routeInstructions.length-1].instruction+="Au rond point, tourner";break;case"notification":e.routeInstructions[e.routeInstructions.length-1].instruction+="";break;default:e.routeInstructions[e.routeInstructions.length-1].instruction+="?"+u.instruction.type+"?";break}if(u.instruction.modifier)switch(u.instruction.modifier){case"uturn":e.routeInstructions[e.routeInstructions.length-1].instruction="Faire demi-tour";break;case"sharp right":e.routeInstructions[e.routeInstructions.length-1].instruction+=" complètement à droite";break;case"right":e.routeInstructions[e.routeInstructions.length-1].instruction+=" à droite";break;case"slight right":e.routeInstructions[e.routeInstructions.length-1].instruction+=" légèrement à droite";break;case"straight":e.routeInstructions[e.routeInstructions.length-1].instruction="Continuer tout droit";break;case"slight left":e.routeInstructions[e.routeInstructions.length-1].instruction+=" lègèrement à gauche";break;case"left":e.routeInstructions[e.routeInstructions.length-1].instruction+=" à gauche";break;case"sharp left":e.routeInstructions[e.routeInstructions.length-1].instruction+=" complètement à gauche";break;default:e.routeInstructions[e.routeInstructions.length-1].instruction+=" ?"+u.instruction.modifier+"?";break}u.instruction.exit&&(e.routeInstructions[e.routeInstructions.length-1].instruction+=`${u.instruction.exit}e sortie`),u.attributes.name&&((u.attributes.name.nom_1_droite||u.attributes.name.toponyme)&&(e.routeInstructions[e.routeInstructions.length-1].instruction+=" sur"),u.attributes.name.nom_1_droite&&(e.routeInstructions[e.routeInstructions.length-1].instruction+=` ${u.attributes.name.nom_1_droite}`),u.attributes.name.toponyme&&(e.routeInstructions[e.routeInstructions.length-1].instruction+=` ${u.attributes.name.toponyme}`))})}}if(!e){i.onError.call(i.scope,new le(ne.getMessage("SERVICE_RESPONSE_ANALYSE","json")));return}if(e.exceptionReport){i.onError.call(i.scope,new le(ne.getMessage("SERVICE_RESPONSE_EXCEPTION_2")));return}}else{i.onError.call(i.scope,new le(ne.getMessage("SERVICE_RESPONSE_EMPTY")));return}i.onSuccess.call(i.scope,e)}};function Ta(i){if(!(this instanceof Ta))throw new TypeError(ne.getMessage("CLASS_CONSTRUCTOR","Route"));if(this.CLASSNAME="Route",Hi.apply(this,arguments),this.logger=ft.getLogger("Gp.Services.Route"),this.logger.trace("[Constructeur Route (options)]"),!i.startPoint)throw new Error(ne.getMessage("PARAM_MISSING","startPoint"));if(i.startPoint.x===null)throw new Error(ne.getMessage("PARAM_MISSING","startPoint.x"));if(i.startPoint.y===null)throw new Error(ne.getMessage("PARAM_MISSING","startPoint.y"));if(!i.endPoint)throw new Error(ne.getMessage("PARAM_MISSING","endPoint"));if(i.endPoint.x===null)throw new Error(ne.getMessage("PARAM_MISSING","endPoint.x"));if(i.endPoint.y===null)throw new Error(ne.getMessage("PARAM_MISSING","endPoint.y"));if(i.outputFormat&&i.outputFormat!=="json"&&this.logger.warn("options.outputFormat could only be json"),this.options.outputFormat="json",this.options.resource=i.resource||"bdtopo-osrm",this.options.startPoint=i.startPoint,this.options.endPoint=i.endPoint,this.options.viaPoints=i.viaPoints||[],this.options.routePreference=i.routePreference||"fastest",i.graph?(i.graph==="Voiture"&&(this.options.graph="car"),i.graph==="Pieton"&&(this.options.graph="pedestrian")):this.options.graph="car",this.options.constraints=[],i.constraints)if(Array.isArray(i.constraints))for(var t=0;t<i.constraints.length;t++)this.options.constraints.push(i.constraints[t]);else throw new Error(ne.getMessage("PARAM_TYPE","constraints"));var e={},n={},r={};if(i.exclusions&&i.exclusions.length!==0){this.logger.warn("options.exclusions is DEPRECATED !!");for(var o=0;o<i.exclusions.length;o++){if(typeof i.exclusions[o]=="string")i.exclusions[o]=i.exclusions[o].toLowerCase();else continue;i.exclusions[o]==="toll"&&(r.constraintType="banned",r.key="wayType",r.operator="=",r.value="autoroute",this.options.constraints.push(r)),i.exclusions[o]==="tunnel"&&(e.constraintType="banned",e.key="wayType",e.operator="=",e.value="tunnel",this.options.constraints.push(e)),i.exclusions[o]==="bridge"&&(n.constraintType="banned",n.key="wayType",n.operator="=",n.value="pont",this.options.constraints.push(n))}}if(this.options.geometryInInstructions=i.geometryInInstructions||!1,this.options.provideBbox=i.provideBbox||!0,this.options.distanceUnit=i.distanceUnit||"m",this.options.timeUnit=i.timeUnit||"second",this.options.expectedStartTime=null,this.options.srs=i.srs||"EPSG:4326",this.options.waysAttributes=i.waysAttributes||[],!this.options.serverUrl){var a=di.Route.url("calcul");if(!a)throw new Error("Url by default not found !");this.options.serverUrl=a,this.logger.trace("Serveur URL par defaut : "+this.options.serverUrl)}}Ta.prototype=Object.create(Hi.prototype,{});Ta.prototype.constructor=Ta;Ta.prototype.buildRequest=function(i,t){var e={resource:this.options.resource,startPoint:this.options.startPoint,endPoint:this.options.endPoint,viaPoints:this.options.viaPoints,provideBbox:this.options.provideBbox,constraints:this.options.constraints,distanceUnit:this.options.distanceUnit,timeUnit:this.options.timeUnit,graph:this.options.graph,geometryInInstructions:this.options.geometryInInstructions,routePreference:this.options.routePreference,srs:this.options.srs,waysAttributes:this.options.waysAttributes};this.request=yM.build(e),this.request?t.call(this,this.request):i.call(this,new le(ne.getMessage("SERVICE_REQUEST_BUILD")))};Ta.prototype.analyzeResponse=function(i,t){if(this.response){var e={distanceUnit:this.options.distanceUnit,timeUnit:this.options.timeUnit,response:this.response,outputFormat:this.options.outputFormat,rawResponse:this.options.rawResponse,onError:i,onSuccess:t,scope:this,geometryInInstructions:this.options.geometryInInstructions};AM.build(e)}else i.call(this,new le(ne.getMessage("SERVICE_RESPONSE_EMPTY")))};function Os(i){if(!(this instanceof Os))throw new TypeError("ProcessIsoCurveParam constructor cannot be called as a function.");this.logger=ft.getLogger(),this.logger.trace("[Constructeur ProcessIsoCurveParam ()]"),this.options=i||{},this.id=this.options.id,this.resource=this.options.resource,this.point=this.options.position,this.crs=this.options.srs,this.profile=this.options.graph,this.constraints=this.options.constraints,this.reverse=this.options.reverse,this.timeUnit=this.options.timeUnit,this.distanceUnit=this.options.distanceUnit,this.options.method==="distance"?(this.costType="distance",this.costValue=this.options.distance):(this.costType="time",this.costValue=this.options.time)}Os.CLASSNAME="ProcessIsoCurveParam";Os.prototype={constructor:Os,getLocation:function(){return this.point.x+","+this.point.y},getDistanceUnit:function(){return this.distanceUnit==="m"?"meter":this.distanceUnit==="km"?"kilometer":""},getConstraints:function(){var i=[];if(this.constraints.length!==0)for(var t=0;t<this.constraints.length;t++)i.push(JSON.stringify(this.constraints[t]));return i.join("|")},getDirection:function(){return this.reverse?"arrival":"departure"}};Os.prototype.getParams=function(){var i=[];return i.push({k:"resource",v:this.resource}),i.push({k:"point",v:this.getLocation()}),i.push({k:"direction",v:this.getDirection()}),i.push({k:"costType",v:this.costType}),i.push({k:"costValue",v:this.costValue}),i.push({k:"profile",v:this.profile}),i.push({k:"timeUnit",v:this.timeUnit}),i.push({k:"distanceUnit",v:this.getDistanceUnit()}),this.crs&&i.push({k:"crs",v:this.crs}),this.constraints&&i.push({k:"constraints",v:this.getConstraints()}),i};function zc(i){if(this.logger=ft.getLogger("ProcessIsoCurveRequest"),this.logger.trace("[Constructeur ProcessIsoCurveRequest ()]"),!(this instanceof zc))throw new TypeError("ProcessIsoCurveRequest constructor cannot be called as a function.");if(!i)throw new Error(ne.getMessage("PARAM_EMPTY","options"));this.settings=i,this.mode=this.settings.httpMethod||"GET"}zc.prototype={requestString:null,constructor:zc,processRequestString:function(){var i="",t=0;switch(this.mode){case"GET":this.logger.trace("Process GET Request");var e=new Os(this.settings),n=e.getParams();for(t=0;t<n.length;t++){var r=n[t];i&&(i+="&"),i+=r.k+"="+r.v}break;case"POST":this.logger.trace("Process POST Request");var o={};o.resource=this.settings.resource,o.point=this.settings.position.x+","+this.settings.position.y,this.settings.method==="distance"?(o.costType="distance",o.costValue=this.settings.distance):(o.costType="time",o.costValue=this.settings.time),o.profile=this.settings.graph,this.settings.reverse?o.direction="arrival":o.direction="departure",o.constraints=this.settings.constraints,o.distanceUnit=this.settings.distanceUnit,o.timeUnit=this.settings.timeUnit,o.crs=this.settings.srs,i=JSON.stringify(o);break;default:this.logger.error("No other HTTP method supported by the service !")}return this.logger.trace(i),this.requestString=i,this.requestString}};function $l(){if(!(this instanceof $l))throw new TypeError("ProcessIsoCurveResponse constructor cannot be called as a function.");this.message=null,this.id=null,this.location={},this.location.x=null,this.location.y=null,this.srs=null,this.geometry=null,this.time=null,this.distance=null}$l.prototype={constructor:$l};var _M={build:function(i){var t=ft.getLogger("ProcessIsoCurveResponseFactory");t.trace(["ProcessIsoCurveResponseFactory::build()"]);var e=null;if(i.response)if(i.rawResponse)t.trace("analyze response : raw"),e=i.response;else{t.trace("analyze response : json");var n;if(typeof i.response=="string"?n=JSON.parse(i.response):n=i.response,e=new $l,n){n.costType==="distance"?(e.time="",e.distance=n.costValue):(e.time=n.costValue,e.distance=""),e.message="",e.id="",e.srs=n.crs,e.geometry=n.geometry;var r=n.point.split(",");e.location&&(e.location.x=r[0],e.location.y=r[1])}else{i.onError.call(i.scope,new le(ne.getMessage("SERVICE_RESPONSE_ANALYSE",i.response)));return}if(e.exceptionReport){i.onError.call(i.scope,new le({message:ne.getMessage("SERVICE_RESPONSE_EXCEPTION",e.exceptionReport),type:le.TYPE_SRVERR,status:200}));return}}else{i.onError.call(i.scope,new le(ne.getMessage("SERVICE_RESPONSE_EMPTY")));return}i.onSuccess.call(i.scope,e)}};function ba(i){if(!(this instanceof ba))throw new TypeError(ne.getMessage("CLASS_CONSTRUCTOR","ProcessIsoCurve"));if(this.CLASSNAME="ProcessIsoCurve",Hi.apply(this,arguments),this.logger=ft.getLogger("Gp.Services.ProcessIsoCurve"),this.logger.trace("[Constructeur ProcessIsoCurve (options)]"),!i.position)throw new Error(ne.getMessage("PARAM_MISSING","position"));if(i.position.x===null)throw new Error(ne.getMessage("PARAM_MISSING","position.x"));if(i.position.y===null)throw new Error(ne.getMessage("PARAM_MISSING","position.y"));if(!i.time&&!i.distance)throw new Error("Parameter (s) 'distance' missing. Parameter time to calculate an isochrone, parameter distance for an isodistance");if(!i.time&&i.distance&&(this.options.method="distance",this.options.time&&delete this.options.time),i.time&&!i.distance&&(this.options.method="time",this.options.distance&&delete this.options.distance),this.options.method=this.options.method||"time",this.options.resource=i.resource||"bdtopo-iso",this.options.exclusions=i.exclusions||[],this.options.reverse=i.reverse||!1,this.options.srs=i.srs||"EPSG:4326",this.options.distanceUnit=i.distanceUnit||"m",this.options.timeUnit=i.timeUnit||"second",i.smoothing&&this.logger.warn("options.smoothing is DEPRECATED"),this.options.smoothing=!1,i.holes&&this.logger.warn("options.holes is DEPRECATED"),this.options.holes=!1,i.graph?(i.graph==="Voiture"&&(this.options.graph="car"),i.graph==="Pieton"&&(this.options.graph="pedestrian")):this.options.graph="car",this.options.constraints=[],i.constraints)if(Array.isArray(i.constraints))for(var t=0;t<i.constraints.length;t++)this.options.constraints.push(i.constraints[t]);else throw new Error(ne.getMessage("PARAM_TYPE","constraints"));var e={},n={},r={};if(i.exclusions&&i.exclusions.length!==0){this.logger.warn("options.exclusions is DEPRECATED !!");for(var o=0;o<i.exclusions.length;o++){if(typeof i.exclusions[o]=="string")i.exclusions[o]=i.exclusions[o].toLowerCase();else continue;i.exclusions[o]==="toll"&&(r.constraintType="banned",r.key="wayType",r.operator="=",r.value="autoroute",this.options.constraints.push(r)),i.exclusions[o]==="tunnel"&&(e.constraintType="banned",e.key="wayType",e.operator="=",e.value="tunnel",this.options.constraints.push(e)),i.exclusions[o]==="bridge"&&(n.constraintType="banned",n.key="wayType",n.operator="=",n.value="pont",this.options.constraints.push(n))}}if(this.options.outputFormat=typeof i.outputFormat=="string"?i.outputFormat.toLowerCase():"json",i.outputFormat&&i.outputFormat!=="json")throw new Error(ne.getMessage("PARAM_NOT_SUPPORT","outputFormat"));if(this.options.outputFormat="json",!this.options.serverUrl){var a=di.ProcessIsoCurve.url("calcul");if(!a)throw new Error("Url by default not found !");this.options.serverUrl=a,this.logger.trace("Serveur URL par defaut : "+this.options.serverUrl)}}ba.prototype=Object.create(Hi.prototype,{});ba.prototype.constructor=ba;ba.prototype.buildRequest=function(i,t){try{var e=new zc(this.options);if(!e.processRequestString())throw new Error(ne.getMessage("SERVICE_REQUEST_BUILD"));this.request=e.requestString}catch(n){i.call(this,new le(n.message));return}t.call(this,this.request)};ba.prototype.analyzeResponse=function(i,t){if(this.response){var e={response:this.response,outputFormat:this.options.outputFormat,rawResponse:this.options.rawResponse,onSuccess:t,onError:i,scope:this};_M.build(e)}else i.call(this,new le(ne.getMessage("SERVICE_RESPONSE_EMPTY")))};var CM={getConfig:function(i){var t=new Kr(i);t.call()},getAltitude:function(i){var t=new Ma(i);t.call()},geocode:function(i){var t=new Go(i);t.call()},reverseGeocode:function(i){var t=new Fn(i);t.call()},autoComplete:function(i){var t=new ko(i);t.call()},route:function(i){var t=new Ta(i);t.call()},isoCurve:function(i){var t=new ba(i);t.call()}};const IM=Xf.version,EM=Xf.date;var tt={};tt.servicesVersion=IM;tt.servicesDate=EM;tt.Protocols={};tt.Protocols.XHR=Ey;tt.Services=CM;tt.Services.DefaultUrl=di;tt.Services.AltiResponse=Ts;tt.Services.Alti={};tt.Services.Alti.Elevation=xa;tt.Services.AutoCompleteResponse=Zl;tt.Services.AutoComplete={};tt.Services.AutoComplete.SuggestedLocation=Kl;tt.Services.Config=Kr;tt.Services.IsoCurveResponse=$l;tt.Services.RouteResponse=Jl;tt.Services.Route={};tt.Services.Route.RouteInstruction=Ql;tt.Error=le;tt.Helper=Hr;var Ye={getLogger:function(i){"__PRODUCTION__".match(/true/)?go.disableAll():go.enableAll();var t=i||"default";return go.getLogger(t)},disableAll:function(){var i=go.getLoggers();for(const t in i)Object.hasOwnProperty.call(i,t)&&i[t].disableAll()},enableAll:function(){var i=go.getLoggers();for(const t in i)Object.hasOwnProperty.call(i,t)&&i[t].enableAll()}},xy={proxifyUrl:function(i,t){var e=Ye.getLogger("proxifyUrl");if(!t||!t.hasOwnProperty("proxyUrl")||t.proxyUrl===null||t.proxyUrl.trim().length===0)return i;if(t.noProxyDomains&&Array.isArray(t.noProxyDomains)&&t.noProxyDomains.length>0){for(var n in t.noProxyDomains)if(e.trace("[ProxyUtils] proxifyUrl : analyzing "+t.noProxyDomains[n]),i.indexOf(t.noProxyDomains[n])!==-1)return e.info("[ProxyUtils] proxifyUrl : "+i+" found in noProxyDomains list ("+t.noProxyDomains[n]+")."),i}return t.proxyUrl+encodeURIComponent(i)}},Ya=Ye.getLogger("GfiUtils"),ps={getLayerFormat:function(i){var t=typeof i.getType=="function"?i.getType():null,e=i.getSource();if(t){if(t==="VECTOR"||t==="VECTOR_TILE")return"vector";if(t==="TILE")return e.tileGrid?"wmts":"wms";if(t==="IMAGE")return"wms"}else{if(e instanceof qf||e instanceof Fx)return"wms";if(e instanceof Xl)return"wmts";if(e instanceof fn||e instanceof Pl)return"vector"}return"unknown"},displayInfo:function(i,t,e,n,r){if(Ya.trace("[GfiUtils] : displayInfo..."),n||(n="text/html"),e!==null){var o=null,a=null,s=e;s=s.replace(/\n/g,""),s=s.replace(/(>)\s*(<)/g,"$1$2");var l=typeof window<"u"?window:null;if(typeof V0=="object"&&window===null){var u=require("xmldom").DOMParser;a=new u,o=a.parseFromString(s,n)}else if(l.DOMParser)a=new l.DOMParser,o=a.parseFromString(s,n);else if(l.ActiveXObject)o=new l.ActiveXObject("Microsoft.XMLDOM"),o.async=!1,o.loadXML(s);else return Ya.log("Incompatible environment for DOM Parser !"),!1;var c=o.getElementsByTagName("body");if(c&&c.length===1&&!c[0].hasChildNodes())return!1;var h=document.createElement("div");h.className="gp-feature-info-div";var d=document.createElement("input");d.type="button",d.className="gp-styling-button closer",d.onclick=function(){return i.featuresOverlay&&(i.removeOverlay(i.featuresOverlay),i.featuresOverlay=null),!1};var p=document.createElement("div");return p.className="gp-features-content-div",p.innerHTML=e,h.appendChild(p),h.appendChild(d),i.featuresOverlay&&(i.removeOverlay(i.featuresOverlay),i.featuresOverlay=null),i.featuresOverlay=new dn({element:h,autoPan:r.autoPan,autoPanAnimation:r.autoPanAnimation,autoPanMargin:r.autoPanMargin,positioning:"bottom-center",insertFirst:!1,stopEvent:!0}),i.addOverlay(i.featuresOverlay),i.featuresOverlay.setPosition(t),i.featuresOverlay.render(),!0}},features2html:function(i,t){var e=document.createElement("div");return t.forEach(function(n){var r=n.getProperties();if(r.hasOwnProperty("render"))e.insertAdjacentHTML("beforeend",r.render);else{if(r.hasOwnProperty("name")){var o=document.createElement("div");o.className="gp-att-name-div",o.insertAdjacentHTML("afterbegin",r.name),e.appendChild(o)}if(r.hasOwnProperty("description")){var a=document.createElement("div");a.className="gp-att-description-div",a.insertAdjacentHTML("afterbegin",r.description),e.appendChild(a)}var s=null,l=!1,u=null,c=null,h=null,d=["fill","fill-opacity","stroke","stroke-opacity","stroke-width","marker-symbol","marker-color","marker-size","geometry","value","name","description","styleUrl","extensionsNode_","icon"];for(s in r)if(r[s]!==void 0&&d.indexOf(s)===-1){l||(u=document.createElement("div"),u.className="gp-att-others-div",c=document.createElement("ul"),l=!0),h=document.createElement("li");var p=document.createElement("span");p.className="gp-attname-others-span",p.appendChild(document.createTextNode(s+" : ")),h.appendChild(p),h.appendChild(document.createTextNode(r[s])),c.appendChild(h)}c&&(u.appendChild(c),e.appendChild(u))}},i),e.hasChildNodes()||(e=null),e},layerGetFeatureAtCoordinates:function(i,t,e){var n=i.getPixelFromCoordinate(e);return i.hasFeatureAtPixel(n,function(r){return r===t})},displayVectorFeatureInfo:function(i,t,e,n){var r=i.getPixelFromCoordinate(t),o=[];if(i.forEachFeatureAtPixel(r,function(s,l){(!e||e.indexOf(l)>-1)&&o.push(s)}),o.length===0)return!1;var a=this.features2html(i,o);return a===null?!1:(this.displayInfo(i,t,a.innerHTML,"text/html",n),!0)},displayFeatureInfo:function(i,t,e,n,r){for(var o={},a=0;a<e.length;a++){var s=e[a],l=s.obj.getZIndex();o[l]||(o[l]=[]),o[l].push(s)}var u=[],c=Object.keys(o);c.sort(function(E,w){return w-E});for(var h=0;h<c.length;h++)for(var d=c[h],p=0;p<o[d].length;++p){var f=o[d][p].obj,g=o[d][p].infoFormat||"text/html",v=!0;if(f.minResolution&&f.minResolution>i.getResolution()&&(v=!1),v&&f.maxResolution&&f.maxResolution<i.getResolution()&&(v=!1),f.getVisible()&&v){var y=this.getLayerFormat(f);if(y==="vector"){this.layerGetFeatureAtCoordinates(i,f,t)&&u.push({format:y,scope:this,coordinate:t});continue}else if(y!=="wms"&&y!=="wmts"){Ya.log("[ERROR] DisplayFeatureInfo - layer format '"+y+"' not allowed");continue}var m=i.getView().getResolution(),A=null;y==="wmts"?A=f.getSource().getFeatureInfoUrl.call(f.getSource(),t,m,i.getView().getProjection(),{INFOFORMAT:g}):A=f.getSource().getFeatureInfoUrl.call(f.getSource(),t,m,i.getView().getProjection(),{INFO_FORMAT:g}),u.push({format:g,url:xy.proxifyUrl(A,n),scope:this,coordinate:t})}}var _=null;function C(E,w,S){if(E.length===0)return;var x=0;function T(L){x++,L||x===E.length?S():w(E[x],T)}w(E[0],T)}var I=this;C(u,function(E,w){if(E.format==="vector"){if(!_){_=[];for(var S=0;S<c.length;S++)for(var x=c[S],T=0;T<o[x].length;++T)_.push(o[x][T].obj)}w(E.scope.displayVectorFeatureInfo(i,E.coordinate,_,r))}else tt.Protocols.XHR.call({url:E.url,method:"GET",scope:E.scope,onResponse:function(L){var G=!1;(L.trim().length===0||L.indexOf("ServiceExceptionReport")!==-1||L.indexOf("java.lang.NullPointerException")!==-1||L.indexOf("java.lang.OutOfMemoryError")!==-1||L.indexOf("not queryable")!==-1)&&(G=!0);var N=!G&&I.displayInfo(i,E.coordinate,L,"text/html",r);w(N)},onFailure:function(L){Ya.log(L),w(!1)}})},function(){Ya.trace("Finish sync to GFI !")})},getPosition:function(i,t){if(i.coordinate)return i.coordinate;var e=[0,0];if(i.offsetX||i.offsetY)e[0]=i.offsetX,e[1]=i.offsetY;else if(i.pointerType==="touch"){var n=i.pointers[0];e[0]=n.pageX,e[1]=n.pageY}var r=t.getCoordinateFromPixel(e);return r},onDisplayFeatureInfo:function(i,t){if(t.isActive()){Ya.trace(i);var e=t.getMap();if(i.type==="contextmenu"||i.type==="dblclick")i.preventDefault();else if(i.type==="singleclick"){for(var n=e.getInteractions().getArray(),r=0;r<n.length;r++)if(n[r].getActive()&&(n[r]instanceof qn||n[r]instanceof Uf||n[r]instanceof Ln))return}var o={};t._proxyUrl&&(o.proxyUrl=t._proxyUrl),t._noProxyDomains&&(o.noProxyDomains=t._noProxyDomains);var a={};t._autoPan&&(a.autoPan=t._autoPan),t._autoPanAnimation&&(a.autoPanAnimation=t._autoPanAnimation),t._autoPanMargin&&(a.autoPanMargin=t._autoPanMargin);for(var s=[],l=0;l<t._layers.length;++l){var u=t._layers[l].event?t._layers[l].event:t._defaultEvent;if(u===i.type){var c=s.push(t._layers[l])-1;s[c].infoFormat||(s[c].infoFormat=t._defaultInfoFormat)}}var h=this.getPosition(i,e);this.displayFeatureInfo(e,h,s,o,a)}}};window.ol&&(window.ol.gp?window.ol.gp.GfiUtils=ps:window.ol.gp={GfiUtils:ps});var Vc="http://www.w3.org/2001/XMLSchema-instance";function Na(i,t){return Ks().createElementNS(i,t)}function rr(i,t){return My(i,t,[]).join("")}function My(i,t,e){if(i.nodeType==Node.CDATA_SECTION_NODE||i.nodeType==Node.TEXT_NODE)t?e.push(String(i.nodeValue).replace(/(\r\n|\r|\n)/g,"")):e.push(i.nodeValue);else{var n=void 0;for(n=i.firstChild;n;n=n.nextSibling)My(n,t,e)}return e}function Io(i){return"documentElement"in i}function Eo(i){return new DOMParser().parseFromString(i,"application/xml")}function Hg(i,t){return function(e,n){var r=i.call(t!==void 0?t:this,e,n);if(r!==void 0){var o=n[n.length-1];St(o,r)}}}function ji(i,t){return function(e,n){var r=i.call(t!==void 0?t:this,e,n);if(r!==void 0){var o=n[n.length-1];o.push(r)}}}function Zf(i,t){return function(e,n){var r=i.call(t!==void 0?t:this,e,n);r!==void 0&&(n[n.length-1]=r)}}function Tt(i,t,e){return function(n,r){var o=i.call(e!==void 0?e:this,n,r);if(o!==void 0){var a=r[r.length-1],s=t!==void 0?t:n.localName,l=void 0;s in a?l=a[s]:(l=[],a[s]=l),l.push(o)}}}function P(i,t,e){return function(n,r){var o=i.call(e!==void 0?e:this,n,r);if(o!==void 0){var a=r[r.length-1],s=t!==void 0?t:n.localName;a[s]=o}}}function Z(i,t){return function(e,n,r){i.call(t!==void 0?t:this,e,n,r);var o=r[r.length-1],a=o.node;a.appendChild(e)}}function Ty(i,t){var e,n;return function(r,o,a){if(e===void 0){e={};var s={};s[r.localName]=i,e[r.namespaceURI]=s,n=or(r.localName)}by(e,n,o,a)}}function or(i,t){var e=i;return function(n,r,o){var a=r[r.length-1],s=a.node,l=e;l===void 0&&(l=o);var u=t!==void 0?t:s.namespaceURI;return Na(u,l)}}var Yi=or();function gn(i,t){for(var e=t.length,n=new Array(e),r=0;r<e;++r)n[r]=i[t[r]];return n}function j(i,t,e){var n=e!==void 0?e:{},r,o;for(r=0,o=i.length;r<o;++r)n[i[r]]=t;return n}function jo(i,t,e,n){var r;for(r=t.firstElementChild;r;r=r.nextElementSibling){var o=i[r.namespaceURI];if(o!==void 0){var a=o[r.localName];a!==void 0&&a.call(n,r,e)}}}function re(i,t,e,n,r){return n.push(i),jo(t,e,n,r),n.pop()}function by(i,t,e,n,r,o){for(var a=(r!==void 0?r:e).length,s,l,u=0;u<a;++u)s=e[u],s!==void 0&&(l=t.call(o!==void 0?o:this,s,n,r!==void 0?r[u]:void 0),l!==void 0&&i[l.namespaceURI][l.localName].call(o,l,s,n))}function xt(i,t,e,n,r,o,a){return r.push(i),by(t,e,n,r,o,a),r.pop()}var Pd=void 0;function wM(){return Pd===void 0&&typeof XMLSerializer<"u"&&(Pd=new XMLSerializer),Pd}var xd=void 0;function Ks(){return xd===void 0&&typeof document<"u"&&(xd=document.implementation.createDocument("","",null)),xd}var SM=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),PM=function(i){SM(t,i);function t(){var e=i.call(this)||this;return e.xmlSerializer_=wM(),e}return t.prototype.getType=function(){return fo.XML},t.prototype.readFeature=function(e,n){if(e)if(typeof e=="string"){var r=Eo(e);return this.readFeatureFromDocument(r,n)}else return Io(e)?this.readFeatureFromDocument(e,n):this.readFeatureFromNode(e,n);else return null},t.prototype.readFeatureFromDocument=function(e,n){var r=this.readFeaturesFromDocument(e,n);return r.length>0?r[0]:null},t.prototype.readFeatureFromNode=function(e,n){return null},t.prototype.readFeatures=function(e,n){if(e)if(typeof e=="string"){var r=Eo(e);return this.readFeaturesFromDocument(r,n)}else return Io(e)?this.readFeaturesFromDocument(e,n):this.readFeaturesFromNode(e,n);else return[]},t.prototype.readFeaturesFromDocument=function(e,n){for(var r=[],o=e.firstChild;o;o=o.nextSibling)o.nodeType==Node.ELEMENT_NODE&&St(r,this.readFeaturesFromNode(o,n));return r},t.prototype.readFeaturesFromNode=function(e,n){return we()},t.prototype.readGeometry=function(e,n){if(e)if(typeof e=="string"){var r=Eo(e);return this.readGeometryFromDocument(r,n)}else return Io(e)?this.readGeometryFromDocument(e,n):this.readGeometryFromNode(e,n);else return null},t.prototype.readGeometryFromDocument=function(e,n){return null},t.prototype.readGeometryFromNode=function(e,n){return null},t.prototype.readProjection=function(e){if(e)if(typeof e=="string"){var n=Eo(e);return this.readProjectionFromDocument(n)}else return Io(e)?this.readProjectionFromDocument(e):this.readProjectionFromNode(e);else return null},t.prototype.readProjectionFromDocument=function(e){return this.dataProjection},t.prototype.readProjectionFromNode=function(e){return this.dataProjection},t.prototype.writeFeature=function(e,n){var r=this.writeFeatureNode(e,n);return this.xmlSerializer_.serializeToString(r)},t.prototype.writeFeatureNode=function(e,n){return null},t.prototype.writeFeatures=function(e,n){var r=this.writeFeaturesNode(e,n);return this.xmlSerializer_.serializeToString(r)},t.prototype.writeFeaturesNode=function(e,n){return null},t.prototype.writeGeometry=function(e,n){var r=this.writeGeometryNode(e,n);return this.xmlSerializer_.serializeToString(r)},t.prototype.writeGeometryNode=function(e,n){return null},t}(Yf);const Ry=PM;function Do(i){var t=rr(i,!1);return fa(t)}function fa(i){var t=/^\s*(true|1)|(false|0)\s*$/.exec(i);if(t)return t[1]!==void 0||!1}function Kf(i){var t=rr(i,!1),e=Date.parse(t);return isNaN(e)?void 0:e/1e3}function lt(i){var t=rr(i,!1);return Br(t)}function Br(i){var t=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(i);if(t)return parseFloat(t[1])}function $i(i){var t=rr(i,!1);return Wc(t)}function Wc(i){var t=/^\s*(\d+)\s*$/.exec(i);if(t)return parseInt(t[1],10)}function H(i){return rr(i,!1).trim()}function Ls(i,t){yt(i,t?"1":"0")}function xM(i,t){i.appendChild(Ks().createCDATASection(t))}function MM(i,t){var e=new Date(t*1e3),n=e.getUTCFullYear()+"-"+rl(e.getUTCMonth()+1,2)+"-"+rl(e.getUTCDate(),2)+"T"+rl(e.getUTCHours(),2)+":"+rl(e.getUTCMinutes(),2)+":"+rl(e.getUTCSeconds(),2)+"Z";i.appendChild(Ks().createTextNode(n))}function hn(i,t){var e=t.toPrecision();i.appendChild(Ks().createTextNode(e))}function Yc(i,t){var e=t.toString();i.appendChild(Ks().createTextNode(e))}function yt(i,t){i.appendChild(Ks().createTextNode(t))}var TM=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),to=["http://www.google.com/kml/ext/2.2"],ve=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],bM="http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd",qg={fraction:Qi.FRACTION,pixels:Qi.PIXELS,insetPixels:Qi.PIXELS},RM=j(ve,{ExtendedData:Hy,Region:qy,MultiGeometry:P(Vy,"geometry"),LineString:P(jy,"geometry"),LinearRing:P(zy,"geometry"),Point:P(Wy,"geometry"),Polygon:P(Yy,"geometry"),Style:P($f),StyleMap:pT,address:P(H),description:P(H),name:P(H),open:P(Do),phoneNumber:P(H),styleUrl:P(Dy),visibility:P(Do)},j(to,{MultiTrack:P(eT,"geometry"),Track:P(By,"geometry")})),OM=j(ve,{ExtendedData:Hy,Region:qy,Link:ST,address:P(H),description:P(H),name:P(H),open:P(Do),phoneNumber:P(H),visibility:P(Do)}),LM=j(ve,{href:P(ky)}),Oy=j(ve,{LatLonAltBox:yT,Lod:_T}),GM=j(ve,["Document","Placemark"]),kM=j(ve,{Document:Z(LT),Placemark:Z(Ky)}),fs,rc=null,Pp,xl,Ml,Tl,Hc,xp=null,Jf,Mp=null,Tp,ca=null,Xg=null,bp=null;function qc(i){return 32/Math.min(i[0],i[1])}function DM(){fs=[255,255,255,1],rc=new Ge({color:fs}),Pp=[20,2],xl=Qi.PIXELS,Ml=Qi.PIXELS,Tl=[64,64],Hc="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",xp=new ni({anchor:Pp,anchorOrigin:hi.BOTTOM_LEFT,anchorXUnits:xl,anchorYUnits:Ml,crossOrigin:"anonymous",rotation:0,scale:qc(Tl),size:Tl,src:Hc}),Jf="NO_IMAGE",Mp=new Me({color:fs,width:1}),Tp=new Me({color:[51,51,51,1],width:2}),ca=new Cr({font:"bold 16px Helvetica",fill:rc,stroke:Tp,scale:.8}),Xg=new de({fill:rc,image:xp,text:ca,stroke:Mp,zIndex:0}),bp=[Xg]}var zu;function NM(i){return i}var FM=function(i){TM(t,i);function t(e){var n=i.call(this)||this,r=e||{};return bp||DM(),n.dataProjection=Ee("EPSG:4326"),n.defaultStyle_=r.defaultStyle?r.defaultStyle:bp,n.extractStyles_=r.extractStyles!==void 0?r.extractStyles:!0,n.writeStyles_=r.writeStyles!==void 0?r.writeStyles:!0,n.sharedStyles_={},n.showPointNames_=r.showPointNames!==void 0?r.showPointNames:!0,n.crossOrigin_=r.crossOrigin!==void 0?r.crossOrigin:"anonymous",n.iconUrlFunction_=r.iconUrlFunction?r.iconUrlFunction:NM,n.supportedMediaTypes=["application/vnd.google-earth.kml+xml"],n}return t.prototype.readDocumentOrFolder_=function(e,n){var r=j(ve,{Document:Hg(this.readDocumentOrFolder_,this),Folder:Hg(this.readDocumentOrFolder_,this),Placemark:ji(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),o=re([],r,e,n,this);if(o)return o},t.prototype.readPlacemark_=function(e,n){var r=re({geometry:null},RM,e,n,this);if(r){var o=new ii,a=e.getAttribute("id");a!==null&&o.setId(a);var s=n[0],l=r.geometry;if(l&&nr(l,!1,s),o.setGeometry(l),delete r.geometry,this.extractStyles_){var u=r.Style,c=r.styleUrl,h=BM(u,c,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);o.setStyle(h)}return delete r.Style,o.setProperties(r,!0),o}},t.prototype.readSharedStyle_=function(e,n){var r=e.getAttribute("id");if(r!==null){var o=$f.call(this,e,n);if(o){var a=void 0,s=e.baseURI;if((!s||s=="about:blank")&&(s=window.location.href),s){var l=new URL("#"+r,s);a=l.href}else a="#"+r;this.sharedStyles_[a]=o}}},t.prototype.readSharedStyleMap_=function(e,n){var r=e.getAttribute("id");if(r!==null){var o=Fy.call(this,e,n);if(o){var a,s=e.baseURI;if((!s||s=="about:blank")&&(s=window.location.href),s){var l=new URL("#"+r,s);a=l.href}else a="#"+r;this.sharedStyles_[a]=o}}},t.prototype.readFeatureFromNode=function(e,n){if(!cn(ve,e.namespaceURI))return null;var r=this.readPlacemark_(e,[this.getReadOptions(e,n)]);return r||null},t.prototype.readFeaturesFromNode=function(e,n){if(!cn(ve,e.namespaceURI))return[];var r,o=e.localName;if(o=="Document"||o=="Folder")return r=this.readDocumentOrFolder_(e,[this.getReadOptions(e,n)]),r||[];if(o=="Placemark"){var a=this.readPlacemark_(e,[this.getReadOptions(e,n)]);return a?[a]:[]}else if(o=="kml"){r=[];for(var s=e.firstElementChild;s;s=s.nextElementSibling){var l=this.readFeaturesFromNode(s,n);l&&St(r,l)}return r}else return[]},t.prototype.readName=function(e){if(e)if(typeof e=="string"){var n=Eo(e);return this.readNameFromDocument(n)}else return Io(e)?this.readNameFromDocument(e):this.readNameFromNode(e);else return},t.prototype.readNameFromDocument=function(e){for(var n=e.firstChild;n;n=n.nextSibling)if(n.nodeType==Node.ELEMENT_NODE){var r=this.readNameFromNode(n);if(r)return r}},t.prototype.readNameFromNode=function(e){for(var n=e.firstElementChild;n;n=n.nextElementSibling)if(cn(ve,n.namespaceURI)&&n.localName=="name")return H(n);for(var n=e.firstElementChild;n;n=n.nextElementSibling){var r=n.localName;if(cn(ve,n.namespaceURI)&&(r=="Document"||r=="Folder"||r=="Placemark"||r=="kml")){var o=this.readNameFromNode(n);if(o)return o}}},t.prototype.readNetworkLinks=function(e){var n=[];if(typeof e=="string"){var r=Eo(e);St(n,this.readNetworkLinksFromDocument(r))}else Io(e)?St(n,this.readNetworkLinksFromDocument(e)):St(n,this.readNetworkLinksFromNode(e));return n},t.prototype.readNetworkLinksFromDocument=function(e){for(var n=[],r=e.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&St(n,this.readNetworkLinksFromNode(r));return n},t.prototype.readNetworkLinksFromNode=function(e){for(var n=[],r=e.firstElementChild;r;r=r.nextElementSibling)if(cn(ve,r.namespaceURI)&&r.localName=="NetworkLink"){var o=re({},OM,r,[]);n.push(o)}for(var r=e.firstElementChild;r;r=r.nextElementSibling){var a=r.localName;cn(ve,r.namespaceURI)&&(a=="Document"||a=="Folder"||a=="kml")&&St(n,this.readNetworkLinksFromNode(r))}return n},t.prototype.readRegion=function(e){var n=[];if(typeof e=="string"){var r=Eo(e);St(n,this.readRegionFromDocument(r))}else Io(e)?St(n,this.readRegionFromDocument(e)):St(n,this.readRegionFromNode(e));return n},t.prototype.readRegionFromDocument=function(e){for(var n=[],r=e.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&St(n,this.readRegionFromNode(r));return n},t.prototype.readRegionFromNode=function(e){for(var n=[],r=e.firstElementChild;r;r=r.nextElementSibling)if(cn(ve,r.namespaceURI)&&r.localName=="Region"){var o=re({},Oy,r,[]);n.push(o)}for(var r=e.firstElementChild;r;r=r.nextElementSibling){var a=r.localName;cn(ve,r.namespaceURI)&&(a=="Document"||a=="Folder"||a=="kml")&&St(n,this.readRegionFromNode(r))}return n},t.prototype.writeFeaturesNode=function(e,n){n=this.adaptOptions(n);var r=Na(ve[4],"kml"),o="http://www.w3.org/2000/xmlns/";r.setAttributeNS(o,"xmlns:gx",to[0]),r.setAttributeNS(o,"xmlns:xsi",Vc),r.setAttributeNS(Vc,"xsi:schemaLocation",bM);var a={node:r},s={};e.length>1?s.Document=e:e.length==1&&(s.Placemark=e[0]);var l=GM[r.namespaceURI],u=gn(s,l);return xt(a,kM,Yi,u,[n],l,this),r},t}(Ry);function UM(i,t){var e=[0,0],n="start",r=i.getImage();if(r){var o=r.getSize();if(o&&o.length==2){var a=r.getScaleArray(),s=r.getAnchor();e[0]=a[0]*(o[0]-s[0]),e[1]=a[1]*(o[1]/2-s[1]),n="left"}}var l=i.getText();l?(l=l.clone(),l.setFont(l.getFont()||ca.getFont()),l.setScale(l.getScale()||ca.getScale()),l.setFill(l.getFill()||ca.getFill()),l.setStroke(l.getStroke()||Tp)):l=ca.clone(),l.setText(t),l.setOffsetX(e[0]),l.setOffsetY(e[1]),l.setTextAlign(n);var u=new de({image:r,text:l});return u}function BM(i,t,e,n,r){return function(o,a){var s=r,l="",u=[];if(s){var c=o.getGeometry();if(c){var h=c.getType();h===b.GEOMETRY_COLLECTION?(u=c.getGeometriesArrayRecursive().filter(function(g){var v=g.getType();return v===b.POINT||v===b.MULTI_POINT}),s=u.length>0):s=h===b.POINT||h===b.MULTI_POINT}}s&&(l=o.get("name"),s=s&&!!l,s&&l.search(/&[^&]+;/)>-1&&(zu||(zu=document.createElement("textarea")),zu.innerHTML=l,l=zu.value));var d=e;if(i?d=i:t&&(d=Ly(t,e,n)),s){var p=UM(d[0],l);if(u.length>0){p.setGeometry(new pa(u));var f=new de({geometry:d[0].getGeometry(),image:null,fill:d[0].getFill(),stroke:d[0].getStroke(),text:null});return[p,f].concat(d.slice(1))}return p}return d}}function Ly(i,t,e){return Array.isArray(i)?i:typeof i=="string"?Ly(e[i],t,e):t}function Th(i){var t=rr(i,!1),e=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(t);if(e){var n=e[1];return[parseInt(n.substr(6,2),16),parseInt(n.substr(4,2),16),parseInt(n.substr(2,2),16),parseInt(n.substr(0,2),16)/255]}else return}function Gy(i){var t=rr(i,!1),e=[];t=t.replace(/\s*,\s*/g,",");for(var n=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i,r;r=n.exec(t);){var o=parseFloat(r[1]),a=parseFloat(r[2]),s=r[3]?parseFloat(r[3]):0;e.push(o,a,s),t=t.substr(r[0].length)}if(t==="")return e}function ky(i){var t=rr(i,!1).trim(),e=i.baseURI;if((!e||e=="about:blank")&&(e=window.location.href),e){var n=new URL(t,e);return n.href}else return t}function Dy(i){var t=rr(i,!1).trim().replace(/^(?!.*#)/,"#"),e=i.baseURI;if((!e||e=="about:blank")&&(e=window.location.href),e){var n=new URL(t,e);return n.href}else return t}function jM(i){var t=i.getAttribute("xunits"),e=i.getAttribute("yunits"),n;return t!=="insetPixels"?e!=="insetPixels"?n=hi.BOTTOM_LEFT:n=hi.TOP_LEFT:e!=="insetPixels"?n=hi.BOTTOM_RIGHT:n=hi.TOP_RIGHT,{x:parseFloat(i.getAttribute("x")),xunits:qg[t],y:parseFloat(i.getAttribute("y")),yunits:qg[e],origin:n}}function Ny(i){return lt(i)}var zM=j(ve,{Pair:dT});function Fy(i,t){return re(void 0,zM,i,t,this)}var VM=j(ve,{Icon:P(nT),color:P(Th),heading:P(lt),hotSpot:P(jM),scale:P(Ny)});function WM(i,t){var e=re({},VM,i,t);if(e){var n=t[t.length-1],r="Icon"in e?e.Icon:{},o=!("Icon"in e)||Object.keys(r).length>0,a,s=r.href;s?a=s:o&&(a=Hc);var l,u,c,h=hi.BOTTOM_LEFT,d=e.hotSpot;d?(l=[d.x,d.y],u=d.xunits,c=d.yunits,h=d.origin):/^http:\/\/maps\.(?:google|gstatic)\.com\//.test(a)&&(/pushpin/.test(a)?(l=Pp,u=xl,c=Ml):/arrow-reverse/.test(a)?(l=[54,42],u=xl,c=Ml):/paddle/.test(a)&&(l=[32,1],u=xl,c=Ml));var p,f=r.x,g=r.y;f!==void 0&&g!==void 0&&(p=[f,g]);var v,y=r.w,m=r.h;y!==void 0&&m!==void 0&&(v=[y,m]);var A,_=e.heading;_!==void 0&&(A=Mo(_));var C=e.scale,I=e.color;if(o){a==Hc&&(v=Tl);var E=new ni({anchor:l,anchorOrigin:h,anchorXUnits:u,anchorYUnits:c,crossOrigin:this.crossOrigin_,offset:p,offsetOrigin:hi.BOTTOM_LEFT,rotation:A,scale:C,size:v,src:this.iconUrlFunction_(a),color:I}),w=E.getScaleArray()[0],S=E.getSize();if(S===null){var x=E.getImageState();if(x===ke.IDLE||x===ke.LOADING){var T=function(){var G=E.getImageState();if(!(G===ke.IDLE||G===ke.LOADING)){var N=E.getSize();if(N&&N.length==2){var B=qc(N);E.setScale(w*B)}E.unlistenImageChange(T)}};E.listenImageChange(T),x===ke.IDLE&&E.load()}}else if(S.length==2){var L=qc(S);E.setScale(w*L)}n.imageStyle=E}else n.imageStyle=Jf}}var YM=j(ve,{color:P(Th),scale:P(Ny)});function HM(i,t){var e=re({},YM,i,t);if(e){var n=t[t.length-1],r=new Cr({fill:new Ge({color:"color"in e?e.color:fs}),scale:e.scale});n.textStyle=r}}var qM=j(ve,{color:P(Th),width:P(lt)});function XM(i,t){var e=re({},qM,i,t);if(e){var n=t[t.length-1],r=new Me({color:"color"in e?e.color:fs,width:"width"in e?e.width:1});n.strokeStyle=r}}var ZM=j(ve,{color:P(Th),fill:P(Do),outline:P(Do)});function KM(i,t){var e=re({},ZM,i,t);if(e){var n=t[t.length-1],r=new Ge({color:"color"in e?e.color:fs});n.fillStyle=r;var o=e.fill;o!==void 0&&(n.fill=o);var a=e.outline;a!==void 0&&(n.outline=a)}}var JM=j(ve,{coordinates:Zf(Gy)});function Uy(i,t){return re(null,JM,i,t)}function QM(i,t){var e=t[t.length-1],n=e.coordinates,r=rr(i,!1),o=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i,a=o.exec(r);if(a){var s=parseFloat(a[1]),l=parseFloat(a[2]),u=parseFloat(a[3]);n.push([s,l,u])}else n.push([])}var $M=j(to,{Track:ji(By)});function eT(i,t){var e=re([],$M,i,t);if(e)return new Zr(e)}var tT=j(ve,{when:PT},j(to,{coord:QM}));function By(i,t){var e=re({coordinates:[],whens:[]},tT,i,t);if(e){for(var n=[],r=e.coordinates,o=e.whens,a=0,s=Math.min(r.length,o.length);a<s;++a)r[a].length==3&&n.push(r[a][0],r[a][1],r[a][2],o[a]);return new xn(n,De.XYZM)}}var iT=j(ve,{href:P(ky)},j(to,{x:P(lt),y:P(lt),w:P(lt),h:P(lt)}));function nT(i,t){var e=re({},iT,i,t);return e||null}var rT=j(ve,{coordinates:Zf(Gy)});function Qf(i,t){return re(null,rT,i,t)}var bh=j(ve,{extrude:P(Do),tessellate:P(Do),altitudeMode:P(H)});function jy(i,t){var e=re({},bh,i,t),n=Qf(i,t);if(n){var r=new xn(n,De.XYZ);return r.setProperties(e,!0),r}else return}function zy(i,t){var e=re({},bh,i,t),n=Qf(i,t);if(n){var r=new zi(n,De.XYZ,[n.length]);return r.setProperties(e,!0),r}else return}var oT=j(ve,{LineString:ji(jy),LinearRing:ji(zy),MultiGeometry:ji(Vy),Point:ji(Wy),Polygon:ji(Yy)});function Vy(i,t){var e=re([],oT,i,t);if(!e)return null;if(e.length===0)return new pa(e);for(var n,r=!0,o=e[0].getType(),a,s=1,l=e.length;s<l;++s)if(a=e[s],a.getType()!=o){r=!1;break}if(r){var u=void 0,c=void 0;if(o==b.POINT){var h=e[0];u=h.getLayout(),c=h.getFlatCoordinates();for(var s=1,l=e.length;s<l;++s)a=e[s],St(c,a.getFlatCoordinates());n=new Ea(c,u),Md(n,e)}else o==b.LINE_STRING?(n=new Zr(e),Md(n,e)):o==b.POLYGON?(n=new wa(e),Md(n,e)):o==b.GEOMETRY_COLLECTION?n=new pa(e):be(!1,37)}else n=new pa(e);return n}function Wy(i,t){var e=re({},bh,i,t),n=Qf(i,t);if(n){var r=new Wi(n,De.XYZ);return r.setProperties(e,!0),r}else return}var aT=j(ve,{innerBoundaryIs:IT,outerBoundaryIs:wT});function Yy(i,t){var e=re({},bh,i,t),n=re([null],aT,i,t);if(n&&n[0]){for(var r=n[0],o=[r.length],a=1,s=n.length;a<s;++a)St(r,n[a]),o.push(r.length);var l=new zi(r,De.XYZ,o);return l.setProperties(e,!0),l}else return}var sT=j(ve,{IconStyle:WM,LabelStyle:HM,LineStyle:XM,PolyStyle:KM});function $f(i,t){var e=re({},sT,i,t,this);if(!e)return null;var n="fillStyle"in e?e.fillStyle:rc,r=e.fill;r!==void 0&&!r&&(n=null);var o;"imageStyle"in e?e.imageStyle!=Jf&&(o=e.imageStyle):o=xp;var a="textStyle"in e?e.textStyle:ca,s="strokeStyle"in e?e.strokeStyle:Mp,l=e.outline;return l!==void 0&&!l?[new de({geometry:function(u){var c=u.getGeometry(),h=c.getType();if(h===b.GEOMETRY_COLLECTION){var d=c;return new pa(d.getGeometriesArrayRecursive().filter(function(p){var f=p.getType();return f!==b.POLYGON&&f!==b.MULTI_POLYGON}))}else if(h!==b.POLYGON&&h!==b.MULTI_POLYGON)return c},fill:n,image:o,stroke:s,text:a,zIndex:void 0}),new de({geometry:function(u){var c=u.getGeometry(),h=c.getType();if(h===b.GEOMETRY_COLLECTION){var d=c;return new pa(d.getGeometriesArrayRecursive().filter(function(p){var f=p.getType();return f===b.POLYGON||f===b.MULTI_POLYGON}))}else if(h===b.POLYGON||h===b.MULTI_POLYGON)return c},fill:n,stroke:null,zIndex:void 0})]:[new de({fill:n,image:o,stroke:s,text:a,zIndex:void 0})]}function Md(i,t){var e=t.length,n=new Array(t.length),r=new Array(t.length),o=new Array(t.length),a,s,l;a=!1,s=!1,l=!1;for(var u=0;u<e;++u){var c=t[u];n[u]=c.get("extrude"),r[u]=c.get("tessellate"),o[u]=c.get("altitudeMode"),a=a||n[u]!==void 0,s=s||r[u]!==void 0,l=l||o[u]}a&&i.set("extrude",n),s&&i.set("tessellate",r),l&&i.set("altitudeMode",o)}var lT=j(ve,{displayName:P(H),value:P(H)});function uT(i,t){var e=i.getAttribute("name");jo(lT,i,t);var n=t[t.length-1];e&&n.displayName?n[e]={value:n.value,displayName:n.displayName,toString:function(){return n.value}}:e!==null?n[e]=n.value:n.displayName!==null&&(n[n.displayName]=n.value),delete n.value}var cT=j(ve,{Data:uT,SchemaData:gT});function Hy(i,t){jo(cT,i,t)}function qy(i,t){jo(Oy,i,t)}var hT=j(ve,{Style:P($f),key:P(H),styleUrl:P(Dy)});function dT(i,t){var e=re({},hT,i,t,this);if(e){var n=e.key;if(n&&n=="normal"){var r=e.styleUrl;r&&(t[t.length-1]=r);var o=e.Style;o&&(t[t.length-1]=o)}}}function pT(i,t){var e=Fy.call(this,i,t);if(e){var n=t[t.length-1];Array.isArray(e)?n.Style=e:typeof e=="string"?n.styleUrl=e:be(!1,38)}}var fT=j(ve,{SimpleData:vT});function gT(i,t){jo(fT,i,t)}function vT(i,t){var e=i.getAttribute("name");if(e!==null){var n=H(i),r=t[t.length-1];r[e]=n}}var mT=j(ve,{altitudeMode:P(H),minAltitude:P(lt),maxAltitude:P(lt),north:P(lt),south:P(lt),east:P(lt),west:P(lt)});function yT(i,t){var e=re({},mT,i,t);if(e){var n=t[t.length-1],r=[parseFloat(e.west),parseFloat(e.south),parseFloat(e.east),parseFloat(e.north)];n.extent=r,n.altitudeMode=e.altitudeMode,n.minAltitude=parseFloat(e.minAltitude),n.maxAltitude=parseFloat(e.maxAltitude)}}var AT=j(ve,{minLodPixels:P(lt),maxLodPixels:P(lt),minFadeExtent:P(lt),maxFadeExtent:P(lt)});function _T(i,t){var e=re({},AT,i,t);if(e){var n=t[t.length-1];n.minLodPixels=parseFloat(e.minLodPixels),n.maxLodPixels=parseFloat(e.maxLodPixels),n.minFadeExtent=parseFloat(e.minFadeExtent),n.maxFadeExtent=parseFloat(e.maxFadeExtent)}}var CT=j(ve,{LinearRing:ji(Uy)});function IT(i,t){var e=re([],CT,i,t);if(e.length>0){var n=t[t.length-1];n.push.apply(n,e)}}var ET=j(ve,{LinearRing:Zf(Uy)});function wT(i,t){var e=re(void 0,ET,i,t);if(e){var n=t[t.length-1];n[0]=e}}function ST(i,t){jo(LM,i,t)}function PT(i,t){var e=t[t.length-1],n=e.whens,r=rr(i,!1),o=Date.parse(r);n.push(isNaN(o)?0:o)}function Rh(i,t){for(var e=af(t),n=e.length==4?e[3]:1,r=[n*255,e[2],e[1],e[0]],o=0;o<4;++o){var a=Math.floor(r[o]).toString(16);r[o]=a.length==1?"0"+a:a}yt(i,r.join(""))}function xT(i,t,e){var n=e[e.length-1],r=n.layout,o=n.stride,a;r==De.XY||r==De.XYM?a=2:r==De.XYZ||r==De.XYZM?a=3:be(!1,34);var s=t.length,l="";if(s>0){l+=t[0];for(var u=1;u<a;++u)l+=","+t[u];for(var c=o;c<s;c+=o){l+=" "+t[c];for(var u=1;u<a;++u)l+=","+t[c+u]}}yt(i,l)}var oc=j(ve,{Data:Z(MT),value:Z(bT),displayName:Z(TT)});function MT(i,t,e){i.setAttribute("name",t.name);var n={node:i},r=t.value;typeof r=="object"?(r!==null&&r.displayName&&xt(n,oc,Yi,[r.displayName],e,["displayName"]),r!==null&&r.value&&xt(n,oc,Yi,[r.value],e,["value"])):xt(n,oc,Yi,[r],e,["value"])}function TT(i,t){xM(i,t)}function bT(i,t){yt(i,t)}var RT=j(ve,{Placemark:Z(Ky)}),OT=function(i,t,e){var n=t[t.length-1].node;return Na(n.namespaceURI,"Placemark")};function LT(i,t,e){var n={node:i};xt(n,RT,OT,t,e,void 0,this)}var GT=or("Data");function kT(i,t,e){for(var n={node:i},r=t.names,o=t.values,a=r.length,s=0;s<a;s++)xt(n,oc,GT,[{name:r[s],value:o[s]}],e)}var Zg=j(ve,["href"],j(to,["x","y","w","h"])),Kg=j(ve,{href:Z(yt)},j(to,{x:Z(hn),y:Z(hn),w:Z(hn),h:Z(hn)})),DT=function(i,t,e){return Na(to[0],"gx:"+e)};function NT(i,t,e){var n={node:i},r=e[e.length-1].node,o=Zg[r.namespaceURI],a=gn(t,o);xt(n,Kg,Yi,a,e,o),o=Zg[to[0]],a=gn(t,o),xt(n,Kg,DT,a,e,o)}var FT=j(ve,["scale","heading","Icon","color","hotSpot"]),UT=j(ve,{Icon:Z(NT),color:Z(Rh),heading:Z(hn),hotSpot:Z(db),scale:Z(Qy)});function BT(i,t,e){var n={node:i},r={},o=t.getSrc(),a=t.getSize(),s=t.getImageSize(),l={href:o};if(a){l.w=a[0],l.h=a[1];var u=t.getAnchor(),c=t.getOrigin();if(c&&s&&c[0]!==0&&c[1]!==a[1]&&(l.x=c[0],l.y=s[1]-(c[1]+a[1])),u&&(u[0]!==a[0]/2||u[1]!==a[1]/2)){var h={x:u[0],xunits:Qi.PIXELS,y:a[1]-u[1],yunits:Qi.PIXELS};r.hotSpot=h}}r.Icon=l;var d=t.getScaleArray()[0],p=a;if(p===null&&(p=Tl),p.length==2){var f=qc(p);d=d/f}d!==1&&(r.scale=d);var g=t.getRotation();g!==0&&(r.heading=g);var v=t.getColor();v&&(r.color=v);var y=e[e.length-1].node,m=FT[y.namespaceURI],A=gn(r,m);xt(n,UT,Yi,A,e,m)}var jT=j(ve,["color","scale"]),zT=j(ve,{color:Z(Rh),scale:Z(Qy)});function VT(i,t,e){var n={node:i},r={},o=t.getFill();o&&(r.color=o.getColor());var a=t.getScale();a&&a!==1&&(r.scale=a);var s=e[e.length-1].node,l=jT[s.namespaceURI],u=gn(r,l);xt(n,zT,Yi,u,e,l)}var WT=j(ve,["color","width"]),YT=j(ve,{color:Z(Rh),width:Z(hn)});function HT(i,t,e){var n={node:i},r={color:t.getColor(),width:Number(t.getWidth())||1},o=e[e.length-1].node,a=WT[o.namespaceURI],s=gn(r,a);xt(n,YT,Yi,s,e,a)}var qT={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},Xy=function(i,t,e){if(i){var n=t[t.length-1].node;return Na(n.namespaceURI,qT[i.getType()])}},XT=or("Point"),ZT=or("LineString"),KT=or("LinearRing"),JT=or("Polygon"),QT=j(ve,{LineString:Z(gs),Point:Z(gs),Polygon:Z(Jy),GeometryCollection:Z(Zy)});function Zy(i,t,e){var n={node:i},r=t.getType(),o=[],a;r===b.GEOMETRY_COLLECTION?(t.getGeometriesArrayRecursive().forEach(function(s){var l=s.getType();l===b.MULTI_POINT?o=o.concat(s.getPoints()):l===b.MULTI_LINE_STRING?o=o.concat(s.getLineStrings()):l===b.MULTI_POLYGON?o=o.concat(s.getPolygons()):l===b.POINT||l===b.LINE_STRING||l===b.POLYGON?o.push(s):be(!1,39)}),a=Xy):r===b.MULTI_POINT?(o=t.getPoints(),a=XT):r===b.MULTI_LINE_STRING?(o=t.getLineStrings(),a=ZT):r===b.MULTI_POLYGON?(o=t.getPolygons(),a=JT):be(!1,39),xt(n,QT,a,o,e)}var $T=j(ve,{LinearRing:Z(gs)});function Jg(i,t,e){var n={node:i};xt(n,$T,KT,[t],e)}var Td=j(ve,{ExtendedData:Z(kT),MultiGeometry:Z(Zy),LineString:Z(gs),LinearRing:Z(gs),Point:Z(gs),Polygon:Z(Jy),Style:Z(hb),address:Z(yt),description:Z(yt),name:Z(yt),open:Z(Ls),phoneNumber:Z(yt),styleUrl:Z(yt),visibility:Z(Ls)}),eb=j(ve,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),tb=or("ExtendedData");function Ky(i,t,e){var n={node:i};t.getId()&&i.setAttribute("id",t.getId());var r=t.getProperties(),o={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};o[t.getGeometryName()]=1;var a=Object.keys(r||{}).sort().filter(function(C){return!o[C]}),s=t.getStyleFunction();if(s){var l=s(t,0);if(l){var u=Array.isArray(l)?l:[l],c=u;if(t.getGeometry()&&(c=u.filter(function(C){var I=C.getGeometryFunction()(t);if(I){var E=I.getType();return E===b.GEOMETRY_COLLECTION?I.getGeometriesArrayRecursive().filter(function(w){var S=w.getType();return S===b.POINT||S===b.MULTI_POINT}).length:E===b.POINT||E===b.MULTI_POINT}})),this.writeStyles_){var h=u,d=u;t.getGeometry()&&(h=u.filter(function(C){var I=C.getGeometryFunction()(t);if(I){var E=I.getType();return E===b.GEOMETRY_COLLECTION?I.getGeometriesArrayRecursive().filter(function(w){var S=w.getType();return S===b.LINE_STRING||S===b.MULTI_LINE_STRING}).length:E===b.LINE_STRING||E===b.MULTI_LINE_STRING}}),d=u.filter(function(C){var I=C.getGeometryFunction()(t);if(I){var E=I.getType();return E===b.GEOMETRY_COLLECTION?I.getGeometriesArrayRecursive().filter(function(w){var S=w.getType();return S===b.POLYGON||S===b.MULTI_POLYGON}).length:E===b.POLYGON||E===b.MULTI_POLYGON}})),r.Style={pointStyles:c,lineStyles:h,polyStyles:d}}if(c.length&&r.name===void 0){var p=c[0].getText();p&&(r.name=p.getText())}}}var f=e[e.length-1].node,g=eb[f.namespaceURI],v=gn(r,g);if(xt(n,Td,Yi,v,e,g),a.length>0){var y=gn(r,a),m={names:a,values:y};xt(n,Td,tb,[m],e)}var A=e[0],_=t.getGeometry();_&&(_=nr(_,!0,A)),xt(n,Td,Xy,[_],e)}var ib=j(ve,["extrude","tessellate","altitudeMode","coordinates"]),nb=j(ve,{extrude:Z(Ls),tessellate:Z(Ls),altitudeMode:Z(yt),coordinates:Z(xT)});function gs(i,t,e){var n=t.getFlatCoordinates(),r={node:i};r.layout=t.getLayout(),r.stride=t.getStride();var o=t.getProperties();o.coordinates=n;var a=e[e.length-1].node,s=ib[a.namespaceURI],l=gn(o,s);xt(r,nb,Yi,l,e,s)}var rb=j(ve,["color","fill","outline"]),Qg=j(ve,{outerBoundaryIs:Z(Jg),innerBoundaryIs:Z(Jg)}),ob=or("innerBoundaryIs"),ab=or("outerBoundaryIs");function Jy(i,t,e){var n=t.getLinearRings(),r=n.shift(),o={node:i};xt(o,Qg,ob,n,e),xt(o,Qg,ab,[r],e)}var sb=j(ve,{color:Z(Rh),fill:Z(Ls),outline:Z(Ls)});function lb(i,t,e){var n={node:i},r=t.getFill(),o=t.getStroke(),a={color:r?r.getColor():void 0,fill:r?void 0:!1,outline:o?void 0:!1},s=e[e.length-1].node,l=rb[s.namespaceURI],u=gn(a,l);xt(n,sb,Yi,u,e,l)}function Qy(i,t){hn(i,Math.round(t*1e6)/1e6)}var ub=j(ve,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),cb=j(ve,{IconStyle:Z(BT),LabelStyle:Z(VT),LineStyle:Z(HT),PolyStyle:Z(lb)});function hb(i,t,e){var n={node:i},r={};if(t.pointStyles.length){var o=t.pointStyles[0].getText();o&&(r.LabelStyle=o);var a=t.pointStyles[0].getImage();a&&typeof a.getSrc=="function"&&(r.IconStyle=a)}if(t.lineStyles.length){var s=t.lineStyles[0].getStroke();s&&(r.LineStyle=s)}if(t.polyStyles.length){var s=t.polyStyles[0].getStroke();s&&!r.LineStyle&&(r.LineStyle=s),r.PolyStyle=t.polyStyles[0]}var l=e[e.length-1].node,u=ub[l.namespaceURI],c=gn(r,u);xt(n,cb,Yi,c,e,u)}function db(i,t){i.setAttribute("x",String(t.x)),i.setAttribute("y",String(t.y)),i.setAttribute("xunits",t.xunits),i.setAttribute("yunits",t.yunits)}const pb=FM;var ge={hex:function(i){if(i>255)throw new Error("'"+i+"'' is greater than 255(0xff);");var t=Number(i).toString(16);return("0"+t).slice(-2)},num:function(i){return parseInt(i,16)},arrayToRgba:function(i){if(!Array.isArray(i))throw new Error("Not an array !");var t=i[0],e=i[1],n=i[2],r=i[3]||1,o="rgba("+t+", "+e+", "+n+", "+parseFloat(r)+")";return o},arrayToHex:function(i){if(!Array.isArray(i))throw new Error("Not an array !");var t=i[0],e=i[1],n=i[2],r=i[3],o=[this.hex(t),this.hex(e),this.hex(n)],a={};return a.hex="#"+o.join(""),r&&(a.opacity=parseFloat(r)),a},rgbaToHex:function(i){var t=/rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(0?.?\d+)\s*)?\)/,e=t.exec(i);if(!e)throw new Error("Invalid format: "+i);var n=e[1],r=e[2],o=e[3],a=e[4],s=[this.hex(n),this.hex(r),this.hex(o)],l={};return l.hex="#"+s.join(""),a&&(l.opacity=parseFloat(a)),l},hexToRgba:function(i,t){var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;if(!i)throw new Error("Invalid format");i=i.replace(e,function(o,a,s,l){return a+a+s+s+l+l});var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(i);n=n?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)}:null;var r=n?"rgba("+n.r+", "+n.g+", "+n.b+", "+t+")":null;return r},isHex:function(i){if(!i||i.charAt(0)!=="#")return!1;var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,e=t.exec(i);return!!e},isRGB:function(i){if(!i)return!1;var t=/rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(0?.?\d+)\s*)?\)/,e=t.exec(i);return!!e}},It={lightOrange:"data:image/png;base64,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IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOjkyYWVkNjM2LWY3MDMtNDAzOC1hNzM4LWZiYzYxYzZlMTljNCIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo5NWMzZWI3NC0zYWRmLTRkYzUtOWZjZS1iODQ4NTc3Nzg4ODQiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0NjI3ZDg3NC1lZDIyLTRiZTUtYTlkNS00NDlmMzVhZDIxYzgiCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJMaW51eCIKICAgR0lNUDpUaW1lU3RhbXA9IjE2ODQ5NDE5Mjc4OTUzMDYiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDphM2U3ZWQ1MS0xNTI4LTRhYjAtODVjOS0zNzNkNzgxZGM2ZmMiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoTGludXgpIgogICAgICBzdEV2dDp3aGVuPSIyMDIzLTA1LTI0VDE3OjI1OjI3KzAyOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/PofUkY4AAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfnBRgPGRuA4VZTAAAFcElEQVRYw82YW2xbVRaGv7XP8bHjXByHQkNhWigdVX1AikRBMBoQ8wASl4fRqPDAAxIPKAVxeRqQRohHBEVCaoGKUBCl4qHcNKCZVKMRRQxtgTaACLRKqlwB14NzM2ni2D2XvXjgBFXQOnFiA1uy/HB89u9/7bX+vf4l1HnpK57hTNCE0AzqAS5gAAuEID5KiWSiLPf4tp7YUjcSu4yLZzdi2IJyNXANcBlwAdAKzAHTwDhwDKEPywC+GZWHbPi7IKOvZIWguAnlr8BtwJ+AxDJeDYCPgF6Ed0hkh+Weov5mZLTHJMDeBjwYk0itYJtKTOpZML3SbYNfnYz2SBr0buARYENcFytdFvga2AGyT7p14Vcjoz3ShOgdKDuAi+pUewpMIDyCypvSreWGk9HdroOEV2F4A1hfTxGJCX2D5U7U/UzuD6NaXq49NRJhBsOjwMVLEtE4gaL4W5cV3IsxPEoizDT0ZLTHcSH6M/BWLLlVwpQKuPzhb+i8sRkv04Y/e5rvPigxtnM9trKU2k0D28A5LN3RsmXbrbFOU8DtQLpqfJqu97nh6TydmzvwWpOI8VDbxqbrkmz62yk+/Ps6yoe8KkeV/hHHfgrMNyrNEkBX1SAktgRs3T7ApV1rSWayiEkDLmLSJDNZLu1ay9btAyS2BEsEuWuZ99WKyRhgHeCcn8wGw/qbOnAS3jmfOwmP9Td1kNhQDduJcUwjyciS0RJXMMkWkPPUo/z4XFxZRhZII8mEwFCsT+f5xXTE7FAOteduItVaZodyhNPVZDeKccJGkxmsChIMOvTt6aRSzIP+7A9rRKWYp29PJ8GgsyqcVauZSADaj+IDTecWvBlD4e01HKjM07XtOOuuy+A2X0BYmib/8SxfvLWRYm8LdqZaCvkI/SDBci6nld0ze7KCLa4F3gSurR4MB5x1FnMhiCeor9hJiPKmWpbGp3EU2IbJFuTe5XfStbczLxgP7K0IPcCFDWhnJoFuMAek2/oNbWdku/WxHATejT1JPZcPvINysFYiK+gAFkXTK6H+MyhXADeseJ9fmrVDM6X080/+p1M2/yFsD1zjEIauEeMAqNpQE16oaKiqwfjYeLk+fuYl10HDq7DsBTavxs8o6FzFKez/dM3rLx9LjUyVxcb7yVkfzmpXFbACJURHIxgyxkyu1ml6qL0Z4YX4xl7Jfrrgm9Ov9bX/e++x1tHCgkQ11lgELGA4sBp3iHRbH5GDwJPAFLXo6KJnDmTh/aG2w2/3t47VSGQxs1zAE9U2s9pEjx3hXuBloCa7G1rxv8o3f/7SkUz/UFFWMqGRWMpHAqsDbl00KGotIXM7MawF7gKSS5oJJRospI7v+rD96Ikp8aV2EgrkVPW4OnIy6SVL9ZubvZgyaOVyYDfwl2oNqVWiXNEb231oTe+/BrzvK9Gy01MFyoiOKzIEmqsEfjGf/39U1yHgosJFUXhlFMl+z9E/nkvhVNHZsjux+9Caf77RnyzMBaJLmW4RrWAlB3Y4Uh13HLOA4wQjo6O2IRPNxVV4JuG5Et2SSelzjtFLzsZQ0NIZ8/2rx7K9+/paxqbKvyh4Bc4AFQxzau23Dow7FS+nHmfEUz05OqINH8+evXJPJVOuE93XkY4eSziaXcQpB2b+vZNt7+/8IPPl2OxPRMJ4dDsLzIho3hpzamJ6aqJ0ei6qtZAasmZ2OS1RyOMd6egBIzSFVoKj4y1Hnvhv+8cD02ZOkEmgIKITVnXKWDs1ksvNrgbTbRSZ46cypY50aWcllIsyKXvr8GTyi9f6WvePFGVQhO8EPW2NzI+OfV2pF2bDTgbg8D/aJeVUspd1BK3/G24u7/skO3+iYP3h3LdhI/B+AGodUpo8WKwoAAAAAElFTkSuQmCC",darkOrange:"data:image/png;base64,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czpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOjIxNDZjMzUzLWIxZjItNGVjOC04NzQ3LTIwMGEyYWExM2ViMyIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo2NGViNmI2Ni03Y2I2LTRkZGUtYTI3OS01MGY0ZWFiZGFhODAiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1ODRhM2VjZC1kNGFmLTQ3NjItYjA1ZS04ODk2MGQ4ZTk0Y2MiCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJMaW51eCIKICAgR0lNUDpUaW1lU3RhbXA9IjE2ODQ5NDE5MDM3ODI2MTQiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDoxYzNjOGRkZi1kMjVkLTQ4YzQtYTAwYS0yMmU3ZDYwMzg1YjYiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoTGludXgpIgogICAgICBzdEV2dDp3aGVuPSIyMDIzLTA1LTI0VDE3OjI1OjAzKzAyOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/PuhCAHgAAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfnBRgPGQOTjc4FAAAFdklEQVRYw82YW2gcZRTHf+eb2dlkc9lsrFYr2notfSgWxKKiog8VvIFI9UFQEaWtYPFJfREfRRSEeqlttViLD/WGisYXrShWpfWC1WpSN5eN3cZumkuTzWY3c/mOD9lI0WSTTXbVA8M8zMz3n//5zvl/5xyhxqb3ewYvaERpAvUAFzCABUIQH6GAHyvKa76tJbbUjMRW4+LbC7GsQbgCWA+sAs4AWoA8MAxkgEMo32LoxDO98oIN/xdk9IGUYEYvRrgduAW4Gogt4NMA+BroQHkfm+qW3aP6n5HRTSYG9hZga5lEwyKWKZVJvQCmQ3bZ4F8no5skAXov8BiwspwXizUL9APPgOyVXTr5r5HRzdKI1TsRngHOqlHuKTCI8hhG3padWqw7GX3IddDwcixvAefXUkTKhH7HcBfifi8vh1E1H1cfGkGYxPI4cM68RGw5zf3y3S7IuedgeZwgTNZ1Z3Sz46LRNcA7Zcmd25yGgPWP/M7q65toTLZSHBvn6OcFDm07n6g0n9oNAxsR54DsjBYs2251QWAbgFuBREX/tF3rc9+zA6xa3U5jSxwxHmpbueyqOOvvOM7rj67g1JfedFTNagngVtR+B0zUK8xiwLqKTmhcE3Dblk4uXbecRDKFmATgIiZBIpni0nXLuW1LJ41rgnmcvG6B59WiyRhgBeDM+UZipWHthnbcmDf7b8Y81m5oJ7GyErZTxjH1JCPzesu4ghtvBpkjH2X6uXFlAVEg9SMjhEAamFsyp4Yjcuks1s6uXdZacuksU8OVZDcC0mW8OpFRQqBruvqdwwpdDh+9cjaF0QHQv/2wRhRGB6afdzkVkKZxtDoyVaqZBKCHEXygcXafjhi63l3G9tIEGzYe4ZKrksSbzmCqMEz6mzE+eedC+juaiUYqhZCPchgkqKB4SzxntqQEO7oceBu4srIzHIitsMTOBOMJ1leCkxAMmEpRWt6Vg8BGTConOxZeSVdfzmwxHmpvRtkJnFmHcuYksBkxH8tO69e1nJEd1sdhP/BBuUippfnA+3jsr5ZI9TnzV33mFcB/DuEi4LpFr/PPZu3LkanES08fOltWnxe2Ba5xCEPXiHEAVG2oMS9UNFTVINOXKdamn3nQdSC8HMMeYPVS+hkFzQdObl9m2Zu7+xt6hkKx5fXktGumdNXyZQUKiPZGkDbGnFxqp+kh9kaUHeUTezHr6WRkxt/oa/toT39Lby6QqMoci4BJDB8vpTtEdlkflf3A08AQ1ejoTM8cyeRnudYD72Zb+qokMhNZLuCJaqtZaqDLLi0i7EHYDVTV7oZW/J9PNf3wanfycLoki5nQSFnKewKrnW5NNMhtKRDlt6EsB+4G4vM2/UrUNd5w5Pl028FfiuJL9SQUyKrqEXXkaNyLF2o3N9vUYKB0AbAduKFSQWqVKFv0+rYfXdbx4aB3qqQLDk8VKCKaUSQNmi0F/ujAwB9RTYeAMwoXabg2QvZ5jl4ym8Ip6FjgDm7/bdl7bw3Ec/lItEJyWyAS0RJWsmC7I9WM45hJHCfo6e21dZlozlju3pjnSnRT0tMXHdFzT8dQ0EJoTr2eSXXs7W/uG/pnwiswBZQw5NXaYw5knJKXVY8p8VSP9vZo3cezp1v2nniDK9FD7V70RMxoaganGJmJT0+0frbtt+RPfVN/EQnLo9sxYEREB6wxxweHhwYL4/mo2kSqi43c5zRH8GS7Fz1shMZQJTg41PzVU7+2fdNZNHlBTgI5ER20qkPG2qGebHZsSTpULzJH8slCe6ywrWTlrGTM3tw9Ef/xjUzLvp6idIlwQtBxa2Sit6+/VCvMuu0MwIE726RBSqlViaDli6Gm4t6e1MQveet3Z4+F9cD7Ewo4WRJBbaaSAAAAAElFTkSuQmCC",red:"data:image/png;base64,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293bv2fa/f0ASM5yljz/NiUAAA0aaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA0LjQuMC1FeGl2MiI+CiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOmI5YjA2YTAwLWZkOTQtNDc5MC1hNzIzLTlkMGUwNGRiNTRlNyIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo1MTQ3ZGU5Yi1kOTA0LTRlNWYtYjIyYy0wZmMzOGRmMWI3ZGEiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo4YzBjNTI2YS1lYTkyLTQxYWItODM5Yy05OWFhYTM0YjdlYzciCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJMaW51eCIKICAgR0lNUDpUaW1lU3RhbXA9IjE2ODQ5NDE2NDAxNTU0MjYiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDowMjQ4MDc5ZS1kMTYyLTQxZmItOGViYS1lMzY2NTRiNGRjMjYiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoTGludXgpIgogICAgICBzdEV2dDp3aGVuPSIyMDIzLTA1LTI0VDE3OjIwOjQwKzAyOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/PkaovgIAAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfnBRgPFCiKn0kIAAAFfUlEQVRYw82YTWxc1RXHf+e+N2/GH+Px2IEEV02AgqIsIkwgoYS2ahepVGCBUOiCRRdsAAnECthErBBCICGFj4gqRQqBRSABUrVm1URtCSATJ5ASZCPHH0kGgx1/xJl5nvH7uIcFY4iIM/GzZyhHenqL994993/u+f/fOUeos+nNnkHCJoQWRD0UFzCARYhQCVB8NFWWTwNbT99SNxC3GZfIXg9sADYDWxCuRekEskARYQplFPgEOAr045ph6bXRzwKM3pEX5mduQLkHuAvYCqSW8GkIfAT0IBwknT8lH87o/w2M3mpSqL0LeLQKIrOMZSpVUC8hpkf6bPiTg9FbpBn0L8ATwLoqL5ZrFjgNPAeyV47p3E8GRjdLE6r3oTwHXF0n7ikwgfAEIvvlqJYbDkY3uw4a3YLyNrC2niJSBXQG4c+Ie0yORnGSj5OnRhzlUJ4ErrkikBAoAjPVe7ik4F6D8iRxlGvoyegmx4X4NwgHgM6a8fUyIfc8doZbf99Ca66N0uwF+v7tc3DnWoJK6gqep1C2g3NEjsdLlm03GXSbAe4GmmvGZ91vA3Y8P8aN6ztoyaYxxsPaNrbcnmbbvV/x9ONdnPnA+w71otaMcDfYPqDUmDQTUgjdNYPQsSHkgYf62di9mmwujzHNgIsxzWRzeTZ2r+aBh/rp2BDWDLLQjSzpf7VMMIpB6QKcy77Tuc6wdVsHbspbfJspj63bOuhcV8u3g9KFJtufWQbHakfLdQUv3YrI4qwQ+e65616Jr6mknE4KJgIGgctLZnEq5vRgAWsXLyKttZweLFCcqiW7cdVP1DgwQoQwUNPJxIDDG7vXMDszBvqjDWvM7MwYb+xew8SAUzNowgCSDEwyNVMJQU8AAdC06DvBtOG/76xirlLi3u0nufn2HJmWTir+FJ9+PMu7B66nr6eVYLpWCgUoJ0DCGoq3wv/MbXkhmlkN7Ad+XTMY4kBTl6XlKnA8IQ4U/xyUx8wlB3ZpKvcC23Hz49K79Ep6GeWM8VB7J8pfgasaUM6cAx5EzPvSZ4OGljNy1AYIh4C/L6lASWYBcBCHQ0mBJOfM94rk+WjwAsKvgN8te51LK7kPpm3zK89OrZH1v4zaQ9c4RJFrxDgAqjbSlBcpGqlqODoyWq5TP1OtnoU9wPqV9DMKWlRnfJ+/6q3XKpmhSRVbXU8uuhb6Hq1eVsBHdDiGQWPMuZV1mpuMB/aPCK8CXcsMjs6pufCm3/7PPZXs8LhKnJBjMTCH4f2VdIfIcRsgcgh4FpgkiY4u9Mwqc4fn2468M58dSQhkIbNcwBPVNrPSRJdjWgb2AK8BidrdSCX4PGw5/re53IlBK8uZ0EhVyodCq/1uXTTIzfrExZ0oq4H7gfQSmv54IMqcfNFv7/0ilkCSg1CgoKon1ZEv017ar9/cbEvGEFeuQ9mF8IdaBamFuBB7I7tKq3r+EXjnK0tPTxUoIzqqyCBooRIGM2NjX8d1HQIuKFys0cYY2eeJ3riYwinorHUndvmr3nt7Pj1eVNEa5LZALKIVrBTAnopVRx3HzOE44dDwsG3IRHPBxrtTnkv8p5yjLzvoLy72oaC+mvOvz+V79pZbRyYvJbwC80AFQ1GtPevAqFPxCuoxL57ql8ND2vDx7MVW2JTOuMQPdxDvSInmF/yU1ZT+Nd92eGcp97+RH4BE1XHHLDAtomPWmK8mpiYn/AvFOCmRGmLTm53WOOKpDhM/YqApQsLe+dYPnym1f9xvTVGQc8C4iE5Y1Ulj7eRQoTC7Ih1qFJiTQc7vwN9ZUbk6Z+ydp6L0Z2+Ws/uGrAyI8I2gF6yR0vDI6Uq9fDbsZACO3NQuGa3kr3XC7H+ClvJeP1/6IrbBqbNno0b4+xbMlmARngcRbAAAAABJRU5ErkJggg==",turquoiseBlue:"data:image/png;base64,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/MUi8H5G35QHBm+BvjV3bu1znD4AWZpV+gY4OARGS5S97vHu3u65/XunPb8fN2tyj8UDOK0AAA0aaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA0LjQuMC1FeGl2MiI+CiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOjEwNGNlNWFhLTE1YzctNGI4Yi1iOGU1LTFmYWQyNWFiYzBhZCIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpkNDMyZTY1Zi0xOThhLTQxM2EtYWYyMy1jNzhlNzczNGRlN2QiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoyNzExODVkMi03MWZiLTRhZDMtYTJmMi1iNjM3OWU3MDc1OTEiCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJMaW51eCIKICAgR0lNUDpUaW1lU3RhbXA9IjE2ODQ5NDE4NjYyMzgzMjQiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo1NGFiYzNkYS1lZWJiLTRlZjctYjdjNS04ZDRjODY5OGVjODMiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoTGludXgpIgogICAgICBzdEV2dDp3aGVuPSIyMDIzLTA1LTI0VDE3OjI0OjI2KzAyOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/Pj0tlUwAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfnBRgPGBru/VeEAAAABmJLR0QA/wD/AP+gvaeTAAAFO0lEQVRYw9WYe2xTVRzHTx97dYS5B1UHa+/tY12dDoOKWyIGlfgHkCkSNTHGwHxA3NiAP/A5x4CMKEzdYL29YyAyBxKQZbI+NvYIaowaH9Ogi2GRbGjcFrbBNrq2a2/9nq5LCFnbbfSOeZJPTs/t6Tm/7/39zu+cU0IiXc7WSImNX0BsZiVYAhigmah5tHklsZrjSYtJSuZtaeSiiJU3gHUwfC9oARfBIHBP1DzaPH1eRuzmp0E6aTgSNX9EWMwSvOkMGPgG+CpguG8a0H7nA78zkMYqye0V0lYXDSHrYUw7cE5TxM04/b+38+vJ+RPRt0eIjVeAAhhyCQizFDKJEBjndaCY49Di4+CRlzFxfwSE3Ciol9i4DSBujoRUy7HIszFxdwSF3CioBy8qm1g5ufhirHwyJqwHrrDGWTlg8hFL1URN2+EF0XFPkyYuSWwhUVgnT2CygXBG3dFcM7bz1/au1u7OK9/93eWidUlHe1dCc810EsUAsXOPQZCI3rGZ6Wb4EXAEM0SCUFnZduz6T/09l4bHXYOCz+f0+XxeWg+7XYM/4vnKtlqHJHSIOrAHlYMFYmawRNCKycaDGZLVfMRdf/nPDpfXM+abotDnpy93dtzXfNgdZg+im2uimJ6h66UTeIMZsrat1jvkdPRRb/imLt4hl6N3DfqFEIPvOMzDJYspJsWfbUKEyFNttcKoyzkKo4UgYoRRt3OE9guT1br984nsmQ7gCWbIipaj4xeu9v/hFQTPlG7B89+u9v9O+4UQQ8f/BSlaVM8kgBOhji4p9mpvwQ+Wfwddjp6bQw2u8g44HT3535/tTUa/0Eccvg4sFDE1m2PBZkx2LVRqVcLQvG/PDDX1/tVxze38x+UZH6O1He28b764qgwtxOcf327eBGLFE9NikiD3qzDZhVBJgCJH3KubDnkfbD4s5Jw74qM1bcvDnxq8/vHt1SrS9InIJ2m7OQ4UYsKhCB9lJqHj0gPsHJzPvsS9w8rRRPDptI40M8PlH9fOJ5M5K008rsZmIwi5gc4QN9Zja8zn+5epch9PTFepU1iGuVunVqeyS9g0iv8zy96l0WiSjIsXx28iJEJhaONkMGB5YP14bkmI1SzIz1T0pRa9VKnNzCjUMcwWUAS2BtgWYLJN+xTo1OyrOhW7xsAwqnSGkd3i+uGjkT5Xw6DLt3AdEKQNB4YXbdtwQpuVuRtG7pwhxWA7vJgRib0nDuSDvtkIkjYcHE3aVWjRLL9/zyyETPK2Vq3OidAaOhiPDLcbxo3MRIik0eReWPnO15pHHiqbpYhS6hkNw7wAz0To6GM5hAzH3wkDa6b7x4bEwnkUfMnP6idX7Nex7GxElIDNerV6hU6jSdbp9RHck2w0w/FaGGoJm7KtnCfmWNlF1fOrK3Q6bekMRFABO7QM8yxewFLUi+5JSxPpAmcxy0gjt1Rytir4NcHKCfJTH/al5j1j1hr0pWEML55YD+x2GP6cVqNZZjQYEvUsG4vP4v8jKju5L1p6qnytxGKa6qogyOorBpVbXvxMe69xdxABb9I0DAGvIIRWp7NsBsJIoWVZKfaXuf+jMKp2b6z8+Adb4aErNwpCCh5J2pnfoH0ga08g7invBfaQjXjjuQifhyEgLdNolJP5UqR17y+QnSwvk1i565OZK6F8RzubvWwvDH8LvKZnmHXY8HKws+sNLJtI5muJ/7hYElOzJ1V+fN9R7CVDClPJOVXuqo06vS4HQjTwgDKDZRXk/1JiD7wrieFLk6T1lczCXUVK7aPZinS9XrTw+Q+Tql7SUmvGuQAAAABJRU5ErkJggg==",defaultOffset:[-25.5,-32]},fb=Ye.getLogger("styling");ii.prototype.setPropertyFill=function(){var i=this.getStyle();if(i&&!(Array.isArray(i)&&i.length===0)){var t=i.getFill();if(t){var e=t.getColor();if(Array.isArray(e)){var n="rgba(";n+=e[0]+",",n+=e[1]+",",n+=e[2]+",",n+=e[3]+")",e=n}if(ge.isRGB(e)){var r=ge.rgbaToHex(e);this.set("fill",r.hex),this.set("fill-opacity",r.opacity)}else this.set("fill",e),this.set("fill-opacity",1)}}};ii.prototype.setPropertyStroke=function(){var i=this.getStyle();if(i&&!(Array.isArray(i)&&i.length===0)){var t=i.getStroke();if(t){var e=t.getColor();if(Array.isArray(e)){var n="rgba(";n+=e[0]+",",n+=e[1]+",",n+=e[2]+",",n+=e[3]+")",e=n}if(ge.isRGB(e)){var r=ge.rgbaToHex(e);this.set("stroke",r.hex),this.set("stroke-opacity",r.opacity)}else this.set("stroke",e),this.set("stroke-opacity",1);this.set("stroke-width",t.getWidth())}}};ii.prototype.setPropertyLabel=function(){var i=this.getStyle();if(i&&!(Array.isArray(i)&&i.length===0)){var t=this.get("name")!==void 0,e=i.getText();if(e&&t){var n=i.getText().getFill();if(n){var r=n.getColor();if(Array.isArray(r)){var o="rgba(";o+=r[0]+",",o+=r[1]+",",o+=r[2]+",",o+=r[3]+")",r=o}if(ge.isRGB(r)){var a=ge.rgbaToHex(r);this.set("label-fill",a.hex),this.set("label-fill-opacity",a.opacity)}else this.set("label-fill",r),this.set("label-fill-opacity",1)}var s=i.getText().getStroke();if(s){var l=s.getColor();if(Array.isArray(l)){var u="rgba(";u+=l[0]+",",u+=l[1]+",",u+=l[2]+",",u+=l[3]+")",l=u}if(ge.isRGB(l)){var c=ge.rgbaToHex(l);this.set("label-stroke",c.hex),this.set("label-stroke-opacity",c.opacity)}else this.set("label-stroke",l),this.set("label-stroke-opacity",1);this.set("label-stroke-width",s.getWidth())}this.set("label-font",i.getText().getFont()||wn.DEFAULT_TEXT.font),this.set("label-textAlign",i.getText().getTextAlign()||wn.DEFAULT_TEXT.textAlign)}}};ii.prototype.setPropertyMarker=function(){var i=this.getStyle();if(i&&!(Array.isArray(i)&&i.length===0)){var t=i.getImage();if(t)if(t instanceof ni){var e=t.getColor();if(Array.isArray(e)){var n="rgba(";n+=e[0]+",",n+=e[1]+",",n+=e[2]+",",n+=e[3]+")",e=n}if(e){var r=ge.rgbaToHex(e);this.set("marker-color",r.hex)}var o=t.getScale();switch(Math.round(o*2)/2){case 0:case .5:this.set("marker-size","small");break;case 1:this.set("marker-size","medium");break;case 1.5:case 2:this.set("marker-size","large");break}var a=t.getSrc();a&&this.set("marker-symbol",a),this.unset("circle-fill"),this.unset("circle-fill-opacity"),this.unset("circle-stroke"),this.unset("circle-stroke-width"),this.unset("circle-stroke-opacity"),this.unset("circle-radius")}else{var s=t.getFill();if(s){var l=s.getColor();if(Array.isArray(l)){var u="rgba(";u+=l[0]+",",u+=l[1]+",",u+=l[2]+",",u+=l[3]+")",l=u}if(ge.isRGB(l)){var c=ge.rgbaToHex(l);this.set("circle-fill",c.hex),this.set("circle-fill-opacity",c.opacity)}else this.set("circle-fill",l),this.set("circle-fill-opacity",1)}var h=t.getStroke();if(h){var d=h.getColor();if(Array.isArray(d)){var p="rgba(";p+=d[0]+",",p+=d[1]+",",p+=d[2]+",",p+=d[3]+")",d=p}if(ge.isRGB(d)){var f=ge.rgbaToHex(d);this.set("circle-stroke",f.hex),this.set("circle-stroke-opacity",f.opacity)}else this.set("circle-stroke",d),this.set("circle-stroke-opacity",1);this.set("circle-stroke-width",h.getWidth())}var g=t.getRadius();this.set("circle-radius",g)}}};var wn={APPLY_CONVERT_GEOM_GPX:!0,DEFAULT_ICON:{src:It.lightOrange,anchor:[.5,1],scale:1},DEFAULT_CIRCLE:{radius:10,fill:{opacity:1,color:[0,0,0,1]},stroke:{width:1,opacity:1,color:[0,0,0,1]}},DEFAULT_STROKE:{width:5,opacity:1,color:[250,250,250,1]},DEFAULT_FILL:{opacity:1,color:[0,0,0,1]},DEFAULT_TEXT:{font:"16px sans",textAlign:"left",stroke:{color:[250,250,250,1],width:5,opactity:1},fill:{opacity:1,color:[0,0,0,1]}},getListTags:function(){return["type","fill","fill-opacity","stroke","stroke-opacity","stroke-width","circle-fill","circle-fill-opacity","circle-stroke","circle-stroke-opacity","circle-stroke-width","circle-radius","marker-symbol","marker-color","marker-size","label-fill","label-fill-opacity","label-stroke","label-stroke-width","label-stroke-opacity","label-font","label-textAlign"]},defineStyleFromProperties:function(i){var t=null,e={},n=null;if(i.get("marker-color")||i.get("marker-size")||i.get("marker-symbol")){n={},n.src=this.DEFAULT_ICON.src,n.anchor=this.DEFAULT_ICON.anchor;var r=i.get("marker-symbol");r&&r.search("data:image/png;base64")!==-1&&(n.src=r);var o=i.get("marker-color");ge.isHex(o)&&(n.color=ge.hexToRgba(o,1));var a=i.get("marker-size");if(a)switch(a){case"small":n.scale=.5;break;case"medium":n.scale=1;break;case"large":n.scale=1.5;break;default:n.scale=this.DEFAULT_ICON.scale;break}}var s=null;(i.get("stroke")||i.get("stroke-opacity")||i.get("stroke-width"))&&(s={},s.color=ge.hexToRgba(i.get("stroke"),+i.get("stroke-opacity")||this.DEFAULT_STROKE.opacity),s.width=+i.get("stroke-width")||this.DEFAULT_STROKE.width);var l=null;(i.get("fill")||i.get("fill-opacity"))&&(l={},l.color=ge.hexToRgba(i.get("fill"),+i.get("fill-opacity")||this.DEFAULT_FILL.opacity));var u=null,c=null,h=i.get("name")!=="";h&&((i.get("label-fill")||i.get("label-fill-opacity"))&&(c={},c.color=ge.hexToRgba(i.get("label-fill"),+i.get("label-fill-opacity")||this.DEFAULT_TEXT.fill.opacity)),(i.get("label-stroke")||i.get("label-stroke-opacity")||i.get("label-stroke-width"))&&(u={},u.color=ge.hexToRgba(i.get("label-stroke"),+i.get("label-stroke-opacity")||this.DEFAULT_TEXT.stroke.opacity),u.width=+i.get("label-stroke-width")||this.DEFAULT_TEXT.stroke.width));var d=i.get("circle-radius")||this.DEFAULT_CIRCLE.radius,p=null;(i.get("circle-stroke")||i.get("circle-stroke-opacity")||i.get("circle-stroke-width"))&&(p={},p.color=ge.hexToRgba(i.get("circle-stroke"),+i.get("circle-stroke-opacity")||this.DEFAULT_CIRCLE.stroke.opacity),p.width=+i.get("circle-stroke-width")||this.DEFAULT_CIRCLE.stroke.width);var f=null;(i.get("circle-fill")||i.get("circle-fill-opacity"))&&(f={},f.color=ge.hexToRgba(i.get("circle-fill"),+i.get("circle-fill-opacity")||this.DEFAULT_CIRCLE.fill.opacity));var g=i.getGeometry().getType();switch(g){case"Circle":case"Point":case"MultiPoint":var v=!1,y={};if(p&&(y.stroke=new Me(p)),f&&(y.fill=new Ge(f)),Object.keys(y).length!==0&&(v=!0,y.radius=+d,e.image=new gi(y)),n&&(e.image=new ni(n)),h){var m={};if(u&&(m.stroke=new Me(u)),c&&(m.fill=new Ge(c)),Object.keys(m).length!==0)m.text=i.get("name"),m.textAlign=i.get("label-textAlign")||this.DEFAULT_TEXT.textAlign,m.font=i.get("label-font")||this.DEFAULT_TEXT.font,e.text=new Cr(Object.assign({},this.DEFAULT_TEXT,m));else if(n||v){var A=new Cr(Object.assign({},this.DEFAULT_TEXT,{fill:new Ge(this.DEFAULT_TEXT.fill),stroke:new Me(this.DEFAULT_TEXT.stroke)}));if(A){var _=A.clone();_.setText(i.get("name")),e.text=_}}}break;case"Polygon":case"MultiPolygon":s&&(e.stroke=new Me(s)),l&&(e.fill=new Ge(l));break;case"LineString":case"MultiLineString":if(s&&(e.stroke=new Me(s)),this.APPLY_CONVERT_GEOM_GPX&&l){var C=i.get("type");if(C&&(C==="Polygon"||C==="MultiPolygon")){e.fill=new Ge(l);var I=i.clone(),E=g==="LineString"?zi:wa;i.setGeometry(new E([I.getGeometry().getCoordinates()]))}}break}return Object.keys(e).length!==0&&(t=new de(e)),t},defineStyleFunctionByDefault:function(i){if(!i)return[];if(Object.keys(i).length===0)return[];var t=(e,n)=>{var r=null,o=e.getGeometry().getType();switch(o){case"Point":case"MultiPoint":var a={};if(i.getImage()&&(a.image=i.getImage()),i.getText()&&e.get("name")){var s=i.getText().clone();s.setText(e.get("name")),a.text=s}r=new de(a);break;case"Circle":var l={},u={};if(i.getFill()&&(u.fill=i.getFill()),i.getStroke()&&(u.stroke=i.getStroke()),i.getText()&&e.get("name")){var c=i.getText().clone();c.setText(e.get("name")),l.text=c}Object.keys(u).length!==0&&(u.radius=3,l.image=new gi(u)),r=new de(l);break;case"Polygon":case"MultiPolygon":var h={};i.getFill()&&(h.fill=i.getFill()),i.getStroke()&&(h.stroke=i.getStroke()),r=new de(h);break;case"LineString":case"LinearRing":case"MultiLineString":var d={};i.getStroke()&&(d.stroke=i.getStroke()),r=new de(d);break}return[r]};return t},definePropertiesFromStyleByType:function(i){var t=i.getGeometry().getType();switch(t){case"Point":case"MultiPoint":i.setPropertyMarker(),i.setPropertyLabel();break;case"LineString":case"MultiLineString":i.setPropertyStroke();break;case"Polygon":case"MultiPolygon":i.setPropertyStroke(),i.setPropertyFill();break}},definePropertiesFromStyle:function(i){var t=i.getStyle()||i.getStyleFunction();if(t){if(typeof t=="function"){var e=t.call(this,i,0);if(e&&e.length!==0)t=Array.isArray(e)?e[0]:e,i.setStyle(t);else return}this.definePropertiesFromStyleByType(i)}},defineTagFromStyle:function(i,t){return fb.trace("todo..."),null}},Vu=Ye.getLogger("parser"),ha={parse:function(i){var t=null,e=null,n=typeof window<"u"?window:null;if(typeof V0=="object"&&window===null){var r=require("xmldom").DOMParser;e=new r,t=e.parseFromString(i,"text/xml")}else n.DOMParser?(e=new n.DOMParser,t=e.parseFromString(i,"text/xml")):n.ActiveXObject?(t=new n.ActiveXObject("Microsoft.XMLDOM"),t.async=!1,t.loadXML(i)):Vu.log("Incompatible environment for DOM Parser !");var o=t.querySelector("parsererror");return o?(console.error(o),null):(Vu.trace(t),t)},toString:function(i){var t=new XMLSerializer,e=t.serializeToString(i);return Vu.trace(e),e},format:function(i){var t=/(>)\s*(<)(\/*)/g,e=/ *(.*) +\n/g,n=/(<.+>)(.+\n)/g;i=i.replace(t,`$1
$2$3`).replace(e,`$1
`).replace(n,`$1
$2`);for(var r="",o=i.split(`
`),a=0,s="other",l={"single->single":0,"single->closing":-1,"single->opening":0,"single->other":0,"closing->single":0,"closing->closing":-1,"closing->opening":0,"closing->other":0,"opening->single":1,"opening->closing":0,"opening->opening":1,"opening->other":1,"other->single":0,"other->closing":-1,"other->opening":0,"other->other":0},u=0;u<o.length;u++){var c=o[u],h=!!c.match(/<.+\/>/),d=!!c.match(/<\/.+>/),p=!!c.match(/<[^!].*>/),f=h?"single":d?"closing":p?"opening":"other",g=s+"->"+f;s=f;var v="";a+=l[g];for(var y=0;y<a;y++)v+="	";g==="opening->closing"?r=r.substr(0,r.length-1)+c+`
`:r+=v+c+`
`}return Vu.trace(r),r}},he={detectSupport:function(){var i=!0,t=window.navigator.userAgent.toLowerCase();return(t.indexOf("iphone")!==-1||t.indexOf("ipod")!==-1||t.indexOf("ipad")!==-1||t.indexOf("android")!==-1||t.indexOf("mobile")!==-1||t.indexOf("blackberry")!==-1||t.indexOf("tablet")!==-1||t.indexOf("phone")!==-1||t.indexOf("touch")!==-1)&&(i=!1),(t.indexOf("msie")!==-1||t.indexOf("trident")!==-1)&&(i=!0),i},assign:function(i,t){i=i||{};for(var e in t)t.hasOwnProperty(e)&&(i[e]=t[e]);return i},mergeParams:function(i,t,e){if(!(!i||!t)){typeof e>"u"&&(e=!0);for(var n in t)t.hasOwnProperty(n)&&(typeof t[n]=="object"?i.hasOwnProperty(n)?this.mergeParams(i[n],t[n],e):i[n]=t[n]:i.hasOwnProperty(n)?e&&(i[n]=t[n]):i[n]=t[n])}}},sn=Ye.getLogger("extended KML format"),Gs=function(i){function t(a){if(!(this instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");a=a||{},this.source=null,this.extensions=a.extensions||null,a.defaultStyle&&!Array.isArray(a.defaultStyle)&&(a.defaultStyle=[a.defaultStyle]),(a.defaultStyle===null||typeof a.defaultStyle>"u")&&(a.defaultStyle=[]),i.call(this,a)}i&&(t.__proto__=i),t.prototype=Object.create(i.prototype,{}),t.prototype.constructor=t;function e(a,s,l){for(var u=a.nodeName==="#document"?a.childNodes[0].childNodes:a.childNodes,c=u,h=0;h<u.length;h++){const Qe=u[h];if(Qe.nodeName==="Document"){c=Qe.childNodes;break}if(Qe.nodeName==="Placemark"){c=[Qe];break}}for(var d={},p=-1,f=0;f<c.length;f++){var g=c[f];switch(g.nodeName){case"Style":var v=g.attributes[0];if(v&&v.nodeName==="id"){var y=v.nodeValue,m=g;d[y]=m}break;case"Placemark":p++;for(var A=g.childNodes,_=!1,C=!1,I=!1,E=null,w=null,S=null,x=g,T=0;T<A.length;T++)switch(A[T].nodeName){case"Polygon":I=!0;break;case"LineString":C=!0;break;case"Point":_=!0;break;case"Style":w=A[T],E=A[T].childNodes;break;case"styleUrl":var L=A[T].textContent.slice(1);d[L]&&(E=d[L].childNodes);break;case"ExtendedData":S=A[T].childNodes;break;case"name":x=null;break}if(S){sn.log("ExtendedData :",S);var G=l.extendedData;G&&typeof G=="function"&&G(s[p],S)}if(x){sn.log("Name :",x);var N=l.nameData;N&&typeof N=="function"&&N(s[p],x)}if(_&&E&&E.length!==0){for(var B=null,U=null,D=0;D<E.length;D++)switch(E[D].nodeName){case"LabelStyle":B=E[D];break;case"IconStyle":U=E[D];break}var z=s[p].getProperties().name,F=s[p].getProperties().description,O=z||F;if(sn.trace(O),!U&&B){var R=l.labelStyle;R&&typeof R=="function"&&R(s[p],B)}else if(U&&!B){var M=l.iconStyle;M&&typeof M=="function"&&M(s[p],U)}else if(U&&B){var ie=l.iconLabelStyle;ie&&typeof ie=="function"&&ie(s[p],U,B)}}else{var Y=s[p],K=Y.getStyle();if(K&&typeof K=="function"){var Q=K.call(this,Y,0);Q&&Q.length!==0&&(K=Q[0])}if(I){var me=l.polygonStyle;me&&typeof me=="function"&&me(s[p],E)}if(C){var pe=l.lineStringStyle;pe&&typeof pe=="function"&&pe(s[p],E)}if(_&&K){var V=K.getImage();if(V&&V instanceof gi){var ze=l.circleStyle;ze&&typeof ze=="function"&&ze(s[p],w)}else if(V&&V instanceof ni){var Ce=l.pointStyle;Ce&&typeof Ce=="function"&&Ce(s[p],w)}}}break;default:sn.trace("tag is not processing !")}}}t.prototype.writeFeatures=function(a,s){sn.log("overload : ol.format.KML.writeFeatures");var l=i.prototype.writeFeaturesNode.call(this,a,s);if(l===null)return null;this.hasOwnProperty("extensions")&&r(l,this.extensions);var u=n.call(this,l,a,s),c=ha.format(u);return c===""?null:c};function n(a,s,l){function u(m,A){var _=m.toString(16);_.charAt(0)==="#"&&(_=_.slice(1)),A=A||1,A=parseInt(A*255,10),A=A.toString(16);var C=A;return C=C+_.substr(4,2),C=C+_.substr(2,2),C=C+_.substr(0,2),C.toLowerCase()}var c=function(m,A){if(sn.trace("label with style :",A),!!m&&m.getStyle()instanceof de){var _=m.getStyle().getText();if(!_)return;var C="Sans",I="16px",E=_.getFont();if(E){var w=E.split(" ",2);I=w[0],C=w[1]}var S=m.getStyle().getText().getStroke();if(!S)return;if(S instanceof Me){var x=u("#FFFFFF"),T=S.getColor();if(Array.isArray(T)){var L="rgba(";L+=T[0]+",",L+=T[1]+",",L+=T[2]+",",L+=T[3]+")",T=L}if(ge.isRGB(T)){var G=ge.rgbaToHex(T);x=u(G.hex,G.opacity)}else x=u(T);var N=S.getWidth()||"0",B="1";if(A&&A.getElementsByTagName("LabelStyleSimpleExtensionGroup").length===0){var U=document.createElementNS(a.namespaceURI,"LabelStyleSimpleExtensionGroup");U.setAttribute("fontSize",I),U.setAttribute("fontFamily",C),U.setAttribute("haloColor",x),U.setAttribute("haloRadius",N),U.setAttribute("haloOpacity",B),A.appendChild(U)}}var D=m.getStyle().getImage();if(!D)return;if(D instanceof gi){var z=null,F=null;if(D.getStroke()){if(F=D.getStroke().getWidth(),z=D.getStroke().getColor(),Array.isArray(z)){var O="rgba(";O+=z[0]+",",O+=z[1]+",",O+=z[2]+",",O+=z[3]+")",z=O}if(ge.isRGB(z)){var R=ge.rgbaToHex(z);z=u(R.hex,R.opacity)}else z=u(z)}var M=null;if(D.getFill()){if(M=D.getFill().getColor(),Array.isArray(M)){var ie="rgba(";ie+=M[0]+",",ie+=M[1]+",",ie+=M[2]+",",ie+=M[3]+")",M=ie}if(ge.isRGB(M)){var Y=ge.rgbaToHex(M);M=u(Y.hex,Y.opacity)}else M=u(M)}if(A&&A.getElementsByTagName("ObjectSimpleExtensionGroup").length===0){var K=document.createElementNS(a.namespaceURI,"ObjectSimpleExtensionGroup");K.setAttribute("type","circle"),K.setAttribute("radius",D.getRadius()),K.setAttribute("fillColor",M),K.setAttribute("strokeColor",z),K.setAttribute("strokeWidth",F),A.appendChild(K)}}}},h=function(m,A){if(sn.trace("marker with style (hotspot):",A),!!m&&m.getStyle()instanceof de){var _=m.getStyle().getImage();if(!_)return;if(_ instanceof ni){var C=0,I=0,E="pixels",w="pixels",S=_.getSize(),x=_.getAnchor();if(x.length&&(C=x[0],I=x[1],w==="fraction"?I=I===1?0:1-I:I=w==="pixels"&&I===S[1]?0:S[1]-I),A&&A.getElementsByTagName("hotSpot").length===0){var T=document.createElementNS(a.namespaceURI,"hotSpot");T.setAttribute("x",C),T.setAttribute("y",I),T.setAttribute("xunits",E),T.setAttribute("yunits",w),A.appendChild(T)}}}},d=function(m,A){if(m&&m.getStyle()instanceof de){var _=m.getStyle().getImage();if(!_)return;if(_ instanceof gi){var C=null,I=null;if(_.getStroke()){if(I=_.getStroke().getWidth(),C=_.getStroke().getColor(),Array.isArray(C)){var E="rgba(";E+=C[0]+",",E+=C[1]+",",E+=C[2]+",",E+=C[3]+")",C=E}if(ge.isRGB(C)){var w=ge.rgbaToHex(C);C=u(w.hex,w.opacity)}else C=u(C)}var S=null;if(_.getFill()){if(S=_.getFill().getColor(),Array.isArray(S)){var x="rgba(";x+=S[0]+",",x+=S[1]+",",x+=S[2]+",",x+=S[3]+")",S=x}if(ge.isRGB(S)){var T=ge.rgbaToHex(S);S=u(T.hex,T.opacity)}else S=u(S)}if(A&&A.getElementsByTagName("ObjectSimpleExtensionGroup").length===0){var L=document.createElementNS(a.namespaceURI,"LabelStyle"),G=document.createElementNS(a.namespaceURI,"ObjectSimpleExtensionGroup");G.setAttribute("type","circle"),G.setAttribute("radius",_.getRadius()),G.setAttribute("fillColor",S),G.setAttribute("strokeColor",C),G.setAttribute("strokeWidth",I),L.appendChild(G),A.appendChild(L)}}}},p=function(m,A){},f=function(m,A,_){sn.trace("write an icon with a label"),h(m,A),c(m,_)},g=function(m,A){for(var _=0;_<A.length;_++){var C=A[_];if(C.nodeName==="name")return}var I=m.getProperties().name;if(I){var E=document.createElement("name");E.innerHTML=I,A.appendChild(E)}},v=function(m,A){if(A&&A.length){for(var _=[],C=0;C<A.length;C++){const E=A[C];if(E.nodeName==="Data"){var I=E.getAttribute("name");wn.getListTags().includes(I)&&_.push(E)}}_&&_.length&&_.forEach(E=>{E.remove()})}};e.call(this,a,s,{labelStyle:c,iconStyle:h,iconLabelStyle:f,circleStyle:d,pointStyle:p,nameData:g,extendedData:v});var y=ha.toString(a);return y||null}function r(a,s){var l=document.createElementNS(a.namespaceURI,"ExtendedData");for(const d in s)if(Object.hasOwnProperty.call(s,d)){const p=s[d];var u=document.createElementNS(a.namespaceURI,"Data");u.setAttribute("name",d);var c=document.createTextNode(JSON.stringify(p));u.appendChild(c),l.appendChild(u)}var h=a.firstChild;a.insertBefore(l,h)}t.prototype.readFeatures=function(a,s){sn.log("overload : ol.format.KML.readFeatures"),typeof a=="string"?this.source=ha.parse(a):a!==null&&(this.source=a);var l=o.call(this,a,s);return sn.trace("Styles étendus",l),l.forEach(u=>{wn.definePropertiesFromStyle(u)}),l};function o(a,s){var l=i.prototype.readFeatures.call(this,a,s),u=null,c="";if(typeof a=="string"?c=a:c=a.documentElement.outerHTML,c=c.replace(/\n/g,""),c=c.replace(/(>)\s*(<)/g,"$1$2"),u=ha.parse(c),u===null)return l;function h(y){var m="";m=m+y.substr(6,2),m=m+y.substr(4,2),m=m+y.substr(2,2);for(var A=parseInt(m,16).toString(16),_="",C=A.length||0,I=0;I<6-C;I++)_+="0";return A="#"+_+A,A}var d=function(y,m){if(sn.trace("label with style :",m),!!y){for(var A=y.getProperties().name,_=h("ff000000"),C="#FFFFFF",I=0,E="Sans",w="16px",S=null,x=5,T="#000000",L="#ffffff",G=1,N=!1,B=!1,U=m.childNodes,D=0;D<U.length;D++)switch(U[D].nodeName){case"scale":break;case"colorMode":break;case"color":_=h(U[D].textContent);break;case"LabelStyleSimpleExtensionGroup":N=!0;for(var z=U[D].attributes,F=0;F<z.length;F++)switch(z[F].nodeName){case"fontFamily":E=z[F].nodeValue;break;case"fontSize":w=z[F].nodeValue;break;case"haloColor":C=h(z[F].nodeValue);break;case"haloRadius":I=parseInt(z[F].nodeValue,10);break;case"haloOpacity":parseFloat(z[F].nodeValue);break}break;case"ObjectSimpleExtensionGroup":B=!0;for(var O=U[D].attributes,R=0;R<O.length;R++)switch(O[R].nodeName){case"type":S=O[R].nodeValue;break;case"radius":x=parseInt(O[R].nodeValue,10);break;case"fillColor":var M=O[R].nodeValue,ie=Math.round(ge.num(M.substr(0,2))/255*10)/10,Y=h(M);T=ge.hexToRgba(Y,ie);break;case"strokeColor":var K=O[R].nodeValue,Q=Math.round(ge.num(K.substr(0,2))/255*10)/10,me=h(K);L=ge.hexToRgba(me,Q);break;case"strokeWidth":G=parseInt(O[R].nodeValue,10);break}break}var pe=null;B&&S==="circle"?pe=new gi({radius:x,fill:new Ge({color:T}),stroke:new Me({color:L,width:G})}):N&&(pe=new ni({src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGNiYAAAAAkAAxkR2eQAAAAASUVORK5CYII=",size:[51,38],anchor:[25.5,38],anchorOrigin:"top-left",anchorXUnits:"pixels",anchorYUnits:"pixels"})),y.setStyle(new de({image:pe,text:new Cr({font:w+" "+E,textAlign:"left",text:A,fill:new Ge({color:_}),stroke:new Me({color:C,width:I})})}))}},p=function(y,m){sn.trace("hotspot :",m);for(var A=null,_=null,C=h("ffffffff"),I=!1,E=51,w=38,S=!1,x=25.5,T="pixels",L=38,G="pixels",N=m.childNodes,B=!1,U=0;U<N.length;U++)switch(N[U].nodeName){case"Icon":B=!0;for(var D=N[U].childNodes,z=0;z<D.length;z++)switch(D[z].nodeName){case"href":A=D[z].textContent;break;case"gx:w":I=!0,E=parseFloat(D[z].textContent);break;case"gx:h":I=!0,w=parseFloat(D[z].textContent);break}break;case"hotSpot":S=!0;for(var F=N[U].attributes,O=0;O<F.length;O++)switch(F[O].nodeName){case"x":x=parseFloat(F[O].nodeValue);break;case"y":L=parseFloat(F[O].nodeValue);break;case"yunits":T=F[O].nodeValue;break;case"xunits":G=F[O].nodeValue;break}break;case"scale":_=parseFloat(N[U].textContent);break;case"color":C=h(N[U].textContent);break}var R=null;if(B){var M={src:A||"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGNiYAAAAAkAAxkR2eQAAAAASUVORK5CYII=",color:C,crossOrigin:"anonymous",scale:_||1};I&&he.mergeParams(M,{size:[E,w]}),S&&he.mergeParams(M,{anchor:[x,L],anchorOrigin:"bottom-left",anchorXUnits:T||"pixels",anchorYUnits:G||"pixels"}),R=new ni(M)}var ie=y.getStyleFunction();if(ie){var Y=ie(y,0);if(Y&&!Array.isArray(Y)&&(Y=[Y]),Y&&Y.length!==0){var K=Y.length===1?Y[0]:Y[Y.length-1];y.setStyle(new de({image:R,text:K.getText()}))}}},f=function(y,m){if(sn.trace("extendData :",m),!!y){for(var A={},_=y.get("name")||"",C=y.get("description")||"",I=null,E=0;E<m.length;E++){var w=m[E],S=w.attributes[0],x=w.childNodes;if(S.nodeName==="name")switch(S.nodeValue){case"label":_=w.textContent,A.name=_;break;case"title":case"attributetitle":for(var T=0;T<x.length;T++)x[T].nodeName==="value"&&(I=x[T].textContent);break;default:A[S.nodeValue]=w.textContent;break}}I&&(C=C?I+" : "+C:I,A.description=C),Object.keys(A).length&&y.setProperties(A,!0)}},g=function(y,m,A){sn.trace("display icon and label"),d(y,A),p(y,m)},v=function(y,m){};return e.call(this,u,l,{lineStringStyle:v,polygonStyle:v,pointStyle:v,labelStyle:this.showPointNames_?d:null,iconStyle:p,iconLabelStyle:this.showPointNames_?g:p,extendedData:f}),l}return t.prototype.readRootExtensions=function(a){for(var s={},l=this.source.nodeName==="#document"?this.source.childNodes[0]:this.source,u=l.childNodes,c=0;c<u.length;c++){var h=u[c];if(h.nodeName==="ExtendedData")for(var d=h.childNodes,p=0;p<d.length;p++){var f=d[p];if(f.nodeName==="Data"){var g=f.attributes[0];if(g&&g.nodeName==="name"&&g.nodeValue===a){s=JSON.parse(f.textContent);break}}}}return s},t}(pb);window.ol&&window.ol.format&&(window.ol.format.KMLExtended=Gs);var gb=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),ai=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],vb="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd",mb={rte:$y,trk:eA,wpt:tA},yb=j(ai,{rte:ji($y),trk:ji(eA),wpt:ji(tA)}),Ab=j(ai,{text:P(H,"linkText"),type:P(H,"linkType")}),_b=j(ai,{rte:Z(Wb),trk:Z(Yb),wpt:Z(qb)}),Cb=function(i){gb(t,i);function t(e){var n=i.call(this)||this,r=e||{};return n.dataProjection=Ee("EPSG:4326"),n.readExtensions_=r.readExtensions,n}return t.prototype.handleReadExtensions_=function(e){e||(e=[]);for(var n=0,r=e.length;n<r;++n){var o=e[n];if(this.readExtensions_){var a=o.get("extensionsNode_")||null;this.readExtensions_(o,a)}o.set("extensionsNode_",void 0)}},t.prototype.readFeatureFromNode=function(e,n){if(!cn(ai,e.namespaceURI))return null;var r=mb[e.localName];if(!r)return null;var o=r(e,[this.getReadOptions(e,n)]);return o?(this.handleReadExtensions_([o]),o):null},t.prototype.readFeaturesFromNode=function(e,n){if(!cn(ai,e.namespaceURI))return[];if(e.localName=="gpx"){var r=re([],yb,e,[this.getReadOptions(e,n)]);return r?(this.handleReadExtensions_(r),r):[]}return[]},t.prototype.writeFeaturesNode=function(e,n){n=this.adaptOptions(n);var r=Na("http://www.topografix.com/GPX/1/1","gpx"),o="http://www.w3.org/2000/xmlns/";return r.setAttributeNS(o,"xmlns:xsi",Vc),r.setAttributeNS(Vc,"xsi:schemaLocation",vb),r.setAttribute("version","1.1"),r.setAttribute("creator","OpenLayers"),xt({node:r},_b,Bb,e,[n]),r},t}(Ry),Ib=j(ai,{name:P(H),cmt:P(H),desc:P(H),src:P(H),link:i0,number:P($i),extensions:n0,type:P(H),rtept:jb}),Eb=j(ai,{ele:P(lt),time:P(Kf)}),wb=j(ai,{name:P(H),cmt:P(H),desc:P(H),src:P(H),link:i0,number:P($i),type:P(H),extensions:n0,trkseg:Vb}),Sb=j(ai,{trkpt:zb}),Pb=j(ai,{ele:P(lt),time:P(Kf)}),xb=j(ai,{ele:P(lt),time:P(Kf),magvar:P(lt),geoidheight:P(lt),name:P(H),cmt:P(H),desc:P(H),src:P(H),link:i0,sym:P(H),type:P(H),fix:P(H),sat:P($i),hdop:P(lt),vdop:P(lt),pdop:P(lt),ageofdgpsdata:P(lt),dgpsid:P($i),extensions:n0}),Mb=["text","type"],Tb=j(ai,{text:Z(yt),type:Z(yt)}),bb=j(ai,["name","cmt","desc","src","link","number","type","rtept"]),Rb=j(ai,{name:Z(yt),cmt:Z(yt),desc:Z(yt),src:Z(yt),link:Z(r0),number:Z(Yc),type:Z(yt),rtept:Ty(Z(o0))}),Ob=j(ai,["ele","time"]),Lb=j(ai,["name","cmt","desc","src","link","number","type","trkseg"]),Gb=j(ai,{name:Z(yt),cmt:Z(yt),desc:Z(yt),src:Z(yt),link:Z(r0),number:Z(Yc),type:Z(yt),trkseg:Ty(Z(Hb))}),kb=or("trkpt"),Db=j(ai,{trkpt:Z(o0)}),Nb=j(ai,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),Fb=j(ai,{ele:Z(hn),time:Z(MM),magvar:Z(hn),geoidheight:Z(hn),name:Z(yt),cmt:Z(yt),desc:Z(yt),src:Z(yt),link:Z(r0),sym:Z(yt),type:Z(yt),fix:Z(yt),sat:Z(Yc),hdop:Z(hn),vdop:Z(hn),pdop:Z(hn),ageofdgpsdata:Z(hn),dgpsid:Z(Yc)}),Ub={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function Bb(i,t,e){var n=i.getGeometry();if(n){var r=Ub[n.getType()];if(r){var o=t[t.length-1].node;return Na(o.namespaceURI,r)}}}function e0(i,t,e,n){return i.push(parseFloat(e.getAttribute("lon")),parseFloat(e.getAttribute("lat"))),"ele"in n?(i.push(n.ele),delete n.ele,t.hasZ=!0):i.push(0),"time"in n?(i.push(n.time),delete n.time,t.hasM=!0):i.push(0),i}function t0(i,t,e){var n=De.XY,r=2;if(i.hasZ&&i.hasM?(n=De.XYZM,r=4):i.hasZ?(n=De.XYZ,r=3):i.hasM&&(n=De.XYM,r=3),r!==4){for(var o=0,a=t.length/4;o<a;o++)t[o*r]=t[o*4],t[o*r+1]=t[o*4+1],i.hasZ&&(t[o*r+2]=t[o*4+2]),i.hasM&&(t[o*r+2]=t[o*4+3]);if(t.length=t.length/4*r,e)for(var o=0,a=e.length;o<a;o++)e[o]=e[o]/4*r}return n}function i0(i,t){var e=t[t.length-1],n=i.getAttribute("href");n!==null&&(e.link=n),jo(Ab,i,t)}function n0(i,t){var e=t[t.length-1];e.extensionsNode_=i}function jb(i,t){var e=re({},Eb,i,t);if(e){var n=t[t.length-1],r=n.flatCoordinates,o=n.layoutOptions;e0(r,o,i,e)}}function zb(i,t){var e=re({},Pb,i,t);if(e){var n=t[t.length-1],r=n.flatCoordinates,o=n.layoutOptions;e0(r,o,i,e)}}function Vb(i,t){var e=t[t.length-1];jo(Sb,i,t);var n=e.flatCoordinates,r=e.ends;r.push(n.length)}function $y(i,t){var e=t[0],n=re({flatCoordinates:[],layoutOptions:{}},Ib,i,t);if(n){var r=n.flatCoordinates;delete n.flatCoordinates;var o=n.layoutOptions;delete n.layoutOptions;var a=t0(o,r),s=new xn(r,a);nr(s,!1,e);var l=new ii(s);return l.setProperties(n,!0),l}}function eA(i,t){var e=t[0],n=re({flatCoordinates:[],ends:[],layoutOptions:{}},wb,i,t);if(n){var r=n.flatCoordinates;delete n.flatCoordinates;var o=n.ends;delete n.ends;var a=n.layoutOptions;delete n.layoutOptions;var s=t0(a,r,o),l=new Zr(r,s,o);nr(l,!1,e);var u=new ii(l);return u.setProperties(n,!0),u}}function tA(i,t){var e=t[0],n=re({},xb,i,t);if(n){var r={},o=e0([],r,i,n),a=t0(r,o),s=new Wi(o,a);nr(s,!1,e);var l=new ii(s);return l.setProperties(n,!0),l}}function r0(i,t,e){i.setAttribute("href",t);var n=e[e.length-1],r=n.properties,o=[r.linkText,r.linkType];xt({node:i},Tb,Yi,o,e,Mb)}function o0(i,t,e){var n=e[e.length-1],r=n.node,o=r.namespaceURI,a=n.properties;i.setAttributeNS(null,"lat",String(t[1])),i.setAttributeNS(null,"lon",String(t[0]));var s=n.geometryLayout;switch(s){case De.XYZM:t[3]!==0&&(a.time=t[3]);case De.XYZ:t[2]!==0&&(a.ele=t[2]);break;case De.XYM:t[2]!==0&&(a.time=t[2]);break}var l=i.nodeName=="rtept"?Ob[o]:Nb[o],u=gn(a,l);xt({node:i,properties:a},Fb,Yi,u,e,l)}function Wb(i,t,e){var n=e[0],r=t.getProperties(),o={node:i};o.properties=r;var a=t.getGeometry();if(a.getType()==b.LINE_STRING){var s=nr(a,!0,n);o.geometryLayout=s.getLayout(),r.rtept=s.getCoordinates()}var l=e[e.length-1].node,u=bb[l.namespaceURI],c=gn(r,u);xt(o,Rb,Yi,c,e,u)}function Yb(i,t,e){var n=e[0],r=t.getProperties(),o={node:i};o.properties=r;var a=t.getGeometry();if(a.getType()==b.MULTI_LINE_STRING){var s=nr(a,!0,n);r.trkseg=s.getLineStrings()}var l=e[e.length-1].node,u=Lb[l.namespaceURI],c=gn(r,u);xt(o,Gb,Yi,c,e,u)}function Hb(i,t,e){var n={node:i};n.geometryLayout=t.getLayout(),n.properties={},xt(n,Db,kb,t.getCoordinates(),e)}function qb(i,t,e){var n=e[0],r=e[e.length-1];r.properties=t.getProperties();var o=t.getGeometry();if(o.getType()==b.POINT){var a=nr(o,!0,n);r.geometryLayout=a.getLayout(),o0(i,a.getCoordinates(),e)}}const Xb=Cb;var ks=function(i){function t(o){if(!(this instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");if(this.options=o||{},this.options.readExtensions&&typeof this.options.readExtensions=="function"){var a=this.options.readExtensions;this.options.readExtensions=function(s,l){this.readExtensions(s,l),a.call(this,s,l)}}else this.options.readExtensions=this.readExtensions;(this.options.defaultStyle===null||typeof this.options.defaultStyle>"u")&&(this.options.defaultStyle={}),this.source=null,i.call(this,this.options)}i&&(t.__proto__=i),t.prototype=Object.create(i.prototype,{}),t.prototype.constructor=t,t.prototype.readFeatures=function(o,a){var s=i.prototype.readFeatures.call(this,o,a);typeof o=="string"?this.source=ha.parse(o):o!==null&&(this.source=o);var l=this;return s.forEach(function(u,c,h){u.setId(c+1);var d=u.getProperties().desc;d&&u.setProperties({description:d});var p=u.getStyleFunction();if(!p){var f=wn.defineStyleFunctionByDefault(l.options.defaultStyle);f&&u.setStyle(f)}}),s},t.prototype.writeFeatures=function(o,a){if(o.forEach(function(d,p,f){var g=d.getProperties().description;g&&d.setProperties({desc:g}),wn.definePropertiesFromStyle(d);var v=d.getGeometry().getType();if(v==="Polygon"){var y=d.clone();y.set("type",v),y.setGeometry(new xn(d.getGeometry().getCoordinates())),o.push(y),f.splice(p,1)}else if(v==="MultiPolygon"){var m=d.clone();m.set("type",v),m.setGeometry(new Zr(d.getGeometry().getCoordinates())),o.push(m),f.splice(p,1)}}),this.options.orderBy!==void 0){var s=this.options.orderBy;if(s){var l=function(d,p){var f=d.get(s)||0,g=p.get(s)||0;return f.toString().localeCompare(g.toString(),void 0,{numeric:!0})};o.sort(l)}}var u=i.prototype.writeFeaturesNode.call(this,o,a);if(u===null)return null;this.options.hasOwnProperty("extensions")&&e(u,this.options.extensions),r(u,o,{extensions:n});var c=ha.toString(u);if(!c)return null;var h=ha.format(c);return h===""?null:h},t.prototype.readExtensions=function(o,a){var s=a;if(!a){var l=o.getProperties();for(const d in l)if(Object.hasOwnProperty.call(l,d)){const p=l[d];if(p instanceof Node){s=p;break}}}if(!s){console.warn("node not found !");return}for(var u=0;u<s.childNodes.length;u++){var c=s.childNodes[u];c.nodeType===1&&o.set(c.nodeName,c.textContent)}wn.APPLY_CONVERT_GEOM_GPX=!0;var h=wn.defineStyleFromProperties(o);h&&o.setStyle(h)},t.prototype.readRootExtensions=function(o){for(var a={},s=this.source.childNodes[0],l=s.childNodes,u=0;u<l.length;u++){var c=l[u];if(c.nodeName==="metadata")for(var h=c.childNodes,d=0;d<h.length;d++){var p=h[d];if(p.nodeName==="extensions")for(var f=p.childNodes,g=0;g<f.length;g++){var v=f[g];if(v.nodeName==="data"){var y=v.attributes[0];if(y&&y.nodeName==="name"&&y.nodeValue===o){a=JSON.parse(v.textContent);break}}}}}return a};function e(o,a,s){var l=document.createElement("metadata"),u=document.createElement("extensions");function c(f,g){for(const I in g)if(Object.hasOwnProperty.call(g,I)){var v=g[I]||"",y=document.createElement(I);if(typeof v=="string"||typeof v=="number")y.innerHTML=v,f.appendChild(y);else if(v instanceof Array){y.setAttribute("type","array"),y.setAttribute("index",v.length);for(let E=0;E<v.length;E++){var m=v[E]||"",A=document.createElement("value");if(typeof m=="string"||typeof m=="number")A.innerHTML=m,y.appendChild(A);else if(m instanceof Array){A.setAttribute("type","array"),A.setAttribute("index",m.length);for(let w=0;w<m.length;w++){var _=m[w]||"",C=document.createElement("value");(typeof _=="string"||typeof _=="number")&&(C.innerHTML=_,A.appendChild(C))}y.appendChild(A)}else m instanceof Object&&y.appendChild(c(A,m))}f.appendChild(y)}else v instanceof Object&&f.appendChild(c(y,v))}return f}if(s)c(u,a);else for(const f in a)if(Object.hasOwnProperty.call(a,f)){const g=a[f];var h=document.createElement("data");h.setAttribute("name",f);var d=document.createTextNode(JSON.stringify(g));h.appendChild(d),u.appendChild(h)}l.appendChild(u);var p=o.firstChild;o.insertBefore(l,p)}function n(o,a){var s=document.createElementNS(a.parentNode.namespaceURI,"extensions");wn.getListTags().forEach(l=>{if(o.get(l)){var u=document.createElementNS(a.parentNode.namespaceURI,l);u.innerHTML=o.get(l),s.appendChild(u)}}),a.appendChild(s)}function r(o,a,s){for(var l=-1,u=o.childNodes,c=0;c<u.length;c++){var h=u[c];switch(h.nodeName){case"wpt":case"rte":case"trk":l++;var d=a[l],p=d.getStyle();if(p){var f=s.extensions;f&&typeof f=="function"&&f(d,h)}break;case"metadata":break;default:console.warn("nodename unknown :",h.nodeName);break}}}return t}(Xb);window.ol&&window.ol.format&&(window.ol.format.GPXExtended=ks);var kn=function(i){function t(e){if(!(this instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this.options=e||{},(this.options.defaultStyle===null||typeof this.options.defaultStyle>"u")&&(this.options.defaultStyle={}),this.source=null,i.call(this,this.options)}return i&&(t.__proto__=i),t.prototype=Object.create(i.prototype,{}),t.prototype.constructor=t,t.prototype.readFeatures=function(e,n){var r=i.prototype.readFeatures.call(this,e,n);return typeof e=="string"?this.source=JSON.parse(e):e!==null&&(this.source=e),r.forEach(o=>{var a=o.getStyleFunction();if(a){var s=a.call(this,o,0);s&&s.length!==0&&o.setStyle(s[0])}else{var l=wn.defineStyleFromProperties(o);if(l)o.setStyle(l);else{var u=wn.defineStyleFunctionByDefault(this.options.defaultStyle);u&&(o.setStyle(u),wn.definePropertiesFromStyle(o))}}}),r},t.prototype.writeFeatures=function(e,n){e.forEach(function(o){wn.definePropertiesFromStyle(o)});var r=i.prototype.writeFeaturesObject.call(this,e,n);return this.options.hasOwnProperty("extensions")&&Object.assign(r,this.options.extensions),JSON.stringify(r)},t.prototype.readRootExtensions=function(e){return this.source[e]},t}(Hf);window.ol&&window.ol.format&&(window.ol.format.GeoJSONExtended=kn);var a0=function(i){function t(e){if(!(this instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");i.call(this,e)}return i&&(t.__proto__=i),t.prototype=Object.create(i.prototype,{}),t.prototype.constructor=t,t.prototype.getFeatureInfoUrl=function(e,n,r,o){var a=this.options&&this.options.tilePixelRatio?this.options.tilePixelRatio:1,s=this.tileGrid,l=this.tileGrid.getTileCoordForCoordAndResolution(e,n),u=function(_,C,I){var E=[0,0,0],w=pn(),S=_[1],x=_[2],T=C.getTileCoordExtent(_),L=I.getExtent();if(L!=null&&I.isGlobal()){var G=Math.ceil(Ct(L)/Ct(T));S=S%G,E[0]=_[0],E[1]=S,E[2]=_[2],T=C.getTileCoordExtent(E,w)}return Vt(T,L)?[_[0],S,x]:null},c=s.getTileCoordExtent(l),h=u(l,s,r);if(!(s.getResolutions().length<=l[0])){var d=s.getResolution(l[0]),p=s.getMatrixIds()[l[0]],f={SERVICE:"WMTS",VERSION:"1.0.0",REQUEST:"GetFeatureInfo",LAYER:this.getLayer(),TILECOL:h[1],TILEROW:h[2],TILEMATRIX:p,TILEMATRIXSET:this.getMatrixSet(),FORMAT:this.getFormat()||"image/png",STYLE:this.getStyle()||"normal"};he.assign(f,o);var g=Math.floor((e[0]-c[0])/(d/a)),v=Math.floor((c[3]-e[1])/(d/a)),y=s.getTileSize(l[0]);g=Math.min(g,(y[0]|y)-1),v=Math.max(v,0),f.I=g,f.J=v;var m=this.urls[0],A=tt.Helper.normalyzeUrl(m,f);return A}},t}(Xl);window.ol&&window.ol.source&&(window.ol.source.WMTSExtended=a0);var iA={getZoomLevelFromScaleDenominator:function(i,t){var e={};switch(t){case"EPSG:2154":e={0:104579.224549894,1:52277.5323537905,2:26135.4870785954,3:13066.8913818,4:6533.2286041135,5:3266.5595244627,6:1633.2660045974,7:816.629554986,8:408.3139146768,9:204.1567415109,10:102.0783167832,11:51.0391448966,12:25.5195690743,13:12.7597836936,14:6.379891636,15:3.1899457653,16:1.5949728695,17:.7974864315,18:.3987432149,19:.1993716073,20:.0996858037,21:.0498429018};break;default:e={0:156543.033928041,1:78271.51696402048,2:39135.758482010235,3:19567.87924100512,4:9783.93962050256,5:4891.96981025128,6:2445.98490512564,7:1222.99245256282,8:611.49622628141,9:305.7481131407048,10:152.8740565703525,11:76.43702828517624,12:38.21851414258813,13:19.10925707129406,14:9.554628535647032,15:4.777314267823516,16:2.388657133911758,17:1.194328566955879,18:.5971642834779395,19:.2985821417389697,20:.1492910708694849,21:.0746455354347424};break}var n=i*28e-5;for(var r in e)if(e.hasOwnProperty(r)&&e[r]<=n)return r=parseInt(r,10),r;return 0},getAttributions:function(i){var t=i.zoom,e=[];if(i.originators!=null&&i.visibility)for(var n,r=0,o=i.originators.length;r<o;r++){n=!0;for(var a=i.originators[r],s=i.originators[r].constraints||[],l=0,u=s.length;l<u;l++){var c=s[l];n=!0;var h=this.getZoomLevelFromScaleDenominator(c.maxScaleDenominator,i.crs),d=this.getZoomLevelFromScaleDenominator(c.minScaleDenominator,i.crs)||21;h&&h>t&&(n=!1),n&&d&&d<t&&(n=!1);var p=c.bbox;if(n&&p){n=!1;var f=i.extent;if(f){var g=[p.top,p.left,p.bottom,p.right];if(this.intersects(f,g)){n=!0;break}}}}if(n){var v=a.logo,y=a.url,m=a.name?a.name:"",A=a.attribution,_=document.createElement("div");_.className="gp-control-attribution";var C=null;C=document.createElement("a"),C.className="gp-control-attribution-link",C.target="_blank",_.appendChild(C),y&&(C.href=y);var I=!!v,E=null;I?(E=document.createElement("img"),C?(E.className="gp-control-attribution-image",C.appendChild(E)):(E.className="",_.appendChild(E)),E.src=v,E.title=A||m,E.style.height="30px",E.style.width="30px"):m?C.textContent=m:A?C.textContent=A:y?C.textContent=y:C.textContent="",e.push(_.innerHTML+" ")}}return e},intersects:function(i,t){var e=i[1]<=t[3]&&t[1]<=i[3],n=i[2]<=t[0]&&t[2]<=i[0];return e&&n}},Vi={configuration:{},isConfigLoaded:function(){if(this.configuration&&Object.keys(this.configuration).length!==0)return!0;var i=typeof window<"u"?window:typeof self<"u"?self:typeof global<"u"?global:{};return i.Gp&&i.Gp.Config&&i.Gp.Config.layers&&Object.keys(i.Gp.Config.layers).length!==0?(this.configuration=i.Gp.Config,!0):!1}},Zb=Ye.getLogger("sourcewmts"),s0=function(i){function t(e){if(!(this instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");if(typeof e.ssl>"u"&&(e.ssl=!0),!Vi.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var n=Vi.configuration.getLayerId(e.layer,"WMTS");if(n&&Vi.configuration.getLayerConf(n)){var r=Vi.configuration.getLayerParams(e.layer,"WMTS"),o=e.ssl===!1?"http://":"https://";this._originators=r.originators;var a={url:tt.Helper.normalyzeUrl(r.url.replace(/(http|https):\/\//,o),{"gp-ol-ext":Oc.olExtVersion||Oc.version},!1),version:r.version,style:r.styles,format:r.format,projection:r.projection,maxZoom:iA.getZoomLevelFromScaleDenominator(r.minScale),layer:e.layer,matrixSet:r.TMSLink,tileGrid:new Wf({resolutions:r.nativeResolutions,matrixIds:r.matrixIds,origin:[r.tileMatrices[0].topLeftCorner.x,r.tileMatrices[0].topLeftCorner.y]})};he.mergeParams(a,e.olParams),i.call(this,a),e.olParams&&!r.originators&&(r.originators=e.olParams.attributions),this._originators=r.originators,this._legends=e.legends||r.legends,this._metadata=e.metadata||r.metadata,this._description=e.description||r.description,this._title=e.title||r.title,this._quicklookUrl=e.quicklookUrl||r.quicklookUrl}else return Zb.log("[source WMTS] ERROR : "+e.layer+" cannot be found in Geoportal Configuration. Make sure that this resource is included in your contract key."),new i({})}return i&&(t.__proto__=i),t.prototype=Object.create(i.prototype,{}),t.prototype.constructor=t,t}(a0);window.ol&&window.ol.source&&(window.ol.source.GeoportalWMTS=s0);var Kb=Ye.getLogger("sourcewms"),l0=function(i){function t(e){if(!(this instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");if(typeof e.ssl>"u"&&(e.ssl=!0),!Vi.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var n=Vi.configuration.getLayerId(e.layer,"WMS");if(n&&Vi.configuration.getLayerConf(n)){var r=Vi.configuration.getLayerParams(e.layer,"WMS"),o=e.ssl===!1?"http://":"https://",a={url:tt.Helper.normalyzeUrl(r.url.replace(/(http|https):\/\//,o),{"gp-ol-ext":Oc.olExtVersion||Oc.version},!1),params:{SERVICE:"WMS",LAYERS:e.layer,VERSION:r.version,STYLES:r.styles,FORMAT:r.format}};he.mergeParams(a,e.olParams),i.call(this,a),e.olParams&&!r.originators&&(r.originators=e.olParams.attributions),this._originators=r.originators,this._legends=e.legends||r.legends,this._metadata=e.metadata||r.metadata,this._title=e.title||r.title,this._description=e.description||r.description,this._quicklookUrl=e.quicklookUrl||r.quicklookUrl}else return Kb.log("[source WMS] ERROR : "+e.layer+" cannot be found in Geoportal Configuration. Make sure that this resource is included in your contract key."),new i({})}return i&&(t.__proto__=i),t.prototype=Object.create(i.prototype,{}),t.prototype.constructor=t,t}(qf);window.ol&&window.ol.source&&(window.ol.source.GeoportalWMS=l0);var nA=function(i){function t(e){if(!(this instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");if(typeof e.ssl>"u"&&(e.ssl=!0),!Vi.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var n;e.olParams&&e.olParams.sourceParams&&(n=e.olParams.sourceParams);var r=new s0({layer:e.layer,ssl:e.ssl,apiKey:e.apiKey,olParams:n}),o={source:r};if(r.getLayer()!==void 0){var a=Vi.configuration.getLayerId(e.layer,"WMTS"),s=Vi.configuration.getGlobalConstraints(a);if(s&&s.projection){var l;typeof s.projection=="string"&&(l=Ee(s.projection)),l&&l.getUnits()&&(l.getUnits()==="m"?(o.minResolution=(s.minScale-1)*28e-5,o.maxResolution=(s.maxScale+1)*28e-5):l.getUnits()==="degrees"&&(o.minResolution=(s.minScale-1)*28e-5*180/(Math.PI*6378137),o.maxResolution=(s.maxScale+1)*28e-5*180/(Math.PI*6378137)))}}he.mergeParams(o,e.olParams),i.call(this,o)}return i&&(t.__proto__=i),t.prototype=Object.create(i.prototype,{}),t.prototype.constructor=t,t}(xs);window.ol&&window.ol.layer&&(window.ol.layer.GeoportalWMTS=nA);var rA=function(i){function t(e){if(!(this instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");if(typeof e.ssl>"u"&&(e.ssl=!0),!Vi.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var n;e.olParams&&e.olParams.sourceParams&&(n=e.olParams.sourceParams);var r=new l0({layer:e.layer,ssl:e.ssl,apiKey:e.apiKey,olParams:n}),o={source:r};if(r.getParams().LAYERS!==void 0){var a=Vi.configuration.getLayerId(e.layer,"WMS"),s=Vi.configuration.getGlobalConstraints(a);if(n&&n.projection){var l=[s.extent.left,s.extent.bottom,s.extent.right,s.extent.top];o.extent=vr(l,"EPSG:4326",n.projection);var u;typeof n.projection=="string"?u=Ee(n.projection):typeof n.projection=="object"&&n.projection.getCode()&&(u=Ee(n.projection.getCode())),u&&u.getUnits()&&(u.getUnits()==="m"?(o.minResolution=(s.minScale-1)*28e-5,o.maxResolution=(s.maxScale+1)*28e-5):u.getUnits()==="degrees"&&(o.minResolution=(s.minScale-1)*28e-5*180/(Math.PI*6378137),o.maxResolution=(s.maxScale+1)*28e-5*180/(Math.PI*6378137)))}}he.mergeParams(o,e.olParams),i.call(this,o)}return i&&(t.__proto__=i),t.prototype=Object.create(i.prototype,{}),t.prototype.constructor=t,t}(xs);window.ol&&window.ol.layer&&(window.ol.layer.GeoportalWMS=rA);const wo={IMAGE:"image",HYBRID:"hybrid",VECTOR:"vector"};var Jb=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Qb={image:[Ke.POLYGON,Ke.CIRCLE,Ke.LINE_STRING,Ke.IMAGE,Ke.TEXT],hybrid:[Ke.POLYGON,Ke.LINE_STRING],vector:[]},$b={hybrid:[Ke.IMAGE,Ke.TEXT,Ke.DEFAULT],vector:[Ke.POLYGON,Ke.CIRCLE,Ke.LINE_STRING,Ke.IMAGE,Ke.TEXT,Ke.DEFAULT]},eR=function(i){Jb(t,i);function t(e){var n=i.call(this,e)||this;return n.boundHandleStyleImageChange_=n.handleStyleImageChange_.bind(n),n.dirty_=!1,n.renderedLayerRevision_,n.renderedPixelToCoordinateTransform_=null,n.renderedRotation_,n.tmpTransform_=Dn(),n}return t.prototype.prepareTile=function(e,n,r){var o,a=e.getState();return(a===oe.LOADED||a===oe.ERROR)&&(this.updateExecutorGroup_(e,n,r),this.tileImageNeedsRender_(e)&&(o=!0)),o},t.prototype.getTile=function(e,n,r,o){var a=o.pixelRatio,s=o.viewState,l=s.resolution,u=s.projection,c=this.getLayer(),h=c.getSource().getTile(e,n,r,a,u),d=o.viewHints,p=!(d[jt.ANIMATING]||d[jt.INTERACTING]);(p||!h.wantedResolution)&&(h.wantedResolution=l);var f=this.prepareTile(h,a,u);return f&&(p||Date.now()-o.time<8)&&c.getRenderMode()!==wo.VECTOR&&this.renderTileImage_(h,o),i.prototype.getTile.call(this,e,n,r,o)},t.prototype.isDrawableTile=function(e){var n=this.getLayer();return i.prototype.isDrawableTile.call(this,e)&&(n.getRenderMode()===wo.VECTOR?_e(n)in e.executorGroups:e.hasContext(n))},t.prototype.getTileImage=function(e){return e.getImage(this.getLayer())},t.prototype.prepareFrame=function(e){var n=this.getLayer().getRevision();return this.renderedLayerRevision_!=n&&(this.renderedTiles.length=0),this.renderedLayerRevision_=n,i.prototype.prepareFrame.call(this,e)},t.prototype.updateExecutorGroup_=function(e,n,r){var o=this.getLayer(),a=o.getRevision(),s=o.getRenderOrder()||null,l=e.wantedResolution,u=e.getReplayState(o);if(!(!u.dirty&&u.renderedResolution===l&&u.renderedRevision==a&&u.renderedRenderOrder==s)){var c=o.getSource(),h=o.getDeclutter(),d=c.getTileGrid(),p=c.getTileGridForProjection(r),f=p.getTileCoordExtent(e.wrappedTileCoord),g=c.getSourceTiles(n,r,e),v=_e(o);delete e.hitDetectionImageData[v],e.executorGroups[v]=[],h&&(e.declutterExecutorGroups[v]=[]);for(var y=function(C,I){var E=g[C];if(E.getState()!=oe.LOADED)return"continue";var w=E.tileCoord,S=d.getTileCoordExtent(w),x=xo(f,S),T=Jn(x,o.getRenderBuffer()*l,m.tmpExtent),L=ya(S,x)?null:T;u.dirty=!1;var G=new Mc(0,T,l,n),N=h?new Mc(0,x,l,n):void 0,B=Km(l,n),U=function(K){var Q,me=K.getStyleFunction()||o.getStyleFunction();if(me&&(Q=me(K,l)),Q){var pe=this.renderFeature(K,B,Q,G,N);this.dirty_=this.dirty_||pe,u.dirty=u.dirty||pe}},D=E.getFeatures();s&&s!==u.renderedRenderOrder&&D.sort(s);for(var z=0,F=D.length;z<F;++z){var O=D[z];(!L||Vt(L,O.getGeometry().getExtent()))&&U.call(m,O)}var R=G.finish(),M=o.getRenderMode()!==wo.VECTOR&&h&&g.length===1?null:x,ie=new Tc(M,l,n,c.getOverlaps(),R,o.getRenderBuffer());if(e.executorGroups[v].push(ie),N){var Y=new Tc(null,l,n,c.getOverlaps(),N.finish(),o.getRenderBuffer());e.declutterExecutorGroups[v].push(Y)}},m=this,A=0,_=g.length;A<_;++A)y(A);u.renderedRevision=a,u.renderedRenderOrder=s,u.renderedResolution=l}},t.prototype.forEachFeatureAtCoordinate=function(e,n,r,o,a){var s=n.viewState.resolution,l=n.viewState.rotation;r=r??0;var u=this.getLayer(),c=u.getSource(),h=c.getTileGridForProjection(n.viewState.projection),d=Cn([e]);Jn(d,s*r,d);for(var p={},f=function(_,C,I){var E=_.getId();E===void 0&&(E=_e(_));var w=p[E];if(w){if(w!==!0&&I<w.distanceSq){if(I===0)return p[E]=!0,a.splice(a.lastIndexOf(w),1),o(_,u,C);w.geometry=C,w.distanceSq=I}}else{if(I===0)return p[E]=!0,o(_,u,C);a.push(p[E]={feature:_,layer:u,geometry:C,distanceSq:I,callback:o})}},g=this.renderedTiles,v,y=function(_,C){var I=g[_],E=h.getTileCoordExtent(I.wrappedTileCoord);if(!Vt(E,d))return"continue";var w=_e(u),S=[I.executorGroups[w]],x=I.declutterExecutorGroups[w];x&&S.push(x),S.some(function(T){for(var L=T===x?n.declutterTree.all().map(function(U){return U.value}):null,G=0,N=T.length;G<N;++G){var B=T[G];if(v=B.forEachFeatureAtCoordinate(e,s,l,r,f,L),v)return!0}})},m=0,A=g.length;!v&&m<A;++m)y(m);return v},t.prototype.getFeatures=function(e){return new Promise((function(n,r){for(var o=this.getLayer(),a=_e(o),s=o.getSource(),l=this.renderedProjection,u=l.getExtent(),c=this.renderedResolution,h=s.getTileGridForProjection(l),d=ei(this.renderedPixelToCoordinateTransform_,e.slice()),p=h.getTileCoordForCoordAndResolution(d,c),f,g=0,v=this.renderedTiles.length;g<v;++g)if(p.toString()===this.renderedTiles[g].tileCoord.toString()){if(f=this.renderedTiles[g],f.getState()===oe.LOADED){var y=h.getTileCoordExtent(f.tileCoord);s.getWrapX()&&l.canWrapX()&&!zr(u,y)&&lf(d,l);break}f=void 0}if(!f||f.loadingSourceTiles>0){n([]);return}var m=h.getTileCoordExtent(f.wrappedTileCoord),A=Uo(m),_=[(d[0]-A[0])/c,(A[1]-d[1])/c],C=f.getSourceTiles().reduce(function(x,T){return x.concat(T.getFeatures())},[]),I=f.hitDetectionImageData[a];if(!I&&!this.animatingOrInteracting_){var E=Bi(h.getTileSize(h.getZForResolution(c))),w=this.renderedRotation_,S=[this.getRenderTransform(h.getTileCoordCenter(f.wrappedTileCoord),c,0,En,E[0]*En,E[1]*En,0)];I=qm(E,S,C,o.getStyleFunction(),h.getTileCoordExtent(f.wrappedTileCoord),f.getReplayState(o).renderedResolution,w),f.hitDetectionImageData[a]=I}n(Xm(_,C,I))}).bind(this))},t.prototype.handleFontsChanged=function(){var e=this.getLayer();e.getVisible()&&this.renderedLayerRevision_!==void 0&&e.changed()},t.prototype.handleStyleImageChange_=function(e){this.renderIfReadyAndVisible()},t.prototype.renderDeclutter=function(e){var n=this.context,r=n.globalAlpha;n.globalAlpha=this.getLayer().getOpacity();for(var o=e.viewHints,a=!(o[jt.ANIMATING]||o[jt.INTERACTING]),s=this.renderedTiles,l=0,u=s.length;l<u;++l){var c=s[l],h=c.declutterExecutorGroups[_e(this.getLayer())];if(h)for(var d=h.length-1;d>=0;--d)h[d].execute(this.context,1,this.getTileRenderTransform(c,e),e.viewState.rotation,a,void 0,e.declutterTree)}n.globalAlpha=r},t.prototype.getTileRenderTransform=function(e,n){var r=n.pixelRatio,o=n.viewState,a=o.center,s=o.resolution,l=o.rotation,u=n.size,c=Math.round(u[0]*r),h=Math.round(u[1]*r),d=this.getLayer().getSource(),p=d.getTileGridForProjection(n.viewState.projection),f=e.tileCoord,g=p.getTileCoordExtent(e.wrappedTileCoord),v=p.getTileCoordExtent(f,this.tmpExtent)[0]-g[0],y=Qp(sd(this.inversePixelTransform.slice(),1/r,1/r),this.getRenderTransform(a,s,l,r,c,h,v));return y},t.prototype.renderFrame=function(e,n){var r=e.viewHints,o=!(r[jt.ANIMATING]||r[jt.INTERACTING]);i.prototype.renderFrame.call(this,e,n),this.renderedPixelToCoordinateTransform_=e.pixelToCoordinateTransform.slice(),this.renderedRotation_=e.viewState.rotation;var a=this.getLayer(),s=a.getRenderMode(),l=this.context,u=l.globalAlpha;l.globalAlpha=a.getOpacity();for(var c=$b[s],h=e.viewState,d=h.rotation,p=this.renderedTiles,f=[],g=[],v=p.length-1;v>=0;--v)for(var y=p[v],m=this.getTileRenderTransform(y,e),A=y.executorGroups[_e(a)],_=!1,C=0,I=A.length;C<I;++C){var E=A[C];if(E.hasExecutors(c)){var w=y.tileCoord[0],S=void 0;if(!_&&(S=E.getClipCoords(m),S)){l.save();for(var x=0,T=f.length;x<T;++x){var L=f[x];w<g[x]&&(l.beginPath(),l.moveTo(S[0],S[1]),l.lineTo(S[2],S[3]),l.lineTo(S[4],S[5]),l.lineTo(S[6],S[7]),l.moveTo(L[6],L[7]),l.lineTo(L[4],L[5]),l.lineTo(L[2],L[3]),l.lineTo(L[0],L[1]),l.clip())}}E.execute(l,1,m,d,o,c),!_&&S&&(l.restore(),f.push(S),g.push(w),_=!0)}}return l.globalAlpha=u,this.container},t.prototype.renderFeature=function(e,n,r,o,a){if(!r)return!1;var s=!1;if(Array.isArray(r))for(var l=0,u=r.length;l<u;++l)s=bc(o,e,r[l],n,this.boundHandleStyleImageChange_,void 0,a)||s;else s=bc(o,e,r,n,this.boundHandleStyleImageChange_,void 0,a);return s},t.prototype.tileImageNeedsRender_=function(e){var n=this.getLayer();if(n.getRenderMode()===wo.VECTOR)return!1;var r=e.getReplayState(n),o=n.getRevision(),a=e.wantedResolution;return r.renderedTileResolution!==a||r.renderedTileRevision!==o},t.prototype.renderTileImage_=function(e,n){var r=this.getLayer(),o=e.getReplayState(r),a=r.getRevision(),s=e.executorGroups[_e(r)];o.renderedTileRevision=a;var l=e.wrappedTileCoord,u=l[0],c=r.getSource(),h=n.pixelRatio,d=n.viewState,p=d.projection,f=c.getTileGridForProjection(p),g=f.getResolution(e.tileCoord[0]),v=n.pixelRatio/e.wantedResolution*g,y=f.getResolution(u),m=e.getContext(r);h=Math.round(Math.max(h,v/h));var A=c.getTilePixelSize(u,h,p);m.canvas.width=A[0],m.canvas.height=A[1];var _=h/v;if(_!==1){var C=$0(this.tmpTransform_);sd(C,_,_),m.setTransform.apply(m,C)}var I=f.getTileCoordExtent(l,this.tmpExtent),E=v/y,w=$0(this.tmpTransform_);sd(w,E,-E),mC(w,-I[0],-I[3]);for(var S=0,x=s.length;S<x;++S){var T=s[S];T.execute(m,_,w,0,!0,Qb[r.getRenderMode()])}o.renderedTileResolution=e.wantedResolution},t}(ay);const tR=eR;var iR=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),nR=function(i){iR(t,i);function t(e){var n=this,r=e||{},o=dt({},r);delete o.preload,delete o.useInterimTilesOnError,n=i.call(this,o)||this,n.on,n.once,n.un,r.renderMode===wo.IMAGE&&(console.warn('renderMode: "image" is deprecated. Option ignored.'),r.renderMode=void 0);var a=r.renderMode||wo.HYBRID;return be(a==wo.HYBRID||a==wo.VECTOR,28),n.renderMode_=a,n.setPreload(r.preload?r.preload:0),n.setUseInterimTilesOnError(r.useInterimTilesOnError!==void 0?r.useInterimTilesOnError:!0),n}return t.prototype.createRenderer=function(){return new tR(this)},t.prototype.getFeatures=function(e){return i.prototype.getFeatures.call(this,e)},t.prototype.getRenderMode=function(){return this.renderMode_},t.prototype.getPreload=function(){return this.get(Ao.PRELOAD)},t.prototype.getUseInterimTilesOnError=function(){return this.get(Ao.USE_INTERIM_TILES_ON_ERROR)},t.prototype.setPreload=function(e){this.set(Ao.PRELOAD,e)},t.prototype.setUseInterimTilesOnError=function(e){this.set(Ao.USE_INTERIM_TILES_ON_ERROR,e)},t}(zm);const bl=nR;var oA=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();function rR(i,t,e,n){var r=document.createElement("script"),o="olc_"+_e(t);function a(){delete window[o],r.parentNode.removeChild(r)}r.async=!0,r.src=i+(i.indexOf("?")==-1?"?":"&")+(n||"callback")+"="+o;var s=setTimeout(function(){a(),e&&e()},1e4);window[o]=function(l){clearTimeout(s),a(),t(l)},document.getElementsByTagName("head")[0].appendChild(r)}(function(i){oA(t,i);function t(e){var n=this,r="Unexpected response status: "+e.status;return n=i.call(this,r)||this,n.name="ResponseError",n.response=e,n}return t})(Error);(function(i){oA(t,i);function t(e){var n=i.call(this,"Failed to issue request")||this;return n.name="ClientError",n.client=e,n}return t})(Error);var oR=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),aR=function(i){oR(t,i);function t(e){var n=i.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,imageSmoothing:e.imageSmoothing,projection:Ee("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:Ar.LOADING,tileLoadFunction:e.tileLoadFunction,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection})||this;if(n.tileJSON_=null,n.tileSize_=e.tileSize,e.url)if(e.jsonp)rR(e.url,n.handleTileJSONResponse.bind(n),n.handleTileJSONError.bind(n));else{var r=new XMLHttpRequest;r.addEventListener("load",n.onXHRLoad_.bind(n)),r.addEventListener("error",n.onXHRError_.bind(n)),r.open("GET",e.url),r.send()}else e.tileJSON?n.handleTileJSONResponse(e.tileJSON):be(!1,51);return n}return t.prototype.onXHRLoad_=function(e){var n=e.target;if(!n.status||n.status>=200&&n.status<300){var r=void 0;try{r=JSON.parse(n.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(r)}else this.handleTileJSONError()},t.prototype.onXHRError_=function(e){this.handleTileJSONError()},t.prototype.getTileJSON=function(){return this.tileJSON_},t.prototype.handleTileJSONResponse=function(e){var n=Ee("EPSG:4326"),r=this.getProjection(),o;if(e.bounds!==void 0){var a=Eh(n,r);o=of(e.bounds,a)}var s=Mh(r),l=e.minzoom||0,u=e.maxzoom||22,c=Rc({extent:s,maxZoom:u,minZoom:l,tileSize:this.tileSize_});if(this.tileGrid=c,this.tileUrlFunction=my(e.tiles,c),e.attribution!==void 0&&!this.getAttributions()){var h=o!==void 0?o:s;this.setAttributions(function(d){return Vt(h,d.extent)?[e.attribution]:null})}this.tileJSON_=e,this.setState(Ar.READY)},t.prototype.handleTileJSONError=function(){this.setState(Ar.ERROR)},t}(Vf);const aA=aR;var u0={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */u0.read=function(i,t,e,n,r){var o,a,s=r*8-n-1,l=(1<<s)-1,u=l>>1,c=-7,h=e?r-1:0,d=e?-1:1,p=i[t+h];for(h+=d,o=p&(1<<-c)-1,p>>=-c,c+=s;c>0;o=o*256+i[t+h],h+=d,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=n;c>0;a=a*256+i[t+h],h+=d,c-=8);if(o===0)o=1-u;else{if(o===l)return a?NaN:(p?-1:1)*(1/0);a=a+Math.pow(2,n),o=o-u}return(p?-1:1)*a*Math.pow(2,o-n)};u0.write=function(i,t,e,n,r,o){var a,s,l,u=o*8-r-1,c=(1<<u)-1,h=c>>1,d=r===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,f=n?1:-1,g=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),a+h>=1?t+=d/l:t+=d*Math.pow(2,1-h),t*l>=2&&(a++,l/=2),a+h>=c?(s=0,a=c):a+h>=1?(s=(t*l-1)*Math.pow(2,r),a=a+h):(s=t*Math.pow(2,h-1)*Math.pow(2,r),a=0));r>=8;i[e+p]=s&255,p+=f,s/=256,r-=8);for(a=a<<r|s,u+=r;u>0;i[e+p]=a&255,p+=f,a/=256,u-=8);i[e+p-f]|=g*128};var sR=ct,Wu=u0;function ct(i){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(i)?i:new Uint8Array(i||0),this.pos=0,this.type=0,this.length=this.buf.length}ct.Varint=0;ct.Fixed64=1;ct.Bytes=2;ct.Fixed32=5;var Rp=65536*65536,$g=1/Rp,lR=12,sA=typeof TextDecoder>"u"?null:new TextDecoder("utf8");ct.prototype={destroy:function(){this.buf=null},readFields:function(i,t,e){for(e=e||this.length;this.pos<e;){var n=this.readVarint(),r=n>>3,o=this.pos;this.type=n&7,i(r,t,this),this.pos===o&&this.skip(n)}return t},readMessage:function(i,t){return this.readFields(i,t,this.readVarint()+this.pos)},readFixed32:function(){var i=Yu(this.buf,this.pos);return this.pos+=4,i},readSFixed32:function(){var i=tv(this.buf,this.pos);return this.pos+=4,i},readFixed64:function(){var i=Yu(this.buf,this.pos)+Yu(this.buf,this.pos+4)*Rp;return this.pos+=8,i},readSFixed64:function(){var i=Yu(this.buf,this.pos)+tv(this.buf,this.pos+4)*Rp;return this.pos+=8,i},readFloat:function(){var i=Wu.read(this.buf,this.pos,!0,23,4);return this.pos+=4,i},readDouble:function(){var i=Wu.read(this.buf,this.pos,!0,52,8);return this.pos+=8,i},readVarint:function(i){var t=this.buf,e,n;return n=t[this.pos++],e=n&127,n<128||(n=t[this.pos++],e|=(n&127)<<7,n<128)||(n=t[this.pos++],e|=(n&127)<<14,n<128)||(n=t[this.pos++],e|=(n&127)<<21,n<128)?e:(n=t[this.pos],e|=(n&15)<<28,uR(e,i,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var i=this.readVarint();return i%2===1?(i+1)/-2:i/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var i=this.readVarint()+this.pos,t=this.pos;return this.pos=i,i-t>=lR&&sA?ER(this.buf,t,i):IR(this.buf,t,i)},readBytes:function(){var i=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,i);return this.pos=i,t},readPackedVarint:function(i,t){if(this.type!==ct.Bytes)return i.push(this.readVarint(t));var e=Dr(this);for(i=i||[];this.pos<e;)i.push(this.readVarint(t));return i},readPackedSVarint:function(i){if(this.type!==ct.Bytes)return i.push(this.readSVarint());var t=Dr(this);for(i=i||[];this.pos<t;)i.push(this.readSVarint());return i},readPackedBoolean:function(i){if(this.type!==ct.Bytes)return i.push(this.readBoolean());var t=Dr(this);for(i=i||[];this.pos<t;)i.push(this.readBoolean());return i},readPackedFloat:function(i){if(this.type!==ct.Bytes)return i.push(this.readFloat());var t=Dr(this);for(i=i||[];this.pos<t;)i.push(this.readFloat());return i},readPackedDouble:function(i){if(this.type!==ct.Bytes)return i.push(this.readDouble());var t=Dr(this);for(i=i||[];this.pos<t;)i.push(this.readDouble());return i},readPackedFixed32:function(i){if(this.type!==ct.Bytes)return i.push(this.readFixed32());var t=Dr(this);for(i=i||[];this.pos<t;)i.push(this.readFixed32());return i},readPackedSFixed32:function(i){if(this.type!==ct.Bytes)return i.push(this.readSFixed32());var t=Dr(this);for(i=i||[];this.pos<t;)i.push(this.readSFixed32());return i},readPackedFixed64:function(i){if(this.type!==ct.Bytes)return i.push(this.readFixed64());var t=Dr(this);for(i=i||[];this.pos<t;)i.push(this.readFixed64());return i},readPackedSFixed64:function(i){if(this.type!==ct.Bytes)return i.push(this.readSFixed64());var t=Dr(this);for(i=i||[];this.pos<t;)i.push(this.readSFixed64());return i},skip:function(i){var t=i&7;if(t===ct.Varint)for(;this.buf[this.pos++]>127;);else if(t===ct.Bytes)this.pos=this.readVarint()+this.pos;else if(t===ct.Fixed32)this.pos+=4;else if(t===ct.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+t)},writeTag:function(i,t){this.writeVarint(i<<3|t)},realloc:function(i){for(var t=this.length||16;t<this.pos+i;)t*=2;if(t!==this.length){var e=new Uint8Array(t);e.set(this.buf),this.buf=e,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(i){this.realloc(4),qa(this.buf,i,this.pos),this.pos+=4},writeSFixed32:function(i){this.realloc(4),qa(this.buf,i,this.pos),this.pos+=4},writeFixed64:function(i){this.realloc(8),qa(this.buf,i&-1,this.pos),qa(this.buf,Math.floor(i*$g),this.pos+4),this.pos+=8},writeSFixed64:function(i){this.realloc(8),qa(this.buf,i&-1,this.pos),qa(this.buf,Math.floor(i*$g),this.pos+4),this.pos+=8},writeVarint:function(i){if(i=+i||0,i>268435455||i<0){cR(i,this);return}this.realloc(4),this.buf[this.pos++]=i&127|(i>127?128:0),!(i<=127)&&(this.buf[this.pos++]=(i>>>=7)&127|(i>127?128:0),!(i<=127)&&(this.buf[this.pos++]=(i>>>=7)&127|(i>127?128:0),!(i<=127)&&(this.buf[this.pos++]=i>>>7&127)))},writeSVarint:function(i){this.writeVarint(i<0?-i*2-1:i*2)},writeBoolean:function(i){this.writeVarint(!!i)},writeString:function(i){i=String(i),this.realloc(i.length*4),this.pos++;var t=this.pos;this.pos=wR(this.buf,i,this.pos);var e=this.pos-t;e>=128&&ev(t,e,this),this.pos=t-1,this.writeVarint(e),this.pos+=e},writeFloat:function(i){this.realloc(4),Wu.write(this.buf,i,this.pos,!0,23,4),this.pos+=4},writeDouble:function(i){this.realloc(8),Wu.write(this.buf,i,this.pos,!0,52,8),this.pos+=8},writeBytes:function(i){var t=i.length;this.writeVarint(t),this.realloc(t);for(var e=0;e<t;e++)this.buf[this.pos++]=i[e]},writeRawMessage:function(i,t){this.pos++;var e=this.pos;i(t,this);var n=this.pos-e;n>=128&&ev(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeMessage:function(i,t,e){this.writeTag(i,ct.Bytes),this.writeRawMessage(t,e)},writePackedVarint:function(i,t){t.length&&this.writeMessage(i,pR,t)},writePackedSVarint:function(i,t){t.length&&this.writeMessage(i,fR,t)},writePackedBoolean:function(i,t){t.length&&this.writeMessage(i,mR,t)},writePackedFloat:function(i,t){t.length&&this.writeMessage(i,gR,t)},writePackedDouble:function(i,t){t.length&&this.writeMessage(i,vR,t)},writePackedFixed32:function(i,t){t.length&&this.writeMessage(i,yR,t)},writePackedSFixed32:function(i,t){t.length&&this.writeMessage(i,AR,t)},writePackedFixed64:function(i,t){t.length&&this.writeMessage(i,_R,t)},writePackedSFixed64:function(i,t){t.length&&this.writeMessage(i,CR,t)},writeBytesField:function(i,t){this.writeTag(i,ct.Bytes),this.writeBytes(t)},writeFixed32Field:function(i,t){this.writeTag(i,ct.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(i,t){this.writeTag(i,ct.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(i,t){this.writeTag(i,ct.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(i,t){this.writeTag(i,ct.Fixed64),this.writeSFixed64(t)},writeVarintField:function(i,t){this.writeTag(i,ct.Varint),this.writeVarint(t)},writeSVarintField:function(i,t){this.writeTag(i,ct.Varint),this.writeSVarint(t)},writeStringField:function(i,t){this.writeTag(i,ct.Bytes),this.writeString(t)},writeFloatField:function(i,t){this.writeTag(i,ct.Fixed32),this.writeFloat(t)},writeDoubleField:function(i,t){this.writeTag(i,ct.Fixed64),this.writeDouble(t)},writeBooleanField:function(i,t){this.writeVarintField(i,!!t)}};function uR(i,t,e){var n=e.buf,r,o;if(o=n[e.pos++],r=(o&112)>>4,o<128||(o=n[e.pos++],r|=(o&127)<<3,o<128)||(o=n[e.pos++],r|=(o&127)<<10,o<128)||(o=n[e.pos++],r|=(o&127)<<17,o<128)||(o=n[e.pos++],r|=(o&127)<<24,o<128)||(o=n[e.pos++],r|=(o&1)<<31,o<128))return Ha(i,r,t);throw new Error("Expected varint not more than 10 bytes")}function Dr(i){return i.type===ct.Bytes?i.readVarint()+i.pos:i.pos+1}function Ha(i,t,e){return e?t*4294967296+(i>>>0):(t>>>0)*4294967296+(i>>>0)}function cR(i,t){var e,n;if(i>=0?(e=i%4294967296|0,n=i/4294967296|0):(e=~(-i%4294967296),n=~(-i/4294967296),e^4294967295?e=e+1|0:(e=0,n=n+1|0)),i>=18446744073709552e3||i<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),hR(e,n,t),dR(n,t)}function hR(i,t,e){e.buf[e.pos++]=i&127|128,i>>>=7,e.buf[e.pos++]=i&127|128,i>>>=7,e.buf[e.pos++]=i&127|128,i>>>=7,e.buf[e.pos++]=i&127|128,i>>>=7,e.buf[e.pos]=i&127}function dR(i,t){var e=(i&7)<<4;t.buf[t.pos++]|=e|((i>>>=3)?128:0),i&&(t.buf[t.pos++]=i&127|((i>>>=7)?128:0),i&&(t.buf[t.pos++]=i&127|((i>>>=7)?128:0),i&&(t.buf[t.pos++]=i&127|((i>>>=7)?128:0),i&&(t.buf[t.pos++]=i&127|((i>>>=7)?128:0),i&&(t.buf[t.pos++]=i&127)))))}function ev(i,t,e){var n=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(Math.LN2*7));e.realloc(n);for(var r=e.pos-1;r>=i;r--)e.buf[r+n]=e.buf[r]}function pR(i,t){for(var e=0;e<i.length;e++)t.writeVarint(i[e])}function fR(i,t){for(var e=0;e<i.length;e++)t.writeSVarint(i[e])}function gR(i,t){for(var e=0;e<i.length;e++)t.writeFloat(i[e])}function vR(i,t){for(var e=0;e<i.length;e++)t.writeDouble(i[e])}function mR(i,t){for(var e=0;e<i.length;e++)t.writeBoolean(i[e])}function yR(i,t){for(var e=0;e<i.length;e++)t.writeFixed32(i[e])}function AR(i,t){for(var e=0;e<i.length;e++)t.writeSFixed32(i[e])}function _R(i,t){for(var e=0;e<i.length;e++)t.writeFixed64(i[e])}function CR(i,t){for(var e=0;e<i.length;e++)t.writeSFixed64(i[e])}function Yu(i,t){return(i[t]|i[t+1]<<8|i[t+2]<<16)+i[t+3]*16777216}function qa(i,t,e){i[e]=t,i[e+1]=t>>>8,i[e+2]=t>>>16,i[e+3]=t>>>24}function tv(i,t){return(i[t]|i[t+1]<<8|i[t+2]<<16)+(i[t+3]<<24)}function IR(i,t,e){for(var n="",r=t;r<e;){var o=i[r],a=null,s=o>239?4:o>223?3:o>191?2:1;if(r+s>e)break;var l,u,c;s===1?o<128&&(a=o):s===2?(l=i[r+1],(l&192)===128&&(a=(o&31)<<6|l&63,a<=127&&(a=null))):s===3?(l=i[r+1],u=i[r+2],(l&192)===128&&(u&192)===128&&(a=(o&15)<<12|(l&63)<<6|u&63,(a<=2047||a>=55296&&a<=57343)&&(a=null))):s===4&&(l=i[r+1],u=i[r+2],c=i[r+3],(l&192)===128&&(u&192)===128&&(c&192)===128&&(a=(o&15)<<18|(l&63)<<12|(u&63)<<6|c&63,(a<=65535||a>=1114112)&&(a=null))),a===null?(a=65533,s=1):a>65535&&(a-=65536,n+=String.fromCharCode(a>>>10&1023|55296),a=56320|a&1023),n+=String.fromCharCode(a),r+=s}return n}function ER(i,t,e){return sA.decode(i.subarray(t,e))}function wR(i,t,e){for(var n=0,r,o;n<t.length;n++){if(r=t.charCodeAt(n),r>55295&&r<57344)if(o)if(r<56320){i[e++]=239,i[e++]=191,i[e++]=189,o=r;continue}else r=o-55296<<10|r-56320|65536,o=null;else{r>56319||n+1===t.length?(i[e++]=239,i[e++]=191,i[e++]=189):o=r;continue}else o&&(i[e++]=239,i[e++]=191,i[e++]=189,o=null);r<128?i[e++]=r:(r<2048?i[e++]=r>>6|192:(r<65536?i[e++]=r>>12|224:(i[e++]=r>>18|240,i[e++]=r>>12&63|128),i[e++]=r>>6&63|128),i[e++]=r&63|128)}return e}const SR=fu(sR);var iv=Dn(),eu=function(){function i(t,e,n,r,o){this.extent_,this.id_=o,this.type_=t,this.flatCoordinates_=e,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=n,this.properties_=r}return i.prototype.get=function(t){return this.properties_[t]},i.prototype.getExtent=function(){return this.extent_||(this.extent_=this.type_===b.POINT?Il(this.flatCoordinates_):tf(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_},i.prototype.getFlatInteriorPoint=function(){if(!this.flatInteriorPoints_){var t=Sr(this.getExtent());this.flatInteriorPoints_=Pf(this.flatCoordinates_,0,this.ends_,2,t,0)}return this.flatInteriorPoints_},i.prototype.getFlatInteriorPoints=function(){if(!this.flatInteriorPoints_){var t=Um(this.flatCoordinates_,0,this.ends_,2);this.flatInteriorPoints_=Pm(this.flatCoordinates_,0,this.ends_,2,t)}return this.flatInteriorPoints_},i.prototype.getFlatMidpoint=function(){return this.flatMidpoints_||(this.flatMidpoints_=Sc(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_},i.prototype.getFlatMidpoints=function(){if(!this.flatMidpoints_){this.flatMidpoints_=[];for(var t=this.flatCoordinates_,e=0,n=this.ends_,r=0,o=n.length;r<o;++r){var a=n[r],s=Sc(t,e,a,2,.5);St(this.flatMidpoints_,s),e=a}}return this.flatMidpoints_},i.prototype.getId=function(){return this.id_},i.prototype.getOrientedFlatCoordinates=function(){return this.flatCoordinates_},i.prototype.getGeometry=function(){return this},i.prototype.getSimplifiedGeometry=function(t){return this},i.prototype.simplifyTransformed=function(t,e){return this},i.prototype.getProperties=function(){return this.properties_},i.prototype.getStride=function(){return 2},i.prototype.getStyleFunction=function(){},i.prototype.getType=function(){return this.type_},i.prototype.transform=function(t){t=Ee(t);var e=t.getExtent(),n=t.getWorldExtent();if(e&&n){var r=Ti(n)/Ti(e);wr(iv,n[0],n[3],r,-r,0,0,0),bo(this.flatCoordinates_,0,this.flatCoordinates_.length,2,iv,this.flatCoordinates_)}},i.prototype.getEnds=function(){return this.ends_},i}();eu.prototype.getEndss=eu.prototype.getEnds;eu.prototype.getFlatCoordinates=eu.prototype.getOrientedFlatCoordinates;const Op=eu;var PR=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),xR=function(i){PR(t,i);function t(e){var n=i.call(this)||this,r=e||{};return n.dataProjection=new Ih({code:"",units:_r.TILE_PIXELS}),n.featureClass_=r.featureClass?r.featureClass:Op,n.geometryName_=r.geometryName,n.layerName_=r.layerName?r.layerName:"layer",n.layers_=r.layers?r.layers:null,n.idProperty_=r.idProperty,n.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"],n}return t.prototype.readRawGeometry_=function(e,n,r,o){e.pos=n.geometry;for(var a=e.readVarint()+e.pos,s=1,l=0,u=0,c=0,h=0,d=0;e.pos<a;){if(!l){var p=e.readVarint();s=p&7,l=p>>3}l--,s===1||s===2?(u+=e.readSVarint(),c+=e.readSVarint(),s===1&&h>d&&(o.push(h),d=h),r.push(u,c),h+=2):s===7?h>d&&(r.push(r[d],r[d+1]),h+=2):be(!1,59)}h>d&&(o.push(h),d=h)},t.prototype.createFeature_=function(e,n,r){var o=n.type;if(o===0)return null;var a,s=n.properties,l;this.idProperty_?(l=s[this.idProperty_],delete s[this.idProperty_]):l=n.id,s[this.layerName_]=n.layer.name;var u=[],c=[];this.readRawGeometry_(e,n,u,c);var h=OR(o,c.length);if(this.featureClass_===Op)a=new this.featureClass_(h,u,c,s,l),a.transform(r.dataProjection);else{var d=void 0;if(h==b.POLYGON){for(var p=[],f=0,g=0,v=0,y=c.length;v<y;++v){var m=c[v];if(!xf(u,f,m,2))p.push(c.slice(g,v+1));else{if(p.length===0)continue;p[p.length-1].push(c[g])}g=v+1,f=m}p.length>1?d=new wa(u,De.XY,p):d=new zi(u,De.XY,c)}else d=h===b.POINT?new Wi(u,De.XY):h===b.LINE_STRING?new xn(u,De.XY):h===b.POLYGON?new zi(u,De.XY,c):h===b.MULTI_POINT?new Ea(u,De.XY):h===b.MULTI_LINE_STRING?new Zr(u,De.XY,c):null;var A=this.featureClass_;a=new A,this.geometryName_&&a.setGeometryName(this.geometryName_);var _=nr(d,!1,r);a.setGeometry(_),a.setId(l),a.setProperties(s,!0)}return a},t.prototype.getType=function(){return fo.ARRAY_BUFFER},t.prototype.readFeatures=function(e,n){var r=this.layers_,o=this.adaptOptions(n),a=Ee(o.dataProjection);a.setWorldExtent(o.extent),o.dataProjection=a;var s=new SR(e),l=s.readFields(MR,{}),u=[];for(var c in l)if(!(r&&r.indexOf(c)==-1)){var h=l[c],d=h?[0,0,h.extent,h.extent]:null;a.setExtent(d);for(var p=0,f=h.length;p<f;++p){var g=RR(s,h,p);u.push(this.createFeature_(s,g,o))}}return u},t.prototype.readProjection=function(e){return this.dataProjection},t.prototype.setLayers=function(e){this.layers_=e},t}(Yf);function MR(i,t,e){if(i===3){var n={keys:[],values:[],features:[]},r=e.readVarint()+e.pos;e.readFields(TR,n,r),n.length=n.features.length,n.length&&(t[n.name]=n)}}function TR(i,t,e){if(i===15)t.version=e.readVarint();else if(i===1)t.name=e.readString();else if(i===5)t.extent=e.readVarint();else if(i===2)t.features.push(e.pos);else if(i===3)t.keys.push(e.readString());else if(i===4){for(var n=null,r=e.readVarint()+e.pos;e.pos<r;)i=e.readVarint()>>3,n=i===1?e.readString():i===2?e.readFloat():i===3?e.readDouble():i===4?e.readVarint64():i===5?e.readVarint():i===6?e.readSVarint():i===7?e.readBoolean():null;t.values.push(n)}}function bR(i,t,e){if(i==1)t.id=e.readVarint();else if(i==2)for(var n=e.readVarint()+e.pos;e.pos<n;){var r=t.layer.keys[e.readVarint()],o=t.layer.values[e.readVarint()];t.properties[r]=o}else i==3?t.type=e.readVarint():i==4&&(t.geometry=e.pos)}function RR(i,t,e){i.pos=t.features[e];var n=i.readVarint()+i.pos,r={layer:t,type:0,properties:{}};return i.readFields(bR,r,n),r}function OR(i,t){var e;return i===1?e=t===1?b.POINT:b.MULTI_POINT:i===2?e=t===1?b.LINE_STRING:b.MULTI_LINE_STRING:i===3&&(e=b.POLYGON),e}const Lp=xR;var nv={thin:100,hairline:100,"ultra-light":100,"extra-light":100,light:200,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,heavy:800,black:800,"extra-bold":800,"ultra-black":900,"extra-black":900,"ultra-bold":900,"heavy-black":900,fat:900,poster:900},sl=" ",rv=/(italic|oblique)$/i,ov={},LR=function(i,t,e){var n=ov[i];if(!n){Array.isArray(i)||(i=[i]);for(var r=400,o="normal",a=[],s,l,u=0,c=i.length;u<c;++u){var h=i[u],d=h.split(" "),p=d[d.length-1].toLowerCase();p=="normal"||p=="italic"||p=="oblique"?(o=l?o:p,d.pop(),p=d[d.length-1].toLowerCase()):rv.test(p)&&(p=p.replace(rv,""),o=l?o:d[d.length-1].replace(p,""));for(var f in nv){var g=d.length>1?d[d.length-2].toLowerCase():"";if(p==f||p==f.replace("-","")||g+"-"+p==f){r=s?r:nv[f],d.pop(),g&&f.startsWith(g)&&d.pop();break}}!s&&typeof p=="number"&&(r=p);var v=d.join(sl).replace("Klokantech Noto Sans","Noto Sans");v.indexOf(sl)!==-1&&(v='"'+v+'"'),a.push(v)}n=ov[i]=[o,r,a]}return n[0]+sl+n[1]+sl+t+"px"+(e?"/"+e:"")+sl+n[2]};const lA=fu(LR);var GR=8,kR={version:{required:!0,type:"enum",values:[8],doc:"Style specification version number. Must be 8.",example:8},name:{type:"string",doc:"A human-readable name for the style.",example:"Bright"},metadata:{type:"*",doc:"Arbitrary properties useful to track with the stylesheet, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'mapbox:'."},center:{type:"array",value:"number",doc:"Default map center in longitude and latitude.  The style center will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:[-73.9749,40.7736]},zoom:{type:"number",doc:"Default zoom level.  The style zoom will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:12.5},bearing:{type:"number",default:0,period:360,units:"degrees",doc:'Default bearing, in degrees. The bearing is the compass direction that is "up"; for example, a bearing of 90° orients the map so that east is up. This value will be used only if the map has not been positioned by other means (e.g. map options or user interaction).',example:29},pitch:{type:"number",default:0,units:"degrees",doc:"Default pitch, in degrees. Zero is perpendicular to the surface, for a look straight down at the map, while a greater value like 60 looks ahead towards the horizon. The style pitch will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:50},light:{type:"light",doc:"The global light source.",example:{anchor:"viewport",color:"white",intensity:.4}},terrain:{type:"terrain",doc:"A global modifier that elevates layers and markers based on a DEM data source."},fog:{type:"fog",doc:"A global effect that fades layers and markers based on their distance to the camera. The fog can be used to approximate the effect of atmosphere on distant objects and enhance the depth perception of the map when used with terrain or 3D features."},sources:{required:!0,type:"sources",doc:"Data source specifications.",example:{"mapbox-streets":{type:"vector",url:"mapbox://mapbox.mapbox-streets-v6"}}},sprite:{type:"string",doc:"A base URL for retrieving the sprite image and metadata. The extensions `.png`, `.json` and scale factor `@2x.png` will be automatically appended. This property is required if any layer uses the `background-pattern`, `fill-pattern`, `line-pattern`, `fill-extrusion-pattern`, or `icon-image` properties. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).",example:"mapbox://sprites/mapbox/bright-v8"},glyphs:{type:"string",doc:"A URL template for loading signed-distance-field glyph sets in PBF format. The URL must include `{fontstack}` and `{range}` tokens. This property is required if any layer uses the `text-field` layout property. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).",example:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},transition:{type:"transition",doc:"A global transition definition to use as a default across properties, to be used for timing transitions between one value and the next when no property-specific transition is set. Collision-based symbol fading is controlled independently of the style's `transition` property.",example:{duration:300,delay:0}},layers:{required:!0,type:"array",value:"layer",doc:"Layers will be drawn in the order of this array.",example:[{id:"water",source:"mapbox-streets","source-layer":"water",type:"fill",paint:{"fill-color":"#00ffff"}}]}},DR={"*":{type:"source",doc:"Specification of a data source. For vector and raster sources, either TileJSON or a URL to a TileJSON must be provided. For image and video sources, a URL must be provided. For GeoJSON sources, a URL or inline GeoJSON must be provided."}},NR=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],FR={type:{required:!0,type:"enum",values:{vector:{doc:"A vector tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`. If specified as a string for a vector tile source, the same property is used across all its source layers."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},UR={type:{required:!0,type:"enum",values:{raster:{doc:"A raster tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},BR={type:{required:!0,type:"enum",values:{"raster-dem":{doc:"A RGB-encoded raster DEM source"}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},encoding:{type:"enum",values:{terrarium:{doc:"Terrarium format PNG tiles. See https://aws.amazon.com/es/public-datasets/terrain/ for more info."},mapbox:{doc:"Mapbox Terrain RGB tiles. See https://www.mapbox.com/help/access-elevation-data/#mapbox-terrain-rgb for more info."}},default:"mapbox",doc:"The encoding used by this source. Mapbox Terrain RGB is used by default"},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},jR={type:{required:!0,type:"enum",values:{geojson:{doc:"A GeoJSON data source."}},doc:"The data type of the GeoJSON source."},data:{type:"*",doc:"A URL to a GeoJSON file, or inline GeoJSON."},maxzoom:{type:"number",default:18,doc:"Maximum zoom level at which to create vector tiles (higher means greater detail at high zoom levels)."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},buffer:{type:"number",default:128,maximum:512,minimum:0,doc:"Size of the tile buffer on each side. A value of 0 produces no buffer. A value of 512 produces a buffer as wide as the tile itself. Larger values produce fewer rendering artifacts near tile edges and slower performance."},filter:{type:"*",doc:"An expression for filtering features prior to processing them for rendering."},tolerance:{type:"number",default:.375,doc:"Douglas-Peucker simplification tolerance (higher means simpler geometries and faster performance)."},cluster:{type:"boolean",default:!1,doc:"If the data is a collection of point features, setting this to true clusters the points by radius into groups. Cluster groups become new `Point` features in the source with additional properties:\n * `cluster` Is `true` if the point is a cluster \n * `cluster_id` A unqiue id for the cluster to be used in conjunction with the [cluster inspection methods](https://www.mapbox.com/mapbox-gl-js/api/#geojsonsource#getclusterexpansionzoom)\n * `point_count` Number of original points grouped into this cluster\n * `point_count_abbreviated` An abbreviated point count"},clusterRadius:{type:"number",default:50,minimum:0,doc:"Radius of each cluster if clustering is enabled. A value of 512 indicates a radius equal to the width of a tile."},clusterMaxZoom:{type:"number",doc:"Max zoom on which to cluster points if clustering is enabled. Defaults to one zoom less than maxzoom (so that last zoom features are not clustered). Clusters are re-evaluated at integer zoom levels so setting clusterMaxZoom to 14 means the clusters will be displayed until z15."},clusterMinPoints:{type:"number",doc:"Minimum number of points necessary to form a cluster if clustering is enabled. Defaults to `2`."},clusterProperties:{type:"*",doc:'An object defining custom properties on the generated clusters if clustering is enabled, aggregating values from clustered points. Has the form `{"property_name": [operator, map_expression]}`. `operator` is any expression function that accepts at least 2 operands (e.g. `"+"` or `"max"`) — it accumulates the property value from clusters/points the cluster contains; `map_expression` produces the value of a single point.\n\nExample: `{"sum": ["+", ["get", "scalerank"]]}`.\n\nFor more advanced use cases, in place of `operator`, you can use a custom reduce expression that references a special `["accumulated"]` value, e.g.:\n`{"sum": [["+", ["accumulated"], ["get", "sum"]], ["get", "scalerank"]]}`'},lineMetrics:{type:"boolean",default:!1,doc:"Whether to calculate line distance metrics. This is required for line layers that specify `line-gradient` values."},generateId:{type:"boolean",default:!1,doc:"Whether to generate ids for the geojson features. When enabled, the `feature.id` property will be auto assigned based on its index in the `features` array, over-writing any previous values."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`."}},zR={type:{required:!0,type:"enum",values:{video:{doc:"A video data source."}},doc:"The data type of the video source."},urls:{required:!0,type:"array",value:"string",doc:"URLs to video content in order of preferred format."},coordinates:{required:!0,doc:"Corners of video specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},VR={type:{required:!0,type:"enum",values:{image:{doc:"An image data source."}},doc:"The data type of the image source."},url:{required:!0,type:"string",doc:"URL that points to an image."},coordinates:{required:!0,doc:"Corners of image specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},WR={id:{type:"string",doc:"Unique layer name.",required:!0},type:{type:"enum",values:{fill:{doc:"A filled polygon with an optional stroked border.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},line:{doc:"A stroked line.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},symbol:{doc:"An icon or a text label.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},circle:{doc:"A filled circle.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},heatmap:{doc:"A heatmap.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"fill-extrusion":{doc:"An extruded (3D) polygon.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},raster:{doc:"Raster map textures such as satellite imagery.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},hillshade:{doc:"Client-side hillshading visualization based on DEM data. Currently, the implementation only supports Mapbox Terrain RGB and Mapzen Terrarium tiles.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},background:{doc:"The background color or pattern of the map.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},sky:{doc:"A spherical dome around the map that is always rendered behind all other layers.","sdk-support":{"basic functionality":{js:"2.0.0"}}}},doc:"Rendering type of this layer.",required:!0},metadata:{type:"*",doc:"Arbitrary properties useful to track with the layer, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'mapbox:'."},source:{type:"string",doc:"Name of a source description to be used for this layer. Required for all layer types except `background`."},"source-layer":{type:"string",doc:"Layer to use from a vector tile source. Required for vector tile sources; prohibited for all other source types, including GeoJSON sources."},minzoom:{type:"number",minimum:0,maximum:24,doc:"The minimum zoom level for the layer. At zoom levels less than the minzoom, the layer will be hidden."},maxzoom:{type:"number",minimum:0,maximum:24,doc:"The maximum zoom level for the layer. At zoom levels equal to or greater than the maxzoom, the layer will be hidden."},filter:{type:"filter",doc:"A expression specifying conditions on source features. Only features that match the filter are displayed. Zoom expressions in filters are only evaluated at integer zoom levels. The `feature-state` expression is not supported in filter expressions."},layout:{type:"layout",doc:"Layout properties for the layer."},paint:{type:"paint",doc:"Default paint properties for this layer."}},YR=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],HR={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},qR={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"2.0.0"}},"property-type":"constant"}},XR={"fill-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},ZR={"circle-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.2.0",ios:"5.9.0",macos:"0.16.0"},"data-driven styling":{js:"1.2.0",android:"9.2.0",ios:"5.9.0",macos:"0.16.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},KR={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},"property-type":"constant"}},JR={"line-cap":{type:"enum",values:{butt:{doc:"A cap with a squared-off end which is drawn to the exact endpoint of the line."},round:{doc:"A cap with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},square:{doc:"A cap with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."}},default:"butt",doc:"The display of line endings.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"2.3.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{doc:"A join with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."},round:{doc:"A join with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},miter:{doc:"A join with a sharp, angled corner which is drawn with the outer sides beyond the endpoint of the path until they meet."}},default:"miter",doc:"The display of lines when joining.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,doc:"Used to automatically convert miter joins to bevel joins for sharp angles.",requires:[{"line-join":"miter"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,doc:"Used to automatically convert round joins to miter joins for shallow angles.",requires:[{"line-join":"round"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},QR={"symbol-placement":{type:"enum",values:{point:{doc:"The label is placed at the point where the geometry is located."},line:{doc:"The label is placed along the line of the geometry. Can only be used on `LineString` and `Polygon` geometries."},"line-center":{doc:"The label is placed at the center of the line of the geometry. Can only be used on `LineString` and `Polygon` geometries. Note that a single feature in a vector tile may contain multiple line geometries."}},default:"point",doc:"Label placement relative to its geometry.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`line-center` value":{js:"0.47.0",android:"6.4.0",ios:"4.3.0",macos:"0.10.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",doc:"Distance between two symbol anchors.",requires:[{"symbol-placement":"line"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,doc:"If true, the symbols will not cross tile edges to avoid mutual collisions. Recommended in layers that don't have enough padding in the vector tile to prevent collisions, or if it is a point symbol layer placed after a line symbol layer. When using a client that supports global collision detection, like Mapbox GL JS version 0.42.0 or greater, enabling this property is not needed to prevent clipped labels at tile boundaries.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with lower sort keys are drawn and placed first.  When `icon-allow-overlap` or `text-allow-overlap` is `false`, features with a lower sort key will have priority during placement. When `icon-allow-overlap` or `text-allow-overlap` is set to `true`, features with a higher sort key will overlap over features with a lower sort key.","sdk-support":{"basic functionality":{js:"0.53.0",android:"7.4.0",ios:"4.11.0",macos:"0.14.0"},"data-driven styling":{js:"0.53.0",android:"7.4.0",ios:"4.11.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{doc:"Sorts symbols by `symbol-sort-key` if set. Otherwise, sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},"viewport-y":{doc:"Sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},source:{doc:"Sorts symbols by `symbol-sort-key` if set. Otherwise, no sorting is applied; symbols are rendered in the same order as the source data."}},default:"auto",doc:"Determines whether overlapping symbols in the same layer are rendered in the order that they appear in the data source or by their y-position relative to the viewport. To control the order and prioritization of symbols otherwise, use `symbol-sort-key`.","sdk-support":{"basic functionality":{js:"0.49.0",android:"6.6.0",ios:"4.5.0",macos:"0.12.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,doc:"If true, the icon will be visible even if it collides with other previously drawn symbols.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,doc:"If true, other symbols can be visible even if they collide with the icon.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,doc:"If true, text will display without their corresponding icons when the icon collides with other symbols and the text does not.",requires:["icon-image","text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{doc:"When `symbol-placement` is set to `point`, aligns icons east-west. When `symbol-placement` is set to `line` or `line-center`, aligns icon x-axes with the line."},viewport:{doc:"Produces icons whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},auto:{doc:"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},default:"auto",doc:"In combination with `symbol-placement`, determines the rotation behavior of icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",doc:"Scales the original size of the icon by the provided factor. The new pixel size of the image will be the original pixel size multiplied by `icon-size`. 1 is the original size; 3 triples the size of the image.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{doc:"The icon is displayed at its intrinsic aspect ratio."},width:{doc:"The icon is scaled in the x-dimension to fit the width of the text."},height:{doc:"The icon is scaled in the y-dimension to fit the height of the text."},both:{doc:"The icon is scaled in both x- and y-dimensions."}},default:"none",doc:"Scales the icon to fit around the associated text.",requires:["icon-image","text-field"],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"},"stretchable icons":{js:"1.6.0",android:"9.2.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",doc:"Size of the additional area added to dimensions determined by `icon-text-fit`, in clockwise order: top, right, bottom, left.",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",doc:"Name of image in sprite to use for drawing an image background.",tokens:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",doc:"Rotates the icon clockwise.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",doc:"Size of the additional area around the icon bounding box used for detecting symbol collisions.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,doc:"If true, the icon may be flipped to prevent it from being rendered upside-down.",requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],doc:"Offset distance of icon from its anchor. Positive values indicate right and down, while negative values indicate left and up. Each component is multiplied by the value of `icon-size` to obtain the final offset in pixels. When combined with `icon-rotate` the offset will be as if the rotated direction was up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{doc:"The center of the icon is placed closest to the anchor."},left:{doc:"The left side of the icon is placed closest to the anchor."},right:{doc:"The right side of the icon is placed closest to the anchor."},top:{doc:"The top of the icon is placed closest to the anchor."},bottom:{doc:"The bottom of the icon is placed closest to the anchor."},"top-left":{doc:"The top left corner of the icon is placed closest to the anchor."},"top-right":{doc:"The top right corner of the icon is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the icon is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the icon is placed closest to the anchor."}},default:"center",doc:"Part of the icon placed closest to the anchor.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{doc:"The icon is aligned to the plane of the map."},viewport:{doc:"The icon is aligned to the plane of the viewport."},auto:{doc:"Automatically matches the value of `icon-rotation-alignment`."}},default:"auto",doc:"Orientation of icon when map is pitched.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{doc:"The text is aligned to the plane of the map."},viewport:{doc:"The text is aligned to the plane of the viewport."},auto:{doc:"Automatically matches the value of `text-rotation-alignment`."}},default:"auto",doc:"Orientation of text when map is pitched.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{doc:"When `symbol-placement` is set to `point`, aligns text east-west. When `symbol-placement` is set to `line` or `line-center`, aligns text x-axes with the line."},viewport:{doc:"Produces glyphs whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},auto:{doc:"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},default:"auto",doc:"In combination with `symbol-placement`, determines the rotation behavior of the individual glyphs forming the text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,doc:"Value to use for a text label. If a plain `string` is provided, it will be treated as a `formatted` with default/inherited formatting options.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],doc:"Font stack to use for displaying text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",doc:"Font size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",doc:"The maximum line width for text wrapping.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",doc:"Text leading value for multi-line text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"2.3.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",doc:"Text tracking amount.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{doc:"The text is aligned towards the anchor position."},left:{doc:"The text is aligned to the left."},center:{doc:"The text is centered."},right:{doc:"The text is aligned to the right."}},default:"center",doc:"Text justification options.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"},auto:{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,doc:"Radial offset of text, in the direction of the symbol's anchor. Useful in combination with `text-variable-anchor`, which defaults to using the two-dimensional `text-offset` if present.","sdk-support":{"basic functionality":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"},"data-driven styling":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{doc:"The center of the text is placed closest to the anchor."},left:{doc:"The left side of the text is placed closest to the anchor."},right:{doc:"The right side of the text is placed closest to the anchor."},top:{doc:"The top of the text is placed closest to the anchor."},bottom:{doc:"The bottom of the text is placed closest to the anchor."},"top-left":{doc:"The top left corner of the text is placed closest to the anchor."},"top-right":{doc:"The top right corner of the text is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the text is placed closest to the anchor."}},requires:["text-field",{"symbol-placement":["point"]}],doc:"To increase the chance of placing high-priority labels on the map, you can provide an array of `text-anchor` locations: the renderer will attempt to place the label at each location, in order, before moving onto the next label. Use `text-justify: auto` to choose justification based on anchor position. To apply an offset, use the `text-radial-offset` or the two-dimensional `text-offset`.","sdk-support":{"basic functionality":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{doc:"The center of the text is placed closest to the anchor."},left:{doc:"The left side of the text is placed closest to the anchor."},right:{doc:"The right side of the text is placed closest to the anchor."},top:{doc:"The top of the text is placed closest to the anchor."},bottom:{doc:"The bottom of the text is placed closest to the anchor."},"top-left":{doc:"The top left corner of the text is placed closest to the anchor."},"top-right":{doc:"The top right corner of the text is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the text is placed closest to the anchor."}},default:"center",doc:"Part of the text placed closest to the anchor.",requires:["text-field",{"!":"text-variable-anchor"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",doc:"Maximum angle change between adjacent characters.",requires:["text-field",{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{doc:"If a text's language supports horizontal writing mode, symbols with point placement would be laid out horizontally."},vertical:{doc:"If a text's language supports vertical writing mode, symbols with point placement would be laid out vertically."}},doc:"The property allows control over a symbol's orientation. Note that the property values act as a hint, so that a symbol whose language doesn’t support the provided orientation will be laid out in its natural orientation. Example: English point symbol will be rendered horizontally even if array value contains single 'vertical' enum value. The order of elements in an array define priority order for the placement of an orientation variant.",requires:["text-field",{"symbol-placement":["point"]}],"sdk-support":{"basic functionality":{js:"1.3.0",android:"8.3.0",ios:"5.3.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",doc:"Rotates the text clockwise.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",doc:"Size of the additional area around the text bounding box used for detecting symbol collisions.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,doc:"If true, the text may be flipped vertically to prevent it from being rendered upside-down.",requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{doc:"The text is not altered."},uppercase:{doc:"Forces all letters to be displayed in uppercase."},lowercase:{doc:"Forces all letters to be displayed in lowercase."}},default:"none",doc:"Specifies how to capitalize text, similar to the CSS `text-transform` property.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",doc:"Offset distance of text from its anchor. Positive values indicate right and down, while negative values indicate left and up. If used with text-variable-anchor, input values will be taken as absolute values. Offsets along the x- and y-axis will be applied automatically based on the anchor position.",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,doc:"If true, the text will be visible even if it collides with other previously drawn symbols.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,doc:"If true, other symbols can be visible even if they collide with the text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,doc:"If true, icons will display without their corresponding text when the text collides with other symbols and the icon does not.",requires:["text-field","icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},$R={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},eO={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},"property-type":"constant"}},tO={type:"array",value:"*",doc:"A filter selects specific features from a layer."},iO={type:"enum",values:{"==":{doc:'`["==", key, value]` equality: `feature[key] = value`'},"!=":{doc:'`["!=", key, value]` inequality: `feature[key] ≠ value`'},">":{doc:'`[">", key, value]` greater than: `feature[key] > value`'},">=":{doc:'`[">=", key, value]` greater than or equal: `feature[key] ≥ value`'},"<":{doc:'`["<", key, value]` less than: `feature[key] < value`'},"<=":{doc:'`["<=", key, value]` less than or equal: `feature[key] ≤ value`'},in:{doc:'`["in", key, v0, ..., vn]` set inclusion: `feature[key] ∈ {v0, ..., vn}`'},"!in":{doc:'`["!in", key, v0, ..., vn]` set exclusion: `feature[key] ∉ {v0, ..., vn}`'},all:{doc:'`["all", f0, ..., fn]` logical `AND`: `f0 ∧ ... ∧ fn`'},any:{doc:'`["any", f0, ..., fn]` logical `OR`: `f0 ∨ ... ∨ fn`'},none:{doc:'`["none", f0, ..., fn]` logical `NOR`: `¬f0 ∧ ... ∧ ¬fn`'},has:{doc:'`["has", key]` `feature[key]` exists'},"!has":{doc:'`["!has", key]` `feature[key]` does not exist'},within:{doc:'`["within", object]` feature geometry is within object geometry'}},doc:"The filter operator."},nO={type:"enum",values:{Point:{doc:"Filter to point geometries."},LineString:{doc:"Filter to line geometries."},Polygon:{doc:"Filter to polygon geometries."}},doc:"The geometry type for the filter to select."},rO={type:"array",minimum:0,maximum:24,value:["number","color"],length:2,doc:"Zoom level and value pair."},oO={type:"array",value:"*",minimum:1,doc:"An expression defines a function that can be used for data-driven style properties or feature filters."},aO={doc:"",type:"enum",values:{let:{doc:'Binds expressions to named variables, which can then be referenced in the result expression using ["var", "variable_name"].',group:"Variable binding","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},var:{doc:'References variable bound using "let".',group:"Variable binding","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},literal:{doc:"Provides a literal array or object value.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},array:{doc:"Asserts that the input is an array (optionally with a specific item type and length).  If, when the input expression is evaluated, it is not of the asserted type, then this assertion will cause the whole expression to be aborted.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},at:{doc:"Retrieves an item from an array.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},in:{doc:"Determines whether an item exists in an array or a substring exists in a string.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.6.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}}},"index-of":{doc:"Returns the first position at which an item can be found in an array or a substring can be found in a string, or `-1` if the input cannot be found. Accepts an optional index from where to begin the search.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.10.0"}}},slice:{doc:"Returns an item from an array or a substring from a string from a specified start index, or between a start index and an end index if set. The return value is inclusive of the start index but not of the end index.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.10.0"}}},case:{doc:"Selects the first output whose corresponding test condition evaluates to true, or the fallback value otherwise.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},match:{doc:'Selects the output for which the label value matches the input value, or the fallback value if no match is found. The input can be any expression (for example, `["get", "building_type"]`). Each label must be unique, and must be either:\n - a single literal value; or\n - an array of literal values, the values of which must be all strings or all numbers (for example `[100, 101]` or `["c", "b"]`).\n\nThe input matches if any of the values in the array matches using strict equality, similar to the `"in"` operator.\nIf the input type does not match the type of the labels, the result will be the fallback value.',group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},coalesce:{doc:"Evaluates each expression in turn until the first non-null value is obtained, and returns that value.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},step:{doc:'Produces discrete, stepped results by evaluating a piecewise-constant function defined by pairs of input and output values ("stops"). The `input` may be any numeric expression (e.g., `["get", "population"]`). Stop inputs must be numeric literals in strictly ascending order. Returns the output value of the stop just less than the input, or the first output if the input is less than the first stop.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},interpolate:{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). The `input` may be any numeric expression (e.g., `["get", "population"]`). Stop inputs must be numeric literals in strictly ascending order. The output type must be `number`, `array<number>`, or `color`.\n\nInterpolation types:\n- `["linear"]`: Interpolates linearly between the pair of stops just less than and just greater than the input.\n- `["exponential", base]`: Interpolates exponentially between the stops just less than and just greater than the input. `base` controls the rate at which the output increases: higher values make the output increase more towards the high end of the range. With values close to 1 the output increases linearly.\n- `["cubic-bezier", x1, y1, x2, y2]`: Interpolates using the cubic bezier curve defined by the given control points.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"interpolate-hcl":{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the Hue-Chroma-Luminance color space.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.49.0"}}},"interpolate-lab":{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the CIELAB color space.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.49.0"}}},ln2:{doc:"Returns mathematical constant ln(2).",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},pi:{doc:"Returns the mathematical constant pi.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},e:{doc:"Returns the mathematical constant e.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},typeof:{doc:"Returns a string describing the type of the given value.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},string:{doc:"Asserts that the input value is a string. If multiple values are provided, each one is evaluated in order until a string is obtained. If none of the inputs are strings, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},number:{doc:"Asserts that the input value is a number. If multiple values are provided, each one is evaluated in order until a number is obtained. If none of the inputs are numbers, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},boolean:{doc:"Asserts that the input value is a boolean. If multiple values are provided, each one is evaluated in order until a boolean is obtained. If none of the inputs are booleans, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},object:{doc:"Asserts that the input value is an object. If multiple values are provided, each one is evaluated in order until an object is obtained. If none of the inputs are objects, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},collator:{doc:"Returns a `collator` for use in locale-dependent comparison operations. The `case-sensitive` and `diacritic-sensitive` options default to `false`. The `locale` argument specifies the IETF language tag of the locale to use. If none is provided, the default locale is used. If the requested locale is not available, the `collator` will use a system-defined fallback locale. Use `resolved-locale` to test the results of locale fallback behavior.",group:"Types","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},format:{doc:'Returns a `formatted` string for displaying mixed-format text in the `text-field` property. The input may contain a string literal or expression, including an [`\'image\'`](#types-image) expression. Strings may be followed by a style override object that supports the following properties:\n- `"text-font"`: Overrides the font stack specified by the root layout property.\n- `"text-color"`: Overrides the color specified by the root paint property.\n- `"font-scale"`: Applies a scaling factor on `text-size` as specified by the root layout property.',group:"Types","sdk-support":{"basic functionality":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"text-font":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"font-scale":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"text-color":{js:"1.3.0",android:"7.3.0",ios:"4.10.0",macos:"0.14.0"},image:{js:"1.6.0",android:"8.6.0",ios:"5.7.0",macos:"0.15.0"}}},image:{doc:"Returns an `image` type for use in `icon-image`, `*-pattern` entries and as a section in the `format` expression. If set, the `image` argument will check that the requested image exists in the style and will return either the resolved image name or `null`, depending on whether or not the image is currently in the style. This validation process is synchronous and requires the image to have been added to the style before requesting it in the `image` argument.",group:"Types","sdk-support":{"basic functionality":{js:"1.4.0",android:"8.6.0",ios:"5.7.0",macos:"0.15.0"}}},"number-format":{doc:"Converts the input number into a string representation using the providing formatting rules. If set, the `locale` argument specifies the locale to use, as a BCP 47 language tag. If set, the `currency` argument specifies an ISO 4217 code to use for currency-style formatting. If set, the `min-fraction-digits` and `max-fraction-digits` arguments specify the minimum and maximum number of fractional digits to include.",group:"Types","sdk-support":{"basic functionality":{js:"0.54.0"}}},"to-string":{doc:'Converts the input value to a string. If the input is `null`, the result is `""`. If the input is a boolean, the result is `"true"` or `"false"`. If the input is a number, it is converted to a string as specified by the ["NumberToString" algorithm](https://tc39.github.io/ecma262/#sec-tostring-applied-to-the-number-type) of the ECMAScript Language Specification. If the input is a color, it is converted to a string of the form `"rgba(r,g,b,a)"`, where `r`, `g`, and `b` are numerals ranging from 0 to 255, and `a` ranges from 0 to 1. Otherwise, the input is converted to a string in the format specified by the [`JSON.stringify`](https://tc39.github.io/ecma262/#sec-json.stringify) function of the ECMAScript Language Specification.',group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-number":{doc:'Converts the input value to a number, if possible. If the input is `null` or `false`, the result is 0. If the input is `true`, the result is 1. If the input is a string, it is converted to a number as specified by the ["ToNumber Applied to the String Type" algorithm](https://tc39.github.io/ecma262/#sec-tonumber-applied-to-the-string-type) of the ECMAScript Language Specification. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.',group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-boolean":{doc:"Converts the input value to a boolean. The result is `false` when then input is an empty string, 0, `false`, `null`, or `NaN`; otherwise it is `true`.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-rgba":{doc:"Returns a four-element array containing the input color's red, green, blue, and alpha components, in that order.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-color":{doc:"Converts the input value to a color. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},rgb:{doc:"Creates a color value from red, green, and blue components, which must range between 0 and 255, and an alpha component of 1. If any component is out of range, the expression is an error.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},rgba:{doc:"Creates a color value from red, green, blue components, which must range between 0 and 255, and an alpha component which must range between 0 and 1. If any component is out of range, the expression is an error.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},get:{doc:"Retrieves a property value from the current feature's properties, or from another object if a second argument is provided. Returns null if the requested property is missing.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},has:{doc:"Tests for the presence of an property value in the current feature's properties, or from another object if a second argument is provided.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},length:{doc:"Gets the length of an array or string.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},properties:{doc:'Gets the feature properties object.  Note that in some cases, it may be more efficient to use ["get", "property_name"] directly.',group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"feature-state":{doc:"Retrieves a property value from the current feature's state. Returns null if the requested property is not present on the feature's state. A feature's state is not part of the GeoJSON or vector tile data, and must be set programmatically on each feature. Features are identified by their `id` attribute, which must be an integer or a string that can be cast to an integer. Note that [\"feature-state\"] can only be used with paint properties that support data-driven styling.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.46.0"}}},"geometry-type":{doc:"Gets the feature's geometry type: `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},id:{doc:"Gets the feature's id, if it has one.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},zoom:{doc:'Gets the current zoom level.  Note that in style layout and paint properties, ["zoom"] may only appear as the input to a top-level "step" or "interpolate" expression.',group:"Zoom","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"heatmap-density":{doc:"Gets the kernel density estimation of a pixel in a heatmap layer, which is a relative measure of how many data points are crowded around a particular pixel. Can only be used in the `heatmap-color` property.",group:"Heatmap","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"line-progress":{doc:"Gets the progress along a gradient line. Can only be used in the `line-gradient` property.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.6.0",macos:"0.12.0"}}},"sky-radial-progress":{doc:"Gets the distance of a point on the sky from the sun position. Returns 0 at sun position and 1 when the distance reaches `sky-gradient-radius`. Can only be used in the `sky-gradient` property.",group:"sky","sdk-support":{"basic functionality":{js:"2.0.0"}}},accumulated:{doc:"Gets the value of a cluster property accumulated so far. Can only be used in the `clusterProperties` option of a clustered GeoJSON source.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.53.0"}}},"+":{doc:"Returns the sum of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"*":{doc:"Returns the product of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"-":{doc:"For two inputs, returns the result of subtracting the second input from the first. For a single input, returns the result of subtracting it from 0.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"/":{doc:"Returns the result of floating point division of the first input by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"%":{doc:"Returns the remainder after integer division of the first input by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"^":{doc:"Returns the result of raising the first input to the power specified by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},sqrt:{doc:"Returns the square root of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},log10:{doc:"Returns the base-ten logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},ln:{doc:"Returns the natural logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},log2:{doc:"Returns the base-two logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},sin:{doc:"Returns the sine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},cos:{doc:"Returns the cosine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},tan:{doc:"Returns the tangent of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},asin:{doc:"Returns the arcsine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},acos:{doc:"Returns the arccosine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},atan:{doc:"Returns the arctangent of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},min:{doc:"Returns the minimum value of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},max:{doc:"Returns the maximum value of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},round:{doc:'Rounds the input to the nearest integer. Halfway values are rounded away from zero. For example, `["round", -1.5]` evaluates to -2.',group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},abs:{doc:"Returns the absolute value of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},ceil:{doc:"Returns the smallest integer that is greater than or equal to the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},floor:{doc:"Returns the largest integer that is less than or equal to the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},distance:{doc:"Returns the shortest distance in meters between the evaluated feature and the input geometry. The input value can be a valid GeoJSON of type `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Distance values returned may vary in precision due to loss in precision from encoding geometries, particularly below zoom level 13.",group:"Math","sdk-support":{"basic functionality":{android:"9.2.0",ios:"5.9.0",macos:"0.16.0"}}},"==":{doc:"Returns `true` if the input values are equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"!=":{doc:"Returns `true` if the input values are not equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},">":{doc:"Returns `true` if the first input is strictly greater than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"<":{doc:"Returns `true` if the first input is strictly less than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},">=":{doc:"Returns `true` if the first input is greater than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"<=":{doc:"Returns `true` if the first input is less than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},all:{doc:"Returns `true` if all the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `false`, the result is `false` and no further input expressions are evaluated.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},any:{doc:"Returns `true` if any of the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `true`, the result is `true` and no further input expressions are evaluated.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"!":{doc:"Logical negation. Returns `true` if the input is `false`, and `false` if the input is `true`.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},within:{doc:"Returns `true` if the evaluated feature is fully contained inside a boundary of the input geometry, `false` otherwise. The input value can be a valid GeoJSON of type `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Supported features for evaluation:\n- `Point`: Returns `false` if a point is on the boundary or falls outside the boundary.\n- `LineString`: Returns `false` if any part of a line falls outside the boundary, the line intersects the boundary, or a line's endpoint is on the boundary.",group:"Decision","sdk-support":{"basic functionality":{js:"1.9.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}}},"is-supported-script":{doc:"Returns `true` if the input string is expected to render legibly. Returns `false` if the input string contains sections that cannot be rendered without potential loss of meaning (e.g. Indic scripts that require complex text shaping, or right-to-left scripts if the the `mapbox-gl-rtl-text` plugin is not in use in Mapbox GL JS).",group:"String","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.6.0"}}},upcase:{doc:"Returns the input string converted to uppercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},downcase:{doc:"Returns the input string converted to lowercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},concat:{doc:"Returns a `string` consisting of the concatenation of the inputs. Each input is converted to a string as if by `to-string`.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"resolved-locale":{doc:"Returns the IETF language tag of the locale being used by the provided `collator`. This can be used to determine the default system locale, or to determine if a requested locale was successfully loaded.",group:"String","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}}}},sO={range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"The start and end distance range in which fog fades from fully transparent to fully opaque. The distance to the point at the center of the map is defined as zero, so that negative range values are closer to the camera, and positive values are farther away.",example:[.5,10],"sdk-support":{"basic functionality":{js:"2.3.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The color of the fog. Using opacity is recommended only for smoothly transitioning fog on/off as anything less than 100% opacity results in more tiles loaded and drawn.","sdk-support":{"basic functionality":{js:"2.3.0"}}},"horizon-blend":{type:"number","property-type":"data-constant",default:.1,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Horizon blend applies a smooth fade from the color of the fog to the color of the sky. A value of zero leaves a sharp transition from fog to sky. Increasing the value blends the color of fog into increasingly high angles of the sky.","sdk-support":{"basic functionality":{js:"2.3.0"}}}},lO={anchor:{type:"enum",default:"viewport",values:{map:{doc:"The position of the light source is aligned to the rotation of the map."},viewport:{doc:"The position of the light source is aligned to the rotation of the viewport."}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},doc:"Whether extruded geometries are lit relative to the map or viewport.",example:"map","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"Position of the light source relative to lit (extruded) geometries, in [r radial coordinate, a azimuthal angle, p polar angle] where r indicates the distance from the center of the base of an object to its light, a indicates the position of the light relative to 0° (0° when `light.anchor` is set to `viewport` corresponds to the top of the viewport, or 0° when `light.anchor` is set to `map` corresponds to due north, and degrees proceed clockwise), and p indicates the height of the light (from 0°, directly above, to 180°, directly below).",example:[1.5,90,80],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Color tint for lighting extruded geometries.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Intensity of lighting (on a scale from 0 to 1). Higher numbers will present as more extreme contrast.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}}},uO={source:{type:"string",doc:"Name of a source of `raster_dem` type to be used for terrain elevation.",required:!0,"sdk-support":{"basic functionality":{js:"2.0.0"}}},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Exaggerates the elevation of the terrain by multiplying the data from the DEM with this value.","sdk-support":{"basic functionality":{js:"2.0.0"}}}},cO=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],hO={"fill-antialias":{type:"boolean",default:!0,doc:"Whether or not the fill should be antialiased.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill layer. In contrast to the `fill-color`, this value will also affect the 1px stroke around the fill, if the stroke is used.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",doc:"The color of the filled part of this layer. This color can be specified as `rgba` with an alpha component and the color's opacity will not affect the opacity of the 1px stroke, if it is used.",transition:!0,requires:[{"!":"fill-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",doc:"The outline color of the fill. Matches the value of `fill-color` if unspecified.",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{doc:"The fill is translated relative to the map."},viewport:{doc:"The fill is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-translate`.",default:"map",requires:["fill-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},dO={"line-opacity":{type:"number",doc:"The opacity at which the line will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",doc:"The color with which the line will be drawn.",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.23.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{doc:"The line is translated relative to the map."},viewport:{doc:"The line is translated relative to the viewport."}},doc:"Controls the frame of reference for `line-translate`.",default:"map",requires:["line-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",doc:"Stroke thickness.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,doc:"Draws a line casing outside of a line's actual path. Value indicates the width of the inner gap.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,doc:"The line's offset. For linear features, a positive value offsets the line to the right, relative to the direction of the line, and a negative value to the left. For polygon features, a positive value results in an inset, and a negative value results in an outset.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.12.1",android:"3.0.0",ios:"3.1.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Blur applied to the line, in pixels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",doc:"Specifies the lengths of the alternating dashes and gaps that form the dash pattern. The lengths are later scaled by the line width. To convert a dash length to pixels, multiply the length by the current line width. Note that GeoJSON sources with `lineMetrics: true` specified won't render dashed lines to the expected scale. Also note that zoom-dependent expressions will be evaluated only at integer zoom levels.",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"2.3.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image lines. For seamless patterns, image width must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",doc:'Defines a gradient with which to color a line feature. Can only be used with GeoJSON sources that specify `"lineMetrics": true`.',transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],"sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.4.0",macos:"0.11.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},pO={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",doc:"Circle radius.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",doc:"The fill color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,doc:"Amount to blur the circle. 1 blurs the circle such that only the centerpoint is full opacity.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",doc:"The opacity at which the circle will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{doc:"The circle is translated relative to the map."},viewport:{doc:"The circle is translated relative to the viewport."}},doc:"Controls the frame of reference for `circle-translate`.",default:"map",requires:["circle-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{doc:"Circles are scaled according to their apparent distance to the camera."},viewport:{doc:"Circles are not scaled."}},default:"map",doc:"Controls the scaling behavior of the circle when the map is pitched.","sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{doc:"The circle is aligned to the plane of the map."},viewport:{doc:"The circle is aligned to the plane of the viewport."}},default:"viewport",doc:"Orientation of circle when map is pitched.","sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The width of the circle's stroke. Strokes are placed outside of the `circle-radius`.","sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",doc:"The stroke color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",doc:"The opacity of the circle's stroke.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},fO={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",doc:"Radius of influence of one heatmap point in pixels. Increasing the value makes the heatmap smoother, but less detailed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,doc:"A measure of how much an individual point contributes to the heatmap. A value of 10 would be equivalent to having 10 points of weight 1 in the same spot. Especially useful when combined with clustering.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,doc:"Similar to `heatmap-weight` but controls the intensity of the heatmap globally. Primarily used for adjusting the heatmap based on zoom level.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],doc:'Defines the color of each pixel based on its density value in a heatmap.  Should be an expression that uses `["heatmap-density"]` as input.',transition:!1,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",doc:"The global opacity at which the heatmap layer will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},gO={"icon-opacity":{doc:"The opacity at which the icon will be drawn.",type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,doc:"The color of the icon. This can only be used with sdf icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the icon's halo. Icon halos can only be used with SDF icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the icon outline.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Fade out the halo towards the outside.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the icon's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{doc:"Icons are translated relative to the map."},viewport:{doc:"Icons are translated relative to the viewport."}},doc:"Controls the frame of reference for `icon-translate`.",default:"map",requires:["icon-image","icon-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",doc:"The opacity at which the text will be drawn.",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",doc:"The color with which the text will be drawn.",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the text's halo, which helps it stand out from backgrounds.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the font outline. Max text halo width is 1/4 of the font-size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The halo's fadeout distance towards the outside.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the text's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{doc:"The text is translated relative to the map."},viewport:{doc:"The text is translated relative to the viewport."}},doc:"Controls the frame of reference for `text-translate`.",default:"map",requires:["text-field","text-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},vO={"raster-opacity":{type:"number",doc:"The opacity at which the image will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",doc:"Rotates hues around the color wheel.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the minimum brightness.",default:0,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the maximum brightness.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",doc:"Increase or reduce the saturation of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",doc:"Increase or reduce the contrast of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",doc:"The resampling/interpolation method to use for overscaling, also known as texture magnification filter",values:{linear:{doc:"(Bi)linear filtering interpolates pixel values using the weighted average of the four closest original source pixels creating a smooth but blurry look when overscaled"},nearest:{doc:"Nearest neighbor filtering interpolates pixel values using the nearest original source pixel creating a sharp but pixelated look when overscaled"}},default:"linear","sdk-support":{"basic functionality":{js:"0.47.0",android:"6.3.0",ios:"4.2.0",macos:"0.9.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",doc:"Fade duration when a new tile is added.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},mO={"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,doc:"The direction of the light source used to generate the hillshading with 0 as the top of the viewport if `hillshade-illumination-anchor` is set to `viewport` and due north if `hillshade-illumination-anchor` is set to `map`.",transition:!1,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{doc:"The hillshade illumination is relative to the north direction."},viewport:{doc:"The hillshade illumination is relative to the top of the viewport."}},default:"viewport",doc:"Direction of light source when map is rotated.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",doc:"Intensity of the hillshade",default:.5,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",doc:"The shading color of areas that face away from the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",doc:"The shading color of areas that faces towards the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",doc:"The shading color used to accentuate rugged terrain like sharp cliffs and gorges.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},yO={"background-color":{type:"color",default:"#000000",doc:"The color with which the background will be drawn.",transition:!0,requires:[{"!":"background-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing an image background. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity at which the background will be drawn.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},AO={"sky-type":{type:"enum",values:{gradient:{doc:"Renders the sky with a gradient that can be configured with `sky-gradient-radius` and `sky-gradient`."},atmosphere:{doc:"Renders the sky with a simulated atmospheric scattering algorithm, the sun direction can be attached to the light position or explicitly set through `sky-atmosphere-sun`."}},default:"atmosphere",doc:"The type of the sky","sdk-support":{"basic functionality":{js:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,doc:"Position of the sun center [a azimuthal angle, p polar angle]. The azimuthal angle indicates the position of the sun relative to 0° north, where degrees proceed clockwise. The polar angle indicates the height of the sun, where 0° is directly above, at zenith, and 90° at the horizon. When this property is ommitted, the sun center is directly inherited from the light position.","sdk-support":{"basic functionality":{js:"2.0.0"}},requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,doc:"Intensity of the sun as a light source in the atmosphere (on a scale from 0 to a 100). Setting higher values will brighten up the sky.","sdk-support":{"basic functionality":{js:"2.0.0"}},"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,doc:"Position of the gradient center [a azimuthal angle, p polar angle]. The azimuthal angle indicates the position of the gradient center relative to 0° north, where degrees proceed clockwise. The polar angle indicates the height of the gradient center, where 0° is directly above, at zenith, and 90° at the horizon.","sdk-support":{"basic functionality":{js:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,doc:"The angular distance (measured in degrees) from `sky-gradient-center` up to which the gradient extends. A value of 180 causes the gradient to wrap around to the opposite direction from `sky-gradient-center`.","sdk-support":{"basic functionality":{js:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],doc:"Defines a radial color gradient with which to color the sky. The color values can be interpolated with an expression using `sky-radial-progress`. The range [0, 1] for the interpolant covers a radial distance (in degrees) of [0, `sky-gradient-radius`] centered at the position specified by `sky-gradient-center`.",transition:!1,requires:[{"sky-type":"gradient"}],"sdk-support":{"basic functionality":{js:"2.0.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",doc:"A color applied to the atmosphere sun halo. The alpha channel describes how strongly the sun halo is represented in an atmosphere sky layer.",transition:!1,requires:[{"sky-type":"atmosphere"}],"sdk-support":{"basic functionality":{js:"2.0.0"}},"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",doc:"A color used to tweak the main atmospheric scattering coefficients. Using white applies the default coefficients giving the natural blue color to the atmosphere. This color affects how heavily the corresponding wavelength is represented during scattering. The alpha channel describes the density of the atmosphere, with 1 maximum density and 0 no density.",transition:!1,requires:[{"sky-type":"atmosphere"}],"sdk-support":{"basic functionality":{js:"2.0.0"}},"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire sky layer.",transition:!0,"sdk-support":{"basic functionality":{js:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},_O={duration:{type:"number",default:300,minimum:0,units:"milliseconds",doc:"Time allotted for transitions to complete."},delay:{type:"number",default:0,minimum:0,units:"milliseconds",doc:"Length of time before a transition begins."}},CO={"*":{type:"string",doc:"A name of a feature property to use as ID for feature state."}},c0={$version:GR,$root:kR,sources:DR,source:NR,source_vector:FR,source_raster:UR,source_raster_dem:BR,source_geojson:jR,source_video:zR,source_image:VR,layer:WR,layout:YR,layout_background:HR,layout_sky:qR,layout_fill:XR,layout_circle:ZR,layout_heatmap:KR,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},"property-type":"constant"}},layout_line:JR,layout_symbol:QR,layout_raster:$R,layout_hillshade:eO,filter:tO,filter_operator:iO,geometry_type:nO,function:{expression:{type:"expression",doc:"An expression."},stops:{type:"array",doc:"An array of stops.",value:"function_stop"},base:{type:"number",default:1,minimum:0,doc:"The exponential base of the interpolation curve. It controls the rate at which the result increases. Higher values make the result increase more towards the high end of the range. With `1` the stops are interpolated linearly."},property:{type:"string",doc:"The name of a feature property to use as the function input.",default:"$zoom"},type:{type:"enum",values:{identity:{doc:"Return the input value as the output value."},exponential:{doc:"Generate an output by interpolating between stops just less than and just greater than the function input."},interval:{doc:"Return the output value of the stop just less than the function input."},categorical:{doc:"Return the output value of the stop equal to the function input."}},doc:"The interpolation strategy to use in function evaluation.",default:"exponential"},colorSpace:{type:"enum",values:{rgb:{doc:"Use the RGB color space to interpolate color values"},lab:{doc:"Use the LAB color space to interpolate color values."},hcl:{doc:"Use the HCL color space to interpolate color values, interpolating the Hue, Chroma, and Luminance channels individually."}},doc:"The color space in which colors interpolated. Interpolating colors in perceptual color spaces like LAB and HCL tend to produce color ramps that look more consistent and produce colors that can be differentiated more easily than those interpolated in RGB space.",default:"rgb"},default:{type:"*",required:!1,doc:`A value to serve as a fallback function result when a value isn't otherwise available. It is used in the following circumstances:
* In categorical functions, when the feature value does not match any of the stop domain values.
* In property and zoom-and-property functions, when a feature does not contain a value for the specified property.
* In identity functions, when the feature value is not valid for the style property (for example, if the function is being used for a \`circle-color\` property but the feature property value is not a string or not a valid color).
* In interval or exponential property and zoom-and-property functions, when the feature value is not numeric.
If no default is provided, the style property's default is used in these circumstances.`}},function_stop:rO,expression:oO,expression_name:aO,fog:sO,light:lO,terrain:uO,paint:cO,paint_fill:hO,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill extrusion layer. This is rendered on a per-layer, not per-feature, basis, and data-driven styling is not available.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",doc:"The base color of the extruded fill. The extrusion's surfaces will be shaded differently based on this color in combination with the root `light` settings. If this color is specified as `rgba` with an alpha component, the alpha component will be ignored; use `fill-extrusion-opacity` to set layer opacity.",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up (on the flat plane), respectively.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{doc:"The fill extrusion is translated relative to the map."},viewport:{doc:"The fill extrusion is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-extrusion-translate`.",default:"map",requires:["fill-extrusion-translate"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing images on extruded fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude this layer.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude the base of this layer. Must be less than or equal to `fill-extrusion-height`.",transition:!0,requires:["fill-extrusion-height"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,doc:"Whether to apply a vertical gradient to the sides of a fill-extrusion layer. If true, sides will be shaded slightly darker farther down.",transition:!1,"sdk-support":{"basic functionality":{js:"0.50.0",ios:"4.7.0",macos:"0.13.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:dO,paint_circle:pO,paint_heatmap:fO,paint_symbol:gO,paint_raster:vO,paint_hillshade:mO,paint_background:yO,paint_sky:AO,transition:_O,"property-type":{"data-driven":{type:"property-type",doc:"Property is interpolable and can be represented using a property expression."},"cross-faded":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms."},"cross-faded-data-driven":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms. It can be represented using a property expression."},"color-ramp":{type:"property-type",doc:"Property should be specified using a color ramp from which the output color can be sampled based on a property calculation."},"data-constant":{type:"property-type",doc:"Property is interpolable but cannot be represented using a property expression."},constant:{type:"property-type",doc:"Property is constant across all zoom levels and property values."}},promoteId:CO},bd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Oh(i){var t={exports:{}};return i(t,t.exports),t.exports}function IO(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets option of @rollup/plugin-commonjs appropriately for this require call to behave properly.')}/*! https://mths.be/punycode v1.3.2 by @mathias */Oh(function(i,t){(function(e){var n=t&&!t.nodeType&&t,r=i&&!i.nodeType&&i,o=typeof bd=="object"&&bd;(o.global===o||o.window===o||o.self===o)&&(e=o);var a,s=2147483647,l=36,u=1,c=26,h=38,d=700,p=72,f=128,g="-",v=/^xn--/,y=/[^\x20-\x7E]/,m=/[\x2E\u3002\uFF0E\uFF61]/g,A={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},_=l-u,C=Math.floor,I=String.fromCharCode,E;function w(O){throw RangeError(A[O])}function S(O,R){for(var M=O.length,ie=[];M--;)ie[M]=R(O[M]);return ie}function x(O,R){var M=O.split("@"),ie="";M.length>1&&(ie=M[0]+"@",O=M[1]),O=O.replace(m,".");var Y=O.split("."),K=S(Y,R).join(".");return ie+K}function T(O){for(var R=[],M=0,ie=O.length,Y,K;M<ie;)Y=O.charCodeAt(M++),Y>=55296&&Y<=56319&&M<ie?(K=O.charCodeAt(M++),(K&64512)==56320?R.push(((Y&1023)<<10)+(K&1023)+65536):(R.push(Y),M--)):R.push(Y);return R}function L(O){return S(O,function(R){var M="";return R>65535&&(R-=65536,M+=I(R>>>10&1023|55296),R=56320|R&1023),M+=I(R),M}).join("")}function G(O){return O-48<10?O-22:O-65<26?O-65:O-97<26?O-97:l}function N(O,R){return O+22+75*(O<26)-((R!=0)<<5)}function B(O,R,M){var ie=0;for(O=M?C(O/d):O>>1,O+=C(O/R);O>_*c>>1;ie+=l)O=C(O/_);return C(ie+(_+1)*O/(O+h))}function U(O){var R=[],M=O.length,ie,Y=0,K=f,Q=p,me,pe,V,ze,Ce,Qe,At,$e,it;for(me=O.lastIndexOf(g),me<0&&(me=0),pe=0;pe<me;++pe)O.charCodeAt(pe)>=128&&w("not-basic"),R.push(O.charCodeAt(pe));for(V=me>0?me+1:0;V<M;){for(ze=Y,Ce=1,Qe=l;V>=M&&w("invalid-input"),At=G(O.charCodeAt(V++)),(At>=l||At>C((s-Y)/Ce))&&w("overflow"),Y+=At*Ce,$e=Qe<=Q?u:Qe>=Q+c?c:Qe-Q,!(At<$e);Qe+=l)it=l-$e,Ce>C(s/it)&&w("overflow"),Ce*=it;ie=R.length+1,Q=B(Y-ze,ie,ze==0),C(Y/ie)>s-K&&w("overflow"),K+=C(Y/ie),Y%=ie,R.splice(Y++,0,K)}return L(R)}function D(O){var R,M,ie,Y,K,Q,me,pe,V,ze,Ce,Qe=[],At,$e,it,ue;for(O=T(O),At=O.length,R=f,M=0,K=p,Q=0;Q<At;++Q)Ce=O[Q],Ce<128&&Qe.push(I(Ce));for(ie=Y=Qe.length,Y&&Qe.push(g);ie<At;){for(me=s,Q=0;Q<At;++Q)Ce=O[Q],Ce>=R&&Ce<me&&(me=Ce);for($e=ie+1,me-R>C((s-M)/$e)&&w("overflow"),M+=(me-R)*$e,R=me,Q=0;Q<At;++Q)if(Ce=O[Q],Ce<R&&++M>s&&w("overflow"),Ce==R){for(pe=M,V=l;ze=V<=K?u:V>=K+c?c:V-K,!(pe<ze);V+=l)ue=pe-ze,it=l-ze,Qe.push(I(N(ze+ue%it,0))),pe=C(ue/it);Qe.push(I(N(pe,0))),K=B(M,$e,ie==Y),M=0,++ie}++M,++R}return Qe.join("")}function z(O){return x(O,function(R){return v.test(R)?U(R.slice(4).toLowerCase()):R})}function F(O){return x(O,function(R){return y.test(R)?"xn--"+D(R):R})}if(a={version:"1.3.2",ucs2:{decode:T,encode:L},decode:U,encode:D,toASCII:F,toUnicode:z},n&&r)if(i.exports==n)r.exports=a;else for(E in a)a.hasOwnProperty(E)&&(n[E]=a[E]);else e.punycode=a})(bd)});function EO(i,t){return Object.prototype.hasOwnProperty.call(i,t)}var wO=function(i,t,e,n){t=t||"&",e=e||"=";var r={};if(typeof i!="string"||i.length===0)return r;var o=/\+/g;i=i.split(t);var a=1e3;n&&typeof n.maxKeys=="number"&&(a=n.maxKeys);var s=i.length;a>0&&s>a&&(s=a);for(var l=0;l<s;++l){var u=i[l].replace(o,"%20"),c=u.indexOf(e),h,d,p,f;c>=0?(h=u.substr(0,c),d=u.substr(c+1)):(h=u,d=""),p=decodeURIComponent(h),f=decodeURIComponent(d),EO(r,p)?Array.isArray(r[p])?r[p].push(f):r[p]=[r[p],f]:r[p]=f}return r},ll=function(i){switch(typeof i){case"string":return i;case"boolean":return i?"true":"false";case"number":return isFinite(i)?i:"";default:return""}},SO=function(i,t,e,n){return t=t||"&",e=e||"=",i===null&&(i=void 0),typeof i=="object"?Object.keys(i).map(function(r){var o=encodeURIComponent(ll(r))+e;return Array.isArray(i[r])?i[r].map(function(a){return o+encodeURIComponent(ll(a))}).join(t):o+encodeURIComponent(ll(i[r]))}).join(t):n?encodeURIComponent(ll(n))+e+encodeURIComponent(ll(i)):""};Oh(function(i,t){t.decode=t.parse=wO,t.encode=t.stringify=SO});function Ds(i,...t){for(const e of t)for(const n in e)i[n]=e[n];return i}class fr extends Error{constructor(t,e){super(e),this.message=e,this.key=t}}class h0{constructor(t,e=[]){this.parent=t,this.bindings={};for(const[n,r]of e)this.bindings[n]=r}concat(t){return new h0(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return this.bindings[t]?!0:this.parent?this.parent.has(t):!1}}const Lh={kind:"null"},$={kind:"number"},Ze={kind:"string"},Be={kind:"boolean"},qr={kind:"color"},vs={kind:"object"},je={kind:"value"},PO={kind:"error"},Gh={kind:"collator"},kh={kind:"formatted"},gu={kind:"resolvedImage"};function Gn(i,t){return{kind:"array",itemType:i,N:t}}function Lt(i){if(i.kind==="array"){const t=Lt(i.itemType);return typeof i.N=="number"?`array<${t}, ${i.N}>`:i.itemType.kind==="value"?"array":`array<${t}>`}else return i.kind}const xO=[Lh,$,Ze,Be,qr,kh,vs,Gn(je),gu];function tu(i,t){if(t.kind==="error")return null;if(i.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!tu(i.itemType,t.itemType))&&(typeof i.N!="number"||i.N===t.N))return null}else{if(i.kind===t.kind)return null;if(i.kind==="value"){for(const e of xO)if(!tu(e,t))return null}}return`Expected ${Lt(i)} but found ${Lt(t)} instead.`}function d0(i,t){return t.some(e=>e.kind===i.kind)}function iu(i,t){return t.some(e=>e==="null"?i===null:e==="array"?Array.isArray(i):e==="object"?i&&!Array.isArray(i)&&typeof i=="object":e===typeof i)}var uA=Oh(function(i,t){var e={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function n(u){return u=Math.round(u),u<0?0:u>255?255:u}function r(u){return u<0?0:u>1?1:u}function o(u){return u[u.length-1]==="%"?n(parseFloat(u)/100*255):n(parseInt(u))}function a(u){return u[u.length-1]==="%"?r(parseFloat(u)/100):r(parseFloat(u))}function s(u,c,h){return h<0?h+=1:h>1&&(h-=1),h*6<1?u+(c-u)*h*6:h*2<1?c:h*3<2?u+(c-u)*(2/3-h)*6:u}function l(u){var c=u.replace(/ /g,"").toLowerCase();if(c in e)return e[c].slice();if(c[0]==="#"){if(c.length===4){var h=parseInt(c.substr(1),16);return h>=0&&h<=4095?[(h&3840)>>4|(h&3840)>>8,h&240|(h&240)>>4,h&15|(h&15)<<4,1]:null}else if(c.length===7){var h=parseInt(c.substr(1),16);return h>=0&&h<=16777215?[(h&16711680)>>16,(h&65280)>>8,h&255,1]:null}return null}var d=c.indexOf("("),p=c.indexOf(")");if(d!==-1&&p+1===c.length){var f=c.substr(0,d),g=c.substr(d+1,p-(d+1)).split(","),v=1;switch(f){case"rgba":if(g.length!==4)return null;v=a(g.pop());case"rgb":return g.length!==3?null:[o(g[0]),o(g[1]),o(g[2]),v];case"hsla":if(g.length!==4)return null;v=a(g.pop());case"hsl":if(g.length!==3)return null;var y=(parseFloat(g[0])%360+360)%360/360,m=a(g[1]),A=a(g[2]),_=A<=.5?A*(m+1):A+m-A*m,C=A*2-_;return[n(s(C,_,y+1/3)*255),n(s(C,_,y)*255),n(s(C,_,y-1/3)*255),v];default:return null}}return null}try{t.parseCSSColor=l}catch{}});class pt{constructor(t,e,n,r=1){this.r=t,this.g=e,this.b=n,this.a=r}static parse(t){if(!t)return;if(t instanceof pt)return t;if(typeof t!="string")return;const e=uA.parseCSSColor(t);if(e)return new pt(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3])}toString(){const[t,e,n,r]=this.toArray();return`rgba(${Math.round(t)},${Math.round(e)},${Math.round(n)},${r})`}toArray(){const{r:t,g:e,b:n,a:r}=this;return r===0?[0,0,0,0]:[t*255/r,e*255/r,n*255/r,r]}}pt.black=new pt(0,0,0,1);pt.white=new pt(1,1,1,1);pt.transparent=new pt(0,0,0,0);pt.red=new pt(1,0,0,1);pt.blue=new pt(0,0,1,1);class p0{constructor(t,e,n){t?this.sensitivity=e?"variant":"case":this.sensitivity=e?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,e){return this.collator.compare(t,e)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Gp{constructor(t,e,n,r,o){this.text=t,this.image=e,this.scale=n,this.fontStack=r,this.textColor=o}}class Qn{constructor(t){this.sections=t}static fromString(t){return new Qn([new Gp(t,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(t=>t.text.length!==0||t.image&&t.image.name.length!==0)}static factory(t){return t instanceof Qn?t:Qn.fromString(t)}toString(){return this.sections.length===0?"":this.sections.map(t=>t.text).join("")}serialize(){const t=["format"];for(const e of this.sections){if(e.image){t.push(["image",e.image.name]);continue}t.push(e.text);const n={};e.fontStack&&(n["text-font"]=["literal",e.fontStack.split(",")]),e.scale&&(n["font-scale"]=e.scale),e.textColor&&(n["text-color"]=["rgba"].concat(e.textColor.toArray())),t.push(n)}return t}}class io{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new io({name:t,available:!1}):null}serialize(){return["image",this.name]}}function cA(i,t,e,n){return typeof i=="number"&&i>=0&&i<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof e=="number"&&e>=0&&e<=255?typeof n>"u"||typeof n=="number"&&n>=0&&n<=1?null:`Invalid rgba value [${[i,t,e,n].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof n=="number"?[i,t,e,n]:[i,t,e]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Xc(i){if(i===null)return!0;if(typeof i=="string")return!0;if(typeof i=="boolean")return!0;if(typeof i=="number")return!0;if(i instanceof pt)return!0;if(i instanceof p0)return!0;if(i instanceof Qn)return!0;if(i instanceof io)return!0;if(Array.isArray(i)){for(const t of i)if(!Xc(t))return!1;return!0}else if(typeof i=="object"){for(const t in i)if(!Xc(i[t]))return!1;return!0}else return!1}function vi(i){if(i===null)return Lh;if(typeof i=="string")return Ze;if(typeof i=="boolean")return Be;if(typeof i=="number")return $;if(i instanceof pt)return qr;if(i instanceof p0)return Gh;if(i instanceof Qn)return kh;if(i instanceof io)return gu;if(Array.isArray(i)){const t=i.length;let e;for(const n of i){const r=vi(n);if(!e)e=r;else{if(e===r)continue;e=je;break}}return Gn(e||je,t)}else return vs}function Rl(i){const t=typeof i;return i===null?"":t==="string"||t==="number"||t==="boolean"?String(i):i instanceof pt||i instanceof Qn||i instanceof io?i.toString():JSON.stringify(i)}class Ns{constructor(t,e){this.type=t,this.value=e}static parse(t,e){if(t.length!==2)return e.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!Xc(t[1]))return e.error("invalid value");const n=t[1];let r=vi(n);const o=e.expectedType;return r.kind==="array"&&r.N===0&&o&&o.kind==="array"&&(typeof o.N!="number"||o.N===0)&&(r=o),new Ns(r,n)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof pt?["rgba"].concat(this.value.toArray()):this.value instanceof Qn?this.value.serialize():this.value}}class bi{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}}const Rd={string:Ze,number:$,boolean:Be,object:vs};class Xn{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");let n=1,r;const o=t[0];if(o==="array"){let s;if(t.length>2){const u=t[1];if(typeof u!="string"||!(u in Rd)||u==="object")return e.error('The item type argument of "array" must be one of string, number, boolean',1);s=Rd[u],n++}else s=je;let l;if(t.length>3){if(t[2]!==null&&(typeof t[2]!="number"||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);l=t[2],n++}r=Gn(s,l)}else r=Rd[o];const a=[];for(;n<t.length;n++){const s=e.parse(t[n],n,je);if(!s)return null;a.push(s)}return new Xn(r,a)}evaluate(t){for(let e=0;e<this.args.length;e++){const n=this.args[e].evaluate(t);if(tu(this.type,vi(n))){if(e===this.args.length-1)throw new bi(`Expected value to be of type ${Lt(this.type)}, but found ${Lt(vi(n))} instead.`)}else return n}return null}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){const t=this.type,e=[t.kind];if(t.kind==="array"){const n=t.itemType;if(n.kind==="string"||n.kind==="number"||n.kind==="boolean"){e.push(n.kind);const r=t.N;(typeof r=="number"||this.args.length>1)&&e.push(r)}}return e.concat(this.args.map(n=>n.serialize()))}}class Dh{constructor(t){this.type=kh,this.sections=t}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const n=t[1];if(!Array.isArray(n)&&typeof n=="object")return e.error("First argument must be an image or text section.");const r=[];let o=!1;for(let a=1;a<=t.length-1;++a){const s=t[a];if(o&&typeof s=="object"&&!Array.isArray(s)){o=!1;let l=null;if(s["font-scale"]&&(l=e.parse(s["font-scale"],1,$),!l))return null;let u=null;if(s["text-font"]&&(u=e.parse(s["text-font"],1,Gn(Ze)),!u))return null;let c=null;if(s["text-color"]&&(c=e.parse(s["text-color"],1,qr),!c))return null;const h=r[r.length-1];h.scale=l,h.font=u,h.textColor=c}else{const l=e.parse(t[a],1,je);if(!l)return null;const u=l.type.kind;if(u!=="string"&&u!=="value"&&u!=="null"&&u!=="resolvedImage")return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");o=!0,r.push({content:l,scale:null,font:null,textColor:null})}}return new Dh(r)}evaluate(t){const e=n=>{const r=n.content.evaluate(t);return vi(r)===gu?new Gp("",r,null,null,null):new Gp(Rl(r),null,n.scale?n.scale.evaluate(t):null,n.font?n.font.evaluate(t).join(","):null,n.textColor?n.textColor.evaluate(t):null)};return new Qn(this.sections.map(e))}eachChild(t){for(const e of this.sections)t(e.content),e.scale&&t(e.scale),e.font&&t(e.font),e.textColor&&t(e.textColor)}outputDefined(){return!1}serialize(){const t=["format"];for(const e of this.sections){t.push(e.content.serialize());const n={};e.scale&&(n["font-scale"]=e.scale.serialize()),e.font&&(n["text-font"]=e.font.serialize()),e.textColor&&(n["text-color"]=e.textColor.serialize()),t.push(n)}return t}}class Nh{constructor(t){this.type=gu,this.input=t}static parse(t,e){if(t.length!==2)return e.error("Expected two arguments.");const n=e.parse(t[1],1,Ze);return n?new Nh(n):e.error("No image name provided.")}evaluate(t){const e=this.input.evaluate(t),n=io.fromString(e);return n&&t.availableImages&&(n.available=t.availableImages.indexOf(e)>-1),n}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const MO={"to-boolean":Be,"to-color":qr,"to-number":$,"to-string":Ze};class So{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const n=t[0];if((n==="to-boolean"||n==="to-string")&&t.length!==2)return e.error("Expected one argument.");const r=MO[n],o=[];for(let a=1;a<t.length;a++){const s=e.parse(t[a],a,je);if(!s)return null;o.push(s)}return new So(r,o)}evaluate(t){if(this.type.kind==="boolean")return!!this.args[0].evaluate(t);if(this.type.kind==="color"){let e,n;for(const r of this.args){if(e=r.evaluate(t),n=null,e instanceof pt)return e;if(typeof e=="string"){const o=t.parseColor(e);if(o)return o}else if(Array.isArray(e)&&(e.length<3||e.length>4?n=`Invalid rbga value ${JSON.stringify(e)}: expected an array containing either three or four numeric values.`:n=cA(e[0],e[1],e[2],e[3]),!n))return new pt(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new bi(n||`Could not parse color from value '${typeof e=="string"?e:String(JSON.stringify(e))}'`)}else if(this.type.kind==="number"){let e=null;for(const n of this.args){if(e=n.evaluate(t),e===null)return 0;const r=Number(e);if(!isNaN(r))return r}throw new bi(`Could not convert ${JSON.stringify(e)} to number.`)}else return this.type.kind==="formatted"?Qn.fromString(Rl(this.args[0].evaluate(t))):this.type.kind==="resolvedImage"?io.fromString(Rl(this.args[0].evaluate(t))):Rl(this.args[0].evaluate(t))}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){if(this.type.kind==="formatted")return new Dh([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Nh(this.args[0]).serialize();const t=[`to-${this.type.kind}`];return this.eachChild(e=>{t.push(e.serialize())}),t}}const TO=["Unknown","Point","LineString","Polygon"];class hA{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?TO[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(t){let e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=pt.parse(t)),e}}class Zn{constructor(t,e,n,r){this.name=t,this.type=e,this._evaluate=n,this.args=r}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(t=>t.serialize()))}static parse(t,e){const n=t[0],r=Zn.definitions[n];if(!r)return e.error(`Unknown expression "${n}". If you wanted a literal array, use ["literal", [...]].`,0);const o=Array.isArray(r)?r[0]:r.type,a=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,s=a.filter(([u])=>!Array.isArray(u)||u.length===t.length-1);let l=null;for(const[u,c]of s){l=new zh(e.registry,e.path,null,e.scope);const h=[];let d=!1;for(let p=1;p<t.length;p++){const f=t[p],g=Array.isArray(u)?u[p-1]:u.type,v=l.parse(f,1+h.length,g);if(!v){d=!0;break}h.push(v)}if(!d){if(Array.isArray(u)&&u.length!==h.length){l.error(`Expected ${u.length} arguments, but found ${h.length} instead.`);continue}for(let p=0;p<h.length;p++){const f=Array.isArray(u)?u[p]:u.type,g=h[p];l.concat(p+1).checkSubtype(f,g.type)}if(l.errors.length===0)return new Zn(n,o,c,h)}}if(s.length===1)e.errors.push(...l.errors);else{const c=(s.length?s:a).map(([d])=>bO(d)).join(" | "),h=[];for(let d=1;d<t.length;d++){const p=e.parse(t[d],1+h.length);if(!p)return null;h.push(Lt(p.type))}e.error(`Expected arguments of type ${c}, but found (${h.join(", ")}) instead.`)}return null}static register(t,e){Zn.definitions=e;for(const n in e)t[n]=Zn}}function bO(i){return Array.isArray(i)?`(${i.map(Lt).join(", ")})`:`(${Lt(i.type)}...)`}class Fh{constructor(t,e,n){this.type=Gh,this.locale=n,this.caseSensitive=t,this.diacriticSensitive=e}static parse(t,e){if(t.length!==2)return e.error("Expected one argument.");const n=t[1];if(typeof n!="object"||Array.isArray(n))return e.error("Collator options argument must be an object.");const r=e.parse(n["case-sensitive"]===void 0?!1:n["case-sensitive"],1,Be);if(!r)return null;const o=e.parse(n["diacritic-sensitive"]===void 0?!1:n["diacritic-sensitive"],1,Be);if(!o)return null;let a=null;return n.locale&&(a=e.parse(n.locale,1,Ze),!a)?null:new Fh(r,o,a)}evaluate(t){return new p0(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}serialize(){const t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]}}const Ro=8192;function f0(i,t){i[0]=Math.min(i[0],t[0]),i[1]=Math.min(i[1],t[1]),i[2]=Math.max(i[2],t[0]),i[3]=Math.max(i[3],t[1])}function RO(i){return(180+i)/360}function OO(i){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i*Math.PI/360)))/360}function Zc(i,t){return!(i[0]<=t[0]||i[2]>=t[2]||i[1]<=t[1]||i[3]>=t[3])}function LO(i,t){const e=RO(i[0]),n=OO(i[1]),r=Math.pow(2,t.z);return[Math.round(e*r*Ro),Math.round(n*r*Ro)]}function GO(i,t,e){const n=i[0]-t[0],r=i[1]-t[1],o=i[0]-e[0],a=i[1]-e[1];return n*a-o*r===0&&n*o<=0&&r*a<=0}function kO(i,t,e){return t[1]>i[1]!=e[1]>i[1]&&i[0]<(e[0]-t[0])*(i[1]-t[1])/(e[1]-t[1])+t[0]}function g0(i,t){let e=!1;for(let n=0,r=t.length;n<r;n++){const o=t[n];for(let a=0,s=o.length;a<s-1;a++){if(GO(i,o[a],o[a+1]))return!1;kO(i,o[a],o[a+1])&&(e=!e)}}return e}function DO(i,t){for(let e=0;e<t.length;e++)if(g0(i,t[e]))return!0;return!1}function NO(i,t){return i[0]*t[1]-i[1]*t[0]}function av(i,t,e,n){const r=i[0]-e[0],o=i[1]-e[1],a=t[0]-e[0],s=t[1]-e[1],l=n[0]-e[0],u=n[1]-e[1],c=r*u-l*o,h=a*u-l*s;return c>0&&h<0||c<0&&h>0}function FO(i,t,e,n){const r=[t[0]-i[0],t[1]-i[1]],o=[n[0]-e[0],n[1]-e[1]];return NO(o,r)===0?!1:!!(av(i,t,e,n)&&av(e,n,i,t))}function UO(i,t,e){for(const n of e)for(let r=0;r<n.length-1;++r)if(FO(i,t,n[r],n[r+1]))return!0;return!1}function dA(i,t){for(let e=0;e<i.length;++e)if(!g0(i[e],t))return!1;for(let e=0;e<i.length-1;++e)if(UO(i[e],i[e+1],t))return!1;return!0}function BO(i,t){for(let e=0;e<t.length;e++)if(dA(i,t[e]))return!0;return!1}function v0(i,t,e){const n=[];for(let r=0;r<i.length;r++){const o=[];for(let a=0;a<i[r].length;a++){const s=LO(i[r][a],e);f0(t,s),o.push(s)}n.push(o)}return n}function pA(i,t,e){const n=[];for(let r=0;r<i.length;r++){const o=v0(i[r],t,e);n.push(o)}return n}function fA(i,t,e,n){if(i[0]<e[0]||i[0]>e[2]){const r=n*.5;let o=i[0]-e[0]>r?-n:e[0]-i[0]>r?n:0;o===0&&(o=i[0]-e[2]>r?-n:e[2]-i[0]>r?n:0),i[0]+=o}f0(t,i)}function jO(i){i[0]=i[1]=1/0,i[2]=i[3]=-1/0}function sv(i,t,e,n){const r=Math.pow(2,n.z)*Ro,o=[n.x*Ro,n.y*Ro],a=[];for(const s of i)for(const l of s){const u=[l.x+o[0],l.y+o[1]];fA(u,t,e,r),a.push(u)}return a}function lv(i,t,e,n){const r=Math.pow(2,n.z)*Ro,o=[n.x*Ro,n.y*Ro],a=[];for(const s of i){const l=[];for(const u of s){const c=[u.x+o[0],u.y+o[1]];f0(t,c),l.push(c)}a.push(l)}if(t[2]-t[0]<=r/2){jO(t);for(const s of a)for(const l of s)fA(l,t,e,r)}return a}function zO(i,t){const e=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],r=i.canonicalID();if(t.type==="Polygon"){const o=v0(t.coordinates,n,r),a=sv(i.geometry(),e,n,r);if(!Zc(e,n))return!1;for(const s of a)if(!g0(s,o))return!1}if(t.type==="MultiPolygon"){const o=pA(t.coordinates,n,r),a=sv(i.geometry(),e,n,r);if(!Zc(e,n))return!1;for(const s of a)if(!DO(s,o))return!1}return!0}function VO(i,t){const e=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],r=i.canonicalID();if(t.type==="Polygon"){const o=v0(t.coordinates,n,r),a=lv(i.geometry(),e,n,r);if(!Zc(e,n))return!1;for(const s of a)if(!dA(s,o))return!1}if(t.type==="MultiPolygon"){const o=pA(t.coordinates,n,r),a=lv(i.geometry(),e,n,r);if(!Zc(e,n))return!1;for(const s of a)if(!BO(s,o))return!1}return!0}class ga{constructor(t,e){this.type=Be,this.geojson=t,this.geometries=e}static parse(t,e){if(t.length!==2)return e.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(Xc(t[1])){const n=t[1];if(n.type==="FeatureCollection")for(let r=0;r<n.features.length;++r){const o=n.features[r].geometry.type;if(o==="Polygon"||o==="MultiPolygon")return new ga(n,n.features[r].geometry)}else if(n.type==="Feature"){const r=n.geometry.type;if(r==="Polygon"||r==="MultiPolygon")return new ga(n,n.geometry)}else if(n.type==="Polygon"||n.type==="MultiPolygon")return new ga(n,n)}return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return zO(t,this.geometries);if(t.geometryType()==="LineString")return VO(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}function Uh(i){if(i instanceof Zn){if(i.name==="get"&&i.args.length===1)return!1;if(i.name==="feature-state")return!1;if(i.name==="has"&&i.args.length===1)return!1;if(i.name==="properties"||i.name==="geometry-type"||i.name==="id")return!1;if(/^filter-/.test(i.name))return!1}if(i instanceof ga)return!1;let t=!0;return i.eachChild(e=>{t&&!Uh(e)&&(t=!1)}),t}function nu(i){if(i instanceof Zn&&i.name==="feature-state")return!1;let t=!0;return i.eachChild(e=>{t&&!nu(e)&&(t=!1)}),t}function Bh(i,t){if(i instanceof Zn&&t.indexOf(i.name)>=0)return!1;let e=!0;return i.eachChild(n=>{e&&!Bh(n,t)&&(e=!1)}),e}class jh{constructor(t,e){this.type=e.type,this.name=t,this.boundExpression=e}static parse(t,e){if(t.length!==2||typeof t[1]!="string")return e.error("'var' expression requires exactly one string literal argument.");const n=t[1];return e.scope.has(n)?new jh(n,e.scope.get(n)):e.error(`Unknown variable "${n}". Make sure "${n}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class zh{constructor(t,e=[],n,r=new h0,o=[]){this.registry=t,this.path=e,this.key=e.map(a=>`[${a}]`).join(""),this.scope=r,this.errors=o,this.expectedType=n}parse(t,e,n,r,o={}){return e?this.concat(e,n,r)._parse(t,o):this._parse(t,o)}_parse(t,e){(t===null||typeof t=="string"||typeof t=="boolean"||typeof t=="number")&&(t=["literal",t]);function n(r,o,a){return a==="assert"?new Xn(o,[r]):a==="coerce"?new So(o,[r]):r}if(Array.isArray(t)){if(t.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const r=t[0];if(typeof r!="string")return this.error(`Expression name must be a string, but found ${typeof r} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const o=this.registry[r];if(o){let a=o.parse(t,this);if(!a)return null;if(this.expectedType){const s=this.expectedType,l=a.type;if((s.kind==="string"||s.kind==="number"||s.kind==="boolean"||s.kind==="object"||s.kind==="array")&&l.kind==="value")a=n(a,s,e.typeAnnotation||"assert");else if((s.kind==="color"||s.kind==="formatted"||s.kind==="resolvedImage")&&(l.kind==="value"||l.kind==="string"))a=n(a,s,e.typeAnnotation||"coerce");else if(this.checkSubtype(s,l))return null}if(!(a instanceof Ns)&&a.type.kind!=="resolvedImage"&&kp(a)){const s=new hA;try{a=new Ns(a.type,a.evaluate(s))}catch(l){return this.error(l.message),null}}return a}return this.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof t>"u"?this.error("'undefined' value invalid. Use null instead."):typeof t=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof t} instead.`)}concat(t,e,n){const r=typeof t=="number"?this.path.concat(t):this.path,o=n?this.scope.concat(n):this.scope;return new zh(this.registry,r,e||null,o,this.errors)}error(t,...e){const n=`${this.key}${e.map(r=>`[${r}]`).join("")}`;this.errors.push(new fr(n,t))}checkSubtype(t,e){const n=tu(t,e);return n&&this.error(n),n}}function kp(i){if(i instanceof jh)return kp(i.boundExpression);if(i instanceof Zn&&i.name==="error")return!1;if(i instanceof Fh)return!1;if(i instanceof ga)return!1;const t=i instanceof So||i instanceof Xn;let e=!0;return i.eachChild(n=>{t?e=e&&kp(n):e=e&&n instanceof Ns}),e?Uh(i)&&Bh(i,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script"]):!1}function Vh(i,t){const e=i.length-1;let n=0,r=e,o=0,a,s;for(;n<=r;)if(o=Math.floor((n+r)/2),a=i[o],s=i[o+1],a<=t){if(o===e||t<s)return o;n=o+1}else if(a>t)r=o-1;else throw new bi("Input is not a number.");return 0}class Wh{constructor(t,e,n){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(const[r,o]of n)this.labels.push(r),this.outputs.push(o)}static parse(t,e){if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!==0)return e.error("Expected an even number of arguments.");const n=e.parse(t[1],1,$);if(!n)return null;const r=[];let o=null;e.expectedType&&e.expectedType.kind!=="value"&&(o=e.expectedType);for(let a=1;a<t.length;a+=2){const s=a===1?-1/0:t[a],l=t[a+1],u=a,c=a+1;if(typeof s!="number")return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',u);if(r.length&&r[r.length-1][0]>=s)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',u);const h=e.parse(l,c,o);if(!h)return null;o=o||h.type,r.push([s,h])}return new Wh(o,n,r)}evaluate(t){const e=this.labels,n=this.outputs;if(e.length===1)return n[0].evaluate(t);const r=this.input.evaluate(t);if(r<=e[0])return n[0].evaluate(t);const o=e.length;if(r>=e[o-1])return n[o-1].evaluate(t);const a=Vh(e,r);return n[a].evaluate(t)}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}serialize(){const t=["step",this.input.serialize()];for(let e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t}}var WO=Js;function Js(i,t,e,n){this.cx=3*i,this.bx=3*(e-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(n-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=n,this.p2x=e,this.p2y=n}Js.prototype.sampleCurveX=function(i){return((this.ax*i+this.bx)*i+this.cx)*i};Js.prototype.sampleCurveY=function(i){return((this.ay*i+this.by)*i+this.cy)*i};Js.prototype.sampleCurveDerivativeX=function(i){return(3*this.ax*i+2*this.bx)*i+this.cx};Js.prototype.solveCurveX=function(i,t){typeof t>"u"&&(t=1e-6);var e,n,r,o,a;for(r=i,a=0;a<8;a++){if(o=this.sampleCurveX(r)-i,Math.abs(o)<t)return r;var s=this.sampleCurveDerivativeX(r);if(Math.abs(s)<1e-6)break;r=r-o/s}if(e=0,n=1,r=i,r<e)return e;if(r>n)return n;for(;e<n;){if(o=this.sampleCurveX(r),Math.abs(o-i)<t)return r;i>o?e=r:n=r,r=(n-e)*.5+e}return r};Js.prototype.solve=function(i,t){return this.sampleCurveY(this.solveCurveX(i,t))};function Pn(i,t,e){return i*(1-e)+t*e}function YO(i,t,e){return new pt(Pn(i.r,t.r,e),Pn(i.g,t.g,e),Pn(i.b,t.b,e),Pn(i.a,t.a,e))}function HO(i,t,e){return i.map((n,r)=>Pn(n,t[r],e))}var gA=Object.freeze({__proto__:null,number:Pn,color:YO,array:HO});const vA=.95047,mA=1,yA=1.08883,AA=4/29,ms=6/29,_A=3*ms*ms,qO=ms*ms*ms,XO=Math.PI/180,ZO=180/Math.PI;function Od(i){return i>qO?Math.pow(i,1/3):i/_A+AA}function Ld(i){return i>ms?i*i*i:_A*(i-AA)}function Gd(i){return 255*(i<=.0031308?12.92*i:1.055*Math.pow(i,1/2.4)-.055)}function kd(i){return i/=255,i<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4)}function CA(i){const t=kd(i.r),e=kd(i.g),n=kd(i.b),r=Od((.4124564*t+.3575761*e+.1804375*n)/vA),o=Od((.2126729*t+.7151522*e+.072175*n)/mA),a=Od((.0193339*t+.119192*e+.9503041*n)/yA);return{l:116*o-16,a:500*(r-o),b:200*(o-a),alpha:i.a}}function IA(i){let t=(i.l+16)/116,e=isNaN(i.a)?t:t+i.a/500,n=isNaN(i.b)?t:t-i.b/200;return t=mA*Ld(t),e=vA*Ld(e),n=yA*Ld(n),new pt(Gd(3.2404542*e-1.5371385*t-.4985314*n),Gd(-.969266*e+1.8760108*t+.041556*n),Gd(.0556434*e-.2040259*t+1.0572252*n),i.alpha)}function KO(i,t,e){return{l:Pn(i.l,t.l,e),a:Pn(i.a,t.a,e),b:Pn(i.b,t.b,e),alpha:Pn(i.alpha,t.alpha,e)}}function JO(i){const{l:t,a:e,b:n}=CA(i),r=Math.atan2(n,e)*ZO;return{h:r<0?r+360:r,c:Math.sqrt(e*e+n*n),l:t,alpha:i.a}}function QO(i){const t=i.h*XO,e=i.c,n=i.l;return IA({l:n,a:Math.cos(t)*e,b:Math.sin(t)*e,alpha:i.alpha})}function $O(i,t,e){const n=t-i;return i+e*(n>180||n<-180?n-360*Math.round(n/360):n)}function e2(i,t,e){return{h:$O(i.h,t.h,e),c:Pn(i.c,t.c,e),l:Pn(i.l,t.l,e),alpha:Pn(i.alpha,t.alpha,e)}}const fl={forward:CA,reverse:IA,interpolate:KO},gl={forward:JO,reverse:QO,interpolate:e2};var EA=Object.freeze({__proto__:null,lab:fl,hcl:gl});class Nn{constructor(t,e,n,r,o){this.type=t,this.operator=e,this.interpolation=n,this.input=r,this.labels=[],this.outputs=[];for(const[a,s]of o)this.labels.push(a),this.outputs.push(s)}static interpolationFactor(t,e,n,r){let o=0;if(t.name==="exponential")o=Dd(e,t.base,n,r);else if(t.name==="linear")o=Dd(e,1,n,r);else if(t.name==="cubic-bezier"){const a=t.controlPoints;o=new WO(a[0],a[1],a[2],a[3]).solve(Dd(e,1,n,r))}return o}static parse(t,e){let[n,r,o,...a]=t;if(!Array.isArray(r)||r.length===0)return e.error("Expected an interpolation type expression.",1);if(r[0]==="linear")r={name:"linear"};else if(r[0]==="exponential"){const u=r[1];if(typeof u!="number")return e.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:u}}else if(r[0]==="cubic-bezier"){const u=r.slice(1);if(u.length!==4||u.some(c=>typeof c!="number"||c<0||c>1))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:u}}else return e.error(`Unknown interpolation type ${String(r[0])}`,1,0);if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!==0)return e.error("Expected an even number of arguments.");if(o=e.parse(o,2,$),!o)return null;const s=[];let l=null;n==="interpolate-hcl"||n==="interpolate-lab"?l=qr:e.expectedType&&e.expectedType.kind!=="value"&&(l=e.expectedType);for(let u=0;u<a.length;u+=2){const c=a[u],h=a[u+1],d=u+3,p=u+4;if(typeof c!="number")return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',d);if(s.length&&s[s.length-1][0]>=c)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',d);const f=e.parse(h,p,l);if(!f)return null;l=l||f.type,s.push([c,f])}return l.kind!=="number"&&l.kind!=="color"&&!(l.kind==="array"&&l.itemType.kind==="number"&&typeof l.N=="number")?e.error(`Type ${Lt(l)} is not interpolatable.`):new Nn(l,n,r,o,s)}evaluate(t){const e=this.labels,n=this.outputs;if(e.length===1)return n[0].evaluate(t);const r=this.input.evaluate(t);if(r<=e[0])return n[0].evaluate(t);const o=e.length;if(r>=e[o-1])return n[o-1].evaluate(t);const a=Vh(e,r),s=e[a],l=e[a+1],u=Nn.interpolationFactor(this.interpolation,r,s,l),c=n[a].evaluate(t),h=n[a+1].evaluate(t);return this.operator==="interpolate"?gA[this.type.kind.toLowerCase()](c,h,u):this.operator==="interpolate-hcl"?gl.reverse(gl.interpolate(gl.forward(c),gl.forward(h),u)):fl.reverse(fl.interpolate(fl.forward(c),fl.forward(h),u))}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}serialize(){let t;this.interpolation.name==="linear"?t=["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?t=["linear"]:t=["exponential",this.interpolation.base]:t=["cubic-bezier"].concat(this.interpolation.controlPoints);const e=[this.operator,t,this.input.serialize()];for(let n=0;n<this.labels.length;n++)e.push(this.labels[n],this.outputs[n].serialize());return e}}function Dd(i,t,e,n){const r=n-e,o=i-e;return r===0?0:t===1?o/r:(Math.pow(t,o)-1)/(Math.pow(t,r)-1)}class ru{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expectected at least one argument.");let n=null;const r=e.expectedType;r&&r.kind!=="value"&&(n=r);const o=[];for(const s of t.slice(1)){const l=e.parse(s,1+o.length,n,void 0,{typeAnnotation:"omit"});if(!l)return null;n=n||l.type,o.push(l)}return r&&o.some(s=>tu(r,s.type))?new ru(je,o):new ru(n,o)}evaluate(t){let e=null,n=0,r;for(const o of this.args)if(n++,e=o.evaluate(t),e&&e instanceof io&&!e.available&&(r||(r=e.name),e=null,n===this.args.length&&(e=r)),e!==null)break;return e}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){const t=["coalesce"];return this.eachChild(e=>{t.push(e.serialize())}),t}}class Yh{constructor(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const e of this.bindings)t(e[1]);t(this.result)}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const n=[];for(let o=1;o<t.length-1;o+=2){const a=t[o];if(typeof a!="string")return e.error(`Expected string, but found ${typeof a} instead.`,o);if(/[^a-zA-Z0-9_]/.test(a))return e.error("Variable names must contain only alphanumeric characters or '_'.",o);const s=e.parse(t[o+1],o+1);if(!s)return null;n.push([a,s])}const r=e.parse(t[t.length-1],t.length-1,e.expectedType,n);return r?new Yh(n,r):null}outputDefined(){return this.result.outputDefined()}serialize(){const t=["let"];for(const[e,n]of this.bindings)t.push(e,n.serialize());return t.push(this.result.serialize()),t}}class m0{constructor(t,e,n){this.type=t,this.index=e,this.input=n}static parse(t,e){if(t.length!==3)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const n=e.parse(t[1],1,$),r=e.parse(t[2],2,Gn(e.expectedType||je));if(!n||!r)return null;const o=r.type;return new m0(o.itemType,n,r)}evaluate(t){const e=this.index.evaluate(t),n=this.input.evaluate(t);if(e<0)throw new bi(`Array index out of bounds: ${e} < 0.`);if(e>=n.length)throw new bi(`Array index out of bounds: ${e} > ${n.length-1}.`);if(e!==Math.floor(e))throw new bi(`Array index must be an integer, but found ${e} instead.`);return n[e]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class y0{constructor(t,e){this.type=Be,this.needle=t,this.haystack=e}static parse(t,e){if(t.length!==3)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const n=e.parse(t[1],1,je),r=e.parse(t[2],2,je);return!n||!r?null:d0(n.type,[Be,Ze,$,Lh,je])?new y0(n,r):e.error(`Expected first argument to be of type boolean, string, number or null, but found ${Lt(n.type)} instead`)}evaluate(t){const e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(!n)return!1;if(!iu(e,["boolean","string","number","null"]))throw new bi(`Expected first argument to be of type boolean, string, number or null, but found ${Lt(vi(e))} instead.`);if(!iu(n,["string","array"]))throw new bi(`Expected second argument to be of type array or string, but found ${Lt(vi(n))} instead.`);return n.indexOf(e)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class Kc{constructor(t,e,n){this.type=$,this.needle=t,this.haystack=e,this.fromIndex=n}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const n=e.parse(t[1],1,je),r=e.parse(t[2],2,je);if(!n||!r)return null;if(!d0(n.type,[Be,Ze,$,Lh,je]))return e.error(`Expected first argument to be of type boolean, string, number or null, but found ${Lt(n.type)} instead`);if(t.length===4){const o=e.parse(t[3],3,$);return o?new Kc(n,r,o):null}else return new Kc(n,r)}evaluate(t){const e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(!iu(e,["boolean","string","number","null"]))throw new bi(`Expected first argument to be of type boolean, string, number or null, but found ${Lt(vi(e))} instead.`);if(!iu(n,["string","array"]))throw new bi(`Expected second argument to be of type array or string, but found ${Lt(vi(n))} instead.`);if(this.fromIndex){const r=this.fromIndex.evaluate(t);return n.indexOf(e,r)}return n.indexOf(e)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class A0{constructor(t,e,n,r,o,a){this.inputType=t,this.type=e,this.input=n,this.cases=r,this.outputs=o,this.otherwise=a}static parse(t,e){if(t.length<5)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!==1)return e.error("Expected an even number of arguments.");let n,r;e.expectedType&&e.expectedType.kind!=="value"&&(r=e.expectedType);const o={},a=[];for(let u=2;u<t.length-1;u+=2){let c=t[u];const h=t[u+1];Array.isArray(c)||(c=[c]);const d=e.concat(u);if(c.length===0)return d.error("Expected at least one branch label.");for(const f of c){if(typeof f!="number"&&typeof f!="string")return d.error("Branch labels must be numbers or strings.");if(typeof f=="number"&&Math.abs(f)>Number.MAX_SAFE_INTEGER)return d.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof f=="number"&&Math.floor(f)!==f)return d.error("Numeric branch labels must be integer values.");if(!n)n=vi(f);else if(d.checkSubtype(n,vi(f)))return null;if(typeof o[String(f)]<"u")return d.error("Branch labels must be unique.");o[String(f)]=a.length}const p=e.parse(h,u,r);if(!p)return null;r=r||p.type,a.push(p)}const s=e.parse(t[1],1,je);if(!s)return null;const l=e.parse(t[t.length-1],t.length-1,r);return!l||s.type.kind!=="value"&&e.concat(1).checkSubtype(n,s.type)?null:new A0(n,r,s,o,a,l)}evaluate(t){const e=this.input.evaluate(t);return(vi(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every(t=>t.outputDefined())&&this.otherwise.outputDefined()}serialize(){const t=["match",this.input.serialize()],e=Object.keys(this.cases).sort(),n=[],r={};for(const a of e){const s=r[this.cases[a]];s===void 0?(r[this.cases[a]]=n.length,n.push([this.cases[a],[a]])):n[s][1].push(a)}const o=a=>this.inputType.kind==="number"?Number(a):a;for(const[a,s]of n)s.length===1?t.push(o(s[0])):t.push(s.map(o)),t.push(this.outputs[a].serialize());return t.push(this.otherwise.serialize()),t}}class _0{constructor(t,e,n){this.type=t,this.branches=e,this.otherwise=n}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!==0)return e.error("Expected an odd number of arguments.");let n;e.expectedType&&e.expectedType.kind!=="value"&&(n=e.expectedType);const r=[];for(let a=1;a<t.length-1;a+=2){const s=e.parse(t[a],a,Be);if(!s)return null;const l=e.parse(t[a+1],a+1,n);if(!l)return null;r.push([s,l]),n=n||l.type}const o=e.parse(t[t.length-1],t.length-1,n);return o?new _0(n,r,o):null}evaluate(t){for(const[e,n]of this.branches)if(e.evaluate(t))return n.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[e,n]of this.branches)t(e),t(n);t(this.otherwise)}outputDefined(){return this.branches.every(([t,e])=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const t=["case"];return this.eachChild(e=>{t.push(e.serialize())}),t}}class Jc{constructor(t,e,n,r){this.type=t,this.input=e,this.beginIndex=n,this.endIndex=r}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const n=e.parse(t[1],1,je),r=e.parse(t[2],2,$);if(!n||!r)return null;if(!d0(n.type,[Gn(je),Ze,je]))return e.error(`Expected first argument to be of type array or string, but found ${Lt(n.type)} instead`);if(t.length===4){const o=e.parse(t[3],3,$);return o?new Jc(n.type,n,r,o):null}else return new Jc(n.type,n,r)}evaluate(t){const e=this.input.evaluate(t),n=this.beginIndex.evaluate(t);if(!iu(e,["string","array"]))throw new bi(`Expected first argument to be of type array or string, but found ${Lt(vi(e))} instead.`);if(this.endIndex){const r=this.endIndex.evaluate(t);return e.slice(n,r)}return e.slice(n)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function uv(i,t){return i==="=="||i==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function t2(i,t,e){return t===e}function i2(i,t,e){return t!==e}function n2(i,t,e){return t<e}function r2(i,t,e){return t>e}function o2(i,t,e){return t<=e}function a2(i,t,e){return t>=e}function wA(i,t,e,n){return n.compare(t,e)===0}function s2(i,t,e,n){return!wA(i,t,e,n)}function l2(i,t,e,n){return n.compare(t,e)<0}function u2(i,t,e,n){return n.compare(t,e)>0}function c2(i,t,e,n){return n.compare(t,e)<=0}function h2(i,t,e,n){return n.compare(t,e)>=0}function Qs(i,t,e){const n=i!=="=="&&i!=="!=";return class SA{constructor(o,a,s){this.type=Be,this.lhs=o,this.rhs=a,this.collator=s,this.hasUntypedArgument=o.type.kind==="value"||a.type.kind==="value"}static parse(o,a){if(o.length!==3&&o.length!==4)return a.error("Expected two or three arguments.");const s=o[0];let l=a.parse(o[1],1,je);if(!l)return null;if(!uv(s,l.type))return a.concat(1).error(`"${s}" comparisons are not supported for type '${Lt(l.type)}'.`);let u=a.parse(o[2],2,je);if(!u)return null;if(!uv(s,u.type))return a.concat(2).error(`"${s}" comparisons are not supported for type '${Lt(u.type)}'.`);if(l.type.kind!==u.type.kind&&l.type.kind!=="value"&&u.type.kind!=="value")return a.error(`Cannot compare types '${Lt(l.type)}' and '${Lt(u.type)}'.`);n&&(l.type.kind==="value"&&u.type.kind!=="value"?l=new Xn(u.type,[l]):l.type.kind!=="value"&&u.type.kind==="value"&&(u=new Xn(l.type,[u])));let c=null;if(o.length===4){if(l.type.kind!=="string"&&u.type.kind!=="string"&&l.type.kind!=="value"&&u.type.kind!=="value")return a.error("Cannot use collator to compare non-string types.");if(c=a.parse(o[3],3,Gh),!c)return null}return new SA(l,u,c)}evaluate(o){const a=this.lhs.evaluate(o),s=this.rhs.evaluate(o);if(n&&this.hasUntypedArgument){const l=vi(a),u=vi(s);if(l.kind!==u.kind||!(l.kind==="string"||l.kind==="number"))throw new bi(`Expected arguments for "${i}" to be (string, string) or (number, number), but found (${l.kind}, ${u.kind}) instead.`)}if(this.collator&&!n&&this.hasUntypedArgument){const l=vi(a),u=vi(s);if(l.kind!=="string"||u.kind!=="string")return t(o,a,s)}return this.collator?e(o,a,s,this.collator.evaluate(o)):t(o,a,s)}eachChild(o){o(this.lhs),o(this.rhs),this.collator&&o(this.collator)}outputDefined(){return!0}serialize(){const o=[i];return this.eachChild(a=>{o.push(a.serialize())}),o}}}const d2=Qs("==",t2,wA),p2=Qs("!=",i2,s2),f2=Qs("<",n2,l2),g2=Qs(">",r2,u2),v2=Qs("<=",o2,c2),m2=Qs(">=",a2,h2);class C0{constructor(t,e,n,r,o){this.type=Ze,this.number=t,this.locale=e,this.currency=n,this.minFractionDigits=r,this.maxFractionDigits=o}static parse(t,e){if(t.length!==3)return e.error("Expected two arguments.");const n=e.parse(t[1],1,$);if(!n)return null;const r=t[2];if(typeof r!="object"||Array.isArray(r))return e.error("NumberFormat options argument must be an object.");let o=null;if(r.locale&&(o=e.parse(r.locale,1,Ze),!o))return null;let a=null;if(r.currency&&(a=e.parse(r.currency,1,Ze),!a))return null;let s=null;if(r["min-fraction-digits"]&&(s=e.parse(r["min-fraction-digits"],1,$),!s))return null;let l=null;return r["max-fraction-digits"]&&(l=e.parse(r["max-fraction-digits"],1,$),!l)?null:new C0(n,o,a,s,l)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]}}class I0{constructor(t){this.type=$,this.input=t}static parse(t,e){if(t.length!==2)return e.error(`Expected 1 argument, but found ${t.length-1} instead.`);const n=e.parse(t[1],1);return n?n.type.kind!=="array"&&n.type.kind!=="string"&&n.type.kind!=="value"?e.error(`Expected argument of type string or array, but found ${Lt(n.type)} instead.`):new I0(n):null}evaluate(t){const e=this.input.evaluate(t);if(typeof e=="string")return e.length;if(Array.isArray(e))return e.length;throw new bi(`Expected value to be of type string or array, but found ${Lt(vi(e))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){const t=["length"];return this.eachChild(e=>{t.push(e.serialize())}),t}}const E0={"==":d2,"!=":p2,">":g2,"<":f2,">=":m2,"<=":v2,array:Xn,at:m0,boolean:Xn,case:_0,coalesce:ru,collator:Fh,format:Dh,image:Nh,in:y0,"index-of":Kc,interpolate:Nn,"interpolate-hcl":Nn,"interpolate-lab":Nn,length:I0,let:Yh,literal:Ns,match:A0,number:Xn,"number-format":C0,object:Xn,slice:Jc,step:Wh,string:Xn,"to-boolean":So,"to-color":So,"to-number":So,"to-string":So,var:jh,within:ga};function cv(i,[t,e,n,r]){t=t.evaluate(i),e=e.evaluate(i),n=n.evaluate(i);const o=r?r.evaluate(i):1,a=cA(t,e,n,o);if(a)throw new bi(a);return new pt(t/255*o,e/255*o,n/255*o,o)}function hv(i,t){return i in t}function Nd(i,t){const e=t[i];return typeof e>"u"?null:e}function y2(i,t,e,n){for(;e<=n;){const r=e+n>>1;if(t[r]===i)return!0;t[r]>i?n=r-1:e=r+1}return!1}function Xo(i){return{type:i}}Zn.register(E0,{error:[PO,[Ze],(i,[t])=>{throw new bi(t.evaluate(i))}],typeof:[Ze,[je],(i,[t])=>Lt(vi(t.evaluate(i)))],"to-rgba":[Gn($,4),[qr],(i,[t])=>t.evaluate(i).toArray()],rgb:[qr,[$,$,$],cv],rgba:[qr,[$,$,$,$],cv],has:{type:Be,overloads:[[[Ze],(i,[t])=>hv(t.evaluate(i),i.properties())],[[Ze,vs],(i,[t,e])=>hv(t.evaluate(i),e.evaluate(i))]]},get:{type:je,overloads:[[[Ze],(i,[t])=>Nd(t.evaluate(i),i.properties())],[[Ze,vs],(i,[t,e])=>Nd(t.evaluate(i),e.evaluate(i))]]},"feature-state":[je,[Ze],(i,[t])=>Nd(t.evaluate(i),i.featureState||{})],properties:[vs,[],i=>i.properties()],"geometry-type":[Ze,[],i=>i.geometryType()],id:[je,[],i=>i.id()],zoom:[$,[],i=>i.globals.zoom],"heatmap-density":[$,[],i=>i.globals.heatmapDensity||0],"line-progress":[$,[],i=>i.globals.lineProgress||0],"sky-radial-progress":[$,[],i=>i.globals.skyRadialProgress||0],accumulated:[je,[],i=>i.globals.accumulated===void 0?null:i.globals.accumulated],"+":[$,Xo($),(i,t)=>{let e=0;for(const n of t)e+=n.evaluate(i);return e}],"*":[$,Xo($),(i,t)=>{let e=1;for(const n of t)e*=n.evaluate(i);return e}],"-":{type:$,overloads:[[[$,$],(i,[t,e])=>t.evaluate(i)-e.evaluate(i)],[[$],(i,[t])=>-t.evaluate(i)]]},"/":[$,[$,$],(i,[t,e])=>t.evaluate(i)/e.evaluate(i)],"%":[$,[$,$],(i,[t,e])=>t.evaluate(i)%e.evaluate(i)],ln2:[$,[],()=>Math.LN2],pi:[$,[],()=>Math.PI],e:[$,[],()=>Math.E],"^":[$,[$,$],(i,[t,e])=>Math.pow(t.evaluate(i),e.evaluate(i))],sqrt:[$,[$],(i,[t])=>Math.sqrt(t.evaluate(i))],log10:[$,[$],(i,[t])=>Math.log(t.evaluate(i))/Math.LN10],ln:[$,[$],(i,[t])=>Math.log(t.evaluate(i))],log2:[$,[$],(i,[t])=>Math.log(t.evaluate(i))/Math.LN2],sin:[$,[$],(i,[t])=>Math.sin(t.evaluate(i))],cos:[$,[$],(i,[t])=>Math.cos(t.evaluate(i))],tan:[$,[$],(i,[t])=>Math.tan(t.evaluate(i))],asin:[$,[$],(i,[t])=>Math.asin(t.evaluate(i))],acos:[$,[$],(i,[t])=>Math.acos(t.evaluate(i))],atan:[$,[$],(i,[t])=>Math.atan(t.evaluate(i))],min:[$,Xo($),(i,t)=>Math.min(...t.map(e=>e.evaluate(i)))],max:[$,Xo($),(i,t)=>Math.max(...t.map(e=>e.evaluate(i)))],abs:[$,[$],(i,[t])=>Math.abs(t.evaluate(i))],round:[$,[$],(i,[t])=>{const e=t.evaluate(i);return e<0?-Math.round(-e):Math.round(e)}],floor:[$,[$],(i,[t])=>Math.floor(t.evaluate(i))],ceil:[$,[$],(i,[t])=>Math.ceil(t.evaluate(i))],"filter-==":[Be,[Ze,je],(i,[t,e])=>i.properties()[t.value]===e.value],"filter-id-==":[Be,[je],(i,[t])=>i.id()===t.value],"filter-type-==":[Be,[Ze],(i,[t])=>i.geometryType()===t.value],"filter-<":[Be,[Ze,je],(i,[t,e])=>{const n=i.properties()[t.value],r=e.value;return typeof n==typeof r&&n<r}],"filter-id-<":[Be,[je],(i,[t])=>{const e=i.id(),n=t.value;return typeof e==typeof n&&e<n}],"filter->":[Be,[Ze,je],(i,[t,e])=>{const n=i.properties()[t.value],r=e.value;return typeof n==typeof r&&n>r}],"filter-id->":[Be,[je],(i,[t])=>{const e=i.id(),n=t.value;return typeof e==typeof n&&e>n}],"filter-<=":[Be,[Ze,je],(i,[t,e])=>{const n=i.properties()[t.value],r=e.value;return typeof n==typeof r&&n<=r}],"filter-id-<=":[Be,[je],(i,[t])=>{const e=i.id(),n=t.value;return typeof e==typeof n&&e<=n}],"filter->=":[Be,[Ze,je],(i,[t,e])=>{const n=i.properties()[t.value],r=e.value;return typeof n==typeof r&&n>=r}],"filter-id->=":[Be,[je],(i,[t])=>{const e=i.id(),n=t.value;return typeof e==typeof n&&e>=n}],"filter-has":[Be,[je],(i,[t])=>t.value in i.properties()],"filter-has-id":[Be,[],i=>i.id()!==null&&i.id()!==void 0],"filter-type-in":[Be,[Gn(Ze)],(i,[t])=>t.value.indexOf(i.geometryType())>=0],"filter-id-in":[Be,[Gn(je)],(i,[t])=>t.value.indexOf(i.id())>=0],"filter-in-small":[Be,[Ze,Gn(je)],(i,[t,e])=>e.value.indexOf(i.properties()[t.value])>=0],"filter-in-large":[Be,[Ze,Gn(je)],(i,[t,e])=>y2(i.properties()[t.value],e.value,0,e.value.length-1)],all:{type:Be,overloads:[[[Be,Be],(i,[t,e])=>t.evaluate(i)&&e.evaluate(i)],[Xo(Be),(i,t)=>{for(const e of t)if(!e.evaluate(i))return!1;return!0}]]},any:{type:Be,overloads:[[[Be,Be],(i,[t,e])=>t.evaluate(i)||e.evaluate(i)],[Xo(Be),(i,t)=>{for(const e of t)if(e.evaluate(i))return!0;return!1}]]},"!":[Be,[Be],(i,[t])=>!t.evaluate(i)],"is-supported-script":[Be,[Ze],(i,[t])=>{const e=i.globals&&i.globals.isSupportedScript;return e?e(t.evaluate(i)):!0}],upcase:[Ze,[Ze],(i,[t])=>t.evaluate(i).toUpperCase()],downcase:[Ze,[Ze],(i,[t])=>t.evaluate(i).toLowerCase()],concat:[Ze,Xo(je),(i,t)=>t.map(e=>Rl(e.evaluate(i))).join("")],"resolved-locale":[Ze,[Gh],(i,[t])=>t.evaluate(i).resolvedLocale()]});function Dp(i){return{result:"success",value:i}}function Qa(i){return{result:"error",value:i}}function Qc(i){return i["property-type"]==="data-driven"||i["property-type"]==="cross-faded-data-driven"}function PA(i){return!!i.expression&&i.expression.parameters.indexOf("zoom")>-1}function w0(i){return!!i.expression&&i.expression.interpolated}function st(i){return i instanceof Number?"number":i instanceof String?"string":i instanceof Boolean?"boolean":Array.isArray(i)?"array":i===null?"null":typeof i}function vu(i){return typeof i=="object"&&i!==null&&!Array.isArray(i)}function A2(i){return i}function S0(i,t){const e=t.type==="color",n=i.stops&&typeof i.stops[0][0]=="object",r=n||i.property!==void 0,o=n||!r,a=i.type||(w0(t)?"exponential":"interval");if(e&&(i=Ds({},i),i.stops&&(i.stops=i.stops.map(c=>[c[0],pt.parse(c[1])])),i.default?i.default=pt.parse(i.default):i.default=pt.parse(t.default)),i.colorSpace&&i.colorSpace!=="rgb"&&!EA[i.colorSpace])throw new Error(`Unknown color space: ${i.colorSpace}`);let s,l,u;if(a==="exponential")s=dv;else if(a==="interval")s=C2;else if(a==="categorical"){s=_2,l=Object.create(null);for(const c of i.stops)l[c[0]]=c[1];u=typeof i.stops[0][0]}else if(a==="identity")s=I2;else throw new Error(`Unknown function type "${a}"`);if(n){const c={},h=[];for(let f=0;f<i.stops.length;f++){const g=i.stops[f],v=g[0].zoom;c[v]===void 0&&(c[v]={zoom:v,type:i.type,property:i.property,default:i.default,stops:[]},h.push(v)),c[v].stops.push([g[0].value,g[1]])}const d=[];for(const f of h)d.push([c[f].zoom,S0(c[f],t)]);const p={name:"linear"};return{kind:"composite",interpolationType:p,interpolationFactor:Nn.interpolationFactor.bind(void 0,p),zoomStops:d.map(f=>f[0]),evaluate({zoom:f},g){return dv({stops:d,base:i.base},t,f).evaluate(f,g)}}}else if(o){const c=a==="exponential"?{name:"exponential",base:i.base!==void 0?i.base:1}:null;return{kind:"camera",interpolationType:c,interpolationFactor:Nn.interpolationFactor.bind(void 0,c),zoomStops:i.stops.map(h=>h[0]),evaluate:({zoom:h})=>s(i,t,h,l,u)}}else return{kind:"source",evaluate(c,h){const d=h&&h.properties?h.properties[i.property]:void 0;return d===void 0?mu(i.default,t.default):s(i,t,d,l,u)}}}function mu(i,t,e){if(i!==void 0)return i;if(t!==void 0)return t;if(e!==void 0)return e}function _2(i,t,e,n,r){const o=typeof e===r?n[e]:void 0;return mu(o,i.default,t.default)}function C2(i,t,e){if(st(e)!=="number")return mu(i.default,t.default);const n=i.stops.length;if(n===1||e<=i.stops[0][0])return i.stops[0][1];if(e>=i.stops[n-1][0])return i.stops[n-1][1];const r=Vh(i.stops.map(o=>o[0]),e);return i.stops[r][1]}function dv(i,t,e){const n=i.base!==void 0?i.base:1;if(st(e)!=="number")return mu(i.default,t.default);const r=i.stops.length;if(r===1||e<=i.stops[0][0])return i.stops[0][1];if(e>=i.stops[r-1][0])return i.stops[r-1][1];const o=Vh(i.stops.map(c=>c[0]),e),a=E2(e,n,i.stops[o][0],i.stops[o+1][0]),s=i.stops[o][1],l=i.stops[o+1][1];let u=gA[t.type]||A2;if(i.colorSpace&&i.colorSpace!=="rgb"){const c=EA[i.colorSpace];u=(h,d)=>c.reverse(c.interpolate(c.forward(h),c.forward(d),a))}return typeof s.evaluate=="function"?{evaluate(...c){const h=s.evaluate.apply(void 0,c),d=l.evaluate.apply(void 0,c);if(!(h===void 0||d===void 0))return u(h,d,a)}}:u(s,l,a)}function I2(i,t,e){return t.type==="color"?e=pt.parse(e):t.type==="formatted"?e=Qn.fromString(e.toString()):t.type==="resolvedImage"?e=io.fromString(e.toString()):st(e)!==t.type&&(t.type!=="enum"||!t.values[e])&&(e=void 0),mu(e,i.default,t.default)}function E2(i,t,e,n){const r=n-e,o=i-e;return r===0?0:t===1?o/r:(Math.pow(t,o)-1)/(Math.pow(t,r)-1)}class xA{constructor(t,e){this.expression=t,this._warningHistory={},this._evaluator=new hA,this._defaultValue=e?P2(e):null,this._enumValues=e&&e.type==="enum"?e.values:null}evaluateWithoutErrorHandling(t,e,n,r,o,a){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=n,this._evaluator.canonical=r,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=a,this.expression.evaluate(this._evaluator)}evaluate(t,e,n,r,o,a){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=n||null,this._evaluator.canonical=r,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=a||null;try{const s=this.expression.evaluate(this._evaluator);if(s==null||typeof s=="number"&&s!==s)return this._defaultValue;if(this._enumValues&&!(s in this._enumValues))throw new bi(`Expected value to be one of ${Object.keys(this._enumValues).map(l=>JSON.stringify(l)).join(", ")}, but found ${JSON.stringify(s)} instead.`);return s}catch(s){return this._warningHistory[s.message]||(this._warningHistory[s.message]=!0,typeof console<"u"&&console.warn(s.message)),this._defaultValue}}}function Hh(i){return Array.isArray(i)&&i.length>0&&typeof i[0]=="string"&&i[0]in E0}function qh(i,t){const e=new zh(E0,[],t?S2(t):void 0),n=e.parse(i,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return n?Dp(new xA(n,t)):Qa(e.errors)}class Np{constructor(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent=t!=="constant"&&!nu(e.expression)}evaluateWithoutErrorHandling(t,e,n,r,o,a){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,r,o,a)}evaluate(t,e,n,r,o,a){return this._styleExpression.evaluate(t,e,n,r,o,a)}}class Fp{constructor(t,e,n,r){this.kind=t,this.zoomStops=n,this._styleExpression=e,this.isStateDependent=t!=="camera"&&!nu(e.expression),this.interpolationType=r}evaluateWithoutErrorHandling(t,e,n,r,o,a){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,r,o,a)}evaluate(t,e,n,r,o,a){return this._styleExpression.evaluate(t,e,n,r,o,a)}interpolationFactor(t,e,n){return this.interpolationType?Nn.interpolationFactor(this.interpolationType,t,e,n):0}}function P0(i,t){if(i=qh(i,t),i.result==="error")return i;const e=i.value.expression,n=Uh(e);if(!n&&!Qc(t))return Qa([new fr("","data expressions not supported")]);const r=Bh(e,["zoom"]);if(!r&&!PA(t))return Qa([new fr("","zoom expressions not supported")]);const o=ac(e);if(!o&&!r)return Qa([new fr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(o instanceof fr)return Qa([o]);if(o instanceof Nn&&!w0(t))return Qa([new fr("",'"interpolate" expressions cannot be used with this property')]);if(!o)return Dp(n?new Np("constant",i.value):new Np("source",i.value));const a=o instanceof Nn?o.interpolation:void 0;return Dp(n?new Fp("camera",i.value,o.labels,a):new Fp("composite",i.value,o.labels,a))}class Xh{constructor(t,e){this._parameters=t,this._specification=e,Ds(this,S0(this._parameters,this._specification))}static deserialize(t){return new Xh(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function w2(i,t){if(vu(i))return new Xh(i,t);if(Hh(i)){const e=P0(i,t);if(e.result==="error")throw new Error(e.value.map(n=>`${n.key}: ${n.message}`).join(", "));return e.value}else{let e=i;return typeof i=="string"&&t.type==="color"&&(e=pt.parse(i)),{kind:"constant",evaluate:()=>e}}}function ac(i){let t=null;if(i instanceof Yh)t=ac(i.result);else if(i instanceof ru){for(const e of i.args)if(t=ac(e),t)break}else(i instanceof Wh||i instanceof Nn)&&i.input instanceof Zn&&i.input.name==="zoom"&&(t=i);return t instanceof fr||i.eachChild(e=>{const n=ac(e);n instanceof fr?t=n:!t&&n?t=new fr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&n&&t!==n&&(t=new fr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t}function S2(i){const t={color:qr,string:Ze,number:$,enum:Ze,boolean:Be,formatted:kh,resolvedImage:gu};return i.type==="array"?Gn(t[i.value]||je,i.length):t[i.type]}function P2(i){return i.type==="color"&&vu(i.default)?new pt(0,0,0,0):i.type==="color"?pt.parse(i.default)||null:i.default===void 0?null:i.default}function ou(i){return typeof i=="object"?["literal",i]:i}function x2(i,t){let e=i.stops;if(!e)return M2(i,t);const n=e&&typeof e[0][0]=="object",r=n||i.property!==void 0,o=n||!r;return e=e.map(a=>!r&&t.tokens&&typeof a[1]=="string"?[a[0],O2(a[1])]:[a[0],ou(a[1])]),n?T2(i,t,e):o?R2(i,t,e):Up(i,t,e)}function M2(i,t){const e=["get",i.property];if(i.default===void 0)return t.type==="string"?["string",e]:e;if(t.type==="enum")return["match",e,Object.keys(t.values),e,i.default];{const n=[t.type==="color"?"to-color":t.type,e,ou(i.default)];return t.type==="array"&&n.splice(1,0,t.value,t.length||null),n}}function x0(i){switch(i.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function T2(i,t,e){const n={},r={},o=[];for(let s=0;s<e.length;s++){const l=e[s],u=l[0].zoom;n[u]===void 0&&(n[u]={zoom:u,type:i.type,property:i.property,default:i.default},r[u]=[],o.push(u)),r[u].push([l[0].value,l[1]])}if(T0({},t)==="exponential"){const s=[x0(i),["linear"],["zoom"]];for(const l of o){const u=Up(n[l],t,r[l]);ys(s,l,u,!1)}return s}else{const s=["step",["zoom"]];for(const l of o){const u=Up(n[l],t,r[l]);ys(s,l,u,!0)}return M0(s),s}}function b2(i,t){if(i!==void 0)return i;if(t!==void 0)return t}function pv(i,t){const e=ou(b2(i.default,t.default));return e===void 0&&t.type==="resolvedImage"?"":e}function Up(i,t,e){const n=T0(i,t),r=["get",i.property];if(n==="categorical"&&typeof e[0][0]=="boolean"){const o=["case"];for(const a of e)o.push(["==",r,a[0]],a[1]);return o.push(pv(i,t)),o}else if(n==="categorical"){const o=["match",r];for(const a of e)ys(o,a[0],a[1],!1);return o.push(pv(i,t)),o}else if(n==="interval"){const o=["step",["number",r]];for(const a of e)ys(o,a[0],a[1],!0);return M0(o),i.default===void 0?o:["case",["==",["typeof",r],"number"],o,ou(i.default)]}else if(n==="exponential"){const o=i.base!==void 0?i.base:1,a=[x0(i),o===1?["linear"]:["exponential",o],["number",r]];for(const s of e)ys(a,s[0],s[1],!1);return i.default===void 0?a:["case",["==",["typeof",r],"number"],a,ou(i.default)]}else throw new Error(`Unknown property function type ${n}`)}function R2(i,t,e,n=["zoom"]){const r=T0(i,t);let o,a=!1;if(r==="interval")o=["step",n],a=!0;else if(r==="exponential"){const s=i.base!==void 0?i.base:1;o=[x0(i),s===1?["linear"]:["exponential",s],n]}else throw new Error(`Unknown zoom function type "${r}"`);for(const s of e)ys(o,s[0],s[1],a);return M0(o),o}function M0(i){i[0]==="step"&&i.length===3&&(i.push(0),i.push(i[3]))}function ys(i,t,e,n){i.length>3&&t===i[i.length-2]||(n&&i.length===2||i.push(t),i.push(e))}function T0(i,t){return i.type?i.type:t.expression.interpolated?"exponential":"interval"}function O2(i){const t=["concat"],e=/{([^{}]+)}/g;let n=0;for(let r=e.exec(i);r!==null;r=e.exec(i)){const o=i.slice(n,e.lastIndex-r[0].length);n=e.lastIndex,o.length>0&&t.push(o),t.push(["get",r[1]])}if(t.length===1)return i;if(n<i.length)t.push(i.slice(n));else if(t.length===2)return["to-string",t[1]];return t}function Zh(i){if(i===!0||i===!1)return!0;if(!Array.isArray(i)||i.length===0)return!1;switch(i[0]){case"has":return i.length>=2&&i[1]!=="$id"&&i[1]!=="$type";case"in":return i.length>=3&&(typeof i[1]!="string"||Array.isArray(i[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return i.length!==3||Array.isArray(i[1])||Array.isArray(i[2]);case"any":case"all":for(const t of i.slice(1))if(!Zh(t)&&typeof t!="boolean")return!1;return!0;default:return!0}}const L2={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function G2(i){if(i==null)return{filter:()=>!0,needGeometry:!1};Zh(i)||(i=$c(i));const t=qh(i,L2);if(t.result==="error")throw new Error(t.value.map(e=>`${e.key}: ${e.message}`).join(", "));{const e=MA(i);return{filter:(n,r,o)=>t.value.evaluate(n,r,{},o),needGeometry:e}}}function k2(i,t){return i<t?-1:i>t?1:0}function MA(i){if(!Array.isArray(i))return!1;if(i[0]==="within")return!0;for(let t=1;t<i.length;t++)if(MA(i[t]))return!0;return!1}function $c(i){if(!i)return!0;const t=i[0];return i.length<=1?t!=="any":t==="=="?Fd(i[1],i[2],"=="):t==="!="?Hu(Fd(i[1],i[2],"==")):t==="<"||t===">"||t==="<="||t===">="?Fd(i[1],i[2],t):t==="any"?D2(i.slice(1)):t==="all"?["all"].concat(i.slice(1).map($c)):t==="none"?["all"].concat(i.slice(1).map($c).map(Hu)):t==="in"?fv(i[1],i.slice(2)):t==="!in"?Hu(fv(i[1],i.slice(2))):t==="has"?gv(i[1]):t==="!has"?Hu(gv(i[1])):t==="within"?i:!0}function Fd(i,t,e){switch(i){case"$type":return[`filter-type-${e}`,t];case"$id":return[`filter-id-${e}`,t];default:return[`filter-${e}`,i,t]}}function D2(i){return["any"].concat(i.map($c))}function fv(i,t){if(t.length===0)return!1;switch(i){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(e=>typeof e!=typeof t[0])?["filter-in-large",i,["literal",t.sort(k2)]]:["filter-in-small",i,["literal",t]]}}function gv(i){switch(i){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",i]}}function Hu(i){return["!",i]}var N2=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function F2(i,t){const e={};for(const n in i)n!=="ref"&&(e[n]=i[n]);return N2.forEach(n=>{n in t&&(e[n]=t[n])}),e}function U2(i){i=i.slice();const t=Object.create(null);for(let e=0;e<i.length;e++)t[i[e].id]=i[e];for(let e=0;e<i.length;e++)"ref"in i[e]&&(i[e]=F2(i[e],t[i[e].ref]));return i}class ee{constructor(t,e,n,r){this.message=(t?`${t}: `:"")+n,r&&(this.identifier=r),e!=null&&e.__line__&&(this.line=e.__line__)}}class B2{constructor(t){this.error=t,this.message=t.message;const e=t.message.match(/line (\d+)/);this.line=e?parseInt(e[1],10):0}}function TA(i){const t=i.key,e=i.value;return e?[new ee(t,e,"constants have been deprecated as of v8")]:[]}function zt(i){return i instanceof Number||i instanceof String||i instanceof Boolean?i.valueOf():i}function Ra(i){if(Array.isArray(i))return i.map(Ra);if(i instanceof Object&&!(i instanceof Number||i instanceof String||i instanceof Boolean)){const t={};for(const e in i)t[e]=Ra(i[e]);return t}return zt(i)}function Kn(i){const t=i.key,e=i.value,n=i.valueSpec||{},r=i.objectElementValidators||{},o=i.style,a=i.styleSpec;let s=[];const l=st(e);if(l!=="object")return[new ee(t,e,`object expected, ${l} found`)];for(const u in e){const c=u.split(".")[0],h=n[c]||n["*"];let d;if(r[c])d=r[c];else if(n[c])d=nn;else if(r["*"])d=r["*"];else if(n["*"])d=nn;else{s.push(new ee(t,e[u],`unknown property "${u}"`));continue}s=s.concat(d({key:(t&&`${t}.`)+u,value:e[u],valueSpec:h,style:o,styleSpec:a,object:e,objectKey:u},e))}for(const u in n)r[u]||n[u].required&&n[u].default===void 0&&e[u]===void 0&&s.push(new ee(t,e,`missing required property "${u}"`));return s}function bA(i){const t=i.value,e=i.valueSpec,n=i.style,r=i.styleSpec,o=i.key,a=i.arrayElementValidator||nn;if(st(t)!=="array")return[new ee(o,t,`array expected, ${st(t)} found`)];if(e.length&&t.length!==e.length)return[new ee(o,t,`array length ${e.length} expected, length ${t.length} found`)];if(e["min-length"]&&t.length<e["min-length"])return[new ee(o,t,`array length at least ${e["min-length"]} expected, length ${t.length} found`)];let s={type:e.value,values:e.values,minimum:e.minimum,maximum:e.maximum};r.$version<7&&(s.function=e.function),st(e.value)==="object"&&(s=e.value);let l=[];for(let u=0;u<t.length;u++)l=l.concat(a({array:t,arrayIndex:u,value:t[u],valueSpec:s,style:n,styleSpec:r,key:`${o}[${u}]`}));return l}function RA(i){const t=i.key,e=i.value,n=i.valueSpec;let r=st(e);if(r==="number"&&e!==e&&(r="NaN"),r!=="number")return[new ee(t,e,`number expected, ${r} found`)];if("minimum"in n){let o=n.minimum;if(st(n.minimum)==="array"){const a=i.arrayIndex;o=n.minimum[a]}if(e<o)return[new ee(t,e,`${e} is less than the minimum value ${o}`)]}if("maximum"in n){let o=n.maximum;if(st(n.maximum)==="array"){const a=i.arrayIndex;o=n.maximum[a]}if(e>o)return[new ee(t,e,`${e} is greater than the maximum value ${o}`)]}return[]}function OA(i){const t=i.valueSpec,e=zt(i.value.type);let n,r={},o,a;const s=e!=="categorical"&&i.value.property===void 0,l=!s,u=st(i.value.stops)==="array"&&st(i.value.stops[0])==="array"&&st(i.value.stops[0][0])==="object",c=Kn({key:i.key,value:i.value,valueSpec:i.styleSpec.function,style:i.style,styleSpec:i.styleSpec,objectElementValidators:{stops:h,default:f}});return e==="identity"&&s&&c.push(new ee(i.key,i.value,'missing required property "property"')),e!=="identity"&&!i.value.stops&&c.push(new ee(i.key,i.value,'missing required property "stops"')),e==="exponential"&&i.valueSpec.expression&&!w0(i.valueSpec)&&c.push(new ee(i.key,i.value,"exponential functions not supported")),i.styleSpec.$version>=8&&(l&&!Qc(i.valueSpec)?c.push(new ee(i.key,i.value,"property functions not supported")):s&&!PA(i.valueSpec)&&c.push(new ee(i.key,i.value,"zoom functions not supported"))),(e==="categorical"||u)&&i.value.property===void 0&&c.push(new ee(i.key,i.value,'"property" property is required')),c;function h(g){if(e==="identity")return[new ee(g.key,g.value,'identity function may not have a "stops" property')];let v=[];const y=g.value;return v=v.concat(bA({key:g.key,value:y,valueSpec:g.valueSpec,style:g.style,styleSpec:g.styleSpec,arrayElementValidator:d})),st(y)==="array"&&y.length===0&&v.push(new ee(g.key,y,"array must have at least one stop")),v}function d(g){let v=[];const y=g.value,m=g.key;if(st(y)!=="array")return[new ee(m,y,`array expected, ${st(y)} found`)];if(y.length!==2)return[new ee(m,y,`array length 2 expected, length ${y.length} found`)];if(u){if(st(y[0])!=="object")return[new ee(m,y,`object expected, ${st(y[0])} found`)];if(y[0].zoom===void 0)return[new ee(m,y,"object stop key must have zoom")];if(y[0].value===void 0)return[new ee(m,y,"object stop key must have value")];if(a&&a>zt(y[0].zoom))return[new ee(m,y[0].zoom,"stop zoom values must appear in ascending order")];zt(y[0].zoom)!==a&&(a=zt(y[0].zoom),o=void 0,r={}),v=v.concat(Kn({key:`${m}[0]`,value:y[0],valueSpec:{zoom:{}},style:g.style,styleSpec:g.styleSpec,objectElementValidators:{zoom:RA,value:p}}))}else v=v.concat(p({key:`${m}[0]`,value:y[0],valueSpec:{},style:g.style,styleSpec:g.styleSpec},y));return Hh(Ra(y[1]))?v.concat([new ee(`${m}[1]`,y[1],"expressions are not allowed in function stops.")]):v.concat(nn({key:`${m}[1]`,value:y[1],valueSpec:t,style:g.style,styleSpec:g.styleSpec}))}function p(g,v){const y=st(g.value),m=zt(g.value),A=g.value!==null?g.value:v;if(!n)n=y;else if(y!==n)return[new ee(g.key,A,`${y} stop domain type must match previous stop domain type ${n}`)];if(y!=="number"&&y!=="string"&&y!=="boolean")return[new ee(g.key,A,"stop domain value must be a number, string, or boolean")];if(y!=="number"&&e!=="categorical"){let _=`number expected, ${y} found`;return Qc(t)&&e===void 0&&(_+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ee(g.key,A,_)]}return e==="categorical"&&y==="number"&&(!isFinite(m)||Math.floor(m)!==m)?[new ee(g.key,A,`integer expected, found ${m}`)]:e!=="categorical"&&y==="number"&&o!==void 0&&m<o?[new ee(g.key,A,"stop domain values must appear in ascending order")]:(o=m,e==="categorical"&&m in r?[new ee(g.key,A,"stop domain values must be unique")]:(r[m]=!0,[]))}function f(g){return nn({key:g.key,value:g.value,valueSpec:t,style:g.style,styleSpec:g.styleSpec})}}function Fs(i){const t=(i.expressionContext==="property"?P0:qh)(Ra(i.value),i.valueSpec);if(t.result==="error")return t.value.map(n=>new ee(`${i.key}${n.key}`,i.value,n.message));const e=t.value.expression||t.value._styleExpression.expression;if(i.expressionContext==="property"&&i.propertyKey==="text-font"&&!e.outputDefined())return[new ee(i.key,i.value,`Invalid data expression for "${i.propertyKey}". Output values must be contained as literals within the expression.`)];if(i.expressionContext==="property"&&i.propertyType==="layout"&&!nu(e))return[new ee(i.key,i.value,'"feature-state" data expressions are not supported with layout properties.')];if(i.expressionContext==="filter"&&!nu(e))return[new ee(i.key,i.value,'"feature-state" data expressions are not supported with filters.')];if(i.expressionContext&&i.expressionContext.indexOf("cluster")===0){if(!Bh(e,["zoom","feature-state"]))return[new ee(i.key,i.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(i.expressionContext==="cluster-initial"&&!Uh(e))return[new ee(i.key,i.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function j2(i){const t=i.value,e=i.key,n=st(t);return n!=="boolean"?[new ee(e,t,`boolean expected, ${n} found`)]:[]}function z2(i){const t=i.key,e=i.value,n=st(e);return n!=="string"?[new ee(t,e,`color expected, ${n} found`)]:uA.parseCSSColor(e)===null?[new ee(t,e,`color expected, "${e}" found`)]:[]}function eh(i){const t=i.key,e=i.value,n=i.valueSpec,r=[];return Array.isArray(n.values)?n.values.indexOf(zt(e))===-1&&r.push(new ee(t,e,`expected one of [${n.values.join(", ")}], ${JSON.stringify(e)} found`)):Object.keys(n.values).indexOf(zt(e))===-1&&r.push(new ee(t,e,`expected one of [${Object.keys(n.values).join(", ")}], ${JSON.stringify(e)} found`)),r}function b0(i){return Zh(Ra(i.value))?Fs(Ds({},i,{expressionContext:"filter",valueSpec:{value:"boolean"}})):LA(i)}function LA(i){const t=i.value,e=i.key;if(st(t)!=="array")return[new ee(e,t,`array expected, ${st(t)} found`)];const n=i.styleSpec;let r,o=[];if(t.length<1)return[new ee(e,t,"filter array must have at least 1 element")];switch(o=o.concat(eh({key:`${e}[0]`,value:t[0],valueSpec:n.filter_operator,style:i.style,styleSpec:i.styleSpec})),zt(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&zt(t[1])==="$type"&&o.push(new ee(e,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":t.length!==3&&o.push(new ee(e,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(r=st(t[1]),r!=="string"&&o.push(new ee(`${e}[1]`,t[1],`string expected, ${r} found`)));for(let a=2;a<t.length;a++)r=st(t[a]),zt(t[1])==="$type"?o=o.concat(eh({key:`${e}[${a}]`,value:t[a],valueSpec:n.geometry_type,style:i.style,styleSpec:i.styleSpec})):r!=="string"&&r!=="number"&&r!=="boolean"&&o.push(new ee(`${e}[${a}]`,t[a],`string, number, or boolean expected, ${r} found`));break;case"any":case"all":case"none":for(let a=1;a<t.length;a++)o=o.concat(LA({key:`${e}[${a}]`,value:t[a],style:i.style,styleSpec:i.styleSpec}));break;case"has":case"!has":r=st(t[1]),t.length!==2?o.push(new ee(e,t,`filter array for "${t[0]}" operator must have 2 elements`)):r!=="string"&&o.push(new ee(`${e}[1]`,t[1],`string expected, ${r} found`));break;case"within":r=st(t[1]),t.length!==2?o.push(new ee(e,t,`filter array for "${t[0]}" operator must have 2 elements`)):r!=="object"&&o.push(new ee(`${e}[1]`,t[1],`object expected, ${r} found`));break}return o}function GA(i,t){const e=i.key,n=i.style,r=i.styleSpec,o=i.value,a=i.objectKey,s=r[`${t}_${i.layerType}`];if(!s)return[];const l=a.match(/^(.*)-transition$/);if(t==="paint"&&l&&s[l[1]]&&s[l[1]].transition)return nn({key:e,value:o,valueSpec:r.transition,style:n,styleSpec:r});const u=i.valueSpec||s[a];if(!u)return[new ee(e,o,`unknown property "${a}"`)];let c;if(st(o)==="string"&&Qc(u)&&!u.tokens&&(c=/^{([^}]+)}$/.exec(o)))return[new ee(e,o,`"${a}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(c[1])} }\`.`)];const h=[];return i.layerType==="symbol"&&(a==="text-field"&&n&&!n.glyphs&&h.push(new ee(e,o,'use of "text-field" requires a style "glyphs" property')),a==="text-font"&&vu(Ra(o))&&zt(o.type)==="identity"&&h.push(new ee(e,o,'"text-font" does not support identity functions'))),h.concat(nn({key:i.key,value:o,valueSpec:u,style:n,styleSpec:r,expressionContext:"property",propertyType:t,propertyKey:a}))}function kA(i){return GA(i,"paint")}function DA(i){return GA(i,"layout")}function NA(i){let t=[];const e=i.value,n=i.key,r=i.style,o=i.styleSpec;!e.type&&!e.ref&&t.push(new ee(n,e,'either "type" or "ref" is required'));let a=zt(e.type);const s=zt(e.ref);if(e.id){const l=zt(e.id);for(let u=0;u<i.arrayIndex;u++){const c=r.layers[u];zt(c.id)===l&&t.push(new ee(n,e.id,`duplicate layer id "${e.id}", previously used at line ${c.id.__line__}`))}}if("ref"in e){["type","source","source-layer","filter","layout"].forEach(u=>{u in e&&t.push(new ee(n,e[u],`"${u}" is prohibited for ref layers`))});let l;r.layers.forEach(u=>{zt(u.id)===s&&(l=u)}),l?l.ref?t.push(new ee(n,e.ref,"ref cannot reference another ref layer")):a=zt(l.type):t.push(new ee(n,e.ref,`ref layer "${s}" not found`))}else if(!(a==="background"||a==="sky"))if(!e.source)t.push(new ee(n,e,'missing required property "source"'));else{const l=r.sources&&r.sources[e.source],u=l&&zt(l.type);l?u==="vector"&&a==="raster"?t.push(new ee(n,e.source,`layer "${e.id}" requires a raster source`)):u==="raster"&&a!=="raster"?t.push(new ee(n,e.source,`layer "${e.id}" requires a vector source`)):u==="vector"&&!e["source-layer"]?t.push(new ee(n,e,`layer "${e.id}" must specify a "source-layer"`)):u==="raster-dem"&&a!=="hillshade"?t.push(new ee(n,e.source,"raster-dem source can only be used with layer type 'hillshade'.")):a==="line"&&e.paint&&e.paint["line-gradient"]&&(u!=="geojson"||!l.lineMetrics)&&t.push(new ee(n,e,`layer "${e.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new ee(n,e.source,`source "${e.source}" not found`))}return t=t.concat(Kn({key:n,value:e,valueSpec:o.layer,style:i.style,styleSpec:i.styleSpec,objectElementValidators:{"*"(){return[]},type(){return nn({key:`${n}.type`,value:e.type,valueSpec:o.layer.type,style:i.style,styleSpec:i.styleSpec,object:e,objectKey:"type"})},filter:b0,layout(l){return Kn({layer:e,key:l.key,value:l.value,style:l.style,styleSpec:l.styleSpec,objectElementValidators:{"*"(u){return DA(Ds({layerType:a},u))}}})},paint(l){return Kn({layer:e,key:l.key,value:l.value,style:l.style,styleSpec:l.styleSpec,objectElementValidators:{"*"(u){return kA(Ds({layerType:a},u))}}})}}})),t}function Us(i){const t=i.value,e=i.key,n=st(t);return n!=="string"?[new ee(e,t,`string expected, ${n} found`)]:[]}const vv={promoteId:V2};function FA(i){const t=i.value,e=i.key,n=i.styleSpec,r=i.style;if(!t.type)return[new ee(e,t,'"type" is required')];const o=zt(t.type);let a;switch(o){case"vector":case"raster":case"raster-dem":return a=Kn({key:e,value:t,valueSpec:n[`source_${o.replace("-","_")}`],style:i.style,styleSpec:n,objectElementValidators:vv}),a;case"geojson":if(a=Kn({key:e,value:t,valueSpec:n.source_geojson,style:r,styleSpec:n,objectElementValidators:vv}),t.cluster)for(const s in t.clusterProperties){const[l,u]=t.clusterProperties[s],c=typeof l=="string"?[l,["accumulated"],["get",s]]:l;a.push(...Fs({key:`${e}.${s}.map`,value:u,expressionContext:"cluster-map"})),a.push(...Fs({key:`${e}.${s}.reduce`,value:c,expressionContext:"cluster-reduce"}))}return a;case"video":return Kn({key:e,value:t,valueSpec:n.source_video,style:r,styleSpec:n});case"image":return Kn({key:e,value:t,valueSpec:n.source_image,style:r,styleSpec:n});case"canvas":return[new ee(e,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return eh({key:`${e}.type`,value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:r,styleSpec:n})}}function V2({key:i,value:t}){if(st(t)==="string")return Us({key:i,value:t});{const e=[];for(const n in t)e.push(...Us({key:`${i}.${n}`,value:t[n]}));return e}}function UA(i){const t=i.value,e=i.styleSpec,n=e.light,r=i.style;let o=[];const a=st(t);if(t===void 0)return o;if(a!=="object")return o=o.concat([new ee("light",t,`object expected, ${a} found`)]),o;for(const s in t){const l=s.match(/^(.*)-transition$/);l&&n[l[1]]&&n[l[1]].transition?o=o.concat(nn({key:s,value:t[s],valueSpec:e.transition,style:r,styleSpec:e})):n[s]?o=o.concat(nn({key:s,value:t[s],valueSpec:n[s],style:r,styleSpec:e})):o=o.concat([new ee(s,t[s],`unknown property "${s}"`)])}return o}function BA(i){const t=i.value,e=i.key,n=i.style,r=i.styleSpec,o=r.terrain;let a=[];const s=st(t);if(t===void 0)return a;if(s!=="object")return a=a.concat([new ee("terrain",t,`object expected, ${s} found`)]),a;for(const l in t){const u=l.match(/^(.*)-transition$/);u&&o[u[1]]&&o[u[1]].transition?a=a.concat(nn({key:l,value:t[l],valueSpec:r.transition,style:n,styleSpec:r})):o[l]?a=a.concat(nn({key:l,value:t[l],valueSpec:o[l],style:n,styleSpec:r})):a=a.concat([new ee(l,t[l],`unknown property "${l}"`)])}if(!t.source)a.push(new ee(e,t,'terrain is missing required property "source"'));else{const l=n.sources&&n.sources[t.source],u=l&&zt(l.type);l?u!=="raster-dem"&&a.push(new ee(e,t.source,`terrain cannot be used with a source of type ${u}, it only be used with a "raster-dem" source type`)):a.push(new ee(e,t.source,`source "${t.source}" not found`))}return a}function jA(i){const t=i.value,e=i.style,n=i.styleSpec,r=n.fog;let o=[];const a=st(t);if(t===void 0)return o;if(a!=="object")return o=o.concat([new ee("fog",t,`object expected, ${a} found`)]),o;for(const s in t){const l=s.match(/^(.*)-transition$/);l&&r[l[1]]&&r[l[1]].transition?o=o.concat(nn({key:s,value:t[s],valueSpec:n.transition,style:e,styleSpec:n})):r[s]?o=o.concat(nn({key:s,value:t[s],valueSpec:r[s],style:e,styleSpec:n})):o=o.concat([new ee(s,t[s],`unknown property "${s}"`)])}return o}function W2(i){return Us(i).length===0?[]:Fs(i)}function Y2(i){return Us(i).length===0?[]:Fs(i)}const mv={"*"(){return[]},array:bA,boolean:j2,number:RA,color:z2,constants:TA,enum:eh,filter:b0,function:OA,layer:NA,object:Kn,source:FA,light:UA,terrain:BA,fog:jA,string:Us,formatted:W2,resolvedImage:Y2};function nn(i){const t=i.value,e=i.valueSpec,n=i.styleSpec;return e.expression&&vu(zt(t))?OA(i):e.expression&&Hh(Ra(t))?Fs(i):e.type&&mv[e.type]?mv[e.type](i):Kn(Ds({},i,{valueSpec:e.type?n[e.type]:e}))}function H2(i){const t=i.value,e=i.key,n=Us(i);return n.length||(t.indexOf("{fontstack}")===-1&&n.push(new ee(e,t,'"glyphs" url must include a "{fontstack}" token')),t.indexOf("{range}")===-1&&n.push(new ee(e,t,'"glyphs" url must include a "{range}" token'))),n}function no(i,t=c0){let e=[];return e=e.concat(nn({key:"",value:i,valueSpec:t.$root,styleSpec:t,style:i,objectElementValidators:{glyphs:H2,"*"(){return[]}}})),i.constants&&(e=e.concat(TA({key:"constants",value:i.constants,style:i,styleSpec:t}))),zA(e)}no.source=zo(FA);no.light=zo(UA);no.terrain=zo(BA);no.fog=zo(jA);no.layer=zo(NA);no.filter=zo(b0);no.paintProperty=zo(kA);no.layoutProperty=zo(DA);function zA(i){return[].concat(i).sort((t,e)=>t.line-e.line)}function zo(i){return function(...t){return zA(i.apply(this,t))}}var q2=Oh(function(i,t){var e=function(){var n=function(y,m,A,_){for(A=A||{},_=y.length;_--;A[y[_]]=m);return A},r=[1,12],o=[1,13],a=[1,9],s=[1,10],l=[1,11],u=[1,14],c=[1,15],h=[14,18,22,24],d=[18,22],p=[22,24],f={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(m,A,_,C,I,E,w){var S=E.length-1;switch(I){case 1:this.$=new String(m.replace(/\\(\\|")/g,"$1").replace(/\\n/g,`
`).replace(/\\r/g,"\r").replace(/\\t/g,"	").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b")),this.$.__line__=this._$.first_line;break;case 2:this.$=new Number(m),this.$.__line__=this._$.first_line;break;case 3:this.$=null;break;case 4:this.$=new Boolean(!0),this.$.__line__=this._$.first_line;break;case 5:this.$=new Boolean(!1),this.$.__line__=this._$.first_line;break;case 6:return this.$=E[S-1];case 13:this.$={},Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 14:case 19:this.$=E[S-1],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 15:this.$=[E[S-2],E[S]];break;case 16:this.$={},this.$[E[S][0]]=E[S][1];break;case 17:this.$=E[S-2],E[S-2][E[S][0]]=E[S][1];break;case 18:this.$=[],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 20:this.$=[E[S]];break;case 21:this.$=E[S-2],E[S-2].push(E[S]);break}},table:[{3:5,4:r,5:6,6:o,7:3,8:a,9:4,10:s,11:l,12:1,13:2,15:7,16:8,17:u,23:c},{1:[3]},{14:[1,16]},n(h,[2,7]),n(h,[2,8]),n(h,[2,9]),n(h,[2,10]),n(h,[2,11]),n(h,[2,12]),n(h,[2,3]),n(h,[2,4]),n(h,[2,5]),n([14,18,21,22,24],[2,1]),n(h,[2,2]),{3:20,4:r,18:[1,17],19:18,20:19},{3:5,4:r,5:6,6:o,7:3,8:a,9:4,10:s,11:l,13:23,15:7,16:8,17:u,23:c,24:[1,21],25:22},{1:[2,6]},n(h,[2,13]),{18:[1,24],22:[1,25]},n(d,[2,16]),{21:[1,26]},n(h,[2,18]),{22:[1,28],24:[1,27]},n(p,[2,20]),n(h,[2,14]),{3:20,4:r,20:29},{3:5,4:r,5:6,6:o,7:3,8:a,9:4,10:s,11:l,13:30,15:7,16:8,17:u,23:c},n(h,[2,19]),{3:5,4:r,5:6,6:o,7:3,8:a,9:4,10:s,11:l,13:31,15:7,16:8,17:u,23:c},n(d,[2,17]),n(d,[2,15]),n(p,[2,21])],defaultActions:{16:[2,6]},parseError:function(m,A){if(A.recoverable)this.trace(m);else throw new Error(m)},parse:function(m){var A=this,_=[0],C=[null],I=[],E=this.table,w="",S=0,x=0,T=2,L=1,G=I.slice.call(arguments,1),N=Object.create(this.lexer),B={yy:{}};for(var U in this.yy)Object.prototype.hasOwnProperty.call(this.yy,U)&&(B.yy[U]=this.yy[U]);N.setInput(m,B.yy),B.yy.lexer=N,B.yy.parser=this,typeof N.yylloc>"u"&&(N.yylloc={});var D=N.yylloc;I.push(D);var z=N.options&&N.options.ranges;typeof B.yy.parseError=="function"?this.parseError=B.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function F(){var ze;return ze=N.lex()||L,typeof ze!="number"&&(ze=A.symbols_[ze]||ze),ze}for(var O,R,M,ie,Y={},K,Q,me,pe;;){if(R=_[_.length-1],this.defaultActions[R]?M=this.defaultActions[R]:((O===null||typeof O>"u")&&(O=F()),M=E[R]&&E[R][O]),typeof M>"u"||!M.length||!M[0]){var V="";pe=[];for(K in E[R])this.terminals_[K]&&K>T&&pe.push("'"+this.terminals_[K]+"'");N.showPosition?V="Parse error on line "+(S+1)+`:
`+N.showPosition()+`
Expecting `+pe.join(", ")+", got '"+(this.terminals_[O]||O)+"'":V="Parse error on line "+(S+1)+": Unexpected "+(O==L?"end of input":"'"+(this.terminals_[O]||O)+"'"),this.parseError(V,{text:N.match,token:this.terminals_[O]||O,line:N.yylineno,loc:D,expected:pe})}if(M[0]instanceof Array&&M.length>1)throw new Error("Parse Error: multiple actions possible at state: "+R+", token: "+O);switch(M[0]){case 1:_.push(O),C.push(N.yytext),I.push(N.yylloc),_.push(M[1]),O=null,x=N.yyleng,w=N.yytext,S=N.yylineno,D=N.yylloc;break;case 2:if(Q=this.productions_[M[1]][1],Y.$=C[C.length-Q],Y._$={first_line:I[I.length-(Q||1)].first_line,last_line:I[I.length-1].last_line,first_column:I[I.length-(Q||1)].first_column,last_column:I[I.length-1].last_column},z&&(Y._$.range=[I[I.length-(Q||1)].range[0],I[I.length-1].range[1]]),ie=this.performAction.apply(Y,[w,x,S,B.yy,M[1],C,I].concat(G)),typeof ie<"u")return ie;Q&&(_=_.slice(0,-1*Q*2),C=C.slice(0,-1*Q),I=I.slice(0,-1*Q)),_.push(this.productions_[M[1]][0]),C.push(Y.$),I.push(Y._$),me=E[_[_.length-2]][_[_.length-1]],_.push(me);break;case 3:return!0}}return!0}},g=function(){var y={EOF:1,parseError:function(A,_){if(this.yy.parser)this.yy.parser.parseError(A,_);else throw new Error(A)},setInput:function(m,A){return this.yy=A||this.yy||{},this._input=m,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var m=this._input[0];this.yytext+=m,this.yyleng++,this.offset++,this.match+=m,this.matched+=m;var A=m.match(/(?:\r\n?|\n).*/g);return A?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),m},unput:function(m){var A=m.length,_=m.split(/(?:\r\n?|\n)/g);this._input=m+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-A),this.offset-=A;var C=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),_.length-1&&(this.yylineno-=_.length-1);var I=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:_?(_.length===C.length?this.yylloc.first_column:0)+C[C.length-_.length].length-_[0].length:this.yylloc.first_column-A},this.options.ranges&&(this.yylloc.range=[I[0],I[0]+this.yyleng-A]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(m){this.unput(this.match.slice(m))},pastInput:function(){var m=this.matched.substr(0,this.matched.length-this.match.length);return(m.length>20?"...":"")+m.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var m=this.match;return m.length<20&&(m+=this._input.substr(0,20-m.length)),(m.substr(0,20)+(m.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var m=this.pastInput(),A=new Array(m.length+1).join("-");return m+this.upcomingInput()+`
`+A+"^"},test_match:function(m,A){var _,C,I;if(this.options.backtrack_lexer&&(I={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(I.yylloc.range=this.yylloc.range.slice(0))),C=m[0].match(/(?:\r\n?|\n).*/g),C&&(this.yylineno+=C.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:C?C[C.length-1].length-C[C.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+m[0].length},this.yytext+=m[0],this.match+=m[0],this.matches=m,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(m[0].length),this.matched+=m[0],_=this.performAction.call(this,this.yy,this,A,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),_)return _;if(this._backtrack){for(var E in I)this[E]=I[E];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var m,A,_,C;this._more||(this.yytext="",this.match="");for(var I=this._currentRules(),E=0;E<I.length;E++)if(_=this._input.match(this.rules[I[E]]),_&&(!A||_[0].length>A[0].length)){if(A=_,C=E,this.options.backtrack_lexer){if(m=this.test_match(_,I[E]),m!==!1)return m;if(this._backtrack){A=!1;continue}else return!1}else if(!this.options.flex)break}return A?(m=this.test_match(A,I[C]),m!==!1?m:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var A=this.next();return A||this.lex()},begin:function(A){this.conditionStack.push(A)},popState:function(){var A=this.conditionStack.length-1;return A>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(A){return A=this.conditionStack.length-1-Math.abs(A||0),A>=0?this.conditionStack[A]:"INITIAL"},pushState:function(A){this.begin(A)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(A,_,C,I){switch(C){case 0:break;case 1:return 6;case 2:return _.yytext=_.yytext.substr(1,_.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}};return y}();f.lexer=g;function v(){this.yy={}}return v.prototype=f,f.Parser=v,new v}();typeof IO<"u"&&(t.parser=e,t.Parser=e.Parser,t.parse=function(){return e.parse.apply(e,arguments)})});function X2(i){if(i instanceof String||typeof i=="string"||i instanceof Buffer)try{return q2.parse(i.toString())}catch(t){throw new B2(t)}return i}function th(i,t=c0){let e=i;try{e=X2(e)}catch(n){return[n]}return no(e,t)}const VA={StyleExpression:xA,isExpression:Hh,isExpressionFilter:Zh,createExpression:qh,createPropertyExpression:P0,normalizePropertyExpression:w2,ZoomConstantExpression:Np,ZoomDependentExpression:Fp,StylePropertyFunction:Xh},WA={convertFunction:x2,createFunction:S0,isFunction:vu};th.parsed=th;th.latest=th;function Ud(i){return i*Math.PI/180}var Z2=function(){for(var i=[],t=78271.51696402048;i.length<=24;t/=2)i.push(t);return i}();function YA(i,t){if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof OffscreenCanvas<"u")return new OffscreenCanvas(i,t);var e=document.createElement("canvas");return e.width=i,e.height=t,e}function K2(i,t){for(var e=0,n=t.length;e<n;++e){var r=t[e];if(r<i&&e+1<n){var o=t[e]/t[e+1];return e+Math.log(t[e]/i)/Math.log(o)}}return n-1}var J2=Array(256).join(" ");function HA(i,t){if(t>=.05){for(var e="",n=i.split(`
`),r=J2.slice(0,Math.round(t/.1)),o=0,a=n.length;o<a;++o)o>0&&(e+=`
`),e+=n[o].split("").join(r);return e}return i}var Bd;function qA(){return Bd||(Bd=YA(1,1).getContext("2d")),Bd}function Zo(i,t){return qA().measureText(i).width+(i.length-1)*t}var Bp={};lp&&rt(lp,Ie.CLEAR,function(){Bp={}});function XA(i,t,e,n){if(i.indexOf(`
`)!==-1){for(var r=i.split(`
`),o=[],a=0,s=r.length;a<s;++a)o.push(XA(r[a],t,e,n));return o.join(`
`)}var l=e+","+t+","+i+","+n,u=Bp[l];if(!u){var c=i.split(" ");if(c.length>1){var h=qA();h.font=t;for(var d=h.measureText("M").width,p=d*e,f="",o=[],a=0,s=c.length;a<s;++a){var g=c[a],v=f+(f?" ":"")+g;Zo(v,n)<=p?f=v:(f&&o.push(f),f=g)}f&&o.push(f);for(var a=0,s=o.length;a<s&&s>1;++a){var y=o[a];if(Zo(y,n)<p*.35){var m=a>0?Zo(o[a-1],n):1/0,A=a<s-1?Zo(o[a+1],n):1/0;o.splice(a,1),s-=1,m<A?(o[a-1]+=" "+y,a-=1):o[a]=y+" "+o[a]}}for(var a=0,s=o.length-1;a<s;++a){var _=o[a],C=o[a+1];if(Zo(_,n)>p*.7&&Zo(C,n)<p*.6){var I=_.split(" "),E=I.pop();Zo(E,n)<p*.2&&(o[a]=I.join(" "),o[a+1]=E+" "+C),s-=1}}u=o.join(`
`)}else u=i;u=HA(u,n),Bp[l]=u}return u}var Q2=WA.isFunction,$2=WA.convertFunction,eL=VA.isExpression,tL=VA.createPropertyExpression,iL={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},nL={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},rL=function(i,t){var e=tL(i,t);if(e.result==="error")throw new Error(e.value.map(function(n){return"".concat(n.key,": ").concat(n.message)}).join(", "));return e.value},jp={},ih={zoom:0},qu,jd;function Oe(i,t,e,n,r,o){var a=i.id;o||(o={},console.warn("No functionCache provided to getValue()")),o[a]||(o[a]={});var s=o[a];if(!s[e]){var l=(i[t]||jp)[e],u=c0["".concat(t,"_").concat(i.type)][e];l===void 0&&(l=u.default);var c=eL(l);if(!c&&Q2(l)&&(l=$2(l,u),c=!0),c){var h=rL(l,u);s[e]=h.evaluate.bind(h)}else u.type=="color"&&(l=pt.parse(l)),s[e]=function(){return l}}return ih.zoom=n,s[e](ih,r)}function oL(i,t,e,n,r){return r||console.warn("No filterCache provided to evaluateFilter()"),i in r||(r[i]=G2(t).filter),ih.zoom=n,r[i](ih,e)}function Ko(i,t){if(i){if(i.a===0||t===0)return;var e=i.a;return t=t===void 0?1:t,e===0?"transparent":"rgba("+Math.round(i.r*255/e)+","+Math.round(i.g*255/e)+","+Math.round(i.b*255/e)+","+e*t+")"}return i}var aL=/^([^]*)\{(.*)\}([^]*)$/;function zd(i,t){var e;do if(e=i.match(aL),e){var n=t[e[2]]||"";i=e[1]+n+e[3]}while(e);return i}function sL(i,t,e,n,r,o,a){if(n===void 0&&(n=Z2),typeof t=="string"&&(t=JSON.parse(t)),t.version!=8)throw new Error("glStyle version 8 required.");var s,l;if(o){if(typeof Image<"u"){var u=new Image;u.crossOrigin="anonymous",u.onload=function(){s=u,l=[u.width,u.height],i.changed(),u.onload=null},u.src=o}else if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){var c=self;c.postMessage({action:"loadImage",src:o}),c.addEventListener("message",function(U){U.data.action==="imageLoaded"&&U.data.src===o&&(s=U.data.image,l=[s.width,s.height])})}}for(var h=U2(t.layers),d={},p=[],f={},g={},v={},y={},m,A=0,_=h.length;A<_;++A){var C=h[A],I=C.id;if(typeof e=="string"&&C.source==e||e.indexOf(I)!==-1){var E=C["source-layer"];if(!m){m=C.source;var w=t.sources[m];if(!w)throw new Error('Source "'.concat(m,'" is not defined'));var S=w.type;if(S!=="vector"&&S!=="geojson")throw new Error('Source "'.concat(m,'" is not of type "vector" or "geojson", but "').concat(S,'"'))}var x=d[E];x||(x=[],d[E]=x),x.push({layer:C,index:A}),p.push(I)}}var T=new Me,L=new Ge,G=[],N=function(B,U){var D=B.getProperties(),z=d[D.layer];if(z){var F=n.indexOf(U);F==-1&&(F=K2(U,n));for(var O=iL[B.getGeometry().getType()],R={properties:D,type:O},M=-1,ie=function(Q,me){var pe=z[Q],V=pe.layer,ze=V.id,Ce=V.layout||jp,Qe=V.paint||jp;if(Ce.visibility==="none"||"minzoom"in V&&F<V.minzoom||"maxzoom"in V&&F>=V.maxzoom)return"continue";var At=V.filter;if(!At||oL(ze,At,R,F,y)){var $e=void 0,it=void 0,ue=void 0,gt=void 0,et=void 0,J=void 0,He=pe.index;if(O==3&&(V.type=="fill"||V.type=="fill-extrusion"))if(it=Oe(V,"paint",V.type+"-opacity",F,R,v),V.type+"-pattern"in Qe){var Ve=Oe(V,"paint",V.type+"-pattern",F,R,v);if(Ve){var _t=typeof Ve=="string"?zd(Ve,D):Ve.toString();if(s&&r&&r[_t]){++M,J=G[M],(!J||!J.getFill()||J.getStroke()||J.getText())&&(J=new de({fill:new Ge}),G[M]=J),ue=J.getFill(),J.setZIndex(He);var k=_t+"."+it,W=g[k];if(!W){var q=r[_t],se=YA(q.width,q.height),ye=se.getContext("2d");ye.globalAlpha=it,ye.drawImage(s,q.x,q.y,q.width,q.height,0,0,q.width,q.height),W=ye.createPattern(se,"repeat"),g[k]=W}ue.setColor(W)}}}else $e=Ko(Oe(V,"paint",V.type+"-color",F,R,v),it),V.type+"-outline-color"in Qe&&(et=Ko(Oe(V,"paint",V.type+"-outline-color",F,R,v),it)),et||(et=$e),($e||et)&&(++M,J=G[M],(!J||$e&&!J.getFill()||!$e&&J.getFill()||et&&!J.getStroke()||!et&&J.getStroke()||J.getText())&&(J=new de({fill:$e?new Ge:void 0,stroke:et?new Me:void 0}),G[M]=J),$e&&(ue=J.getFill(),ue.setColor($e)),et&&(gt=J.getStroke(),gt.setColor(et),gt.setWidth(.5)),J.setZIndex(He));if(O!=1&&V.type=="line"){$e=!("line-pattern"in Qe)&&"line-color"in Qe?Ko(Oe(V,"paint","line-color",F,R,v),Oe(V,"paint","line-opacity",F,R,v)):void 0;var Ae=Oe(V,"paint","line-width",F,R,v);$e&&Ae>0&&(++M,J=G[M],(!J||!J.getStroke()||J.getFill()||J.getText())&&(J=new de({stroke:new Me}),G[M]=J),gt=J.getStroke(),gt.setLineCap(Oe(V,"layout","line-cap",F,R,v)),gt.setLineJoin(Oe(V,"layout","line-join",F,R,v)),gt.setMiterLimit(Oe(V,"layout","line-miter-limit",F,R,v)),gt.setColor($e),gt.setWidth(Ae),gt.setLineDash(Qe["line-dasharray"]?Oe(V,"paint","line-dasharray",F,R,v).map(function($_){return $_*Ae}):null),J.setZIndex(He))}var qe=!1,Fe=null,Gt=0,Et=void 0,We=void 0,on=void 0;if((O==1||O==2)&&"icon-image"in Ce){var bt=Oe(V,"layout","icon-image",F,R,v);if(bt){Et=typeof bt=="string"?zd(bt,D):bt.toString();var Ft=void 0;if(s&&r&&r[Et]){var Gi=Oe(V,"layout","icon-rotation-alignment",F,R,v);if(O==2){var Mt=B.getGeometry();if(Mt.getFlatMidpoint||Mt.getFlatMidpoints){var Xi=Mt.getExtent(),Or=Math.sqrt(Math.max(Math.pow((Xi[2]-Xi[0])/U,2),Math.pow((Xi[3]-Xi[1])/U,2)));if(Or>150){var Zi=Mt.getType()==="MultiLineString"?Mt.getFlatMidpoints():Mt.getFlatMidpoint();jd||(qu=[NaN,NaN],jd=new Op("Point",qu,[],{},null)),Ft=jd,qu[0]=Zi[0],qu[1]=Zi[1];var Ai=Oe(V,"layout","symbol-placement",F,R,v);if(Ai==="line"&&Gi==="map")for(var ki=Mt.getStride(),si=Mt.getFlatCoordinates(),Vn=0,Wo=si.length-ki;Vn<Wo;Vn+=ki){var Wn=si[Vn],nt=si[Vn+1],Ii=si[Vn+ki],ao=si[Vn+ki+1],so=Math.min(Wn,Ii),Fa=Math.min(nt,ao),Ua=Math.max(Wn,Ii),ar=Math.max(nt,ao);if(Zi[0]>=so&&Zi[0]<=Ua&&Zi[1]>=Fa&&Zi[1]<=ar){Gt=Math.atan2(nt-ao,Ii-Wn);break}}}}}if(O!==2||Ft){var li=Oe(V,"layout","icon-size",F,R,v),Rt=Qe["icon-color"]!==void 0?Oe(V,"paint","icon-color",F,R,v):null;if(!Rt||Rt.a!==0){var k=Et+"."+li;if(Rt!==null&&(k+="."+Rt),We=f[k],!We){var Ei=r[Et];We=new ni({color:Rt?[Rt.r*255,Rt.g*255,Rt.b*255,Rt.a]:void 0,img:s,imgSize:l,size:[Ei.width,Ei.height],offset:[Ei.x,Ei.y],rotateWithView:Gi==="map",scale:li/Ei.pixelRatio,displacement:"icon-offset"in Ce?Oe(V,"layout","icon-offset",F,R,v).map(function(eC){return-eC*Ei.pixelRatio}):void 0}),f[k]=We}}We&&(++M,J=G[M],(!J||!J.getImage()||J.getFill()||J.getStroke())&&(J=new de,G[M]=J),J.setGeometry(Ft),We.setRotation(Gt+Ud(Oe(V,"layout","icon-rotate",F,R,v))),We.setOpacity(Oe(V,"paint","icon-opacity",F,R,v)),We.setAnchor(nL[Oe(V,"layout","icon-anchor",F,R,v)]),J.setImage(We),Fe=J.getText(),J.setText(void 0),J.setZIndex(He),qe=!0,on=!1)}else on=!0}}}if(O==1&&V.type==="circle"){++M,J=G[M],(!J||!J.getImage()||J.getFill()||J.getStroke())&&(J=new de,G[M]=J);var sr="circle-radius"in Qe?Oe(V,"paint","circle-radius",F,R,v):5,Jt=Ko(Oe(V,"paint","circle-stroke-color",F,R,v),Oe(V,"paint","circle-stroke-opacity",F,R,v)),ui=Ko(Oe(V,"paint","circle-color",F,R,v),Oe(V,"paint","circle-opacity",F,R,v)),an=Oe(V,"paint","circle-stroke-width",F,R,v),Lr=sr+"."+Jt+"."+ui+"."+an;We=f[Lr],We||(We=new gi({radius:sr,stroke:Jt&&an>0?new Me({width:an,color:Jt}):void 0,fill:ui?new Ge({color:ui}):void 0}),f[Lr]=We),J.setImage(We),Fe=J.getText(),J.setText(void 0),J.setGeometry(void 0),J.setZIndex(He),qe=!0}var Tn=void 0;if("text-field"in Ce){var K_=Oe(V,"layout","text-field",F,R,v).toString();Tn=zd(K_,D).trim(),it=Oe(V,"paint","text-opacity",F,R,v)}if(Tn&&it&&!on){qe||(++M,J=G[M],(!J||!J.getText()||J.getFill()||J.getStroke())&&(J=new de,G[M]=J),J.setImage(void 0),J.setGeometry(void 0)),J.getText()||J.setText(Fe||new Cr({padding:[2,2,2,2]})),Fe=J.getText();var Ba=Math.round(Oe(V,"layout","text-size",F,R,v)),W0=Oe(V,"layout","text-font",F,R,v),id=Oe(V,"layout","text-line-height",F,R,v),Y0=lA(a?a(W0):W0,Ba,id),H0=Ce["text-transform"];H0=="uppercase"?Tn=Tn.toUpperCase():H0=="lowercase"&&(Tn=Tn.toLowerCase());var J_=Oe(V,"layout","text-max-width",F,R,v),q0=Oe(V,"layout","text-letter-spacing",F,R,v),X0=O==2?HA(Tn,q0):XA(Tn,Y0,J_,q0);Fe.setText(X0),Fe.setFont(Y0),Fe.setRotation(Ud(Oe(V,"layout","text-rotate",F,R,v)));var xu=Oe(V,"layout","text-anchor",F,R,v),Ai=qe||O==1?"point":Oe(V,"layout","symbol-placement",F,R,v);Fe.setPlacement(Ai);var Yo=Oe(V,"paint","text-halo-width",F,R,v),Z0=Oe(V,"layout","text-offset",F,R,v),K0=Oe(V,"paint","text-translate",F,R,v),nd=0,rd=0;if(Ai=="point"){var od="center";xu.indexOf("left")!==-1?(od="left",rd=Yo):xu.indexOf("right")!==-1&&(od="right",rd=-Yo),Fe.setTextAlign(od);var Q_=Oe(V,"layout","text-rotation-alignment",F,R,v);Fe.setRotateWithView(Q_=="map")}else Fe.setMaxAngle(Ud(Oe(V,"layout","text-max-angle",F,R,v))*Tn.length/X0.length),Fe.setTextAlign(),Fe.setRotateWithView(!1);var ad="middle";xu.indexOf("bottom")==0?(ad="bottom",nd=-Yo-.5*(id-1)*Ba):xu.indexOf("top")==0&&(ad="top",nd=Yo+.5*(id-1)*Ba),Fe.setTextBaseline(ad),Fe.setOffsetX(Z0[0]*Ba+rd+K0[0]),Fe.setOffsetY(Z0[1]*Ba+nd+K0[1]),L.setColor(Ko(Oe(V,"paint","text-color",F,R,v),it)),Fe.setFill(L);var J0=Ko(Oe(V,"paint","text-halo-color",F,R,v),it);if(J0){T.setColor(J0),Yo*=2;var Q0=.5*Ba;T.setWidth(Yo<=Q0?Yo:Q0),Fe.setStroke(T)}else Fe.setStroke(void 0);var il=Oe(V,"layout","text-padding",F,R,v),nl=Fe.getPadding();il!==nl[0]&&(nl[0]=il,nl[1]=il,nl[2]=il,nl[3]=il),J.setZIndex(He)}}},Y=0,K=z.length;Y<K;++Y)ie(Y);if(M>-1)return G.length=M+1,G}};return i.setStyle(N),i.set("mapbox-source",m),i.set("mapbox-layers",p),N}var ZA={exports:{}};(function(){var i;ZA.exports={icon:"icons/google.svg",name:"google",title:"Google Fonts",link:"google.com/fonts",getNames:function(){return i},getLink:function(t){return"https://fonts.google.com/specimen/"+t.replace(/( )/g,"+")},normalizeName:function(t){return t}},i=["ABeeZee","Abel","Abril Fatface","Aclonica","Acme","Actor","Adamina","Advent Pro","Aguafina Script","Akronim","Aladin","Aldrich","Alef","Alegreya","Alegreya SC","Alegreya Sans","Alegreya Sans SC","Alex Brush","Alfa Slab One","Alice","Alike","Alike Angular","Allan","Allerta","Allerta Stencil","Allura","Almendra","Almendra Display","Almendra SC","Amarante","Amaranth","Amatic SC","Amethysta","Amiri","Amita","Anaheim","Andada","Andika","Angkor","Annie Use Your Telescope","Anonymous Pro","Antic","Antic Didone","Antic Slab","Anton","Arapey","Arbutus","Arbutus Slab","Architects Daughter","Archivo Black","Archivo Narrow","Arimo","Arizonia","Armata","Artifika","Arvo","Arya","Asap","Asar","Asset","Astloch","Asul","Atomic Age","Aubrey","Audiowide","Autour One","Average","Average Sans","Averia Gruesa Libre","Averia Libre","Averia Sans Libre","Averia Serif Libre","Bad Script","Balthazar","Bangers","Basic","Battambang","Baumans","Bayon","Belgrano","Belleza","BenchNine","Bentham","Berkshire Swash","Bevan","Bigelow Rules","Bigshot One","Bilbo","Bilbo Swash Caps","Biryani","Bitter","Black Ops One","Bokor","Bonbon","Boogaloo","Bowlby One","Bowlby One SC","Brawler","Bree Serif","Bubblegum Sans","Bubbler One","Buda","Buenard","Butcherman","Butterfly Kids","Cabin","Cabin Condensed","Cabin Sketch","Caesar Dressing","Cagliostro","Calligraffitti","Cambay","Cambo","Candal","Cantarell","Cantata One","Cantora One","Capriola","Cardo","Carme","Carrois Gothic","Carrois Gothic SC","Carter One","Catamaran","Caudex","Caveat","Caveat Brush","Cedarville Cursive","Ceviche One","Changa One","Chango","Chau Philomene One","Chela One","Chelsea Market","Chenla","Cherry Cream Soda","Cherry Swash","Chewy","Chicle","Chivo","Chonburi","Cinzel","Cinzel Decorative","Clicker Script","Coda","Coda Caption","Codystar","Combo","Comfortaa","Coming Soon","Concert One","Condiment","Content","Contrail One","Convergence","Cookie","Copse","Corben","Courgette","Cousine","Coustard","Covered By Your Grace","Crafty Girls","Creepster","Crete Round","Crimson Text","Croissant One","Crushed","Cuprum","Cutive","Cutive Mono","Damion","Dancing Script","Dangrek","Dawning of a New Day","Days One","Dekko","Delius","Delius Swash Caps","Delius Unicase","Della Respira","Denk One","Devonshire","Dhurjati","Didact Gothic","Diplomata","Diplomata SC","Domine","Donegal One","Doppio One","Dorsa","Dosis","Dr Sugiyama","Droid Sans","Droid Sans Mono","Droid Serif","Duru Sans","Dynalight","EB Garamond","Eagle Lake","Eater","Economica","Eczar","Ek Mukta","Electrolize","Elsie","Elsie Swash Caps","Emblema One","Emilys Candy","Engagement","Englebert","Enriqueta","Erica One","Esteban","Euphoria Script","Ewert","Exo","Exo 2","Expletus Sans","Fanwood Text","Fascinate","Fascinate Inline","Faster One","Fasthand","Fauna One","Federant","Federo","Felipa","Fenix","Finger Paint","Fira Mono","Fira Sans","Fjalla One","Fjord One","Flamenco","Flavors","Fondamento","Fontdiner Swanky","Forum","Francois One","Freckle Face","Fredericka the Great","Fredoka One","Freehand","Fresca","Frijole","Fruktur","Fugaz One","GFS Didot","GFS Neohellenic","Gabriela","Gafata","Galdeano","Galindo","Gentium Basic","Gentium Book Basic","Geo","Geostar","Geostar Fill","Germania One","Gidugu","Gilda Display","Give You Glory","Glass Antiqua","Glegoo","Gloria Hallelujah","Goblin One","Gochi Hand","Gorditas","Goudy Bookletter 1911","Graduate","Grand Hotel","Gravitas One","Great Vibes","Griffy","Gruppo","Gudea","Gurajada","Habibi","Halant","Hammersmith One","Hanalei","Hanalei Fill","Handlee","Hanuman","Happy Monkey","Headland One","Henny Penny","Herr Von Muellerhoff","Hind","Hind Siliguri","Hind Vadodara","Holtwood One SC","Homemade Apple","Homenaje","IM Fell DW Pica","IM Fell DW Pica SC","IM Fell Double Pica","IM Fell Double Pica SC","IM Fell English","IM Fell English SC","IM Fell French Canon","IM Fell French Canon SC","IM Fell Great Primer","IM Fell Great Primer SC","Iceberg","Iceland","Imprima","Inconsolata","Inder","Indie Flower","Inika","Inknut Antiqua","Irish Grover","Istok Web","Italiana","Italianno","Itim","Jacques Francois","Jacques Francois Shadow","Jaldi","Jim Nightshade","Jockey One","Jolly Lodger","Josefin Sans","Josefin Slab","Joti One","Judson","Julee","Julius Sans One","Junge","Jura","Just Another Hand","Just Me Again Down Here","Kadwa","Kalam","Kameron","Kantumruy","Karla","Karma","Kaushan Script","Kavoon","Kdam Thmor","Keania One","Kelly Slab","Kenia","Khand","Khmer","Khula","Kite One","Knewave","Kotta One","Koulen","Kranky","Kreon","Kristi","Krona One","Kurale","La Belle Aurore","Laila","Lakki Reddy","Lancelot","Lateef","Lato","League Script","Leckerli One","Ledger","Lekton","Lemon","Libre Baskerville","Life Savers","Lilita One","Lily Script One","Limelight","Linden Hill","Lobster","Lobster Two","Londrina Outline","Londrina Shadow","Londrina Sketch","Londrina Solid","Lora","Love Ya Like A Sister","Loved by the King","Lovers Quarrel","Luckiest Guy","Lusitana","Lustria","Macondo","Macondo Swash Caps","Magra","Maiden Orange","Mako","Mallanna","Mandali","Marcellus","Marcellus SC","Marck Script","Margarine","Marko One","Marmelad","Martel","Martel Sans","Marvel","Mate","Mate SC","Maven Pro","McLaren","Meddon","MedievalSharp","Medula One","Megrim","Meie Script","Merienda","Merienda One","Merriweather","Merriweather Sans","Metal","Metal Mania","Metamorphous","Metrophobic","Michroma","Milonga","Miltonian","Miltonian Tattoo","Miniver","Miss Fajardose","Modak","Modern Antiqua","Molengo","Molle","Monda","Monofett","Monoton","Monsieur La Doulaise","Montaga","Montez","Montserrat","Montserrat Alternates","Montserrat Subrayada","Moul","Moulpali","Mountains of Christmas","Mouse Memoirs","Mr Bedfort","Mr Dafoe","Mr De Haviland","Mrs Saint Delafield","Mrs Sheppards","Muli","Mystery Quest","NTR","Neucha","Neuton","New Rocker","News Cycle","Niconne","Nixie One","Nobile","Nokora","Norican","Nosifer","Nothing You Could Do","Noticia Text","Noto Sans","Noto Serif","Nova Cut","Nova Flat","Nova Mono","Nova Oval","Nova Round","Nova Script","Nova Slim","Nova Square","Numans","Nunito","Odor Mean Chey","Offside","Old Standard TT","Oldenburg","Oleo Script","Oleo Script Swash Caps","Open Sans","Open Sans Condensed","Oranienbaum","Orbitron","Oregano","Orienta","Original Surfer","Oswald","Over the Rainbow","Overlock","Overlock SC","Ovo","Oxygen","Oxygen Mono","PT Mono","PT Sans","PT Sans Caption","PT Sans Narrow","PT Serif","PT Serif Caption","Pacifico","Palanquin","Palanquin Dark","Paprika","Parisienne","Passero One","Passion One","Pathway Gothic One","Patrick Hand","Patrick Hand SC","Patua One","Paytone One","Peddana","Peralta","Permanent Marker","Petit Formal Script","Petrona","Philosopher","Piedra","Pinyon Script","Pirata One","Plaster","Play","Playball","Playfair Display","Playfair Display SC","Podkova","Poiret One","Poller One","Poly","Pompiere","Pontano Sans","Poppins","Port Lligat Sans","Port Lligat Slab","Pragati Narrow","Prata","Preahvihear","Press Start 2P","Princess Sofia","Prociono","Prosto One","Puritan","Purple Purse","Quando","Quantico","Quattrocento","Quattrocento Sans","Questrial","Quicksand","Quintessential","Qwigley","Racing Sans One","Radley","Rajdhani","Raleway","Raleway Dots","Ramabhadra","Ramaraja","Rambla","Rammetto One","Ranchers","Rancho","Ranga","Rationale","Ravi Prakash","Redressed","Reenie Beanie","Revalia","Rhodium Libre","Ribeye","Ribeye Marrow","Righteous","Risque","Roboto","Roboto Condensed","Roboto Mono","Roboto Slab","Rochester","Rock Salt","Rokkitt","Romanesco","Ropa Sans","Rosario","Rosarivo","Rouge Script","Rozha One","Rubik","Rubik Mono One","Rubik One","Ruda","Rufina","Ruge Boogie","Ruluko","Rum Raisin","Ruslan Display","Russo One","Ruthie","Rye","Sacramento","Sahitya","Sail","Salsa","Sanchez","Sancreek","Sansita One","Sarala","Sarina","Sarpanch","Satisfy","Scada","Scheherazade","Schoolbell","Seaweed Script","Sevillana","Seymour One","Shadows Into Light","Shadows Into Light Two","Shanti","Share","Share Tech","Share Tech Mono","Shojumaru","Short Stack","Siemreap","Sigmar One","Signika","Signika Negative","Simonetta","Sintony","Sirin Stencil","Six Caps","Skranji","Slabo 13px","Slabo 27px","Slackey","Smokum","Smythe","Sniglet","Snippet","Snowburst One","Sofadi One","Sofia","Sonsie One","Sorts Mill Goudy","Source Code Pro","Source Sans Pro","Source Serif Pro","Special Elite","Spicy Rice","Spinnaker","Spirax","Squada One","Sree Krushnadevaraya","Stalemate","Stalinist One","Stardos Stencil","Stint Ultra Condensed","Stint Ultra Expanded","Stoke","Strait","Sue Ellen Francisco","Sumana","Sunshiney","Supermercado One","Sura","Suranna","Suravaram","Suwannaphum","Swanky and Moo Moo","Syncopate","Tangerine","Taprom","Tauri","Teko","Telex","Tenali Ramakrishna","Tenor Sans","Text Me One","The Girl Next Door","Tienne","Tillana","Timmana","Tinos","Titan One","Titillium Web","Trade Winds","Trocchi","Trochut","Trykker","Tulpen One","Ubuntu","Ubuntu Condensed","Ubuntu Mono","Ultra","Uncial Antiqua","Underdog","Unica One","UnifrakturCook","UnifrakturMaguntia","Unkempt","Unlock","Unna","VT323","Vampiro One","Varela","Varela Round","Vast Shadow","Vesper Libre","Vibur","Vidaloka","Viga","Voces","Volkhov","Vollkorn","Voltaire","Waiting for the Sunrise","Wallpoet","Walter Turncoat","Warnes","Wellfleet","Wendy One","Wire One","Work Sans","Yanone Kaffeesatz","Yantramanav","Yellowtail","Yeseva One","Yesteryear","Zeyada"]}).call(ds);var lL=ZA.exports;const uL=fu(lL);var cL=/font-family: ?([^;]*);/,hL=/("|')/g,Xu;function dL(i){if(!Xu){Xu={};for(var t=document.styleSheets,e=0,n=t.length;e<n;++e){var r=t[e];try{var o=r.rules||r.cssRules;if(o)for(var a=0,s=o.length;a<s;++a){var l=o[a];if(l.type==5){var u=l.cssText.match(cL);Xu[u[1].replace(hL,"")]=!0}}}catch{}}}return i in Xu}var yv={},pL=uL.getNames();function fL(i){var t=i.toString();if(t in yv)return i;for(var e=i.map(function(u){var c=lA(u,1).split(" ");return[c.slice(3).join(" ").replace(/"/g,""),c[1]+c[0]]}),n=0,r=e.length;n<r;++n){var o=e[n],a=o[0];if(!dL(a)&&pL.indexOf(a)!==-1){var s="https://fonts.googleapis.com/css?family="+a.replace(/ /g,"+")+":"+o[1];if(!document.querySelector('link[href="'+s+'"]')){var l=document.createElement("link");l.href=s,l.rel="stylesheet",document.head.appendChild(l)}}}return yv[t]=!0,i}var gL=/^(.*)(\?.*)$/;function vL(i,t){return t&&i.indexOf(".")===0&&(i=t+i),i}function Vd(i,t,e){i=vL(i,t);var n=i.match(gL);return n?n[1]+e+(n.length>2?n[2]:""):i+e}function $a(i,t,e,n,r){return new Promise(function(o,a){if(typeof t!="object"&&(t=JSON.parse(t)),t.version!=8)return a(new Error("glStyle version 8 required."));if(!(i instanceof mi||i instanceof bl))return a(new Error("Can only apply to VectorLayer or VectorTileLayer"));var s,l,u,c;function h(){!c&&(!t.sprite||l)?(c=sL(i,t,e,r,l,u,fL),i.getStyle()?o():a(new Error("Nothing to show for source [".concat(e,"]")))):c?(i.setStyle(c),o()):a(new Error("Something went wrong trying to apply style."))}if(t.sprite){s=window.devicePixelRatio>=1.5?.5:1;var d=s==.5?"@2x":"",p=Vd(t.sprite,n,d+".json");fetch(p,{credentials:"same-origin"}).then(function(f){return!f.ok&&d!==""?(p=Vd(t.sprite,n,".json"),fetch(p,{credentials:"same-origin"})):f}).then(function(f){if(f.ok)return f.json();a(new Error("Problem fetching sprite from ".concat(p,": ").concat(f.statusText)))}).then(function(f){if(f===void 0)return a(new Error("No sprites found."));l=f,u=Vd(t.sprite,n,d+".png"),h()}).catch(function(f){a(new Error("Sprites cannot be loaded: ".concat(p,": ").concat(f.message)))})}else h()})}new Hf;var KA=function(i){function t(e,n){if(!(this instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");if(this.layerName=e.layer,this.styleName=e.style,this.sourceId=e.source,typeof e.ssl>"u"&&(e.ssl=!0),this.protocol=e.ssl===!1?"http://":"https://",!Vi.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var r=this.layerName+"$GEOPORTAIL:GPP:TMS",o=Vi.configuration.getLayerConf(r);if(!o)throw new Error("ERROR : Layer ID not found into the catalogue !?");this.styleUrl=null,this.styleTitle="";for(var a=0;a<o.styles.length;a++){var s=o.styles[a];if(this.styleName&&s.name===this.styleName){this.styleUrl=s.url,this.styleTitle=s.title;break}else if(!this.styleName&&s.current){this.styleName=s.name,this.styleUrl=s.url,this.styleTitle=s.title;break}}if(!this.styleUrl)throw new Error("ERROR : Style URL not found !?");this.styleUrl.replace(/(http|https):\/\//,this.protocol);var l=new Pl({state:"loading",format:new Lp});l._originators=o.originators,l._legends=o.legends,l._metadata=o.metadata,l._description=o.description,l._title=o.title+" ("+this.styleTitle+")",l._quicklookUrl=o.quicklookUrl;var u={source:l};he.mergeParams(u,n),i.call(this,u),e.olParams&&!o.originators&&(l._originators=e.olParams.attributions),this._originators=l.originators,this.setStyleMapBox()}return i&&(t.__proto__=i),t.prototype=Object.create(i.prototype,{}),t.prototype.constructor=t,t.prototype.setStyleMapBox=function(){var e=this;fetch(this.styleUrl,{credentials:"same-origin"}).then(function(n){n.ok&&n.json().then(function(r){e.onStyleMapBoxLoad(r)})}).catch(function(n){e.onStyleMapBoxError(n)})},t.prototype.onStyleMapBoxLoad=function(e){this.sourceId||(this.sourceId=Object.keys(e.sources)[0]);var n=e.sources[this.sourceId];if(!n){this.onStyleMapBoxError({message:"ERROR : Source ID not found !? !"});return}if(n.type!=="vector"){this.onStyleMapBoxError({message:"ERROR : Source TYPE not permitted !"});return}var r=this.getSource();if(n.url){n.url.replace(/(http|https):\/\//,this.protocol);var o=new aA({url:n.url}),a=this,s=o.on("change",function(){if(o.getState()==="ready"){var u=o.getTileJSON();if(!u)return;a.set("mapbox-extensions",u);for(var c=Array.isArray(u.tiles)?u.tiles:[u.tiles],h=0;h<n.tiles.length;h++)c[h].replace(/(http|https):\/\//,this.protocol);r.setUrls(c),Kt(s)}})}if(n.tiles){for(var l=0;l<n.tiles.length;l++)n.tiles[l].replace(/(http|https):\/\//,this.protocol);r.setUrls(n.tiles)}$a(this,e,this.sourceId).then(()=>{r.setState("ready"),this.set("mapbox-styles",e)}).catch(u=>{this.onStyleMapBoxError(u)})},t.prototype.onStyleMapBoxError=function(e){var n=this.getSource();n.setState("error"),console.error(e.message)},t}(bl);window.ol&&window.ol.layer&&(window.ol.layer.GeoportalMapBox=KA);var Re={generate:function(){var i=Math.floor(Date.now());return function(){return i++}}(),name:function(i){var t=null,e=i.lastIndexOf("-");return e===-1?t=i:t=i.substring(0,e),t},index:function(i){var t=null,e=this.name(i),n=e.lastIndexOf("_");return n!==-1&&(t=e.substring(n+1)),t},uuid:function(i){var t=null,e=i.lastIndexOf("-");return e!==-1&&(t=parseInt(i.substring(e+1),10)),t}};/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Av(i,t){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);t&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),e.push.apply(e,n)}return e}function xr(i){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Av(Object(e),!0).forEach(function(n){mL(i,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):Av(Object(e)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(e,n))})}return i}function sc(i){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?sc=function(t){return typeof t}:sc=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sc(i)}function mL(i,t,e){return t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}function Qr(){return Qr=Object.assign||function(i){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Qr.apply(this,arguments)}function yL(i,t){if(i==null)return{};var e={},n=Object.keys(i),r,o;for(o=0;o<n.length;o++)r=n[o],!(t.indexOf(r)>=0)&&(e[r]=i[r]);return e}function AL(i,t){if(i==null)return{};var e=yL(i,t),n,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(i);for(r=0;r<o.length;r++)n=o[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(i,n)&&(e[n]=i[n])}return e}var _L="1.14.0";function Xr(i){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(i)}var ro=Xr(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),yu=Xr(/Edge/i),_v=Xr(/firefox/i),Ol=Xr(/safari/i)&&!Xr(/chrome/i)&&!Xr(/android/i),JA=Xr(/iP(ad|od|hone)/i),CL=Xr(/chrome/i)&&Xr(/android/i),QA={capture:!1,passive:!1};function ht(i,t,e){i.addEventListener(t,e,!ro&&QA)}function at(i,t,e){i.removeEventListener(t,e,!ro&&QA)}function nh(i,t){if(t){if(t[0]===">"&&(t=t.substring(1)),i)try{if(i.matches)return i.matches(t);if(i.msMatchesSelector)return i.msMatchesSelector(t);if(i.webkitMatchesSelector)return i.webkitMatchesSelector(t)}catch{return!1}return!1}}function IL(i){return i.host&&i!==document&&i.host.nodeType?i.host:i.parentNode}function pr(i,t,e,n){if(i){e=e||document;do{if(t!=null&&(t[0]===">"?i.parentNode===e&&nh(i,t):nh(i,t))||n&&i===e)return i;if(i===e)break}while(i=IL(i))}return null}var Cv=/\s+/g;function An(i,t,e){if(i&&t)if(i.classList)i.classList[e?"add":"remove"](t);else{var n=(" "+i.className+" ").replace(Cv," ").replace(" "+t+" "," ");i.className=(n+(e?" "+t:"")).replace(Cv," ")}}function Te(i,t,e){var n=i&&i.style;if(n){if(e===void 0)return document.defaultView&&document.defaultView.getComputedStyle?e=document.defaultView.getComputedStyle(i,""):i.currentStyle&&(e=i.currentStyle),t===void 0?e:e[t];!(t in n)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),n[t]=e+(typeof e=="string"?"":"px")}}function As(i,t){var e="";if(typeof i=="string")e=i;else do{var n=Te(i,"transform");n&&n!=="none"&&(e=n+" "+e)}while(!t&&(i=i.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(e)}function $A(i,t,e){if(i){var n=i.getElementsByTagName(t),r=0,o=n.length;if(e)for(;r<o;r++)e(n[r],r);return n}return[]}function Ir(){var i=document.scrollingElement;return i||document.documentElement}function pi(i,t,e,n,r){if(!(!i.getBoundingClientRect&&i!==window)){var o,a,s,l,u,c,h;if(i!==window&&i.parentNode&&i!==Ir()?(o=i.getBoundingClientRect(),a=o.top,s=o.left,l=o.bottom,u=o.right,c=o.height,h=o.width):(a=0,s=0,l=window.innerHeight,u=window.innerWidth,c=window.innerHeight,h=window.innerWidth),(t||e)&&i!==window&&(r=r||i.parentNode,!ro))do if(r&&r.getBoundingClientRect&&(Te(r,"transform")!=="none"||e&&Te(r,"position")!=="static")){var d=r.getBoundingClientRect();a-=d.top+parseInt(Te(r,"border-top-width")),s-=d.left+parseInt(Te(r,"border-left-width")),l=a+o.height,u=s+o.width;break}while(r=r.parentNode);if(n&&i!==window){var p=As(r||i),f=p&&p.a,g=p&&p.d;p&&(a/=g,s/=f,h/=f,c/=g,l=a+c,u=s+h)}return{top:a,left:s,bottom:l,right:u,width:h,height:c}}}function Iv(i,t,e){for(var n=Po(i,!0),r=pi(i)[t];n;){var o=pi(n)[e],a=void 0;if(e==="top"||e==="left"?a=r>=o:a=r<=o,!a)return n;if(n===Ir())break;n=Po(n,!1)}return!1}function Bs(i,t,e,n){for(var r=0,o=0,a=i.children;o<a.length;){if(a[o].style.display!=="none"&&a[o]!==Pe.ghost&&(n||a[o]!==Pe.dragged)&&pr(a[o],e.draggable,i,!1)){if(r===t)return a[o];r++}o++}return null}function R0(i,t){for(var e=i.lastElementChild;e&&(e===Pe.ghost||Te(e,"display")==="none"||t&&!nh(e,t));)e=e.previousElementSibling;return e||null}function On(i,t){var e=0;if(!i||!i.parentNode)return-1;for(;i=i.previousElementSibling;)i.nodeName.toUpperCase()!=="TEMPLATE"&&i!==Pe.clone&&(!t||nh(i,t))&&e++;return e}function Ev(i){var t=0,e=0,n=Ir();if(i)do{var r=As(i),o=r.a,a=r.d;t+=i.scrollLeft*o,e+=i.scrollTop*a}while(i!==n&&(i=i.parentNode));return[t,e]}function EL(i,t){for(var e in i)if(i.hasOwnProperty(e)){for(var n in t)if(t.hasOwnProperty(n)&&t[n]===i[e][n])return Number(e)}return-1}function Po(i,t){if(!i||!i.getBoundingClientRect)return Ir();var e=i,n=!1;do if(e.clientWidth<e.scrollWidth||e.clientHeight<e.scrollHeight){var r=Te(e);if(e.clientWidth<e.scrollWidth&&(r.overflowX=="auto"||r.overflowX=="scroll")||e.clientHeight<e.scrollHeight&&(r.overflowY=="auto"||r.overflowY=="scroll")){if(!e.getBoundingClientRect||e===document.body)return Ir();if(n||t)return e;n=!0}}while(e=e.parentNode);return Ir()}function wL(i,t){if(i&&t)for(var e in t)t.hasOwnProperty(e)&&(i[e]=t[e]);return i}function Wd(i,t){return Math.round(i.top)===Math.round(t.top)&&Math.round(i.left)===Math.round(t.left)&&Math.round(i.height)===Math.round(t.height)&&Math.round(i.width)===Math.round(t.width)}var Ll;function e_(i,t){return function(){if(!Ll){var e=arguments,n=this;e.length===1?i.call(n,e[0]):i.apply(n,e),Ll=setTimeout(function(){Ll=void 0},t)}}}function SL(){clearTimeout(Ll),Ll=void 0}function t_(i,t,e){i.scrollLeft+=t,i.scrollTop+=e}function i_(i){var t=window.Polymer,e=window.jQuery||window.Zepto;return t&&t.dom?t.dom(i).cloneNode(!0):e?e(i).clone(!0)[0]:i.cloneNode(!0)}var Sn="Sortable"+new Date().getTime();function PL(){var i=[],t;return{captureAnimationState:function(){if(i=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(r){if(!(Te(r,"display")==="none"||r===Pe.ghost)){i.push({target:r,rect:pi(r)});var o=xr({},i[i.length-1].rect);if(r.thisAnimationDuration){var a=As(r,!0);a&&(o.top-=a.f,o.left-=a.e)}r.fromRect=o}})}},addAnimationState:function(n){i.push(n)},removeAnimationState:function(n){i.splice(EL(i,{target:n}),1)},animateAll:function(n){var r=this;if(!this.options.animation){clearTimeout(t),typeof n=="function"&&n();return}var o=!1,a=0;i.forEach(function(s){var l=0,u=s.target,c=u.fromRect,h=pi(u),d=u.prevFromRect,p=u.prevToRect,f=s.rect,g=As(u,!0);g&&(h.top-=g.f,h.left-=g.e),u.toRect=h,u.thisAnimationDuration&&Wd(d,h)&&!Wd(c,h)&&(f.top-h.top)/(f.left-h.left)===(c.top-h.top)/(c.left-h.left)&&(l=ML(f,d,p,r.options)),Wd(h,c)||(u.prevFromRect=c,u.prevToRect=h,l||(l=r.options.animation),r.animate(u,f,h,l)),l&&(o=!0,a=Math.max(a,l),clearTimeout(u.animationResetTimer),u.animationResetTimer=setTimeout(function(){u.animationTime=0,u.prevFromRect=null,u.fromRect=null,u.prevToRect=null,u.thisAnimationDuration=null},l),u.thisAnimationDuration=l)}),clearTimeout(t),o?t=setTimeout(function(){typeof n=="function"&&n()},a):typeof n=="function"&&n(),i=[]},animate:function(n,r,o,a){if(a){Te(n,"transition",""),Te(n,"transform","");var s=As(this.el),l=s&&s.a,u=s&&s.d,c=(r.left-o.left)/(l||1),h=(r.top-o.top)/(u||1);n.animatingX=!!c,n.animatingY=!!h,Te(n,"transform","translate3d("+c+"px,"+h+"px,0)"),this.forRepaintDummy=xL(n),Te(n,"transition","transform "+a+"ms"+(this.options.easing?" "+this.options.easing:"")),Te(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){Te(n,"transition",""),Te(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},a)}}}}function xL(i){return i.offsetWidth}function ML(i,t,e,n){return Math.sqrt(Math.pow(t.top-i.top,2)+Math.pow(t.left-i.left,2))/Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))*n.animation}var Xa=[],Yd={initializeByDefault:!0},Au={mount:function(t){for(var e in Yd)Yd.hasOwnProperty(e)&&!(e in t)&&(t[e]=Yd[e]);Xa.forEach(function(n){if(n.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),Xa.push(t)},pluginEvent:function(t,e,n){var r=this;this.eventCanceled=!1,n.cancel=function(){r.eventCanceled=!0};var o=t+"Global";Xa.forEach(function(a){e[a.pluginName]&&(e[a.pluginName][o]&&e[a.pluginName][o](xr({sortable:e},n)),e.options[a.pluginName]&&e[a.pluginName][t]&&e[a.pluginName][t](xr({sortable:e},n)))})},initializePlugins:function(t,e,n,r){Xa.forEach(function(s){var l=s.pluginName;if(!(!t.options[l]&&!s.initializeByDefault)){var u=new s(t,e,t.options);u.sortable=t,u.options=t.options,t[l]=u,Qr(n,u.defaults)}});for(var o in t.options)if(t.options.hasOwnProperty(o)){var a=this.modifyOption(t,o,t.options[o]);typeof a<"u"&&(t.options[o]=a)}},getEventProperties:function(t,e){var n={};return Xa.forEach(function(r){typeof r.eventProperties=="function"&&Qr(n,r.eventProperties.call(e[r.pluginName],t))}),n},modifyOption:function(t,e,n){var r;return Xa.forEach(function(o){t[o.pluginName]&&o.optionListeners&&typeof o.optionListeners[e]=="function"&&(r=o.optionListeners[e].call(t[o.pluginName],n))}),r}};function TL(i){var t=i.sortable,e=i.rootEl,n=i.name,r=i.targetEl,o=i.cloneEl,a=i.toEl,s=i.fromEl,l=i.oldIndex,u=i.newIndex,c=i.oldDraggableIndex,h=i.newDraggableIndex,d=i.originalEvent,p=i.putSortable,f=i.extraEventProperties;if(t=t||e&&e[Sn],!!t){var g,v=t.options,y="on"+n.charAt(0).toUpperCase()+n.substr(1);window.CustomEvent&&!ro&&!yu?g=new CustomEvent(n,{bubbles:!0,cancelable:!0}):(g=document.createEvent("Event"),g.initEvent(n,!0,!0)),g.to=a||e,g.from=s||e,g.item=r||e,g.clone=o,g.oldIndex=l,g.newIndex=u,g.oldDraggableIndex=c,g.newDraggableIndex=h,g.originalEvent=d,g.pullMode=p?p.lastPutMode:void 0;var m=xr(xr({},f),Au.getEventProperties(n,t));for(var A in m)g[A]=m[A];e&&e.dispatchEvent(g),v[y]&&v[y].call(t,g)}}var bL=["evt"],ln=function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.evt,o=AL(n,bL);Au.pluginEvent.bind(Pe)(t,e,xr({dragEl:te,parentEl:Ut,ghostEl:Ue,rootEl:Ot,nextEl:oa,lastDownEl:lc,cloneEl:Bt,cloneHidden:vo,dragStarted:vl,putSortable:xi,activeSortable:Pe.active,originalEvent:r,oldIndex:rs,oldDraggableIndex:Gl,newIndex:_n,newDraggableIndex:ho,hideGhostForTarget:a_,unhideGhostForTarget:s_,cloneNowHidden:function(){vo=!0},cloneNowShown:function(){vo=!1},dispatchSortableEvent:function(s){Ki({sortable:e,name:s,originalEvent:r})}},o))};function Ki(i){TL(xr({putSortable:xi,cloneEl:Bt,targetEl:te,rootEl:Ot,oldIndex:rs,oldDraggableIndex:Gl,newIndex:_n,newDraggableIndex:ho},i))}var te,Ut,Ue,Ot,oa,lc,Bt,vo,rs,_n,Gl,ho,Zu,xi,es=!1,rh=!1,oh=[],Jo,Yn,Hd,qd,wv,Sv,vl,Za,kl,Dl=!1,Ku=!1,uc,Ni,Xd=[],zp=!1,ah=[],Kh=typeof document<"u",Ju=JA,Pv=yu||ro?"cssFloat":"float",RL=Kh&&!CL&&!JA&&"draggable"in document.createElement("div"),n_=function(){if(Kh){if(ro)return!1;var i=document.createElement("x");return i.style.cssText="pointer-events:auto",i.style.pointerEvents==="auto"}}(),r_=function(t,e){var n=Te(t),r=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),o=Bs(t,0,e),a=Bs(t,1,e),s=o&&Te(o),l=a&&Te(a),u=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+pi(o).width,c=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+pi(a).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&s.float&&s.float!=="none"){var h=s.float==="left"?"left":"right";return a&&(l.clear==="both"||l.clear===h)?"vertical":"horizontal"}return o&&(s.display==="block"||s.display==="flex"||s.display==="table"||s.display==="grid"||u>=r&&n[Pv]==="none"||a&&n[Pv]==="none"&&u+c>r)?"vertical":"horizontal"},OL=function(t,e,n){var r=n?t.left:t.top,o=n?t.right:t.bottom,a=n?t.width:t.height,s=n?e.left:e.top,l=n?e.right:e.bottom,u=n?e.width:e.height;return r===s||o===l||r+a/2===s+u/2},LL=function(t,e){var n;return oh.some(function(r){var o=r[Sn].options.emptyInsertThreshold;if(!(!o||R0(r))){var a=pi(r),s=t>=a.left-o&&t<=a.right+o,l=e>=a.top-o&&e<=a.bottom+o;if(s&&l)return n=r}}),n},o_=function(t){function e(o,a){return function(s,l,u,c){var h=s.options.group.name&&l.options.group.name&&s.options.group.name===l.options.group.name;if(o==null&&(a||h))return!0;if(o==null||o===!1)return!1;if(a&&o==="clone")return o;if(typeof o=="function")return e(o(s,l,u,c),a)(s,l,u,c);var d=(a?s:l).options.group.name;return o===!0||typeof o=="string"&&o===d||o.join&&o.indexOf(d)>-1}}var n={},r=t.group;(!r||sc(r)!="object")&&(r={name:r}),n.name=r.name,n.checkPull=e(r.pull,!0),n.checkPut=e(r.put),n.revertClone=r.revertClone,t.group=n},a_=function(){!n_&&Ue&&Te(Ue,"display","none")},s_=function(){!n_&&Ue&&Te(Ue,"display","")};Kh&&document.addEventListener("click",function(i){if(rh)return i.preventDefault(),i.stopPropagation&&i.stopPropagation(),i.stopImmediatePropagation&&i.stopImmediatePropagation(),rh=!1,!1},!0);var Qo=function(t){if(te){t=t.touches?t.touches[0]:t;var e=LL(t.clientX,t.clientY);if(e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);n.target=n.rootEl=e,n.preventDefault=void 0,n.stopPropagation=void 0,e[Sn]._onDragOver(n)}}},GL=function(t){te&&te.parentNode[Sn]._isOutsideThisEl(t.target)};function Pe(i,t){if(!(i&&i.nodeType&&i.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(i));this.el=i,this.options=t=Qr({},t),i[Sn]=this;var e={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(i.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return r_(i,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(a,s){a.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Pe.supportPointer!==!1&&"PointerEvent"in window&&!Ol,emptyInsertThreshold:5};Au.initializePlugins(this,i,e);for(var n in e)!(n in t)&&(t[n]=e[n]);o_(t);for(var r in this)r.charAt(0)==="_"&&typeof this[r]=="function"&&(this[r]=this[r].bind(this));this.nativeDraggable=t.forceFallback?!1:RL,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?ht(i,"pointerdown",this._onTapStart):(ht(i,"mousedown",this._onTapStart),ht(i,"touchstart",this._onTapStart)),this.nativeDraggable&&(ht(i,"dragover",this),ht(i,"dragenter",this)),oh.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),Qr(this,PL())}Pe.prototype={constructor:Pe,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(Za=null)},_getDirection:function(t,e){return typeof this.options.direction=="function"?this.options.direction.call(this,t,e,te):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,n=this.el,r=this.options,o=r.preventOnFilter,a=t.type,s=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,l=(s||t).target,u=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||l,c=r.filter;if(zL(n),!te&&!(/mousedown|pointerdown/.test(a)&&t.button!==0||r.disabled)&&!u.isContentEditable&&!(!this.nativeDraggable&&Ol&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=pr(l,r.draggable,n,!1),!(l&&l.animated)&&lc!==l)){if(rs=On(l),Gl=On(l,r.draggable),typeof c=="function"){if(c.call(this,t,l,this)){Ki({sortable:e,rootEl:u,name:"filter",targetEl:l,toEl:n,fromEl:n}),ln("filter",e,{evt:t}),o&&t.cancelable&&t.preventDefault();return}}else if(c&&(c=c.split(",").some(function(h){if(h=pr(u,h.trim(),n,!1),h)return Ki({sortable:e,rootEl:h,name:"filter",targetEl:l,fromEl:n,toEl:n}),ln("filter",e,{evt:t}),!0}),c)){o&&t.cancelable&&t.preventDefault();return}r.handle&&!pr(u,r.handle,n,!1)||this._prepareDragStart(t,s,l)}}},_prepareDragStart:function(t,e,n){var r=this,o=r.el,a=r.options,s=o.ownerDocument,l;if(n&&!te&&n.parentNode===o){var u=pi(n);if(Ot=o,te=n,Ut=te.parentNode,oa=te.nextSibling,lc=n,Zu=a.group,Pe.dragged=te,Jo={target:te,clientX:(e||t).clientX,clientY:(e||t).clientY},wv=Jo.clientX-u.left,Sv=Jo.clientY-u.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,te.style["will-change"]="all",l=function(){if(ln("delayEnded",r,{evt:t}),Pe.eventCanceled){r._onDrop();return}r._disableDelayedDragEvents(),!_v&&r.nativeDraggable&&(te.draggable=!0),r._triggerDragStart(t,e),Ki({sortable:r,name:"choose",originalEvent:t}),An(te,a.chosenClass,!0)},a.ignore.split(",").forEach(function(c){$A(te,c.trim(),Zd)}),ht(s,"dragover",Qo),ht(s,"mousemove",Qo),ht(s,"touchmove",Qo),ht(s,"mouseup",r._onDrop),ht(s,"touchend",r._onDrop),ht(s,"touchcancel",r._onDrop),_v&&this.nativeDraggable&&(this.options.touchStartThreshold=4,te.draggable=!0),ln("delayStart",this,{evt:t}),a.delay&&(!a.delayOnTouchOnly||e)&&(!this.nativeDraggable||!(yu||ro))){if(Pe.eventCanceled){this._onDrop();return}ht(s,"mouseup",r._disableDelayedDrag),ht(s,"touchend",r._disableDelayedDrag),ht(s,"touchcancel",r._disableDelayedDrag),ht(s,"mousemove",r._delayedDragTouchMoveHandler),ht(s,"touchmove",r._delayedDragTouchMoveHandler),a.supportPointer&&ht(s,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(l,a.delay)}else l()}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){te&&Zd(te),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;at(t,"mouseup",this._disableDelayedDrag),at(t,"touchend",this._disableDelayedDrag),at(t,"touchcancel",this._disableDelayedDrag),at(t,"mousemove",this._delayedDragTouchMoveHandler),at(t,"touchmove",this._delayedDragTouchMoveHandler),at(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||t.pointerType=="touch"&&t,!this.nativeDraggable||e?this.options.supportPointer?ht(document,"pointermove",this._onTouchMove):e?ht(document,"touchmove",this._onTouchMove):ht(document,"mousemove",this._onTouchMove):(ht(te,"dragend",this),ht(Ot,"dragstart",this._onDragStart));try{document.selection?cc(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,e){if(es=!1,Ot&&te){ln("dragStarted",this,{evt:e}),this.nativeDraggable&&ht(document,"dragover",GL);var n=this.options;!t&&An(te,n.dragClass,!1),An(te,n.ghostClass,!0),Pe.active=this,t&&this._appendGhost(),Ki({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(Yn){this._lastX=Yn.clientX,this._lastY=Yn.clientY,a_();for(var t=document.elementFromPoint(Yn.clientX,Yn.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(Yn.clientX,Yn.clientY),t!==e);)e=t;if(te.parentNode[Sn]._isOutsideThisEl(t),e)do{if(e[Sn]){var n=void 0;if(n=e[Sn]._onDragOver({clientX:Yn.clientX,clientY:Yn.clientY,target:t,rootEl:e}),n&&!this.options.dragoverBubble)break}t=e}while(e=e.parentNode);s_()}},_onTouchMove:function(t){if(Jo){var e=this.options,n=e.fallbackTolerance,r=e.fallbackOffset,o=t.touches?t.touches[0]:t,a=Ue&&As(Ue,!0),s=Ue&&a&&a.a,l=Ue&&a&&a.d,u=Ju&&Ni&&Ev(Ni),c=(o.clientX-Jo.clientX+r.x)/(s||1)+(u?u[0]-Xd[0]:0)/(s||1),h=(o.clientY-Jo.clientY+r.y)/(l||1)+(u?u[1]-Xd[1]:0)/(l||1);if(!Pe.active&&!es){if(n&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<n)return;this._onDragStart(t,!0)}if(Ue){a?(a.e+=c-(Hd||0),a.f+=h-(qd||0)):a={a:1,b:0,c:0,d:1,e:c,f:h};var d="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");Te(Ue,"webkitTransform",d),Te(Ue,"mozTransform",d),Te(Ue,"msTransform",d),Te(Ue,"transform",d),Hd=c,qd=h,Yn=o}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!Ue){var t=this.options.fallbackOnBody?document.body:Ot,e=pi(te,!0,Ju,!0,t),n=this.options;if(Ju){for(Ni=t;Te(Ni,"position")==="static"&&Te(Ni,"transform")==="none"&&Ni!==document;)Ni=Ni.parentNode;Ni!==document.body&&Ni!==document.documentElement?(Ni===document&&(Ni=Ir()),e.top+=Ni.scrollTop,e.left+=Ni.scrollLeft):Ni=Ir(),Xd=Ev(Ni)}Ue=te.cloneNode(!0),An(Ue,n.ghostClass,!1),An(Ue,n.fallbackClass,!0),An(Ue,n.dragClass,!0),Te(Ue,"transition",""),Te(Ue,"transform",""),Te(Ue,"box-sizing","border-box"),Te(Ue,"margin",0),Te(Ue,"top",e.top),Te(Ue,"left",e.left),Te(Ue,"width",e.width),Te(Ue,"height",e.height),Te(Ue,"opacity","0.8"),Te(Ue,"position",Ju?"absolute":"fixed"),Te(Ue,"zIndex","100000"),Te(Ue,"pointerEvents","none"),Pe.ghost=Ue,t.appendChild(Ue),Te(Ue,"transform-origin",wv/parseInt(Ue.style.width)*100+"% "+Sv/parseInt(Ue.style.height)*100+"%")}},_onDragStart:function(t,e){var n=this,r=t.dataTransfer,o=n.options;if(ln("dragStart",this,{evt:t}),Pe.eventCanceled){this._onDrop();return}ln("setupClone",this),Pe.eventCanceled||(Bt=i_(te),Bt.draggable=!1,Bt.style["will-change"]="",this._hideClone(),An(Bt,this.options.chosenClass,!1),Pe.clone=Bt),n.cloneId=cc(function(){ln("clone",n),!Pe.eventCanceled&&(n.options.removeCloneOnHide||Ot.insertBefore(Bt,te),n._hideClone(),Ki({sortable:n,name:"clone"}))}),!e&&An(te,o.dragClass,!0),e?(rh=!0,n._loopId=setInterval(n._emulateDragOver,50)):(at(document,"mouseup",n._onDrop),at(document,"touchend",n._onDrop),at(document,"touchcancel",n._onDrop),r&&(r.effectAllowed="move",o.setData&&o.setData.call(n,r,te)),ht(document,"drop",n),Te(te,"transform","translateZ(0)")),es=!0,n._dragStartId=cc(n._dragStarted.bind(n,e,t)),ht(document,"selectstart",n),vl=!0,Ol&&Te(document.body,"user-select","none")},_onDragOver:function(t){var e=this.el,n=t.target,r,o,a,s=this.options,l=s.group,u=Pe.active,c=Zu===l,h=s.sort,d=xi||u,p,f=this,g=!1;if(zp)return;function v(z,F){ln(z,f,xr({evt:t,isOwner:c,axis:p?"vertical":"horizontal",revert:a,dragRect:r,targetRect:o,canSort:h,fromSortable:d,target:n,completed:m,onMove:function(R,M){return Qu(Ot,e,te,r,R,pi(R),t,M)},changed:A},F))}function y(){v("dragOverAnimationCapture"),f.captureAnimationState(),f!==d&&d.captureAnimationState()}function m(z){return v("dragOverCompleted",{insertion:z}),z&&(c?u._hideClone():u._showClone(f),f!==d&&(An(te,xi?xi.options.ghostClass:u.options.ghostClass,!1),An(te,s.ghostClass,!0)),xi!==f&&f!==Pe.active?xi=f:f===Pe.active&&xi&&(xi=null),d===f&&(f._ignoreWhileAnimating=n),f.animateAll(function(){v("dragOverAnimationComplete"),f._ignoreWhileAnimating=null}),f!==d&&(d.animateAll(),d._ignoreWhileAnimating=null)),(n===te&&!te.animated||n===e&&!n.animated)&&(Za=null),!s.dragoverBubble&&!t.rootEl&&n!==document&&(te.parentNode[Sn]._isOutsideThisEl(t.target),!z&&Qo(t)),!s.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),g=!0}function A(){_n=On(te),ho=On(te,s.draggable),Ki({sortable:f,name:"change",toEl:e,newIndex:_n,newDraggableIndex:ho,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),n=pr(n,s.draggable,e,!0),v("dragOver"),Pe.eventCanceled)return g;if(te.contains(t.target)||n.animated&&n.animatingX&&n.animatingY||f._ignoreWhileAnimating===n)return m(!1);if(rh=!1,u&&!s.disabled&&(c?h||(a=Ut!==Ot):xi===this||(this.lastPutMode=Zu.checkPull(this,u,te,t))&&l.checkPut(this,u,te,t))){if(p=this._getDirection(t,n)==="vertical",r=pi(te),v("dragOverValid"),Pe.eventCanceled)return g;if(a)return Ut=Ot,y(),this._hideClone(),v("revert"),Pe.eventCanceled||(oa?Ot.insertBefore(te,oa):Ot.appendChild(te)),m(!0);var _=R0(e,s.draggable);if(!_||FL(t,p,this)&&!_.animated){if(_===te)return m(!1);if(_&&e===t.target&&(n=_),n&&(o=pi(n)),Qu(Ot,e,te,r,n,o,t,!!n)!==!1)return y(),e.appendChild(te),Ut=e,A(),m(!0)}else if(_&&NL(t,p,this)){var C=Bs(e,0,s,!0);if(C===te)return m(!1);if(n=C,o=pi(n),Qu(Ot,e,te,r,n,o,t,!1)!==!1)return y(),e.insertBefore(te,C),Ut=e,A(),m(!0)}else if(n.parentNode===e){o=pi(n);var I=0,E,w=te.parentNode!==e,S=!OL(te.animated&&te.toRect||r,n.animated&&n.toRect||o,p),x=p?"top":"left",T=Iv(n,"top","top")||Iv(te,"top","top"),L=T?T.scrollTop:void 0;Za!==n&&(E=o[x],Dl=!1,Ku=!S&&s.invertSwap||w),I=UL(t,n,o,p,S?1:s.swapThreshold,s.invertedSwapThreshold==null?s.swapThreshold:s.invertedSwapThreshold,Ku,Za===n);var G;if(I!==0){var N=On(te);do N-=I,G=Ut.children[N];while(G&&(Te(G,"display")==="none"||G===Ue))}if(I===0||G===n)return m(!1);Za=n,kl=I;var B=n.nextElementSibling,U=!1;U=I===1;var D=Qu(Ot,e,te,r,n,o,t,U);if(D!==!1)return(D===1||D===-1)&&(U=D===1),zp=!0,setTimeout(DL,30),y(),U&&!B?e.appendChild(te):n.parentNode.insertBefore(te,U?B:n),T&&t_(T,0,L-T.scrollTop),Ut=te.parentNode,E!==void 0&&!Ku&&(uc=Math.abs(E-pi(n)[x])),A(),m(!0)}if(e.contains(te))return m(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){at(document,"mousemove",this._onTouchMove),at(document,"touchmove",this._onTouchMove),at(document,"pointermove",this._onTouchMove),at(document,"dragover",Qo),at(document,"mousemove",Qo),at(document,"touchmove",Qo)},_offUpEvents:function(){var t=this.el.ownerDocument;at(t,"mouseup",this._onDrop),at(t,"touchend",this._onDrop),at(t,"pointerup",this._onDrop),at(t,"touchcancel",this._onDrop),at(document,"selectstart",this)},_onDrop:function(t){var e=this.el,n=this.options;if(_n=On(te),ho=On(te,n.draggable),ln("drop",this,{evt:t}),Ut=te&&te.parentNode,_n=On(te),ho=On(te,n.draggable),Pe.eventCanceled){this._nulling();return}es=!1,Ku=!1,Dl=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Vp(this.cloneId),Vp(this._dragStartId),this.nativeDraggable&&(at(document,"drop",this),at(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Ol&&Te(document.body,"user-select",""),Te(te,"transform",""),t&&(vl&&(t.cancelable&&t.preventDefault(),!n.dropBubble&&t.stopPropagation()),Ue&&Ue.parentNode&&Ue.parentNode.removeChild(Ue),(Ot===Ut||xi&&xi.lastPutMode!=="clone")&&Bt&&Bt.parentNode&&Bt.parentNode.removeChild(Bt),te&&(this.nativeDraggable&&at(te,"dragend",this),Zd(te),te.style["will-change"]="",vl&&!es&&An(te,xi?xi.options.ghostClass:this.options.ghostClass,!1),An(te,this.options.chosenClass,!1),Ki({sortable:this,name:"unchoose",toEl:Ut,newIndex:null,newDraggableIndex:null,originalEvent:t}),Ot!==Ut?(_n>=0&&(Ki({rootEl:Ut,name:"add",toEl:Ut,fromEl:Ot,originalEvent:t}),Ki({sortable:this,name:"remove",toEl:Ut,originalEvent:t}),Ki({rootEl:Ut,name:"sort",toEl:Ut,fromEl:Ot,originalEvent:t}),Ki({sortable:this,name:"sort",toEl:Ut,originalEvent:t})),xi&&xi.save()):_n!==rs&&_n>=0&&(Ki({sortable:this,name:"update",toEl:Ut,originalEvent:t}),Ki({sortable:this,name:"sort",toEl:Ut,originalEvent:t})),Pe.active&&((_n==null||_n===-1)&&(_n=rs,ho=Gl),Ki({sortable:this,name:"end",toEl:Ut,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){ln("nulling",this),Ot=te=Ut=Ue=oa=Bt=lc=vo=Jo=Yn=vl=_n=ho=rs=Gl=Za=kl=xi=Zu=Pe.dragged=Pe.ghost=Pe.clone=Pe.active=null,ah.forEach(function(t){t.checked=!0}),ah.length=Hd=qd=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":te&&(this._onDragOver(t),kL(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],e,n=this.el.children,r=0,o=n.length,a=this.options;r<o;r++)e=n[r],pr(e,a.draggable,this.el,!1)&&t.push(e.getAttribute(a.dataIdAttr)||jL(e));return t},sort:function(t,e){var n={},r=this.el;this.toArray().forEach(function(o,a){var s=r.children[a];pr(s,this.options.draggable,r,!1)&&(n[o]=s)},this),e&&this.captureAnimationState(),t.forEach(function(o){n[o]&&(r.removeChild(n[o]),r.appendChild(n[o]))}),e&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return pr(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var n=this.options;if(e===void 0)return n[t];var r=Au.modifyOption(this,t,e);typeof r<"u"?n[t]=r:n[t]=e,t==="group"&&o_(n)},destroy:function(){ln("destroy",this);var t=this.el;t[Sn]=null,at(t,"mousedown",this._onTapStart),at(t,"touchstart",this._onTapStart),at(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(at(t,"dragover",this),at(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),oh.splice(oh.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!vo){if(ln("hideClone",this),Pe.eventCanceled)return;Te(Bt,"display","none"),this.options.removeCloneOnHide&&Bt.parentNode&&Bt.parentNode.removeChild(Bt),vo=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(vo){if(ln("showClone",this),Pe.eventCanceled)return;te.parentNode==Ot&&!this.options.group.revertClone?Ot.insertBefore(Bt,te):oa?Ot.insertBefore(Bt,oa):Ot.appendChild(Bt),this.options.group.revertClone&&this.animate(te,Bt),Te(Bt,"display",""),vo=!1}}};function kL(i){i.dataTransfer&&(i.dataTransfer.dropEffect="move"),i.cancelable&&i.preventDefault()}function Qu(i,t,e,n,r,o,a,s){var l,u=i[Sn],c=u.options.onMove,h;return window.CustomEvent&&!ro&&!yu?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=t,l.from=i,l.dragged=e,l.draggedRect=n,l.related=r||t,l.relatedRect=o||pi(t),l.willInsertAfter=s,l.originalEvent=a,i.dispatchEvent(l),c&&(h=c.call(u,l,a)),h}function Zd(i){i.draggable=!1}function DL(){zp=!1}function NL(i,t,e){var n=pi(Bs(e.el,0,e.options,!0)),r=10;return t?i.clientX<n.left-r||i.clientY<n.top&&i.clientX<n.right:i.clientY<n.top-r||i.clientY<n.bottom&&i.clientX<n.left}function FL(i,t,e){var n=pi(R0(e.el,e.options.draggable)),r=10;return t?i.clientX>n.right+r||i.clientX<=n.right&&i.clientY>n.bottom&&i.clientX>=n.left:i.clientX>n.right&&i.clientY>n.top||i.clientX<=n.right&&i.clientY>n.bottom+r}function UL(i,t,e,n,r,o,a,s){var l=n?i.clientY:i.clientX,u=n?e.height:e.width,c=n?e.top:e.left,h=n?e.bottom:e.right,d=!1;if(!a){if(s&&uc<u*r){if(!Dl&&(kl===1?l>c+u*o/2:l<h-u*o/2)&&(Dl=!0),Dl)d=!0;else if(kl===1?l<c+uc:l>h-uc)return-kl}else if(l>c+u*(1-r)/2&&l<h-u*(1-r)/2)return BL(t)}return d=d||a,d&&(l<c+u*o/2||l>h-u*o/2)?l>c+u/2?1:-1:0}function BL(i){return On(te)<On(i)?1:-1}function jL(i){for(var t=i.tagName+i.className+i.src+i.href+i.textContent,e=t.length,n=0;e--;)n+=t.charCodeAt(e);return n.toString(36)}function zL(i){ah.length=0;for(var t=i.getElementsByTagName("input"),e=t.length;e--;){var n=t[e];n.checked&&ah.push(n)}}function cc(i){return setTimeout(i,0)}function Vp(i){return clearTimeout(i)}Kh&&ht(document,"touchmove",function(i){(Pe.active||es)&&i.cancelable&&i.preventDefault()});Pe.utils={on:ht,off:at,css:Te,find:$A,is:function(t,e){return!!pr(t,e,t,!1)},extend:wL,throttle:e_,closest:pr,toggleClass:An,clone:i_,index:On,nextTick:cc,cancelNextTick:Vp,detectDirection:r_,getChild:Bs};Pe.get=function(i){return i[Sn]};Pe.mount=function(){for(var i=arguments.length,t=new Array(i),e=0;e<i;e++)t[e]=arguments[e];t[0].constructor===Array&&(t=t[0]),t.forEach(function(n){if(!n.prototype||!n.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(n));n.utils&&(Pe.utils=xr(xr({},Pe.utils),n.utils)),Au.mount(n)})};Pe.create=function(i,t){return new Pe(i,t)};Pe.version=_L;var Qt=[],ml,Wp,Yp=!1,Kd,Jd,sh,yl;function VL(){function i(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return i.prototype={dragStarted:function(e){var n=e.originalEvent;this.sortable.nativeDraggable?ht(document,"dragover",this._handleAutoScroll):this.options.supportPointer?ht(document,"pointermove",this._handleFallbackAutoScroll):n.touches?ht(document,"touchmove",this._handleFallbackAutoScroll):ht(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var n=e.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?at(document,"dragover",this._handleAutoScroll):(at(document,"pointermove",this._handleFallbackAutoScroll),at(document,"touchmove",this._handleFallbackAutoScroll),at(document,"mousemove",this._handleFallbackAutoScroll)),xv(),hc(),SL()},nulling:function(){sh=Wp=ml=Yp=yl=Kd=Jd=null,Qt.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,n){var r=this,o=(e.touches?e.touches[0]:e).clientX,a=(e.touches?e.touches[0]:e).clientY,s=document.elementFromPoint(o,a);if(sh=e,n||this.options.forceAutoScrollFallback||yu||ro||Ol){Qd(e,this.options,s,n);var l=Po(s,!0);Yp&&(!yl||o!==Kd||a!==Jd)&&(yl&&xv(),yl=setInterval(function(){var u=Po(document.elementFromPoint(o,a),!0);u!==l&&(l=u,hc()),Qd(e,r.options,u,n)},10),Kd=o,Jd=a)}else{if(!this.options.bubbleScroll||Po(s,!0)===Ir()){hc();return}Qd(e,this.options,Po(s,!1),!1)}}},Qr(i,{pluginName:"scroll",initializeByDefault:!0})}function hc(){Qt.forEach(function(i){clearInterval(i.pid)}),Qt=[]}function xv(){clearInterval(yl)}var Qd=e_(function(i,t,e,n){if(t.scroll){var r=(i.touches?i.touches[0]:i).clientX,o=(i.touches?i.touches[0]:i).clientY,a=t.scrollSensitivity,s=t.scrollSpeed,l=Ir(),u=!1,c;Wp!==e&&(Wp=e,hc(),ml=t.scroll,c=t.scrollFn,ml===!0&&(ml=Po(e,!0)));var h=0,d=ml;do{var p=d,f=pi(p),g=f.top,v=f.bottom,y=f.left,m=f.right,A=f.width,_=f.height,C=void 0,I=void 0,E=p.scrollWidth,w=p.scrollHeight,S=Te(p),x=p.scrollLeft,T=p.scrollTop;p===l?(C=A<E&&(S.overflowX==="auto"||S.overflowX==="scroll"||S.overflowX==="visible"),I=_<w&&(S.overflowY==="auto"||S.overflowY==="scroll"||S.overflowY==="visible")):(C=A<E&&(S.overflowX==="auto"||S.overflowX==="scroll"),I=_<w&&(S.overflowY==="auto"||S.overflowY==="scroll"));var L=C&&(Math.abs(m-r)<=a&&x+A<E)-(Math.abs(y-r)<=a&&!!x),G=I&&(Math.abs(v-o)<=a&&T+_<w)-(Math.abs(g-o)<=a&&!!T);if(!Qt[h])for(var N=0;N<=h;N++)Qt[N]||(Qt[N]={});(Qt[h].vx!=L||Qt[h].vy!=G||Qt[h].el!==p)&&(Qt[h].el=p,Qt[h].vx=L,Qt[h].vy=G,clearInterval(Qt[h].pid),(L!=0||G!=0)&&(u=!0,Qt[h].pid=setInterval((function(){n&&this.layer===0&&Pe.active._onTouchMove(sh);var B=Qt[this.layer].vy?Qt[this.layer].vy*s:0,U=Qt[this.layer].vx?Qt[this.layer].vx*s:0;typeof c=="function"&&c.call(Pe.dragged.parentNode[Sn],U,B,i,sh,Qt[this.layer].el)!=="continue"||t_(Qt[this.layer].el,U,B)}).bind({layer:h}),24))),h++}while(t.bubbleScroll&&d!==l&&(d=Po(d,!1)));Yp=u}},30),l_=function(t){var e=t.originalEvent,n=t.putSortable,r=t.dragEl,o=t.activeSortable,a=t.dispatchSortableEvent,s=t.hideGhostForTarget,l=t.unhideGhostForTarget;if(e){var u=n||o;s();var c=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,h=document.elementFromPoint(c.clientX,c.clientY);l(),u&&!u.el.contains(h)&&(a("spill"),this.onSpill({dragEl:r,putSortable:n}))}};function O0(){}O0.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,n=t.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var r=Bs(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(e,r):this.sortable.el.appendChild(e),this.sortable.animateAll(),n&&n.animateAll()},drop:l_};Qr(O0,{pluginName:"revertOnSpill"});function L0(){}L0.prototype={onSpill:function(t){var e=t.dragEl,n=t.putSortable,r=n||this.sortable;r.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),r.animateAll()},drop:l_};Qr(L0,{pluginName:"removeOnSpill"});Pe.mount(new VL);Pe.mount(L0,O0);var WL={_createDraggableElement:function(i,t){navigator.userAgent.match(/chrome|chromium|crios/i)?Pe.create(i,{handle:".GPlayerName",draggable:".draggable-layer",ghostClass:"GPghostLayer",animation:200,forceFallback:!0,onEnd:function(e){t._onDragAndDropLayerClick(e)}}):Pe.create(i,{handle:".GPlayerName",draggable:".draggable-layer",ghostClass:"GPghostLayer",animation:200,onEnd:function(e){t._onDragAndDropLayerClick(e)}})},_addUID:function(i){var t=this._uid?i+"-"+this._uid:i;return t},_createMainContainerElement:function(){var i=document.createElement("div");return i.id=this._addUID("GPlayerSwitcher"),i.className="GPwidget",i},_createMainLayersShowElement:function(){var i=document.createElement("input");return i.id=this._addUID("GPshowLayersList"),i.type="checkbox",i},_createMainLayersElement:function(){var i=document.createElement("div");return i.id=this._addUID("GPlayersList"),i.className="GPpanel",i},_createMainPictoElement:function(){var i=this,t=document.createElement("label");t.id=this._addUID("GPshowLayersListPicto"),t.className="GPshowAdvancedToolPicto",t.htmlFor=this._addUID("GPshowLayersList"),t.title="Afficher/masquer le gestionnaire de couches";var e=document.createElement("span");e.id=this._addUID("GPshowLayersListOpen"),e.className="GPshowAdvancedToolOpen",e.addEventListener("click",function(){if(document.getElementById(i._addUID("GPshowLayersList")).checked){for(var r=document.getElementsByClassName("GPlayerInfoOpened"),o=0;o<r.length;o++)r[o].className="GPlayerInfo";document.getElementById(i._addUID("GPlayerInfoPanel")).className="GPlayerInfoPanelClosed"}}),t.appendChild(e);var n=document.createElement("span");return n.addEventListener("click",function(){if(document.getElementById(i._addUID("GPshowLayersList")).checked){for(var r=document.getElementsByClassName("GPlayerInfoOpened"),o=0;o<r.length;o++)r[o].className="GPlayerInfo";document.getElementById(i._addUID("GPlayerInfoPanel")).className="GPlayerInfoPanelClosed"}}),n.id=i._addUID("GPshowLayersListClose"),t.appendChild(n),t},_createMainInfoElement:function(){var i=document.createElement("div");return i.id=this._addUID("GPlayerInfoPanel"),i.className="GPpanel GPlayerInfoPanelClosed",i},_createContainerLayerElement:function(i){var t=document.createElement("div");t.id=this._addUID("GPlayerSwitcher_ID_"+i.id),t.className="GPlayerSwitcher_layer draggable-layer",t.appendChild(this._createBasicToolElement(i));for(var e=this._createAdvancedToolShowElement(i),n=0;n<e.length;n++)t.appendChild(e[n]);return t.appendChild(this._createAdvancedToolElement(i)),t},_createBasicToolElement:function(i){var t=document.createElement("div");t.id=this._addUID("GPbasicTools_ID_"+i.id),t.className="GPlayerBasicTools",t.appendChild(this._createBasicToolNameElement(i));for(var e=this._createBasicToolVisibilityElement(i),n=0;n<e.length;n++)t.appendChild(e[n]);return t},_createBasicToolNameElement:function(i){var t=document.createElement("span");return t.id=this._addUID("GPname_ID_"+i.id),t.className="GPlayerName",t.title=i.description||i.title,t.innerHTML=i.title,t},_createBasicToolVisibilityElement:function(i){var t=[],e=typeof i.visibility<"u"?i.visibility:!0,n=this._addUID("GPvisibility_ID_"+i.id),r=document.createElement("input");r.id=n,r.type="checkbox",r.checked=e;var o=document.createElement("label");o.htmlFor=n,o.id=this._addUID("GPvisibilityPicto_ID_"+i.id),o.className="GPlayerVisibility",o.title="Afficher/masquer la couche";var a=this;return r.addEventListener?r.addEventListener("click",function(s){a._onVisibilityLayerClick(s)}):r.attachEvent&&r.attachEvent("onclick",function(s){a._onVisibilityLayerClick(s)}),t.push(r),t.push(o),t},_createAdvancedToolShowElement:function(i){var t=[],e=document.createElement("label");e.id=this._addUID("GPshowAdvancedToolsPicto_ID_"+i.id),e.htmlFor=this._addUID("GPshowAdvancedTools_ID_"+i.id),e.title="Plus d'outils",e.className="GPshowMoreOptions GPshowLayerAdvancedTools";var n=document.createElement("input");return n.type="checkbox",n.id=this._addUID("GPshowAdvancedTools_ID_"+i.id),t.push(n),t.push(e),t},_createAdvancedToolElement:function(i){var t=document.createElement("div");if(t.id=this._addUID("GPadvancedTools_ID_"+i.id),t.className="GPlayerAdvancedTools",t.appendChild(this._createAdvancedToolDeleteElement(i)),i.title&&i.description&&t.appendChild(this._createAdvancedToolInformationElement(i)),i.type!=="feature")for(var e=this._createAdvancedToolOpacityElement(i),n=0;n<e.length;n++)t.appendChild(e[n]);return t},_createAdvancedToolDeleteElement:function(i){var t=document.createElement("div");t.id=this._addUID("GPremove_ID_"+i.id),t.className="GPlayerRemove",t.title="Supprimer la couche",t.layerId=i.id;var e=this;return t.addEventListener?t.addEventListener("click",function(n){e._onDropLayerClick(n)}):t.attachEvent&&t.attachEvent("onclick",function(n){e._onDropLayerClick(n)}),t},_createAdvancedToolInformationElement:function(i){var t=document.createElement("div");t.id=this._addUID("GPinfo_ID_"+i.id),t.className="GPlayerInfo",t.title="Informations/légende",t.layerId=i.id;var e=this;return t.addEventListener?t.addEventListener("click",function(n){e._onOpenLayerInfoClick(n)}):t.attachEvent&&t.attachEvent("onclick",function(n){e._onOpenLayerInfoClick(n)}),t},_createAdvancedToolOpacityElement:function(i){var t=[],e=document.createElement("div");e.id=this._addUID("GPopacity_ID_"+i.id),e.className="GPlayerOpacity",e.title="Opacité";var n=typeof i.opacity<"u"?i.opacity:1;n=Math.round(n*100);var r=document.createElement("input");r.id=this._addUID("GPopacityValueDiv_ID_"+i.id),r.type="range",r.value=n;var o=this;r.addEventListener?r.addEventListener("change",function(l){o._onChangeLayerOpacity(l)}):r.attachEvent&&r.attachEvent("onchange",function(l){o._onChangeLayerOpacity(l)}),r.addEventListener?r.addEventListener("input",function(l){o._onChangeLayerOpacity(l)}):r.attachEvent&&r.attachEvent("oninput",function(l){o._onChangeLayerOpacity(l)}),e.appendChild(r);var a=document.createElement("div");a.id=this._addUID("GPopacityValueDiv_ID_"+i.id),a.className="GPlayerOpacityValue";var s=document.createElement("span");return s.id=this._addUID("GPopacityValue_ID_"+i.id),s.innerHTML=n+"%",a.appendChild(s),t.push(e),t.push(a),t},_createContainerLayerInfoElement:function(i){var t=document.createElement("div");t.id=this._addUID("GPlayerInfoContent");var e=document.createElement("div");if(e.id=this._addUID("GPlayerInfoTitle"),e.innerHTML=i.title,t.appendChild(e),i.quicklookUrl){var n=document.createElement("div");n.id=this._addUID("GPlayerInfoQuicklook"),n.title="Afficher un aperçu de la couche";var r=document.createElement("a");r.href=i.quicklookUrl,r.appendChild(n),t.appendChild(r)}var o=document.createElement("div");o.id=this._addUID("GPlayerInfoClose"),o.title="Fermer la fenêtre";var a=this,s=function(){document.getElementById(a._addUID("GPlayerInfoPanel")).className="GPlayerInfoPanelClosed";for(var x=document.getElementsByClassName("GPlayerInfoOpened"),T=0;T<x.length;T++)x[T].className="GPlayerInfo"};o.addEventListener?o.addEventListener("click",s):o.attachEvent&&o.attachEvent("onclick",s),t.appendChild(o);var l=document.createElement("div");if(l.id=this._addUID("GPlayerInfoDescription"),l.innerHTML=i.description,t.appendChild(l),i.metadata){var u=document.createElement("div");u.id=this._addUID("GPlayerInfoMetadata");var c=document.createElement("div");c.className="GPlayerInfoSubtitle",c.innerHTML="Métadonnées",u.appendChild(c);for(var h=0;h<i.metadata.length;h++){var d=i.metadata[h].url,p=document.createElement("div");p.className="GPlayerInfoLink";var f=document.createElement("a");f.href=d,f.innerHTML=d,p.appendChild(f),u.appendChild(p)}i.metadata.length!==0&&t.appendChild(u)}if(i.legends){var g=document.createElement("div");g.id=this._addUID("GPlayerInfoLegend");var v=document.createElement("div");v.className="GPlayerInfoSubtitle",v.innerHTML="Légende",g.appendChild(v);for(var y={},m=i.maxScaleDenominator||56e7,A=0;A<i.legends.length;A++){var _=i.legends[A].minScaleDenominator;if(_){var C=_.toString();_=Math.round(parseInt(C.substring(0,3),10)/10)*Math.pow(10,C.length-2)}else _=270;y[_]=i.legends[A]}for(var I in y)if(y.hasOwnProperty(I)){var E=y[I].url;if(typeof E=="string"&&E.toLowerCase().indexOf("nolegend.jpg")===-1){var w=document.createElement("div");w.className="GPlayerInfoLink",m=y[I].maxScaleDenominator||m;var S=document.createElement("a");S.href=E,S.innerHTML="Du 1/"+I+" au 1/"+m,w.appendChild(S),g.appendChild(w)}else delete y[I]}Object.keys(y).length!==0&&t.appendChild(g)}return t}},$o=Ye.getLogger("layerswitcher"),Mr=function(i){function t(e){e=e||{};var n=e.options||{},r=e.layers||[];if(!(this instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");if(!Array.isArray(r))throw new Error("ERROR WRONG_TYPE : layers should be an array");if(typeof n!="object")throw new Error("ERROR WRONG_TYPE : options should be an object");this._initialize(n,r);var o=this._container=this._initContainer(n);i.call(this,{element:o,target:n.target,render:n.render})}return i&&(t.__proto__=i),t.prototype=Object.create(i.prototype,{}),he.assign(t.prototype,WL),t.prototype.constructor=t,t.prototype.setMap=function(e){if(e)this._addMapLayers(e),this._listeners.onMoveListener=e.on("moveend",()=>this._onMapMoveEnd(e)),this._listeners.onAddListener=e.getLayers().on("add",r=>{var o=r.element,a;o.hasOwnProperty("gpLayerId")?a=o.gpLayerId:(a=this._layerId,o.gpLayerId=a,this._layerId++),this._layers[a]||this.addLayer(o)}),this._listeners.onRemoveListener=e.getLayers().on("remove",r=>{var o=r.element,a=o.gpLayerId;this._layers[a]&&this.removeLayer(o)});else{Kt(this._listeners.onMoveListener),Kt(this._listeners.onAddListener),Kt(this._listeners.onRemoveListener);for(var n=this._layersOrder.length-1;n>=0;n--)this._layersOrder[n].layer.setZIndex(0)}i.prototype.setMap.call(this,e)},t.prototype.addLayer=function(e,n){var r=this.getMap();if(n=n||{},!e){$o.log("[ERROR] LayerSwitcher:addLayer - missing layer parameter");return}var o=e.gpLayerId;if(typeof o>"u"){$o.trace("[WARN] LayerSwitcher:addLayer - configuration cannot be set for this layer (layer id not found)",e);return}var a=!1;if(r.getLayers().forEach(y=>{y.gpLayerId===o&&(a=!0)}),!a){$o.log("[ERROR] LayerSwitcher:addLayer - configuration cannot be set for ",e," layer (layer is not in map.getLayers() )");return}if(this._layers[o]){for(var p in n)n.hasOwnProperty(p)&&(this._layers[o][p]=n[p]);if(n.title){var f=document.getElementById(this._addUID("GPname_ID_"+o));f&&(f.innerHTML=n.title,f.title=n.description||n.title)}var g=document.getElementById(this._addUID("GPinfo_ID_"+o));if(!document.getElementById(this._addUID("GPinfo_ID_"+o))&&n.description){var v=document.getElementById(this._addUID("GPadvancedTools_ID_"+o));v&&v.appendChild(this._createAdvancedToolInformationElement({id:o}))}g&&g.className==="GPlayerInfoOpened"&&(document.getElementById(this._addUID("GPlayerInfoPanel")).className="GPlayerInfoPanelClosed",g.className="GPlayerInfo")}else{var s=this.getLayerInfo(e)||{},l=e.getOpacity(),u=e.getVisible(),c=this.isInRange(e,r),h={layer:e,id:o,opacity:l??1,visibility:u??!0,inRange:c??!0,title:n.title!=null?n.title:s._title||o,description:n.description||s._description||null,legends:n.legends||s._legends||[],metadata:n.metadata||s._metadata||[],quicklookUrl:n.quicklookUrl||s._quicklookUrl||null};this._layers[o]=h;var d=this._createLayerDiv(h);this._layers[o].div=d,e.getZIndex&&e.getZIndex()!==0&&typeof e.getZIndex()<"u"||e._forceNullzIndex?this._updateLayersOrder():(this._layersOrder.unshift(h),this._lastZIndex++,e.setZIndex(this._lastZIndex),this._layerListContainer.insertBefore(d,this._layerListContainer.firstChild)),this._listeners.updateLayerOpacity=e.on("change:opacity",y=>this._updateLayerOpacity(y)),this._listeners.updateLayerVisibility=e.on("change:visible",y=>this._updateLayerVisibility(y)),this._layers[o].onZIndexChangeEvent==null&&(this._layers[o].onZIndexChangeEvent=e.on("change:zIndex",()=>this._updateLayersOrder()))}},t.prototype.removeLayer=function(e){if(e){Kt(this._listeners.updateLayerOpacity),Kt(this._listeners.updateLayerVisibility),$o.trace(e);var n=e.gpLayerId,r=document.getElementById(this._addUID("GPlayersList")),o=document.getElementById(this._addUID("GPinfo_ID_"+n));o&&o.className==="GPlayerInfoOpened"&&(document.getElementById(this._addUID("GPlayerInfoPanel")).className="GPlayerInfoPanelClosed",o.className="GPlayerInfo");var a=document.getElementById(this._addUID("GPlayerSwitcher_ID_"+n));a&&r.removeChild(a);var s=Math.abs(e.getZIndex()-this._lastZIndex);this._layersOrder.splice(s,1),this._lastZIndex--;for(var l=this._layersOrder,u=0;u<l.length;u++)l[u].layer.setZIndex(this._lastZIndex-u);delete this._layers[n]}},t.prototype.setCollapsed=function(e){if(e===void 0){$o.log("[ERROR] LayerSwitcher:setCollapsed - missing collapsed parameter");return}var n=!document.getElementById(this._addUID("GPshowLayersList")).checked;if(!(e&&n||!e&&!n)){if(!n){for(var r=document.getElementsByClassName("GPlayerInfoOpened"),o=0;o<r.length;o++)r[o].className="GPlayerInfo";document.getElementById(this._addUID("GPlayerInfoPanel")).className="GPlayerInfoPanelClosed"}document.getElementById(this._addUID("GPshowLayersList")).checked=!e}},t.prototype.getCollapsed=function(){return this.collapsed},t.prototype.setRemovable=function(e,n){if(e){var r=e.gpLayerId;if(r==null){$o.log("[LayerSwitcher:setRemovable] layer should be added to map before calling setRemovable method");return}var o=document.getElementById(this._addUID("GPremove_ID_"+r));o&&(n===!1?o.style.display="none":n===!0&&(o.style.display="block"))}},t.prototype._initialize=function(e,n){this._uid=Re.generate(),this._layers={},this._layersOrder=[],this._layersIndex={},this._lastZIndex=0,this._layerId=0,this.collapsed=e.collapsed!==void 0?e.collapsed:!0,this._layerListContainer=null,this._listeners={};for(var r=0;r<n.length;r++){var o=n[r].layer;if(o){var a;o.hasOwnProperty("gpLayerId")?a=o.gpLayerId:(a=this._layerId,o.gpLayerId=a,this._layerId++);var s=n[r].config||{},l=o.getOpacity(),u=o.getVisible(),c={layer:o,id:a,opacity:l??1,visibility:u??!0,title:s.title!=null?s.title:s.id?s.id:a,description:s.description||null,legends:s.legends||[],metadata:s.metadata||[],quicklookUrl:s.quicklookUrl||null};this._layers[a]=c}}},t.prototype._initContainer=function(){var e=this._createMainContainerElement(),n=this._createMainLayersShowElement();e.appendChild(n),this.collapsed?this.collapsed=!0:(n.checked="checked",this.collapsed=!1);var r=this,o=function(u){this.collapsed=!u.target.checked,this.dispatchEvent("change:collapsed")};n.addEventListener("click",function(u){o.call(r,u)});var a=this._layerListContainer=this._createMainLayersElement();e.appendChild(a),this._createDraggableElement(a,this);var s=this._createMainPictoElement();e.appendChild(s);var l=this._createMainInfoElement();return e.appendChild(l),e},t.prototype._addMapLayers=function(e){this._layersIndex={},e.getLayers().forEach(u=>{var c;u.hasOwnProperty("gpLayerId")?c=u.gpLayerId:(c=this._layerId,u.gpLayerId=c,this._layerId++);var h=this.getLayerInfo(u)||{};if(this._layers[c])this._layers[c].opacity=u.getOpacity(),this._layers[c].visibility=u.getVisible(),this._layers[c].inRange=this.isInRange(u,e);else{var d=u.getOpacity(),p=u.getVisible(),f=this.isInRange(u,e),g={layer:u,id:c,opacity:d??1,visibility:p??!0,inRange:f??!0,title:h._title||c,description:h._description||null,legends:h._legends||[],metadata:h._metadata||[],quicklookUrl:h._quicklookUrl||null};this._layers[c]=g}if(this._listeners.updateLayerOpacity=u.on("change:opacity",y=>this._updateLayerOpacity(y)),this._listeners._updateLayerVisibility=u.on("change:visible",y=>this._updateLayerVisibility(y)),u.getZIndex!==void 0){var v=u.getZIndex()||0;(!this._layersIndex[v]||!Array.isArray(this._layersIndex[v]))&&(this._layersIndex[v]=[]),this._layersIndex[v].push(this._layers[c])}});for(var n in this._layersIndex)if(this._layersIndex.hasOwnProperty(n))for(var r=this._layersIndex[n],o=0;o<r.length;o++)this._layersOrder.unshift(r[o]),this._lastZIndex++,r[o].layer.setZIndex(this._lastZIndex),this._layers[r[o].layer.gpLayerId].onZIndexChangeEvent==null&&(this._layers[r[o].layer.gpLayerId].onZIndexChangeEvent=r[o].layer.on("change:zIndex",()=>this._updateLayersOrder()));for(var a=0;a<this._layersOrder.length;a++){var s=this._layersOrder[a],l=this._createLayerDiv(s);this._layerListContainer.appendChild(l),this._layers[s.id].div=l}},t.prototype._createLayerDiv=function(e){var n=e.legends&&e.legends.length!==0,r=e.metadata&&e.metadata.length!==0,o=e.quicklookUrl;(n||r||o)&&(e.displayInformationElement=!0);var a=this._createContainerLayerElement(e);return e.inRange||a.classList.add("outOfRange"),a},t.prototype._onChangeLayerOpacity=function(e){var n=e.target.id,r=Re.index(n),o=this._layers[r].layer,a=e.target.value,s=document.getElementById(this._addUID("GPopacityValue_ID_"+r));s.innerHTML=a+"%",o.setOpacity(a/100)},t.prototype._updateLayerOpacity=function(e){var n=e.target.getOpacity();n>1&&(n=1),n<0&&(n=0);var r=e.target.gpLayerId,o=document.getElementById(this._addUID("GPopacityValueDiv_ID_"+r));o&&(o.value=Math.round(n*100));var a=document.getElementById(this._addUID("GPopacityValue_ID_"+r));a&&(a.innerHTML=Math.round(n*100)+"%")},t.prototype._onVisibilityLayerClick=function(e){var n=e.target.id,r=Re.index(n),o=this._layers[r].layer;o.setVisible(e.target.checked)},t.prototype._updateLayerVisibility=function(e){var n=e.target.getVisible(),r=e.target.gpLayerId,o=document.getElementById(this._addUID("GPvisibility_ID_"+r));o&&(o.checked=n)},t.prototype._updateLayersOrder=function(){var e=this.getMap();if(e){this._layersIndex={};var n,r;e.getLayers().forEach(c=>{r=c.gpLayerId,Kt(this._layers[r].onZIndexChangeEvent),this._layers[r].onZIndexChangeEvent=null,n=null,c.getZIndex!==void 0&&(n=c.getZIndex(),(!this._layersIndex[n]||!Array.isArray(this._layersIndex[n]))&&(this._layersIndex[n]=[]),this._layersIndex[n].push(this._layers[r]))}),this._lastZIndex=0,this._layersOrder=[];for(var o in this._layersIndex)if(this._layersIndex.hasOwnProperty(o))for(var a=this._layersIndex[o],s=0;s<a.length;s++)this._layersOrder.unshift(a[s]),this._lastZIndex++,this._layers[a[s].layer.gpLayerId].onZIndexChangeEvent==null&&(this._layers[a[s].layer.gpLayerId].onZIndexChangeEvent=a[s].layer.on("change:zIndex",()=>this._updateLayersOrder()));if(this._layerListContainer){for(;this._layerListContainer.firstChild;)this._layerListContainer.removeChild(this._layerListContainer.firstChild);for(var l=0;l<this._layersOrder.length;l++){var u=this._layersOrder[l];this._layerListContainer.appendChild(u.div)}}else $o.log("[ol.control.LayerSwitcher] _updateLayersOrder : layer list container not found to update layers order ?!")}},t.prototype._onOpenLayerInfoClick=function(e){var n=e.target.id,r=Re.index(n),o=this._layers[r],a,s;if(n=document.getElementById(e.target.id),n.className==="GPlayerInfoOpened"){n.classList!==void 0&&(n.classList.remove("GPlayerInfoOpened"),n.classList.add("GPlayerInfo")),a=document.getElementById(this._addUID("GPlayerInfoPanel")),a.classList!==void 0&&(a.classList.remove("GPpanel"),a.classList.remove("GPlayerInfoPanelOpened"),a.classList.add("GPlayerInfoPanelClosed")),s=document.getElementById(this._addUID("GPlayerInfoContent")),a.removeChild(s);return}for(var l=document.getElementsByClassName("GPlayerInfoOpened"),u=0;u<l.length;u++)l[u].className="GPlayerInfo";n.classList!==void 0&&(n.classList.remove("GPlayerInfo"),n.classList.add("GPlayerInfoOpened")),a=document.getElementById(this._addUID("GPlayerInfoPanel")),a.classList!==void 0&&(a.classList.add("GPpanel"),a.classList.remove("GPlayerInfoPanelClosed"),a.classList.add("GPlayerInfoPanelOpened")),s=document.getElementById(this._addUID("GPlayerInfoContent")),s&&a.removeChild(s);var c={title:o.title,description:o.description,quicklookUrl:o.quicklookUrl,metadata:o.metadata,legends:o.legends},h=o.layer.getMaxResolution();h===1/0?c._maxScaleDenominator=56e7:c._maxScaleDenominator=Math.round(h/28e-5);var d=this._createContainerLayerInfoElement(c);a.appendChild(d)},t.prototype._onDropLayerClick=function(e){var n=e.target.id,r=Re.index(n),o=this._layers[r].layer;this.getMap().getLayers().remove(o)},t.prototype._onDragAndDropLayerClick=function(){var e=this.getMap(),n=document.querySelectorAll("div.GPlayerSwitcher_layer"),r=n.length;this._layersOrder=[];for(var o=0;o<n.length;o++){var a=n[o].id,s=Re.index(a),l=this._layers[s].layer;Kt(this._layers[s].onZIndexChangeEvent),this._layers[s].onZIndexChangeEvent=null,l.setZIndex&&(l.setZIndex(r),this._layersOrder.push(this._layers[s]),r--),this._layers[s].onZIndexChangeEvent==null&&(this._layers[s].onZIndexChangeEvent=l.on("change:zIndex",()=>this._updateLayersOrder()))}e.updateSize()},t.prototype._onMapMoveEnd=function(e){e.getLayers().forEach(n=>{var r=n.gpLayerId;if(this._layers[r]){var o=this._layers[r],a;this.isInRange(n,e)&&!o.inRange?(o.inRange=!0,a=document.getElementById(this._addUID("GPlayerSwitcher_ID_"+r)),a.classList.remove("outOfRange")):!this.isInRange(n,e)&&o.inRange&&(o.inRange=!1,a=document.getElementById(this._addUID("GPlayerSwitcher_ID_"+r)),a.classList.add("outOfRange"))}})},t.prototype.getLayerDOMId=function(e){var n=null;return this.getMap().getLayers().forEach(r=>{r===e&&(n=r.hasOwnProperty("gpLayerId")?r.gpLayerId:null)}),n!==null?this._addUID("GPlayerSwitcher_ID_"+n):null},t.prototype.isInRange=function(e,n){if(n){var r=n.getView().getResolution();if(r>e.getMaxResolution()||r<e.getMinResolution())return!1;var o=n.getView().calculateExtent(n.getSize()),a=e.getExtent();return!(a&&!Vt(o,a))}},t.prototype.getLayerInfo=function(e){var n={};if(e.getProperties!==void 0&&e.getSource!==void 0){var r=e.getProperties(),o=r.source;o&&(n._title=o._title||r.id||"",n._description=o._description||"",n._quicklookUrl=o._quicklookUrl||"",n._metadata=o._metadata||[],n._legends=o._legends||[])}return n},t}(yi);window.ol&&window.ol.control&&(window.ol.control.LayerSwitcher=Mr);var YL={_addUID:function(i){var t=this._uid?i+"-"+this._uid:i;return t},_createMainContainerElement:function(){var i=document.createElement("div");return i.id=this._addUID("GPgetFeatureInfo"),i.className="GPwidget",i},_createActivateGetFeatureInfoElement:function(i){var t=this,e=document.createElement("input");return e.id=this._addUID("GPactivateGetFeatureInfo"),e.type="checkbox",e.checked=i,e.addEventListener("change",function(n){t.onActivateGetFeatureInfoElementChange(n)}),e},_createMainPictoElement:function(){var i=this,t=document.createElement("label");t.id=this._addUID("GPgetFeatureInfoPicto"),t.className="GPshowAdvancedToolPicto",t.htmlFor=this._addUID("GPactivateGetFeatureInfo"),t.title="activer/desactiver l'interrogation des couches";var e=document.createElement("span");e.id=this._addUID("GPgetFeatureInfoActivate"),e.className="GPshowAdvancedToolOpen",t.appendChild(e);var n=document.createElement("span");return n.id=i._addUID("GPgetFeatureInfoDeactivate"),t.appendChild(n),t}},Ht=Ye.getLogger("getfeatureinfo"),u_=function(i){function t(e){e=e||{};var n=e.options||{},r=e.layers||[];if(!(this instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");if(!Array.isArray(r))throw new Error("ERROR WRONG_TYPE : layers should be an array");if(typeof n!="object")throw new Error("ERROR WRONG_TYPE : options should be an object");this._initialize(n,r);var o=this._container=this._initContainer(n);i.call(this,{element:o,target:n.target,render:n.render})}return i&&(t.__proto__=i),t.prototype=Object.create(i.prototype,{}),he.assign(t.prototype,YL),t.prototype.constructor=t,t.prototype._initialize=function(e,n){if(this._uid=Re.generate(),this._events={dblclick:!1,singleclick:!1,contextmenu:!1},this._eventsHandler={},typeof e.auto<"u"&&typeof e.auto!="boolean"){Ht.log("[ERROR] GetFeatureInfo:_initialize - auto parameter should be a boolean");return}if(this._auto=e.auto||!1,typeof e.active<"u"&&typeof e.active!="boolean"){Ht.log("[ERROR] GetFeatureInfo:_initialize - active parameter should be a boolean");return}if(this._active=typeof e.active>"u"?!0:e.active,e.defaultEvent&&typeof e.defaultEvent!="string"){Ht.log("[ERROR] GetFeatureInfo:_initialize - defaultEvent parameter should be a string");return}if(this._defaultEvent=e.defaultEvent||"singleclick",!this._isValidEvent(this._defaultEvent)){Ht.log("[ERROR] GetFeatureInfo:_initialize - _defaultEvent '"+this._defaultEvent+"' is not a valid event");return}if(e.defaultInfoFormat&&typeof e.defaultInfoFormat!="string"){Ht.log("[ERROR] GetFeatureInfo:_initialize - defaultInfoFormat parameter should be a string");return}if(this._defaultInfoFormat=e.defaultInfoFormat||"text/html",e.cursorStyle&&typeof e.cursorStyle!="string"){Ht.log("[ERROR] GetFeatureInfo:_initialize - cursorStyle parameter should be a string");return}if(this._cursorStyle=e.cursorStyle||"pointer",e.proxyUrl){if(typeof e.proxyUrl!="string"){Ht.log("[ERROR] GetFeatureInfo:_initialize - proxyUrl parameter should be a string");return}this._proxyUrl=e.proxyUrl}if(e.noProxyDomains){if(!Array.isArray(e.noProxyDomains)){Ht.log("[ERROR] GetFeatureInfo:_initialize - noProxyDomains parameter should be a array");return}this._noProxyDomains=e.noProxyDomains}if(typeof e.autoPan<"u"&&typeof e.autoPan!="boolean"){Ht.log("[ERROR] GetFeatureInfo:_initialize - autoPan parameter should be a boolean");return}if(this._autoPan=typeof e.autoPan>"u"?!0:e.autoPan,e.autoPanAnimation){if(e.autoPanAnimation.duration&&typeof e.autoPanAnimation.duration!="number"){Ht.log("[ERROR] GetFeatureInfo:_initialize - autoPanAnimation parameter is invalid : duration should be a number.");return}if(e.autoPanAnimation.easing&&typeof e.autoPanAnimation.easing!="function"){Ht.log("[ERROR] GetFeatureInfo:_initialize - autoPanAnimation parameter is invalid : easing should be a ol.easing function or a custom function.");return}this._autoPanAnimation=e.autoPanAnimation}if(e.autoPanMargin){if(typeof e.autoPanMargin!="number"){Ht.log("[ERROR] GetFeatureInfo:_initialize - autoPanMargin parameter should be a number");return}this._autoPanMargin=e.autoPanMargin}if(!Array.isArray(n)){Ht.log("[ERROR] GetFeatureInfo:_initialize - layers parameter should be an array");return}this._setLayers(n),this._activateGetFeatureInfoContainer=null},t.prototype.setMap=function(e){if(e){if(this._updateEvents(e),this._cursorStyle&&this._active&&this._activateCursor(!0,e),e.getLayers().on("remove",r=>{for(var o=0;o<this._layers.length;++o)if(this._layers[o].obj===r.element){this._layers.splice(o,1);break}this._updateEvents(e)}),this._auto){var n=!1;e.getLayers().forEach(r=>{var o=ps.getLayerFormat(r);!this._hasLayer(r)&&o==="vector"&&(this._layers.push({obj:r}),n=!0)}),n&&this._updateEvents(e),e.getLayers().on("add",r=>{var o=ps.getLayerFormat(r.element);o==="vector"&&this._layers.push({obj:r.element}),this._updateEvents(e)})}}else this._clearEvents(),this._activateCursor(!1);i.prototype.setMap.call(this,e)},t.prototype.getLayers=function(){return this._layers},t.prototype.setDefaultEvent=function(e){if(typeof e!="string"){Ht.log("[ERROR] GetFeatureInfo:setDefaultEvent - eventName parameter should be a string");return}if(!e||!this._isValidEvent(e)){Ht.log("[ERROR] GetFeatureInfo:setDefaultEvent - event '"+e+"' is not allowed.");return}this._defaultEvent=e,this._updateEvents()},t.prototype.setCursorStyle=function(e){if(typeof e!="string"){Ht.log("[ERROR] GetFeatureInfo:setCursorStyle - cursorStyle parameter should be a string");return}this._active&&(!this._cursorStyle&&e?this._activateCursor(!0):this._cursorStyle&&!e&&this._activateCursor(!1)),this._cursorStyle=e},t.prototype.setActive=function(e){this._setActive(e);var n=document.getElementById(this._addUID("GPactivateGetFeatureInfo"));n&&(n.checked=e)},t.prototype._setActive=function(e){if(typeof e!="boolean"){Ht.log("[ERROR] GetFeatureInfo:_setActive - active parameter should be a boolean");return}this._active!==e&&(this._active=e,this._cursorStyle&&this._activateCursor(e))},t.prototype.isActive=function(){return this._active},t.prototype.setHidden=function(e){this.element.style.visibility=e?"hidden":""},t.prototype.isHidden=function(){return this.element.style.visibility==="hidden"},t.prototype.setLayers=function(e){this._setLayers(e),this._updateEvents()},t.prototype._isValidEvent=function(e){return Object.keys(this._events).indexOf(e)>-1},t.prototype._activateEvent=function(e,n){var r=this,o=function(a){ps.onDisplayFeatureInfo(a,r)};e==="contextmenu"?n.getViewport().addEventListener(e,o):n.on(e,o),this._eventsHandler[e]=o,this._events[e]=!0},t.prototype._deactivateEvent=function(e,n){e==="contextmenu"?n.getViewport().removeEventListener(e,this._eventsHandler[e]):n.un(e,this._eventsHandler[e]),delete this._eventsHandler[e],this._events[e]=!1},t.prototype._updateEvents=function(e){e||(e=this.getMap());for(var n=[],r=0;r<this._layers.length;++r){var o=this._layers[r].event?this._layers[r].event:this._defaultEvent;n.indexOf(o)<0&&n.push(o)}for(var a in this._events)!this._events[a]&&n.indexOf(a)>=0?this._activateEvent(a,e):this._events[a]&&n.indexOf(a)<0&&this._deactivateEvent(a,e)},t.prototype._clearEvents=function(){var e=this.getMap();for(var n in this._events)this._events[n]&&this._deactivateEvent(n,e)},t.prototype._hasLayer=function(e){for(var n=0;n<this._layers.length;++n)if(this._layers[n].obj===e)return!0;return!1},t.prototype._activateCursor=function(e,n){if(n||(n=this.getMap()),e){if(this._eventsHandler.hasOwnProperty("pointermove")){Ht.log("[ERROR] _activateCursor - inconsistent state: pointermove event handler already registered");return}var r=this,o=function(a){var s=n.forEachFeatureAtPixel(a.pixel,(l,u)=>{for(var c=r.getLayers(),h=0;h<c.length;++h)if(c[h].obj===u)return!0});s?n.getTargetElement().style.cursor=r._cursorStyle:n.getTargetElement().style.cursor=""};this._eventsHandler.pointermove=o,n.on("pointermove",o)}else this._eventsHandler.hasOwnProperty("pointermove")&&(n.un("pointermove",this._eventsHandler.pointermove),delete this._eventsHandler.pointermove),n.getTargetElement().style.cursor=""},t.prototype._setLayers=function(e){if(!e||!Array.isArray(e)){Ht.log("[ERROR] GetFeatureInfo:setLayers - gfiLayers parameter should be a array");return}this._layers=[];for(var n=0;n<e.length;++n){var r=this._layers.push({})-1;e[n].event&&(this._isValidEvent(e[n].event)?this._layers[r].event=e[n].event:Ht.log("[ERROR] GetFeatureInfo:setLayers - layer event '"+this._layers[n].event+"' is not allowed.")),e[n].infoFormat&&(this._layers[r].infoFormat=e[n].infoFormat),this._layers[r].obj=e[n].obj}},t.prototype.onActivateGetFeatureInfoElementChange=function(e){this._setActive(e.target.checked)},t.prototype._initContainer=function(e){var n=this._createMainContainerElement(),r=this._activateGetFeatureInfoContainer=this._createActivateGetFeatureInfoElement(this.isActive());n.appendChild(r);var o=this._createMainPictoElement();if(n.appendChild(o),typeof e.hidden<"u"){if(typeof e.hidden!="boolean"){Ht.log("[ERROR] GetFeatureInfo:_initContainer - hidden parameter should be a boolean");return}e.hidden&&(n.style.visibility="hidden")}return n},t}(yi);window.ol&&window.ol.control&&(window.ol.control.GetFeatureInfo=u_);var HL=Ye.getLogger("interactions"),Tr={_extensions:["Measures","ElevationPath","Drawing"],_options:{current:null,clean:null},unset:function(i,t){HL.trace("unset()");var e={};he.mergeParams(e,this._options),he.mergeParams(e,t);for(var n=i.getInteractions().getArray(),r=0;r<n.length;r++)if(n[r].getActive()&&(n[r]instanceof Ln||n[r]instanceof qn||n[r]instanceof Uf)){var o=n[r].getProperties(),a=o.name;if(typeof a<"u"&&this._extensions.indexOf(a)>-1){if(e.current&&e.current===a)continue;n[r].setActive(!1);var s=o.source;if(typeof s<"u"&&s instanceof yi){for(var l in e)if(e.hasOwnProperty(l)){if(l==="current")continue;if(typeof s[l]=="function"){var u=Array.isArray(e[l])?e[l]:[e[l]];s[l].apply(s,u)}}}}else n[r].setActive(!1)}}},Mv={advancedSearchFiltersByDefault:{PositionOfInterest:[{name:"category",title:"Type",value:["cimetière","aérodrome","réservoir","administratif","construction linéaire","construction ponctuelle","construction surfacique","cours d'eau","détail hydrographique","détail orographique","équipement de transport","plan d'eau","poste de transformation","terrain de sport","transport par câble","zone d'activité ou d'intérêt","zone d'habitation","lieu-dit non habité"]},{name:"postcode",title:"Code postal"},{name:"citycode",title:"Code INSEE"}],StreetAddress:[{name:"city",title:"Ville"},{name:"postcode",title:"Code postal"},{name:"citycode",title:"Code INSEE"}],CadastralParcel:[{name:"departmentcode",title:"Code département (INSEE)",description:"Code INSEE du département (ex: 01, 94)"},{name:"municipalitycode",title:"Code commune (INSEE)",description:"Code INSEE de la commune : 3 chiffres (ex: 067)"},{name:"city",title:"Nom commune",description:"Nom de la commune"},{name:"oldmunicipalitycode",title:"Commune absorbée",description:"Commune absorbée : 3 chiffres (ex: 000, 001)"},{name:"districtcode",title:"Arrondissement",description:"Arrondissement : 3 chiffres (ex: 004, 012)"},{name:"section",title:"Section",description:"Section Cadastrale : 2 caractères (chiffre et/ou lettre)"},{name:"number",title:"Numéro",description:"Numéro de la parcelle : 4 chiffres (ex: 0041, 0250)"},{name:"sheet",title:"Feuille",description:"Numéro de la feuille cadastrale"}]},zoomToResultsByDefault:function(i){var t=15,e=i.service,n=i.fields,r=i.type,o={1:11,2:12,3:13,4:14,5:15,6:16,7:17,8:17};return e==="SuggestedLocation"&&r==="PositionOfInterest"&&(t=o[n.classification]),e==="GeocodedLocation"&&r==="PositionOfInterest"&&(t=o[n.importance]||14),r==="StreetAddress"&&(t=17),r==="CadastralParcel"&&(t=17),t}},gr={getGeocodedLocationFreeform:function(i){var t=i.placeAttributes;return t.label?t.label:i.type==="PositionOfInterest"?t.postcode+" "+t.toponym:i.type==="StreetAddress"?(t.housenumber?t.housenumber+" ":"")+t.street+" "+(t.postcode?t.postcode+", ":"")+t.city:i.type==="CadastralParcel"?t.id:"..."},getSuggestedLocationFreeform:function(i){if(i.fullText)return i.fullText;var t=[];return t.push(i.street||""),t.push(i.postalCode||""),t.push(i.commune||""),i.type==="PositionOfInterest"&&(t.push(i.poi||""),t.push(i.kind||"")),t.join(" - ")}},qL={_addUID:function(i){var t=this._uid?i+"-"+this._uid:i;return t},_createMainContainerElement:function(){var i=document.createElement("div");return i.id=this._addUID("GPsearchEngine"),i.className="GPwidget",i},_createShowSearchEngineElement:function(){var i=document.createElement("input");return i.id=this._addUID("GPshowSearchEngine"),i.type="checkbox",i},_createShowSearchEnginePictoElement:function(){var i=this,t=document.createElement("label");t.id=this._addUID("GPshowSearchEnginePicto"),t.className="GPshowAdvancedToolPicto",t.htmlFor=this._addUID("GPshowSearchEngine"),t.title="Afficher/masquer la recherche par lieux",t.addEventListener("click",function(){document.getElementById(i._addUID("GPautoCompleteList")).style.display="none",document.getElementById(i._addUID("GPgeocodeResultsList")).style.display="none";var n=document.getElementById(i._addUID("GPshowAdvancedSearch"));n&&(n.style.display=null,document.getElementById(i._addUID("GPadvancedSearchPanel")).style.display="none");var r="#GPsearchInput-"+i._uid;document.querySelector(r+" input").disabled=!1,i.onShowSearchEngineClick()});var e=document.createElement("span");return e.id=this._addUID("GPshowSearchEngineOpen"),e.className="GPshowAdvancedToolOpen",t.appendChild(e),t},_createSearchInputElement:function(i){var t=this,e=document.createElement("form");e.id=this._addUID("GPsearchInput"),e.addEventListener("submit",function(o){return o.preventDefault(),document.getElementById(t._addUID("GPgeocodeResultsList")).style.display="block",document.getElementById(t._addUID("GPautoCompleteList")).style.display="none",t.onGeocodingSearchSubmit(o),!1});var n=document.createElement("input");n.id=this._addUID("GPsearchInputText"),n.type="text",n.placeholder=i,n.autocomplete="off",n.addEventListener("keyup",function(o){var a=o.which||o.keyCode;a===13||a===10||a===38||a===40||(document.getElementById(t._addUID("GPgeocodeResultsList")).style.display="none",n.value.length>2?document.getElementById(t._addUID("GPautoCompleteList")).style.display="block":document.getElementById(t._addUID("GPautoCompleteList")).style.display="none",t.onAutoCompleteSearchText(o))}),n.addEventListener("keydown",function(o){var a=o.which||o.keyCode,s=document.getElementById(t._addUID("GPautocompleteResults"));if(s){var l=s.getElementsByClassName("GPautoCompleteProposal current"),u=s.getElementsByClassName("GPautoCompleteProposal"),c=u.length;if(c){var h=null;if(l.length)h=l[0];else{h=u[0],h.className="GPautoCompleteProposal current",h.style.color="#000000",h.style["background-color"]="#CEDBEF";return}var d=parseInt(Re.index(h.id),10),p=d===c-1?u[0]:u[d+1],f=d===0?u[c-1]:u[d-1];switch(h.style["background-color"]="",h.style.color="",f.style["background-color"]="",f.style.color="",p.style["background-color"]="",p.style.color="",a){case 38:h.className="GPautoCompleteProposal",f.className="GPautoCompleteProposal current",f.style.color="#000000",f.style["background-color"]="#CEDBEF";break;case 40:h.className="GPautoCompleteProposal",p.className="GPautoCompleteProposal current",p.style.color="#000000",p.style["background-color"]="#CEDBEF";break;case 13:o.preventDefault(),h.click(o);break}h.focus()}}}),e.appendChild(n);var r=document.createElement("div");return r.id=this._addUID("GPsearchInputReset"),r.addEventListener("click",function(){document.getElementById(t._addUID("GPsearchInputText")).value="",document.getElementById(t._addUID("GPautoCompleteList")).style.display="none",document.getElementById(t._addUID("GPgeocodeResultsList")).style.display="none",t.onSearchResetClick()}),e.appendChild(r),e},_createShowAdvancedSearchElement:function(){var i=this,t=document.createElement("div");t.id=this._addUID("GPshowAdvancedSearch"),t.className="GPshowAdvancedToolPicto",t.title="Ouvrir la recherche avancée",t.addEventListener("click",function(){var n="#GPsearchInput-"+i._uid;document.querySelector(n+" input").disabled=!0,document.getElementById(i._addUID("GPautoCompleteList")).style.display="none",document.getElementById(i._addUID("GPgeocodeResultsList")).style.display="none",document.getElementById(i._addUID("GPshowAdvancedSearch")).style.display="none",document.getElementById(i._addUID("GPadvancedSearchPanel")).style.display="inline-block"});var e=document.createElement("span");return e.id=this._addUID("GPshowAdvancedSearchOpen"),e.className="GPshowAdvancedToolOpen",t.appendChild(e),t},_createAdvancedSearchPanelElement:function(){var i=document.createElement("div");return i.id=this._addUID("GPadvancedSearchPanel"),i.className="GPpanel",i.style.display="none",i},_createGeocodeResultsElement:function(){var i=document.createElement("div");return i.id=this._addUID("GPgeocodeResultsList"),i.className="GPpanel",i.style.display="none",i.appendChild(this._createGeocodeResultsHeaderElement()),i},_createAutoCompleteElement:function(){var i=document.createElement("div");return i.id=this._addUID("GPautoCompleteList"),i.className="GPautoCompleteList",i.style.display="none",i},_createAutoCompleteListElement:function(){var i=this,t=document.createElement("div");return t.id=this._addUID("GPautocompleteResults"),t.addEventListener?t.addEventListener("click",function(e){i.onAutoCompletedResultsItemClick(e),document.getElementById(i._addUID("GPautoCompleteList")).style.display="none"},!1):t.attachEvent&&t.attachEvent("onclick",function(e){i.onAutoCompletedResultsItemClick(e),document.getElementById(i._addUID("GPautoCompleteList")).style.display="none"}),t},_createAutoCompletedLocationElement:function(i,t){var e=document.getElementById(this._addUID("GPautocompleteResults")),n=document.createElement("div");n.id=this._addUID("AutoCompletedLocation_"+t),n.className="GPautoCompleteProposal",n.innerHTML=gr.getSuggestedLocationFreeform(i),n.addEventListener?n.addEventListener("click",function(r){e.click(r)},!1):n.attachEvent&&n.attachEvent("onclick",function(r){e.click(r)}),e.appendChild(n)},_createAdvancedSearchPanelHeaderElement:function(){var i=this,t=document.createElement("div");t.className="GPpanelHeader";var e=document.createElement("div");e.className="GPpanelTitle",e.innerHTML="Recherche avancée",t.appendChild(e);var n=document.createElement("div");return n.id=this._addUID("GPadvancedSearchClose"),n.className="GPpanelClose",n.title="Fermer la recherche avancée",n.addEventListener?n.addEventListener("click",function(){var r="#GPsearchInput-"+i._uid;document.querySelector(r+" input").disabled=!1,document.getElementById(i._addUID("GPgeocodeResultsList")).style.display="none",document.getElementById(i._addUID("GPshowAdvancedSearch")).style.display="inline-block",document.getElementById(i._addUID("GPadvancedSearchPanel")).style.display="none"},!1):n.attachEvent&&n.attachEvent("onclick",function(){var r="#GPsearchInput-"+i._uid;document.querySelector(r+" input").disabled=!1,document.getElementById(i._addUID("GPgeocodeResultsList")).style.display="none",document.getElementById(i._addUID("GPshowAdvancedSearch")).style.display="inline-block",document.getElementById(i._addUID("GPadvancedSearchPanel")).style.display="none"}),t.appendChild(n),t},_createAdvancedSearchPanelFormElement:function(i){var t=this,e=document.createElement("form");e.id=this._addUID("GPadvancedSearchForm"),e.addEventListener("submit",function(a){a.preventDefault();for(var s=[],l="#GPadvancedSearchFilters-"+t._uid,u=document.querySelectorAll(l+" > div > div > input"),c=0;c<u.length;c++){var h=u[c];s.push({key:h.name,value:h.value})}return t.onGeocodingAdvancedSearchSubmit(a,s),document.getElementById(t._addUID("GPgeocodeResultsList")).style.display="block",!1});var n=document.createElement("div");n.className="GPflexInput";var r=document.createElement("label");r.className="GPadvancedSearchCodeLabel",r.innerHTML="Recherche par",n.appendChild(r);var o=this._createAdvancedSearchFormCodeElement(i);return n.appendChild(o),e.appendChild(n),e},_createAdvancedSearchFormCodeElement:function(i){var t=this,e=document.createElement("select");e.id=this._addUID("GPadvancedSearchCode"),e.className="GPadvancedSearchCode",e.addEventListener("change",function(o){t.onGeocodingAdvancedSearchCodeChange(o)},!1),i||(i=[{id:"PositionOfInterest",title:"Lieux/toponymes"},{id:"StreetAddress",title:"Adresses"},{id:"CadastralParcel",title:"Parcelles cadastrales"}]);for(var n=0;n<i.length;n++){var r=document.createElement("option");r.value=i[n].id,r.text=i[n].title,e.appendChild(r)}return e},_createAdvancedSearchFormInputElement:function(){var i=document.createElement("input");return i.type="submit",i.id=this._addUID("GPadvancedSearchSubmit"),i.className="GPinputSubmit",i.value="Chercher",i},_createAdvancedSearchFormFiltersElement:function(){var i=document.createElement("div");return i.id=this._addUID("GPadvancedSearchFilters"),i},_createAdvancedSearchFiltersTableElement:function(i,t){var e=document.createElement("div");return e.id=this._addUID(i),t||(e.style.display="none"),e},_createAdvancedSearchFiltersAttributElement:function(i){var t=null,e=i.name,n=i.title,r=i.description,o=i.code,a=i.value,s=document.createElement("div");s.className="GPflexInput";var l=document.createElement("label");l.className="GPadvancedSearchFilterLabel",l.htmlFor=e,l.title=r||n,l.innerHTML=n,s.appendChild(l);var u=document.createElement("input");if(u.id=e,u.className="GPadvancedSearchFilterInput",u.type="text",u.name=e,a)if(Array.isArray(a)){var c=e+"_list";u.setAttribute("list",c);var h=document.createElement("datalist");h.id=c;for(var d=0;d<a.length;++d){var p=document.createElement("option");p.value=a[d],h.appendChild(p)}s.appendChild(h)}else u.value=a;return s.appendChild(u),t=document.getElementById(this._addUID(o)),t?t.appendChild(s):t=s,t},_createGeocodeResultsHeaderElement:function(){var i=this,t=document.createElement("div");t.className="GPpanelHeader";var e=document.createElement("div");e.className="GPpanelTitle",e.innerHTML="Résultats de la recherche",t.appendChild(e);var n=document.createElement("div");return n.id=this._addUID("GPgeocodeResultsClose"),n.className="GPpanelClose",n.title="Fermer la fenêtre de résultats",n.addEventListener?n.addEventListener("click",function(){document.getElementById(i._addUID("GPgeocodeResultsList")).style.display="none"},!1):n.attachEvent&&n.attachEvent("onclick",function(){document.getElementById(i._addUID("GPgeocodeResultsList")).style.display="none"}),t.appendChild(n),t},_createGeocodeResultsListElement:function(){var i=this,t=document.createElement("div");return t.id=this._addUID("GPgeocodeResults"),t.addEventListener?t.addEventListener("click",function(e){e.ctrlKey||(document.getElementById(i._addUID("GPgeocodeResultsList")).style.display="none"),i.onGeocodedResultsItemClick(e)},!1):t.attachEvent&&t.attachEvent("onclick",function(e){e.ctrlKey||(document.getElementById(i._addUID("GPgeocodeResultsList")).style.display="none"),i.onGeocodedResultsItemClick(e)}),t},_createGeocodedLocationElement:function(i,t){var e=document.getElementById(this._addUID("GPgeocodeResults")),n=document.createElement("div");n.id=this._addUID("GeocodedLocation_"+t),n.className="GPautoCompleteProposal",typeof i=="string"?n.innerHTML=i:n.innerHTML=gr.getGeocodedLocationFreeform(i),e.appendChild(n)}},Xe=Ye.getLogger("searchengine"),c_=function(i){function t(e){if(e=e||{},!(this instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this.initialize(e),this._container=this._initContainer(),this._containerElement=null,e.element&&e.element.appendChild&&(e.element.appendChild(this._container),this._containerElement=e.element),i.call(this,{element:this._containerElement||this._container,target:e.target,render:e.render})}return i&&(t.__proto__=i),t.prototype=Object.create(i.prototype,{}),he.assign(t.prototype,qL),t.prototype.constructor=t,t.prototype.setMap=function(e){e||this._clearResults(),i.prototype.setMap.call(this,e)},t.prototype.getCollapsed=function(){return this.collapsed},t.prototype.setCollapsed=function(e){if(e===void 0){Xe.log("[ERROR] SearchEngine:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(this._showSearchEngineInput.click(),this.collapsed=e)},t.prototype.getData=function(){return this._geocodedLocations},t.prototype.initialize=function(e){this._checkInputOptions(e),this.options={collapsed:!0,zoomTo:"",resources:{geocode:"",autocomplete:[]},displayAdvancedSearch:!0,advancedSearch:{},geocodeOptions:{serviceOptions:{}},autocompleteOptions:{serviceOptions:{},triggerGeocode:!1,triggerDelay:1e3},displayMarker:!0,markerStyle:"lightOrange",placeholder:"Rechercher un lieu, une adresse"},he.mergeParams(this.options,e),this.options.resources.geocode===""&&(this.options.resources.geocode="location"),this.options.resources.autocomplete.length===0&&(this.options.resources.autocomplete=["PositionOfInterest","StreetAddress"]),this.collapsed=this.options.collapsed,this._uid=Re.generate(),this._showSearchEngineInput=null,this._inputSearchContainer=null,this._autocompleteContainer=null,this._suggestedContainer=null,this._suggestedLocations=[],this._geocodedContainer=null,this._geocodedLocations=[],this._filterContainer=null,this._currentGeocodingCode=null,this._currentGeocodingLocation=null,this._advancedSearchFilters={},this._initAdvancedSearchFilters(),this._advancedSearchCodes=[],this._initAdvancedSearchCodes(),this._marker=null;var n=this.options.markerStyle;this._markerUrl=Object.keys(It).indexOf(n)===-1?It.lightOrange:It[n],this._displayMarker=this.options.displayMarker,this._popupContent=null,this._popupDiv=this._initPopupDiv(),this._popupOverlay=null,this._triggerHandler=null},t.prototype._checkInputOptions=function(e){var n;if(e.resources)if(typeof e.resources=="object"){var r=e.resources.geocode;if(r)if(Array.isArray(r)){var o=["StreetAddress","PositionOfInterest","CadastralParcel","Administratif"];for(n=0;n<r.length;n++)o.indexOf(r[n])===-1&&Xe.log("[SearchEngine] options.resources.geocode : "+r[n]+" is not a resource for geocode")}else Xe.log("[SearchEngine] 'options.resources.geocode' parameter should be an array"),r=null;var a=e.resources.autocomplete;if(a)if(Array.isArray(a)){var s=["StreetAddress","PositionOfInterest"];for(n=0;n<a.length;n++)s.indexOf(a[n])===-1&&Xe.log("[SearchEngine] options.resources.autocomplete : "+a[n]+" is not a resource for autocomplete")}else Xe.log("[SearchEngine] 'options.resources.autocomplete' parameter should be an array"),a=null}else Xe.log("[SearchEngine] 'resources' parameter should be an object"),e.resources=null},t.prototype._initAdvancedSearchCodes=function(){var e=this.options.resources.geocode;e==="location"&&(e=["PositionOfInterest","StreetAddress","CadastralParcel"]),Array.isArray(e)||(e=[e]);for(var n=0;n<e.length;n++)switch(e[n]){case"PositionOfInterest":this._advancedSearchCodes.push({id:"PositionOfInterest",title:"Lieux/toponymes"});break;case"StreetAddress":this._advancedSearchCodes.push({id:"StreetAddress",title:"Adresses"});break;case"CadastralParcel":this._advancedSearchCodes.push({id:"CadastralParcel",title:"Parcelles cadastrales"});break}this._advancedSearchCodes.length===0&&(this._advancedSearchCodes=[{id:"StreetAddress",title:"Adresses"},{id:"PositionOfInterest",title:"Lieux/toponymes"},{id:"CadastralParcel",title:"Cadastre"}]),Xe.log("advancedSearchCodes",this._advancedSearchCodes)},t.prototype._initAdvancedSearchFilters=function(){this._advancedSearchFilters=Mv.advancedSearchFiltersByDefault;var e=this.options.advancedSearch;he.assign(this._advancedSearchFilters,e),Xe.log("advancedSearchFilters",this._advancedSearchFilters)},t.prototype._initPopupDiv=function(){var e=this,n=document.createElement("div");n.className="gp-feature-info-div";var r=document.createElement("input");return r.type="button",r.className="gp-styling-button closer",r.onclick=function(){return e._popupOverlay!=null&&e._popupOverlay.setPosition(void 0),!1},this._popupContent=document.createElement("div"),this._popupContent.className="gp-features-content-div",this._popupContent.style["min-width"]="200px",n.appendChild(this._popupContent),n.appendChild(r),n},t.prototype._initContainer=function(){var e=this._createMainContainerElement(),n=this._showSearchEngineInput=this._createShowSearchEngineElement();e.appendChild(n),this.options.collapsed||(n.checked=!0);var r=this._createShowSearchEnginePictoElement();e.appendChild(r);var o=this._inputSearchContainer=this._createSearchInputElement(this.options.placeholder),a=this;if(o.addEventListener?o.addEventListener("click",function(){a.onAutoCompleteInputClick()}):o.attachEvent&&o.attachEvent("onclick",function(){a.onAutoCompleteInputClick()}),e.appendChild(o),this.options.displayAdvancedSearch){var s=this._createShowAdvancedSearchElement();e.appendChild(s);var l=this._createAdvancedSearchPanelElement(),u=this._createAdvancedSearchPanelHeaderElement(),c=this._createAdvancedSearchPanelFormElement(this._advancedSearchCodes),h=this._filterContainer=this._createAdvancedSearchFormFiltersElement();this._setFilter(this._advancedSearchCodes[0].id);var d=this._createAdvancedSearchFormInputElement();c.appendChild(h),c.appendChild(d),l.appendChild(u),l.appendChild(c),e.appendChild(l)}var p=this._autocompleteContainer=this._createAutoCompleteElement(),f=this._suggestedContainer=this._createAutoCompleteListElement();p.appendChild(f),e.appendChild(p);var g=this._createGeocodeResultsElement(),v=this._geocodedContainer=this._createGeocodeResultsListElement();return g.appendChild(v),e.appendChild(g),e},t.prototype._setFilter=function(e){for(var n=this._filterContainer,r=!1,o=0;o<this._advancedSearchCodes.length;o++)if(this._advancedSearchCodes[o].id===e){r=!0;break}if(!r){for(;n.firstChild;)n.removeChild(n.firstChild);return}for(this._currentGeocodingCode=e;n.firstChild;)n.removeChild(n.firstChild);var a=this._advancedSearchFilters[e];if(!(!a||a.length===0)){for(var s=this._createAdvancedSearchFiltersTableElement(e,!0),l=0;l<a.length;l++){var u=this._createAdvancedSearchFiltersAttributElement(a[l]);s.appendChild(u)}return n.appendChild(s),n}},t.prototype._requestAutoComplete=function(e){if(!(!e||typeof e=="object"&&Object.keys(e).length===0)&&e.text){Xe.log(e);var n={};he.assign(n,this.options.autocompleteOptions.serviceOptions),he.assign(n,e);var r=this.options.resources.autocomplete;r&&Array.isArray(r)&&(n.type||(n.type=r)),n.apiKey=n.apiKey||this.options.apiKey,typeof n.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?n.ssl=this.options.ssl:n.ssl=!0),Xe.log(n),tt.Services.autoComplete(n)}},t.prototype._fillAutoCompletedLocationListContainer=function(e){if(!(!e||e.length===0)){var n=this._suggestedContainer;if(n.childElementCount)for(;n.firstChild;)n.removeChild(n.firstChild);this._displaySuggestedLocation();for(var r=0;r<e.length;r++)this._createAutoCompletedLocationElement(e[r],r)}},t.prototype._requestGeocoding=function(e){if(!(!e||typeof e=="object"&&Object.keys(e).length===0)&&e.query!==null){Xe.log(e);var n={};he.assign(n,this.options.geocodeOptions.serviceOptions),he.assign(n,e);var r=this,o=this.options.geocodeOptions.serviceOptions.onFailure!==null&&typeof this.options.geocodeOptions.serviceOptions.onFailure=="function",a=this.options.geocodeOptions.serviceOptions.onSuccess!==null&&typeof this.options.geocodeOptions.serviceOptions.onSuccess=="function";if(a){var s=function(c){e.onSuccess.call(r,c),r.options.geocodeOptions.serviceOptions.onSuccess.call(r,c)};n.onSuccess=s}if(o){var l=function(c){e.onFailure.call(r,c),r.options.geocodeOptions.serviceOptions.onFailure.call(r,c)};n.onFailure=l}var u=this.options.resources.geocode;u&&(n.index||(n.index=u)),n.apiKey=n.apiKey||this.options.apiKey,typeof n.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?n.ssl=this.options.ssl:n.ssl=!0),Xe.log(n),tt.Services.geocode(n)}},t.prototype._fillGeocodedLocationListContainer=function(e){if(!e||e.length===0){this._clearGeocodedLocation();return}var n=this._geocodedContainer;if(n.childElementCount)for(;n.firstChild;)n.removeChild(n.firstChild);for(var r=0;r<e.length;r++)Xe.log(e[r]),this._createGeocodedLocationElement(e[r],r);this._geocodedLocations=e},t.prototype._setLabel=function(e){document.getElementById("GPsearchInputText-"+this._uid).value=e},t.prototype._setPosition=function(e,n){var r=this.getMap().getView();r.setCenter(e),r.setZoom(n)},t.prototype._setMarker=function(e,n){var r=this.getMap(),o=this;if(this._marker!=null&&(r.removeOverlay(this._marker),this._marker=null),e){var a=document.createElement("img");a.src=this._markerUrl,a.addEventListener?a.addEventListener("click",function(){o._onResultMarkerSelect(n)}):a.attachEvent&&a.attachEvent("onclick",function(){o._onResultMarkerSelect(n)}),this._marker=new dn({position:e,offset:[-25.5,-38],element:a,stopEvent:!1}),r.addOverlay(this._marker)}},t.prototype._getZoom=function(e){var n=this.getMap(),r=this.options.zoomTo,o=null;if(typeof r=="function"&&(Xe.trace("zoom function"),o=r.call(this,e)),typeof r=="number"&&(Xe.trace("zoom level"),o=r),typeof r=="string")if(r==="auto")Xe.trace("zoom auto"),o=Mv.zoomToResultsByDefault(e);else{Xe.trace("zoom level parsing");var a=parseInt(r,10);isNaN(a)||(Xe.trace("zoom parsing"),o=a)}Number.isInteger=Number.isInteger||function(u){return typeof u=="number"&&isFinite(u)&&Math.floor(u)===u},(!o||o===""||!Number.isInteger(o))&&(Xe.trace("zoom not found, current zoom..."),o=n.getView().getZoom());var s=n.minZoom,l=n.maxZoom;return o<s&&(Xe.trace("zoom level min..."),o=s),o>l&&(Xe.trace("zoom level max..."),o=l),Xe.trace("zoom",o),o},t.prototype._onResultMarkerSelect=function(e){var n=this.getMap(),r="";if(typeof e!="string")if(e.service==="GeocodedLocation"){r="<ul>";var o=e.location.placeAttributes;for(var a in o)o.hasOwnProperty(a)&&a!=="trueGeometry"&&a!=="extraFields"&&a!=="houseNumberInfos"&&a!=="_count"&&(r+="<li>",r+='<span class="gp-attname-others-span">'+a.toUpperCase()+" : </span>",r+=o[a],r+=" </li>");r+=" </ul>"}else e.service==="SuggestedLocation"?r=gr.getSuggestedLocationFreeform(e.location):r="sans informations.";else r=e;this._popupContent.innerHTML=r,this._popupOverlay?this._popupOverlay.setPosition(this._marker.getPosition()):(this._popupOverlay=new dn({element:this._popupDiv,positioning:"bottom-center",position:this._marker.getPosition(),offset:[0,-42]}),n.addOverlay(this._popupOverlay))},t.prototype.onShowSearchEngineClick=function(){var e=this.getMap();Tr.unset(e),this.collapsed=this._showSearchEngineInput.checked,this.dispatchEvent("change:collapsed")},t.prototype.onSearchResetClick=function(){this._clearResults()},t.prototype.onAutoCompleteInputClick=function(){var e=document.getElementById("GPsearchInputText-"+this._uid);e&&!e.disabled&&e.value.length>2&&this._displaySuggestedLocation()},t.prototype.onAutoCompleteSearchText=function(e){var n=e.target.value;if(n){if(this._currentGeocodingLocation=n,n.length<3){this._clearSuggestedLocation();return}var r=this.options.autocompleteOptions.triggerGeocode,o=this.options.autocompleteOptions.triggerDelay,a=this;this._requestAutoComplete({text:n,onSuccess:function(l){if(Xe.log("request from AutoComplete",l),l){a._suggestedLocations=l.suggestedLocations,a._locationsToBeDisplayed=[];for(var u=0;u<a._suggestedLocations.length;u++){var c=a._suggestedLocations[u];c.position&&c.position.x===0&&c.position.y===0&&c.fullText?a._getGeocodeCoordinatesFromFullText(c,u):a._locationsToBeDisplayed.push(c)}a._fillAutoCompletedLocationListContainer(a._locationsToBeDisplayed),a._triggerHandler&&(clearTimeout(a._triggerHandler),a._triggerHandler=null,Xe.warn("Cancel a geocode request !"))}},onFailure:function(l){a._clearSuggestedLocation(),Xe.log(l.message),l.message==="No suggestion matching the search"&&r&&(a._triggerHandler&&(clearTimeout(a._triggerHandler),Xe.warn("Cancel the last geocode request !")),a._triggerHandler=setTimeout(function(){Xe.warn("Launch a geocode request (code postal) !"),a._requestGeocoding({location:n,onSuccess:function(u){if(Xe.log("request from Geocoding",u),u){a._locationsToBeDisplayed=[];for(var c=u.locations,h=0;h<c.length;h++){var d=c[h];d.fullText=gr.getGeocodedLocationFreeform(d),d.position={x:d.position.lon,y:d.position.lat},a._locationsToBeDisplayed.push(d)}a._fillAutoCompletedLocationListContainer(c)}},onFailure:function(u){Xe.log(u.message)}})},o))}});var s=this.getMap();s.on("click",this._hideSuggestedLocation,this),s.on("pointerdrag",this._hideSuggestedLocation,this)}},t.prototype._getGeocodeCoordinatesFromFullText=function(e,n){var r=this;tt.Services.geocode({apiKey:this.options.apiKey,ssl:this.options.ssl,q:gr.getSuggestedLocationFreeform(e),index:e.type,onSuccess:function(o){Xe.log("request from Geocoding (coordinates null)",o),o.locations&&o.locations.length!==0&&o.locations[0].position&&r._suggestedLocations&&r._suggestedLocations[n]&&(r._suggestedLocations[n].position={lon:o.locations[0].position.y,lat:o.locations[0].position.x},r._locationsToBeDisplayed.unshift(r._suggestedLocations[n]),r._fillAutoCompletedLocationListContainer(r._locationsToBeDisplayed))},onFailure:function(){r._suggestedLocations&&r._suggestedLocations[n]&&r._createAutoCompletedLocationElement(r._suggestedLocations[n],n)}})},t.prototype.onAutoCompletedResultsItemClick=function(e){var n=Re.index(e.target.id);if(Xe.log(n),Xe.log(this._locationsToBeDisplayed[n]),!!n){var r=[this._locationsToBeDisplayed[n].position.x,this._locationsToBeDisplayed[n].position.y],o={service:"SuggestedLocation",location:this._locationsToBeDisplayed[n]},a=gr.getSuggestedLocationFreeform(this._locationsToBeDisplayed[n]);this._setLabel(a),this._currentGeocodingLocation=a;var s=this.getMap().getView(),l=s.getProjection().getCode();l!=="EPSG:4326"&&(r=ut(r,"EPSG:4326",l));var u=this._getZoom(o);this._setPosition(r,u),this._displayMarker&&this._setMarker(r,o),this.dispatchEvent({type:"searchengine:autocomplete:click",location:this._locationsToBeDisplayed[n]})}},t.prototype.onGeocodingSearchSubmit=function(e){var n=e.target[0].value;if(n){this._currentGeocodingLocation=n;var r=this;this._requestGeocoding({query:n,onSuccess:function(o){if(Xe.log("request from Geocoding",o),o){var a=o.locations;r._fillGeocodedLocationListContainer(a)}},onFailure:function(o){r._clearGeocodedLocation(),Xe.log(o.message)}})}},t.prototype.onGeocodedResultsItemClick=function(e){var n=Re.index(e.target.id);if(n){var r=[this._geocodedLocations[n].position.lon,this._geocodedLocations[n].position.lat],o={service:"GeocodedLocation",location:this._geocodedLocations[n]},a=gr.getGeocodedLocationFreeform(this._geocodedLocations[n]);this._setLabel(a);var s=this.getMap().getView(),l=s.getProjection().getCode();l!=="EPSG:4326"&&(r=ut(r,"EPSG:4326",l));var u=this._getZoom(o);this._setPosition(r,u),this._displayMarker&&this._setMarker(r,o),this.dispatchEvent({type:"searchengine:geocode:click",location:this._geocodedLocations[n]})}},t.prototype.onGeocodingAdvancedSearchCodeChange=function(e){Xe.log(e);var n=e.target.selectedIndex,r=e.target.options[n].value;r&&this._setFilter(r)},t.prototype.onGeocodingAdvancedSearchSubmit=function(e,n){if(Xe.log(n),!(!n||n.length===0)){for(var r,o={},a=0;a<n.length;a++){var s=n[a];s.value&&(o[s.key]=s.value)}var l=document.getElementById("GPsearchInputText-"+this._uid);r=l.value,this._currentGeocodingCode==="CadastralParcel"&&r===null&&(r="");var u=this;this._requestGeocoding({query:r,index:this._currentGeocodingCode,filters:o,onSuccess:function(c){if(Xe.log(c),c){var h=c.locations;u._fillGeocodedLocationListContainer(h)}},onFailure:function(c){u._clearGeocodedLocation(),Xe.log(c.message)}})}},t.prototype._getCadastralParcelRequestParams=function(e){var n="",r,o=e.department;o?(r=o.length,r===2?n=o:r===1?n="0"+o:n=o.substring(0,2)):n="__";var a=e.commune;a?(r=a.length,r===3?n+=a:r===2?n+="_"+a:r===1?n+="__"+a:n+=a.substring(0,3)):n+="___";var s=e.insee;s&&s.length===5&&(n=s);var l=e.absorbedCity;l?(r=l.length,r===3?n+=l:r<3?r===2?n+="_"+l:r===1&&(n+="__"+l):n+=l.substring(0,3)):n+="___";var u=e.section;u?(r=u.length,r===2?n+=u:r===1?n+="_"+u:n+=u.substring(0,2)):n+="__";var c=e.number;return c?(r=c.length,r===4?n+=c:r===3?n+="_"+c:r===2?n+="__"+c:r===1?n+="___"+c:n+=c.substring(0,4)):n+="___",Xe.log("location : "+n),n},t.prototype._clearResults=function(){var e=this.getMap();this._currentGeocodingLocation=null,this._clearSuggestedLocation(),this._clearGeocodedLocation(),this._setMarker(),this._popupOverlay!=null&&(e.removeOverlay(this._popupOverlay),this._popupOverlay=null)},t.prototype._clearSuggestedLocation=function(){if(this._suggestedLocations=[],this._suggestedContainer)for(;this._suggestedContainer.firstChild;)this._suggestedContainer.removeChild(this._suggestedContainer.firstChild)},t.prototype._hideSuggestedLocation=function(){this._autocompleteContainer&&(this._autocompleteContainer.style.display="none")},t.prototype._displaySuggestedLocation=function(){this._autocompleteContainer&&(this._autocompleteContainer.style.display="block")},t.prototype._clearGeocodedLocation=function(){if(this._geocodedLocations=[],this._geocodedContainer)for(;this._geocodedContainer.firstChild;)this._geocodedContainer.removeChild(this._geocodedContainer.firstChild)},t}(yi);window.ol&&window.ol.control&&(window.ol.control.SearchEngine=c_);var ur={modulo:function(i,t){var e=i%t;return e*t<0?e+t:e},decimalToDMS:function(i,t,e){var n=this.modulo(i+180,360)-180,r=Math.abs(3600*n),o=e||0,a=Math.pow(10,o),s=Math.floor(r/3600),l=Math.floor((r-s*3600)/60),u=r-s*3600-l*60;u=Math.ceil(u*a)/a,u>=60&&(u=0,l+=1),l>=60&&(l=0,s+=1);var c=t.charAt(n<0?1:0);return{d:s,m:l,s:u,direction:c}},toInteger:function(i,t){var e=t||10,n=parseInt(i,e);return!isNaN(n)&&isFinite(n)?n:null},isInteger:function(i){if(isNaN(i))return!1;var t=parseFloat(i);return(t|0)===t},toFloat:function(i){var t=parseFloat(i);return!isNaN(t)&&isFinite(t)?t:null}},$d=Ye.getLogger("draggable"),Oo={dragElement:function(i,t,e){var n,r,o=!1,a={x:0,y:0};t?t.addEventListener("mousedown",s,!0):i.addEventListener("mousedown",s,!0);function s(c){c=c||window.event,c.preventDefault(),o=!0,c._pageX=c._pageX||c.clientX+(document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft),c._pageY=c._pageY||c.clientY+(document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop),a.x=c._pageX-i.offsetLeft,a.y=c._pageY-i.offsetTop,document.addEventListener("mouseup",l,!0),document.addEventListener("mousemove",u,!0)}function l(){o=!1,document.removeEventListener("mouseup",l,!0),document.removeEventListener("mousemove",u,!0)}function u(c){if(c=c||window.event,o){c._pageX=c._pageX||c.clientX+(document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft),c._pageY=c._pageY||c.clientY+(document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop);var h=i.parentElement.offsetLeft,d=i.parentElement.offsetTop;$d.trace("parent offset",h,d),c._pageX-a.x<0-h?n=0-h:c._pageX-a.x+i.clientWidth>document.body.clientWidth?n=document.body.clientWidth-i.clientWidth:n=c._pageX-a.x,$d.trace("left/right constraint",n),c._pageY-a.y<0-d?r=0-d:c._pageY-a.y+i.clientHeight>document.body.clientHeight?r=document.body.clientHeight-i.clientHeight:r=c._pageY-a.y,$d.trace("top/bottom constraint",r),i.style.top=r+"px",i.style.left=n+"px"}}}};function XL(i){i("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),i("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),i("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),i.WGS84=i["EPSG:4326"],i["EPSG:3785"]=i["EPSG:3857"],i.GOOGLE=i["EPSG:3857"],i["EPSG:900913"]=i["EPSG:3857"],i["EPSG:102113"]=i["EPSG:3857"]}var Oa=1,La=2,dc=3,ZL=4,Hp=5,Tv=6378137,KL=6356752314e-3,bv=.0066943799901413165,Nl=484813681109536e-20,X=Math.PI/2,JL=.16666666666666666,QL=.04722222222222222,$L=.022156084656084655,ae=1e-10,Mi=.017453292519943295,yr=57.29577951308232,vt=Math.PI/4,au=Math.PI*2,Zt=3.14159265359,vn={};vn.greenwich=0;vn.lisbon=-9.131906111111;vn.paris=2.337229166667;vn.bogota=-74.080916666667;vn.madrid=-3.687938888889;vn.rome=12.452333333333;vn.bern=7.439583333333;vn.jakarta=106.807719444444;vn.ferro=-17.666666666667;vn.brussels=4.367975;vn.stockholm=18.058277777778;vn.athens=23.7163375;vn.oslo=10.722916666667;const eG={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var Rv=/[\s_\-\/\(\)]/g;function No(i,t){if(i[t])return i[t];for(var e=Object.keys(i),n=t.toLowerCase().replace(Rv,""),r=-1,o,a;++r<e.length;)if(o=e[r],a=o.toLowerCase().replace(Rv,""),a===n)return i[o]}function qp(i){var t={},e=i.split("+").map(function(s){return s.trim()}).filter(function(s){return s}).reduce(function(s,l){var u=l.split("=");return u.push(!0),s[u[0].toLowerCase()]=u[1],s},{}),n,r,o,a={proj:"projName",datum:"datumCode",rf:function(s){t.rf=parseFloat(s)},lat_0:function(s){t.lat0=s*Mi},lat_1:function(s){t.lat1=s*Mi},lat_2:function(s){t.lat2=s*Mi},lat_ts:function(s){t.lat_ts=s*Mi},lon_0:function(s){t.long0=s*Mi},lon_1:function(s){t.long1=s*Mi},lon_2:function(s){t.long2=s*Mi},alpha:function(s){t.alpha=parseFloat(s)*Mi},gamma:function(s){t.rectified_grid_angle=parseFloat(s)},lonc:function(s){t.longc=s*Mi},x_0:function(s){t.x0=parseFloat(s)},y_0:function(s){t.y0=parseFloat(s)},k_0:function(s){t.k0=parseFloat(s)},k:function(s){t.k0=parseFloat(s)},a:function(s){t.a=parseFloat(s)},b:function(s){t.b=parseFloat(s)},r_a:function(){t.R_A=!0},zone:function(s){t.zone=parseInt(s,10)},south:function(){t.utmSouth=!0},towgs84:function(s){t.datum_params=s.split(",").map(function(l){return parseFloat(l)})},to_meter:function(s){t.to_meter=parseFloat(s)},units:function(s){t.units=s;var l=No(eG,s);l&&(t.to_meter=l.to_meter)},from_greenwich:function(s){t.from_greenwich=s*Mi},pm:function(s){var l=No(vn,s);t.from_greenwich=(l||parseFloat(s))*Mi},nadgrids:function(s){s==="@null"?t.datumCode="none":t.nadgrids=s},axis:function(s){var l="ewnsud";s.length===3&&l.indexOf(s.substr(0,1))!==-1&&l.indexOf(s.substr(1,1))!==-1&&l.indexOf(s.substr(2,1))!==-1&&(t.axis=s)},approx:function(){t.approx=!0}};for(n in e)r=e[n],n in a?(o=a[n],typeof o=="function"?o(r):t[o]=r):t[n]=r;return typeof t.datumCode=="string"&&t.datumCode!=="WGS84"&&(t.datumCode=t.datumCode.toLowerCase()),t}var su=1,h_=2,d_=3,lh=4,p_=5,G0=-1,tG=/\s/,iG=/[A-Za-z]/,nG=/[A-Za-z84_]/,Jh=/[,\]]/,f_=/[\d\.E\-\+]/;function oo(i){if(typeof i!="string")throw new Error("not a string");this.text=i.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=su}oo.prototype.readCharicter=function(){var i=this.text[this.place++];if(this.state!==lh)for(;tG.test(i);){if(this.place>=this.text.length)return;i=this.text[this.place++]}switch(this.state){case su:return this.neutral(i);case h_:return this.keyword(i);case lh:return this.quoted(i);case p_:return this.afterquote(i);case d_:return this.number(i);case G0:return}};oo.prototype.afterquote=function(i){if(i==='"'){this.word+='"',this.state=lh;return}if(Jh.test(i)){this.word=this.word.trim(),this.afterItem(i);return}throw new Error(`havn't handled "`+i+'" in afterquote yet, index '+this.place)};oo.prototype.afterItem=function(i){if(i===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=su;return}if(i==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=su,this.currentObject=this.stack.pop(),this.currentObject||(this.state=G0);return}};oo.prototype.number=function(i){if(f_.test(i)){this.word+=i;return}if(Jh.test(i)){this.word=parseFloat(this.word),this.afterItem(i);return}throw new Error(`havn't handled "`+i+'" in number yet, index '+this.place)};oo.prototype.quoted=function(i){if(i==='"'){this.state=p_;return}this.word+=i};oo.prototype.keyword=function(i){if(nG.test(i)){this.word+=i;return}if(i==="["){var t=[];t.push(this.word),this.level++,this.root===null?this.root=t:this.currentObject.push(t),this.stack.push(this.currentObject),this.currentObject=t,this.state=su;return}if(Jh.test(i)){this.afterItem(i);return}throw new Error(`havn't handled "`+i+'" in keyword yet, index '+this.place)};oo.prototype.neutral=function(i){if(iG.test(i)){this.word=i,this.state=h_;return}if(i==='"'){this.word="",this.state=lh;return}if(f_.test(i)){this.word=i,this.state=d_;return}if(Jh.test(i)){this.afterItem(i);return}throw new Error(`havn't handled "`+i+'" in neutral yet, index '+this.place)};oo.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===G0)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function rG(i){var t=new oo(i);return t.output()}function Ov(i,t,e){Array.isArray(t)&&(e.unshift(t),t=null);var n=t?{}:i,r=e.reduce(function(o,a){return os(a,o),o},n);t&&(i[t]=r)}function os(i,t){if(!Array.isArray(i)){t[i]=!0;return}var e=i.shift();if(e==="PARAMETER"&&(e=i.shift()),i.length===1){if(Array.isArray(i[0])){t[e]={},os(i[0],t[e]);return}t[e]=i[0];return}if(!i.length){t[e]=!0;return}if(e==="TOWGS84"){t[e]=i;return}if(e==="AXIS"){e in t||(t[e]=[]),t[e].push(i);return}Array.isArray(e)||(t[e]={});var n;switch(e){case"UNIT":case"PRIMEM":case"VERT_DATUM":t[e]={name:i[0].toLowerCase(),convert:i[1]},i.length===3&&os(i[2],t[e]);return;case"SPHEROID":case"ELLIPSOID":t[e]={name:i[0],a:i[1],rf:i[2]},i.length===4&&os(i[3],t[e]);return;case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":i[0]=["name",i[0]],Ov(t,e,i);return;default:for(n=-1;++n<i.length;)if(!Array.isArray(i[n]))return os(i,t[e]);return Ov(t,e,i)}}var oG=.017453292519943295;function aG(i,t){var e=t[0],n=t[1];!(e in i)&&n in i&&(i[e]=i[n],t.length===3&&(i[e]=t[2](i[e])))}function cr(i){return i*oG}function sG(i){if(i.type==="GEOGCS"?i.projName="longlat":i.type==="LOCAL_CS"?(i.projName="identity",i.local=!0):typeof i.PROJECTION=="object"?i.projName=Object.keys(i.PROJECTION)[0]:i.projName=i.PROJECTION,i.AXIS){for(var t="",e=0,n=i.AXIS.length;e<n;++e){var r=[i.AXIS[e][0].toLowerCase(),i.AXIS[e][1].toLowerCase()];r[0].indexOf("north")!==-1||(r[0]==="y"||r[0]==="lat")&&r[1]==="north"?t+="n":r[0].indexOf("south")!==-1||(r[0]==="y"||r[0]==="lat")&&r[1]==="south"?t+="s":r[0].indexOf("east")!==-1||(r[0]==="x"||r[0]==="lon")&&r[1]==="east"?t+="e":(r[0].indexOf("west")!==-1||(r[0]==="x"||r[0]==="lon")&&r[1]==="west")&&(t+="w")}t.length===2&&(t+="u"),t.length===3&&(i.axis=t)}i.UNIT&&(i.units=i.UNIT.name.toLowerCase(),i.units==="metre"&&(i.units="meter"),i.UNIT.convert&&(i.type==="GEOGCS"?i.DATUM&&i.DATUM.SPHEROID&&(i.to_meter=i.UNIT.convert*i.DATUM.SPHEROID.a):i.to_meter=i.UNIT.convert));var o=i.GEOGCS;i.type==="GEOGCS"&&(o=i),o&&(o.DATUM?i.datumCode=o.DATUM.name.toLowerCase():i.datumCode=o.name.toLowerCase(),i.datumCode.slice(0,2)==="d_"&&(i.datumCode=i.datumCode.slice(2)),(i.datumCode==="new_zealand_geodetic_datum_1949"||i.datumCode==="new_zealand_1949")&&(i.datumCode="nzgd49"),(i.datumCode==="wgs_1984"||i.datumCode==="world_geodetic_system_1984")&&(i.PROJECTION==="Mercator_Auxiliary_Sphere"&&(i.sphere=!0),i.datumCode="wgs84"),i.datumCode.slice(-6)==="_ferro"&&(i.datumCode=i.datumCode.slice(0,-6)),i.datumCode.slice(-8)==="_jakarta"&&(i.datumCode=i.datumCode.slice(0,-8)),~i.datumCode.indexOf("belge")&&(i.datumCode="rnb72"),o.DATUM&&o.DATUM.SPHEROID&&(i.ellps=o.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),i.ellps.toLowerCase().slice(0,13)==="international"&&(i.ellps="intl"),i.a=o.DATUM.SPHEROID.a,i.rf=parseFloat(o.DATUM.SPHEROID.rf,10)),o.DATUM&&o.DATUM.TOWGS84&&(i.datum_params=o.DATUM.TOWGS84),~i.datumCode.indexOf("osgb_1936")&&(i.datumCode="osgb36"),~i.datumCode.indexOf("osni_1952")&&(i.datumCode="osni52"),(~i.datumCode.indexOf("tm65")||~i.datumCode.indexOf("geodetic_datum_of_1965"))&&(i.datumCode="ire65"),i.datumCode==="ch1903+"&&(i.datumCode="ch1903"),~i.datumCode.indexOf("israel")&&(i.datumCode="isr93")),i.b&&!isFinite(i.b)&&(i.b=i.a);function a(u){var c=i.to_meter||1;return u*c}var s=function(u){return aG(i,u)},l=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",cr],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",cr],["x0","false_easting",a],["y0","false_northing",a],["long0","central_meridian",cr],["lat0","latitude_of_origin",cr],["lat0","standard_parallel_1",cr],["lat1","standard_parallel_1",cr],["lat2","standard_parallel_2",cr],["azimuth","Azimuth"],["alpha","azimuth",cr],["srsCode","name"]];l.forEach(s),!i.long0&&i.longc&&(i.projName==="Albers_Conic_Equal_Area"||i.projName==="Lambert_Azimuthal_Equal_Area")&&(i.long0=i.longc),!i.lat_ts&&i.lat1&&(i.projName==="Stereographic_South_Pole"||i.projName==="Polar Stereographic (variant B)")?(i.lat0=cr(i.lat1>0?90:-90),i.lat_ts=i.lat1):!i.lat_ts&&i.lat0&&i.projName==="Polar_Stereographic"&&(i.lat_ts=i.lat0,i.lat0=cr(i.lat0>0?90:-90))}function g_(i){var t=rG(i),e=t.shift(),n=t.shift();t.unshift(["name",n]),t.unshift(["type",e]);var r={};return os(t,r),sG(r),r}function Ji(i){var t=this;if(arguments.length===2){var e=arguments[1];typeof e=="string"?e.charAt(0)==="+"?Ji[i]=qp(arguments[1]):Ji[i]=g_(arguments[1]):Ji[i]=e}else if(arguments.length===1){if(Array.isArray(i))return i.map(function(n){Array.isArray(n)?Ji.apply(t,n):Ji(n)});if(typeof i=="string"){if(i in Ji)return Ji[i]}else"EPSG"in i?Ji["EPSG:"+i.EPSG]=i:"ESRI"in i?Ji["ESRI:"+i.ESRI]=i:"IAU2000"in i?Ji["IAU2000:"+i.IAU2000]=i:console.log(i);return}}XL(Ji);function lG(i){return typeof i=="string"}function uG(i){return i in Ji}var cG=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function hG(i){return cG.some(function(t){return i.indexOf(t)>-1})}var dG=["3857","900913","3785","102113"];function pG(i){var t=No(i,"authority");if(t){var e=No(t,"epsg");return e&&dG.indexOf(e)>-1}}function fG(i){var t=No(i,"extension");if(t)return No(t,"proj4")}function gG(i){return i[0]==="+"}function vG(i){if(lG(i)){if(uG(i))return Ji[i];if(hG(i)){var t=g_(i);if(pG(t))return Ji["EPSG:3857"];var e=fG(t);return e?qp(e):t}if(gG(i))return qp(i)}else return i}function Lv(i,t){i=i||{};var e,n;if(!t)return i;for(n in t)e=t[n],e!==void 0&&(i[n]=e);return i}function br(i,t,e){var n=i*t;return e/Math.sqrt(1-n*n)}function _u(i){return i<0?-1:1}function ce(i){return Math.abs(i)<=Zt?i:i-_u(i)*au}function $n(i,t,e){var n=i*e,r=.5*i;return n=Math.pow((1-n)/(1+n),r),Math.tan(.5*(X-t))/n}function lu(i,t){for(var e=.5*i,n,r,o=X-2*Math.atan(t),a=0;a<=15;a++)if(n=i*Math.sin(o),r=X-2*Math.atan(t*Math.pow((1-n)/(1+n),e))-o,o+=r,Math.abs(r)<=1e-10)return o;return-9999}function mG(){var i=this.b/this.a;this.es=1-i*i,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=br(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function yG(i){var t=i.x,e=i.y;if(e*yr>90&&e*yr<-90&&t*yr>180&&t*yr<-180)return null;var n,r;if(Math.abs(Math.abs(e)-X)<=ae)return null;if(this.sphere)n=this.x0+this.a*this.k0*ce(t-this.long0),r=this.y0+this.a*this.k0*Math.log(Math.tan(vt+.5*e));else{var o=Math.sin(e),a=$n(this.e,e,o);n=this.x0+this.a*this.k0*ce(t-this.long0),r=this.y0-this.a*this.k0*Math.log(a)}return i.x=n,i.y=r,i}function AG(i){var t=i.x-this.x0,e=i.y-this.y0,n,r;if(this.sphere)r=X-2*Math.atan(Math.exp(-e/(this.a*this.k0)));else{var o=Math.exp(-e/(this.a*this.k0));if(r=lu(this.e,o),r===-9999)return null}return n=ce(this.long0+t/(this.a*this.k0)),i.x=n,i.y=r,i}var _G=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];const CG={init:mG,forward:yG,inverse:AG,names:_G};function IG(){}function Gv(i){return i}var EG=["longlat","identity"];const wG={init:IG,forward:Gv,inverse:Gv,names:EG};var SG=[CG,wG],pc={},uh=[];function v_(i,t){var e=uh.length;return i.names?(uh[e]=i,i.names.forEach(function(n){pc[n.toLowerCase()]=e}),this):(console.log(t),!0)}function PG(i){if(!i)return!1;var t=i.toLowerCase();if(typeof pc[t]<"u"&&uh[pc[t]])return uh[pc[t]]}function xG(){SG.forEach(v_)}const MG={start:xG,add:v_,get:PG};var Ne={};Ne.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};Ne.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};Ne.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};Ne.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};Ne.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};Ne.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};Ne.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};Ne.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};Ne.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};Ne.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};Ne.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};Ne.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};Ne.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};Ne.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};Ne.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};Ne.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};Ne.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};Ne.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};Ne.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};Ne.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};Ne.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};Ne.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};Ne.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};Ne.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};Ne.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};Ne.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};Ne.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};Ne.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};Ne.hough={a:6378270,rf:297,ellipseName:"Hough"};Ne.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};Ne.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};Ne.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};Ne.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};Ne.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};Ne.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};Ne.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};Ne.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};Ne.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};Ne.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};Ne.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};Ne.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var TG=Ne.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};Ne.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function bG(i,t,e,n){var r=i*i,o=t*t,a=(r-o)/r,s=0;n?(i*=1-a*(JL+a*(QL+a*$L)),r=i*i,a=0):s=Math.sqrt(a);var l=(r-o)/o;return{es:a,e:s,ep2:l}}function RG(i,t,e,n,r){if(!i){var o=No(Ne,n);o||(o=TG),i=o.a,t=o.b,e=o.rf}return e&&!t&&(t=(1-1/e)*i),(e===0||Math.abs(i-t)<ae)&&(r=!0,t=i),{a:i,b:t,rf:e,sphere:r}}var Ci={};Ci.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"};Ci.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"};Ci.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"};Ci.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"};Ci.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"};Ci.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"};Ci.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"};Ci.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"};Ci.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"};Ci.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"};Ci.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"};Ci.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"};Ci.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"};Ci.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"};Ci.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"};Ci.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"};Ci.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};function OG(i,t,e,n,r,o,a){var s={};return i===void 0||i==="none"?s.datum_type=Hp:s.datum_type=ZL,t&&(s.datum_params=t.map(parseFloat),(s.datum_params[0]!==0||s.datum_params[1]!==0||s.datum_params[2]!==0)&&(s.datum_type=Oa),s.datum_params.length>3&&(s.datum_params[3]!==0||s.datum_params[4]!==0||s.datum_params[5]!==0||s.datum_params[6]!==0)&&(s.datum_type=La,s.datum_params[3]*=Nl,s.datum_params[4]*=Nl,s.datum_params[5]*=Nl,s.datum_params[6]=s.datum_params[6]/1e6+1)),a&&(s.datum_type=dc,s.grids=a),s.a=e,s.b=n,s.es=r,s.ep2=o,s}var m_={};function LG(i,t){var e=new DataView(t),n=DG(e),r=NG(e,n);r.nSubgrids>1&&console.log("Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored");var o=FG(e,r,n),a={header:r,subgrids:o};return m_[i]=a,a}function GG(i){if(i===void 0)return null;var t=i.split(",");return t.map(kG)}function kG(i){if(i.length===0)return null;var t=i[0]==="@";return t&&(i=i.slice(1)),i==="null"?{name:"null",mandatory:!t,grid:null,isNull:!0}:{name:i,mandatory:!t,grid:m_[i]||null,isNull:!1}}function as(i){return i/3600*Math.PI/180}function DG(i){var t=i.getInt32(8,!1);return t===11?!1:(t=i.getInt32(8,!0),t!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function NG(i,t){return{nFields:i.getInt32(8,t),nSubgridFields:i.getInt32(24,t),nSubgrids:i.getInt32(40,t),shiftType:Xp(i,56,56+8).trim(),fromSemiMajorAxis:i.getFloat64(120,t),fromSemiMinorAxis:i.getFloat64(136,t),toSemiMajorAxis:i.getFloat64(152,t),toSemiMinorAxis:i.getFloat64(168,t)}}function Xp(i,t,e){return String.fromCharCode.apply(null,new Uint8Array(i.buffer.slice(t,e)))}function FG(i,t,e){for(var n=176,r=[],o=0;o<t.nSubgrids;o++){var a=BG(i,n,e),s=jG(i,n,a,e),l=Math.round(1+(a.upperLongitude-a.lowerLongitude)/a.longitudeInterval),u=Math.round(1+(a.upperLatitude-a.lowerLatitude)/a.latitudeInterval);r.push({ll:[as(a.lowerLongitude),as(a.lowerLatitude)],del:[as(a.longitudeInterval),as(a.latitudeInterval)],lim:[l,u],count:a.gridNodeCount,cvs:UG(s)})}return r}function UG(i){return i.map(function(t){return[as(t.longitudeShift),as(t.latitudeShift)]})}function BG(i,t,e){return{name:Xp(i,t+8,t+16).trim(),parent:Xp(i,t+24,t+24+8).trim(),lowerLatitude:i.getFloat64(t+72,e),upperLatitude:i.getFloat64(t+88,e),lowerLongitude:i.getFloat64(t+104,e),upperLongitude:i.getFloat64(t+120,e),latitudeInterval:i.getFloat64(t+136,e),longitudeInterval:i.getFloat64(t+152,e),gridNodeCount:i.getInt32(t+168,e)}}function jG(i,t,e,n){for(var r=t+176,o=16,a=[],s=0;s<e.gridNodeCount;s++){var l={latitudeShift:i.getFloat32(r+s*o,n),longitudeShift:i.getFloat32(r+s*o+4,n),latitudeAccuracy:i.getFloat32(r+s*o+8,n),longitudeAccuracy:i.getFloat32(r+s*o+12,n)};a.push(l)}return a}function Er(i,t){if(!(this instanceof Er))return new Er(i);t=t||function(u){if(u)throw u};var e=vG(i);if(typeof e!="object"){t(i);return}var n=Er.projections.get(e.projName);if(!n){t(i);return}if(e.datumCode&&e.datumCode!=="none"){var r=No(Ci,e.datumCode);r&&(e.datum_params=e.datum_params||(r.towgs84?r.towgs84.split(","):null),e.ellps=r.ellipse,e.datumName=r.datumName?r.datumName:e.datumCode)}e.k0=e.k0||1,e.axis=e.axis||"enu",e.ellps=e.ellps||"wgs84",e.lat1=e.lat1||e.lat0;var o=RG(e.a,e.b,e.rf,e.ellps,e.sphere),a=bG(o.a,o.b,o.rf,e.R_A),s=GG(e.nadgrids),l=e.datum||OG(e.datumCode,e.datum_params,o.a,o.b,a.es,a.ep2,s);Lv(this,e),Lv(this,n),this.a=o.a,this.b=o.b,this.rf=o.rf,this.sphere=o.sphere,this.es=a.es,this.e=a.e,this.ep2=a.ep2,this.datum=l,this.init(),t(null,this)}Er.projections=MG;Er.projections.start();function zG(i,t){return i.datum_type!==t.datum_type||i.a!==t.a||Math.abs(i.es-t.es)>5e-11?!1:i.datum_type===Oa?i.datum_params[0]===t.datum_params[0]&&i.datum_params[1]===t.datum_params[1]&&i.datum_params[2]===t.datum_params[2]:i.datum_type===La?i.datum_params[0]===t.datum_params[0]&&i.datum_params[1]===t.datum_params[1]&&i.datum_params[2]===t.datum_params[2]&&i.datum_params[3]===t.datum_params[3]&&i.datum_params[4]===t.datum_params[4]&&i.datum_params[5]===t.datum_params[5]&&i.datum_params[6]===t.datum_params[6]:!0}function y_(i,t,e){var n=i.x,r=i.y,o=i.z?i.z:0,a,s,l,u;if(r<-X&&r>-1.001*X)r=-X;else if(r>X&&r<1.001*X)r=X;else{if(r<-X)return{x:-1/0,y:-1/0,z:i.z};if(r>X)return{x:1/0,y:1/0,z:i.z}}return n>Math.PI&&(n-=2*Math.PI),s=Math.sin(r),u=Math.cos(r),l=s*s,a=e/Math.sqrt(1-t*l),{x:(a+o)*u*Math.cos(n),y:(a+o)*u*Math.sin(n),z:(a*(1-t)+o)*s}}function A_(i,t,e,n){var r=1e-12,o=r*r,a=30,s,l,u,c,h,d,p,f,g,v,y,m,A,_=i.x,C=i.y,I=i.z?i.z:0,E,w,S;if(s=Math.sqrt(_*_+C*C),l=Math.sqrt(_*_+C*C+I*I),s/e<r){if(E=0,l/e<r)return w=X,S=-n,{x:i.x,y:i.y,z:i.z}}else E=Math.atan2(C,_);u=I/l,c=s/l,h=1/Math.sqrt(1-t*(2-t)*c*c),f=c*(1-t)*h,g=u*h,A=0;do A++,p=e/Math.sqrt(1-t*g*g),S=s*f+I*g-p*(1-t*g*g),d=t*p/(p+S),h=1/Math.sqrt(1-d*(2-d)*c*c),v=c*(1-d)*h,y=u*h,m=y*f-v*g,f=v,g=y;while(m*m>o&&A<a);return w=Math.atan(y/Math.abs(v)),{x:E,y:w,z:S}}function VG(i,t,e){if(t===Oa)return{x:i.x+e[0],y:i.y+e[1],z:i.z+e[2]};if(t===La){var n=e[0],r=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6];return{x:u*(i.x-l*i.y+s*i.z)+n,y:u*(l*i.x+i.y-a*i.z)+r,z:u*(-s*i.x+a*i.y+i.z)+o}}}function WG(i,t,e){if(t===Oa)return{x:i.x-e[0],y:i.y-e[1],z:i.z-e[2]};if(t===La){var n=e[0],r=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=(i.x-n)/u,h=(i.y-r)/u,d=(i.z-o)/u;return{x:c+l*h-s*d,y:-l*c+h+a*d,z:s*c-a*h+d}}}function $u(i){return i===Oa||i===La}function YG(i,t,e){if(zG(i,t)||i.datum_type===Hp||t.datum_type===Hp)return e;var n=i.a,r=i.es;if(i.datum_type===dc){var o=kv(i,!1,e);if(o!==0)return;n=Tv,r=bv}var a=t.a,s=t.b,l=t.es;if(t.datum_type===dc&&(a=Tv,s=KL,l=bv),r===l&&n===a&&!$u(i.datum_type)&&!$u(t.datum_type))return e;if(e=y_(e,r,n),$u(i.datum_type)&&(e=VG(e,i.datum_type,i.datum_params)),$u(t.datum_type)&&(e=WG(e,t.datum_type,t.datum_params)),e=A_(e,l,a,s),t.datum_type===dc){var u=kv(t,!0,e);if(u!==0)return}return e}function kv(i,t,e){if(i.grids===null||i.grids.length===0)return console.log("Grid shift grids not found"),-1;for(var n={x:-e.x,y:e.y},r={x:Number.NaN,y:Number.NaN},o=[],a=0;a<i.grids.length;a++){var s=i.grids[a];if(o.push(s.name),s.isNull){r=n;break}if(s.mandatory,s.grid===null){if(s.mandatory)return console.log("Unable to find mandatory grid '"+s.name+"'"),-1;continue}var l=s.grid.subgrids[0],u=(Math.abs(l.del[1])+Math.abs(l.del[0]))/1e4,c=l.ll[0]-u,h=l.ll[1]-u,d=l.ll[0]+(l.lim[0]-1)*l.del[0]+u,p=l.ll[1]+(l.lim[1]-1)*l.del[1]+u;if(!(h>n.y||c>n.x||p<n.y||d<n.x)&&(r=HG(n,t,l),!isNaN(r.x)))break}return isNaN(r.x)?(console.log("Failed to find a grid shift table for location '"+-n.x*yr+" "+n.y*yr+" tried: '"+o+"'"),-1):(e.x=-r.x,e.y=r.y,0)}function HG(i,t,e){var n={x:Number.NaN,y:Number.NaN};if(isNaN(i.x))return n;var r={x:i.x,y:i.y};r.x-=e.ll[0],r.y-=e.ll[1],r.x=ce(r.x-Math.PI)+Math.PI;var o=Dv(r,e);if(t){if(isNaN(o.x))return n;o.x=r.x-o.x,o.y=r.y-o.y;var a=9,s=1e-12,l,u;do{if(u=Dv(o,e),isNaN(u.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}l={x:r.x-(u.x+o.x),y:r.y-(u.y+o.y)},o.x+=l.x,o.y+=l.y}while(a--&&Math.abs(l.x)>s&&Math.abs(l.y)>s);if(a<0)return console.log("Inverse grid shift iterator failed to converge."),n;n.x=ce(o.x+e.ll[0]),n.y=o.y+e.ll[1]}else isNaN(o.x)||(n.x=i.x+o.x,n.y=i.y+o.y);return n}function Dv(i,t){var e={x:i.x/t.del[0],y:i.y/t.del[1]},n={x:Math.floor(e.x),y:Math.floor(e.y)},r={x:e.x-1*n.x,y:e.y-1*n.y},o={x:Number.NaN,y:Number.NaN},a;if(n.x<0||n.x>=t.lim[0]||n.y<0||n.y>=t.lim[1])return o;a=n.y*t.lim[0]+n.x;var s={x:t.cvs[a][0],y:t.cvs[a][1]};a++;var l={x:t.cvs[a][0],y:t.cvs[a][1]};a+=t.lim[0];var u={x:t.cvs[a][0],y:t.cvs[a][1]};a--;var c={x:t.cvs[a][0],y:t.cvs[a][1]},h=r.x*r.y,d=r.x*(1-r.y),p=(1-r.x)*(1-r.y),f=(1-r.x)*r.y;return o.x=p*s.x+d*l.x+f*c.x+h*u.x,o.y=p*s.y+d*l.y+f*c.y+h*u.y,o}function Nv(i,t,e){var n=e.x,r=e.y,o=e.z||0,a,s,l,u={};for(l=0;l<3;l++)if(!(t&&l===2&&e.z===void 0))switch(l===0?(a=n,"ew".indexOf(i.axis[l])!==-1?s="x":s="y"):l===1?(a=r,"ns".indexOf(i.axis[l])!==-1?s="y":s="x"):(a=o,s="z"),i.axis[l]){case"e":u[s]=a;break;case"w":u[s]=-a;break;case"n":u[s]=a;break;case"s":u[s]=-a;break;case"u":e[s]!==void 0&&(u.z=a);break;case"d":e[s]!==void 0&&(u.z=-a);break;default:return null}return u}function __(i){var t={x:i[0],y:i[1]};return i.length>2&&(t.z=i[2]),i.length>3&&(t.m=i[3]),t}function qG(i){Fv(i.x),Fv(i.y)}function Fv(i){if(typeof Number.isFinite=="function"){if(Number.isFinite(i))return;throw new TypeError("coordinates must be finite numbers")}if(typeof i!="number"||i!==i||!isFinite(i))throw new TypeError("coordinates must be finite numbers")}function XG(i,t){return(i.datum.datum_type===Oa||i.datum.datum_type===La)&&t.datumCode!=="WGS84"||(t.datum.datum_type===Oa||t.datum.datum_type===La)&&i.datumCode!=="WGS84"}function ch(i,t,e,n){var r;if(Array.isArray(e)&&(e=__(e)),qG(e),i.datum&&t.datum&&XG(i,t)&&(r=new Er("WGS84"),e=ch(i,r,e,n),i=r),n&&i.axis!=="enu"&&(e=Nv(i,!1,e)),i.projName==="longlat")e={x:e.x*Mi,y:e.y*Mi,z:e.z||0};else if(i.to_meter&&(e={x:e.x*i.to_meter,y:e.y*i.to_meter,z:e.z||0}),e=i.inverse(e),!e)return;if(i.from_greenwich&&(e.x+=i.from_greenwich),e=YG(i.datum,t.datum,e),!!e)return t.from_greenwich&&(e={x:e.x-t.from_greenwich,y:e.y,z:e.z||0}),t.projName==="longlat"?e={x:e.x*yr,y:e.y*yr,z:e.z||0}:(e=t.forward(e),t.to_meter&&(e={x:e.x/t.to_meter,y:e.y/t.to_meter,z:e.z||0})),n&&t.axis!=="enu"?Nv(t,!0,e):e}var Uv=Er("WGS84");function ep(i,t,e,n){var r,o,a;return Array.isArray(e)?(r=ch(i,t,e,n)||{x:NaN,y:NaN},e.length>2?typeof i.name<"u"&&i.name==="geocent"||typeof t.name<"u"&&t.name==="geocent"?typeof r.z=="number"?[r.x,r.y,r.z].concat(e.splice(3)):[r.x,r.y,e[2]].concat(e.splice(3)):[r.x,r.y].concat(e.splice(2)):[r.x,r.y]):(o=ch(i,t,e,n),a=Object.keys(e),a.length===2||a.forEach(function(s){if(typeof i.name<"u"&&i.name==="geocent"||typeof t.name<"u"&&t.name==="geocent"){if(s==="x"||s==="y"||s==="z")return}else if(s==="x"||s==="y")return;o[s]=e[s]}),o)}function Bv(i){return i instanceof Er?i:i.oProj?i.oProj:Er(i)}function qt(i,t,e){i=Bv(i);var n=!1,r;return typeof t>"u"?(t=i,i=Uv,n=!0):(typeof t.x<"u"||Array.isArray(t))&&(e=t,t=i,i=Uv,n=!0),t=Bv(t),e?ep(i,t,e):(r={forward:function(o,a){return ep(i,t,o,a)},inverse:function(o,a){return ep(t,i,o,a)}},n&&(r.oProj=t),r)}var jv=6,C_="AJSAJS",I_="AFAFAF",ss=65,un=73,Rn=79,Al=86,_l=90;const ZG={forward:E_,inverse:KG,toPoint:w_};function E_(i,t){return t=t||5,$G(JG({lat:i[1],lon:i[0]}),t)}function KG(i){var t=k0(P_(i.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat,t.lon,t.lat]:[t.left,t.bottom,t.right,t.top]}function w_(i){var t=k0(P_(i.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat]:[(t.left+t.right)/2,(t.top+t.bottom)/2]}function tp(i){return i*(Math.PI/180)}function zv(i){return 180*(i/Math.PI)}function JG(i){var t=i.lat,e=i.lon,n=6378137,r=.00669438,o=.9996,a,s,l,u,c,h,d,p=tp(t),f=tp(e),g,v;v=Math.floor((e+180)/6)+1,e===180&&(v=60),t>=56&&t<64&&e>=3&&e<12&&(v=32),t>=72&&t<84&&(e>=0&&e<9?v=31:e>=9&&e<21?v=33:e>=21&&e<33?v=35:e>=33&&e<42&&(v=37)),a=(v-1)*6-180+3,g=tp(a),s=r/(1-r),l=n/Math.sqrt(1-r*Math.sin(p)*Math.sin(p)),u=Math.tan(p)*Math.tan(p),c=s*Math.cos(p)*Math.cos(p),h=Math.cos(p)*(f-g),d=n*((1-r/4-3*r*r/64-5*r*r*r/256)*p-(3*r/8+3*r*r/32+45*r*r*r/1024)*Math.sin(2*p)+(15*r*r/256+45*r*r*r/1024)*Math.sin(4*p)-35*r*r*r/3072*Math.sin(6*p));var y=o*l*(h+(1-u+c)*h*h*h/6+(5-18*u+u*u+72*c-58*s)*h*h*h*h*h/120)+5e5,m=o*(d+l*Math.tan(p)*(h*h/2+(5-u+9*c+4*c*c)*h*h*h*h/24+(61-58*u+u*u+600*c-330*s)*h*h*h*h*h*h/720));return t<0&&(m+=1e7),{northing:Math.round(m),easting:Math.round(y),zoneNumber:v,zoneLetter:QG(t)}}function k0(i){var t=i.northing,e=i.easting,n=i.zoneLetter,r=i.zoneNumber;if(r<0||r>60)return null;var o=.9996,a=6378137,s=.00669438,l,u=(1-Math.sqrt(1-s))/(1+Math.sqrt(1-s)),c,h,d,p,f,g,v,y,m,A=e-5e5,_=t;n<"N"&&(_-=1e7),v=(r-1)*6-180+3,l=s/(1-s),g=_/o,y=g/(a*(1-s/4-3*s*s/64-5*s*s*s/256)),m=y+(3*u/2-27*u*u*u/32)*Math.sin(2*y)+(21*u*u/16-55*u*u*u*u/32)*Math.sin(4*y)+151*u*u*u/96*Math.sin(6*y),c=a/Math.sqrt(1-s*Math.sin(m)*Math.sin(m)),h=Math.tan(m)*Math.tan(m),d=l*Math.cos(m)*Math.cos(m),p=a*(1-s)/Math.pow(1-s*Math.sin(m)*Math.sin(m),1.5),f=A/(c*o);var C=m-c*Math.tan(m)/p*(f*f/2-(5+3*h+10*d-4*d*d-9*l)*f*f*f*f/24+(61+90*h+298*d+45*h*h-252*l-3*d*d)*f*f*f*f*f*f/720);C=zv(C);var I=(f-(1+2*h+d)*f*f*f/6+(5-2*d+28*h-3*d*d+8*l+24*h*h)*f*f*f*f*f/120)/Math.cos(m);I=v+zv(I);var E;if(i.accuracy){var w=k0({northing:i.northing+i.accuracy,easting:i.easting+i.accuracy,zoneLetter:i.zoneLetter,zoneNumber:i.zoneNumber});E={top:w.lat,right:w.lon,bottom:C,left:I}}else E={lat:C,lon:I};return E}function QG(i){var t="Z";return 84>=i&&i>=72?t="X":72>i&&i>=64?t="W":64>i&&i>=56?t="V":56>i&&i>=48?t="U":48>i&&i>=40?t="T":40>i&&i>=32?t="S":32>i&&i>=24?t="R":24>i&&i>=16?t="Q":16>i&&i>=8?t="P":8>i&&i>=0?t="N":0>i&&i>=-8?t="M":-8>i&&i>=-16?t="L":-16>i&&i>=-24?t="K":-24>i&&i>=-32?t="J":-32>i&&i>=-40?t="H":-40>i&&i>=-48?t="G":-48>i&&i>=-56?t="F":-56>i&&i>=-64?t="E":-64>i&&i>=-72?t="D":-72>i&&i>=-80&&(t="C"),t}function $G(i,t){var e="00000"+i.easting,n="00000"+i.northing;return i.zoneNumber+i.zoneLetter+ek(i.easting,i.northing,i.zoneNumber)+e.substr(e.length-5,t)+n.substr(n.length-5,t)}function ek(i,t,e){var n=S_(e),r=Math.floor(i/1e5),o=Math.floor(t/1e5)%20;return tk(r,o,n)}function S_(i){var t=i%jv;return t===0&&(t=jv),t}function tk(i,t,e){var n=e-1,r=C_.charCodeAt(n),o=I_.charCodeAt(n),a=r+i-1,s=o+t,l=!1;a>_l&&(a=a-_l+ss-1,l=!0),(a===un||r<un&&a>un||(a>un||r<un)&&l)&&a++,(a===Rn||r<Rn&&a>Rn||(a>Rn||r<Rn)&&l)&&(a++,a===un&&a++),a>_l&&(a=a-_l+ss-1),s>Al?(s=s-Al+ss-1,l=!0):l=!1,(s===un||o<un&&s>un||(s>un||o<un)&&l)&&s++,(s===Rn||o<Rn&&s>Rn||(s>Rn||o<Rn)&&l)&&(s++,s===un&&s++),s>Al&&(s=s-Al+ss-1);var u=String.fromCharCode(a)+String.fromCharCode(s);return u}function P_(i){if(i&&i.length===0)throw"MGRSPoint coverting from nothing";for(var t=i.length,e=null,n="",r,o=0;!/[A-Z]/.test(r=i.charAt(o));){if(o>=2)throw"MGRSPoint bad conversion from: "+i;n+=r,o++}var a=parseInt(n,10);if(o===0||o+3>t)throw"MGRSPoint bad conversion from: "+i;var s=i.charAt(o++);if(s<="A"||s==="B"||s==="Y"||s>="Z"||s==="I"||s==="O")throw"MGRSPoint zone letter "+s+" not handled: "+i;e=i.substring(o,o+=2);for(var l=S_(a),u=ik(e.charAt(0),l),c=nk(e.charAt(1),l);c<rk(s);)c+=2e6;var h=t-o;if(h%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+i;var d=h/2,p=0,f=0,g,v,y,m,A;return d>0&&(g=1e5/Math.pow(10,d),v=i.substring(o,o+d),p=parseFloat(v)*g,y=i.substring(o+d),f=parseFloat(y)*g),m=p+u,A=f+c,{easting:m,northing:A,zoneLetter:s,zoneNumber:a,accuracy:g}}function ik(i,t){for(var e=C_.charCodeAt(t-1),n=1e5,r=!1;e!==i.charCodeAt(0);){if(e++,e===un&&e++,e===Rn&&e++,e>_l){if(r)throw"Bad character: "+i;e=ss,r=!0}n+=1e5}return n}function nk(i,t){if(i>"V")throw"MGRSPoint given invalid Northing "+i;for(var e=I_.charCodeAt(t-1),n=0,r=!1;e!==i.charCodeAt(0);){if(e++,e===un&&e++,e===Rn&&e++,e>Al){if(r)throw"Bad character: "+i;e=ss,r=!0}n+=1e5}return n}function rk(i){var t;switch(i){case"C":t=11e5;break;case"D":t=2e6;break;case"E":t=28e5;break;case"F":t=37e5;break;case"G":t=46e5;break;case"H":t=55e5;break;case"J":t=64e5;break;case"K":t=73e5;break;case"L":t=82e5;break;case"M":t=91e5;break;case"N":t=0;break;case"P":t=8e5;break;case"Q":t=17e5;break;case"R":t=26e5;break;case"S":t=35e5;break;case"T":t=44e5;break;case"U":t=53e5;break;case"V":t=62e5;break;case"W":t=7e6;break;case"X":t=79e5;break;default:t=-1}if(t>=0)return t;throw"Invalid zone letter: "+i}function js(i,t,e){if(!(this instanceof js))return new js(i,t,e);if(Array.isArray(i))this.x=i[0],this.y=i[1],this.z=i[2]||0;else if(typeof i=="object")this.x=i.x,this.y=i.y,this.z=i.z||0;else if(typeof i=="string"&&typeof t>"u"){var n=i.split(",");this.x=parseFloat(n[0],10),this.y=parseFloat(n[1],10),this.z=parseFloat(n[2],10)||0}else this.x=i,this.y=t,this.z=e||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}js.fromMGRS=function(i){return new js(w_(i))};js.prototype.toMGRS=function(i){return E_([this.x,this.y],i)};var ok=1,ak=.25,Vv=.046875,Wv=.01953125,Yv=.01068115234375,sk=.75,lk=.46875,uk=.013020833333333334,ck=.007120768229166667,hk=.3645833333333333,dk=.005696614583333333,pk=.3076171875;function x_(i){var t=[];t[0]=ok-i*(ak+i*(Vv+i*(Wv+i*Yv))),t[1]=i*(sk-i*(Vv+i*(Wv+i*Yv)));var e=i*i;return t[2]=e*(lk-i*(uk+i*ck)),e*=i,t[3]=e*(hk-i*dk),t[4]=e*i*pk,t}function Qh(i,t,e,n){return e*=t,t*=t,n[0]*i-e*(n[1]+t*(n[2]+t*(n[3]+t*n[4])))}var fk=20;function M_(i,t,e){for(var n=1/(1-t),r=i,o=fk;o;--o){var a=Math.sin(r),s=1-t*a*a;if(s=(Qh(r,a,Math.cos(r),e)-i)*(s*Math.sqrt(s))*n,r-=s,Math.abs(s)<ae)return r}return r}function gk(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=x_(this.es),this.ml0=Qh(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function vk(i){var t=i.x,e=i.y,n=ce(t-this.long0),r,o,a,s=Math.sin(e),l=Math.cos(e);if(this.es){var c=l*n,h=Math.pow(c,2),d=this.ep2*Math.pow(l,2),p=Math.pow(d,2),f=Math.abs(l)>ae?Math.tan(e):0,g=Math.pow(f,2),v=Math.pow(g,2);r=1-this.es*Math.pow(s,2),c=c/Math.sqrt(r);var y=Qh(e,s,l,this.en);o=this.a*(this.k0*c*(1+h/6*(1-g+d+h/20*(5-18*g+v+14*d-58*g*d+h/42*(61+179*v-v*g-479*g)))))+this.x0,a=this.a*(this.k0*(y-this.ml0+s*n*c/2*(1+h/12*(5-g+9*d+4*p+h/30*(61+v-58*g+270*d-330*g*d+h/56*(1385+543*v-v*g-3111*g))))))+this.y0}else{var u=l*Math.sin(n);if(Math.abs(Math.abs(u)-1)<ae)return 93;if(o=.5*this.a*this.k0*Math.log((1+u)/(1-u))+this.x0,a=l*Math.cos(n)/Math.sqrt(1-Math.pow(u,2)),u=Math.abs(a),u>=1){if(u-1>ae)return 93;a=0}else a=Math.acos(a);e<0&&(a=-a),a=this.a*this.k0*(a-this.lat0)+this.y0}return i.x=o,i.y=a,i}function mk(i){var t,e,n,r,o=(i.x-this.x0)*(1/this.a),a=(i.y-this.y0)*(1/this.a);if(this.es)if(t=this.ml0+a/this.k0,e=M_(t,this.es,this.en),Math.abs(e)<X){var h=Math.sin(e),d=Math.cos(e),p=Math.abs(d)>ae?Math.tan(e):0,f=this.ep2*Math.pow(d,2),g=Math.pow(f,2),v=Math.pow(p,2),y=Math.pow(v,2);t=1-this.es*Math.pow(h,2);var m=o*Math.sqrt(t)/this.k0,A=Math.pow(m,2);t=t*p,n=e-t*A/(1-this.es)*.5*(1-A/12*(5+3*v-9*f*v+f-4*g-A/30*(61+90*v-252*f*v+45*y+46*f-A/56*(1385+3633*v+4095*y+1574*y*v)))),r=ce(this.long0+m*(1-A/6*(1+2*v+f-A/20*(5+28*v+24*y+8*f*v+6*f-A/42*(61+662*v+1320*y+720*y*v))))/d)}else n=X*_u(a),r=0;else{var s=Math.exp(o/this.k0),l=.5*(s-1/s),u=this.lat0+a/this.k0,c=Math.cos(u);t=Math.sqrt((1-Math.pow(c,2))/(1+Math.pow(l,2))),n=Math.asin(t),a<0&&(n=-n),l===0&&c===0?r=0:r=ce(Math.atan2(l,c)+this.long0)}return i.x=r,i.y=n,i}var yk=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const fc={init:gk,forward:vk,inverse:mk,names:yk};function T_(i){var t=Math.exp(i);return t=(t-1/t)/2,t}function $h(i,t){i=Math.abs(i),t=Math.abs(t);var e=Math.max(i,t),n=Math.min(i,t)/(e||1);return e*Math.sqrt(1+Math.pow(n,2))}function Ak(i){var t=1+i,e=t-1;return e===0?i:i*Math.log(t)/e}function _k(i){var t=Math.abs(i);return t=Ak(t*(1+t/($h(1,t)+1))),i<0?-t:t}function D0(i,t){for(var e=2*Math.cos(2*t),n=i.length-1,r=i[n],o=0,a;--n>=0;)a=-o+e*r+i[n],o=r,r=a;return t+a*Math.sin(2*t)}function Ck(i,t){for(var e=2*Math.cos(t),n=i.length-1,r=i[n],o=0,a;--n>=0;)a=-o+e*r+i[n],o=r,r=a;return Math.sin(t)*a}function Ik(i){var t=Math.exp(i);return t=(t+1/t)/2,t}function b_(i,t,e){for(var n=Math.sin(t),r=Math.cos(t),o=T_(e),a=Ik(e),s=2*r*a,l=-2*n*o,u=i.length-1,c=i[u],h=0,d=0,p=0,f,g;--u>=0;)f=d,g=h,d=c,h=p,c=-f+s*d-l*h+i[u],p=-g+l*d+s*h;return s=n*a,l=r*o,[s*c-l*p,s*p+l*c]}function Ek(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(fc.init.apply(this),this.forward=fc.forward,this.inverse=fc.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var i=this.es/(1+Math.sqrt(1-this.es)),t=i/(2-i),e=t;this.cgb[0]=t*(2+t*(-2/3+t*(-2+t*(116/45+t*(26/45+t*(-2854/675)))))),this.cbg[0]=t*(-2+t*(2/3+t*(4/3+t*(-82/45+t*(32/45+t*(4642/4725)))))),e=e*t,this.cgb[1]=e*(7/3+t*(-8/5+t*(-227/45+t*(2704/315+t*(2323/945))))),this.cbg[1]=e*(5/3+t*(-16/15+t*(-13/9+t*(904/315+t*(-1522/945))))),e=e*t,this.cgb[2]=e*(56/15+t*(-136/35+t*(-1262/105+t*(73814/2835)))),this.cbg[2]=e*(-26/15+t*(34/21+t*(8/5+t*(-12686/2835)))),e=e*t,this.cgb[3]=e*(4279/630+t*(-332/35+t*(-399572/14175))),this.cbg[3]=e*(1237/630+t*(-12/5+t*(-24832/14175))),e=e*t,this.cgb[4]=e*(4174/315+t*(-144838/6237)),this.cbg[4]=e*(-734/315+t*(109598/31185)),e=e*t,this.cgb[5]=e*(601676/22275),this.cbg[5]=e*(444337/155925),e=Math.pow(t,2),this.Qn=this.k0/(1+t)*(1+e*(1/4+e*(1/64+e/256))),this.utg[0]=t*(-.5+t*(2/3+t*(-37/96+t*(1/360+t*(81/512+t*(-96199/604800)))))),this.gtu[0]=t*(.5+t*(-2/3+t*(5/16+t*(41/180+t*(-127/288+t*(7891/37800)))))),this.utg[1]=e*(-1/48+t*(-1/15+t*(437/1440+t*(-46/105+t*(1118711/3870720))))),this.gtu[1]=e*(13/48+t*(-3/5+t*(557/1440+t*(281/630+t*(-1983433/1935360))))),e=e*t,this.utg[2]=e*(-17/480+t*(37/840+t*(209/4480+t*(-5569/90720)))),this.gtu[2]=e*(61/240+t*(-103/140+t*(15061/26880+t*(167603/181440)))),e=e*t,this.utg[3]=e*(-4397/161280+t*(11/504+t*(830251/7257600))),this.gtu[3]=e*(49561/161280+t*(-179/168+t*(6601661/7257600))),e=e*t,this.utg[4]=e*(-4583/161280+t*(108847/3991680)),this.gtu[4]=e*(34729/80640+t*(-3418889/1995840)),e=e*t,this.utg[5]=e*(-20648693/638668800),this.gtu[5]=e*(212378941/319334400);var n=D0(this.cbg,this.lat0);this.Zb=-this.Qn*(n+Ck(this.gtu,2*n))}function wk(i){var t=ce(i.x-this.long0),e=i.y;e=D0(this.cbg,e);var n=Math.sin(e),r=Math.cos(e),o=Math.sin(t),a=Math.cos(t);e=Math.atan2(n,a*r),t=Math.atan2(o*r,$h(n,r*a)),t=_k(Math.tan(t));var s=b_(this.gtu,2*e,2*t);e=e+s[0],t=t+s[1];var l,u;return Math.abs(t)<=2.623395162778?(l=this.a*(this.Qn*t)+this.x0,u=this.a*(this.Qn*e+this.Zb)+this.y0):(l=1/0,u=1/0),i.x=l,i.y=u,i}function Sk(i){var t=(i.x-this.x0)*(1/this.a),e=(i.y-this.y0)*(1/this.a);e=(e-this.Zb)/this.Qn,t=t/this.Qn;var n,r;if(Math.abs(t)<=2.623395162778){var o=b_(this.utg,2*e,2*t);e=e+o[0],t=t+o[1],t=Math.atan(T_(t));var a=Math.sin(e),s=Math.cos(e),l=Math.sin(t),u=Math.cos(t);e=Math.atan2(a*u,$h(l,u*s)),t=Math.atan2(l,u*s),n=ce(t+this.long0),r=D0(this.cgb,e)}else n=1/0,r=1/0;return i.x=n,i.y=r,i}var Pk=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"];const gc={init:Ek,forward:wk,inverse:Sk,names:Pk};function xk(i,t){if(i===void 0){if(i=Math.floor((ce(t)+Math.PI)*30/Math.PI)+1,i<0)return 0;if(i>60)return 60}return i}var Mk="etmerc";function Tk(){var i=xk(this.zone,this.long0);if(i===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(i)-183)*Mi,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,gc.init.apply(this),this.forward=gc.forward,this.inverse=gc.inverse}var bk=["Universal Transverse Mercator System","utm"];const Rk={init:Tk,names:bk,dependsOn:Mk};function N0(i,t){return Math.pow((1-i)/(1+i),t)}var Ok=20;function Lk(){var i=Math.sin(this.lat0),t=Math.cos(this.lat0);t*=t,this.rc=Math.sqrt(1-this.es)/(1-this.es*i*i),this.C=Math.sqrt(1+this.es*t*t/(1-this.es)),this.phic0=Math.asin(i/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+vt)/(Math.pow(Math.tan(.5*this.lat0+vt),this.C)*N0(this.e*i,this.ratexp))}function Gk(i){var t=i.x,e=i.y;return i.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*e+vt),this.C)*N0(this.e*Math.sin(e),this.ratexp))-X,i.x=this.C*t,i}function kk(i){for(var t=1e-14,e=i.x/this.C,n=i.y,r=Math.pow(Math.tan(.5*n+vt)/this.K,1/this.C),o=Ok;o>0&&(n=2*Math.atan(r*N0(this.e*Math.sin(i.y),-.5*this.e))-X,!(Math.abs(n-i.y)<t));--o)i.y=n;return o?(i.x=e,i.y=n,i):null}var Dk=["gauss"];const F0={init:Lk,forward:Gk,inverse:kk,names:Dk};function Nk(){F0.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function Fk(i){var t,e,n,r;return i.x=ce(i.x-this.long0),F0.forward.apply(this,[i]),t=Math.sin(i.y),e=Math.cos(i.y),n=Math.cos(i.x),r=this.k0*this.R2/(1+this.sinc0*t+this.cosc0*e*n),i.x=r*e*Math.sin(i.x),i.y=r*(this.cosc0*t-this.sinc0*e*n),i.x=this.a*i.x+this.x0,i.y=this.a*i.y+this.y0,i}function Uk(i){var t,e,n,r,o;if(i.x=(i.x-this.x0)/this.a,i.y=(i.y-this.y0)/this.a,i.x/=this.k0,i.y/=this.k0,o=Math.sqrt(i.x*i.x+i.y*i.y)){var a=2*Math.atan2(o,this.R2);t=Math.sin(a),e=Math.cos(a),r=Math.asin(e*this.sinc0+i.y*t*this.cosc0/o),n=Math.atan2(i.x*t,o*this.cosc0*e-i.y*this.sinc0*t)}else r=this.phic0,n=0;return i.x=n,i.y=r,F0.inverse.apply(this,[i]),i.x=ce(i.x+this.long0),i}var Bk=["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const jk={init:Nk,forward:Fk,inverse:Uk,names:Bk};function zk(i,t,e){return t*=e,Math.tan(.5*(X+i))*Math.pow((1-t)/(1+t),.5*e)}function Vk(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=ae&&(this.k0=.5*(1+_u(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=ae&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=ae&&(this.k0=.5*this.cons*br(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/$n(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=br(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-X,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function Wk(i){var t=i.x,e=i.y,n=Math.sin(e),r=Math.cos(e),o,a,s,l,u,c,h=ce(t-this.long0);return Math.abs(Math.abs(t-this.long0)-Math.PI)<=ae&&Math.abs(e+this.lat0)<=ae?(i.x=NaN,i.y=NaN,i):this.sphere?(o=2*this.k0/(1+this.sinlat0*n+this.coslat0*r*Math.cos(h)),i.x=this.a*o*r*Math.sin(h)+this.x0,i.y=this.a*o*(this.coslat0*n-this.sinlat0*r*Math.cos(h))+this.y0,i):(a=2*Math.atan(this.ssfn_(e,n,this.e))-X,l=Math.cos(a),s=Math.sin(a),Math.abs(this.coslat0)<=ae?(u=$n(this.e,e*this.con,this.con*n),c=2*this.a*this.k0*u/this.cons,i.x=this.x0+c*Math.sin(t-this.long0),i.y=this.y0-this.con*c*Math.cos(t-this.long0),i):(Math.abs(this.sinlat0)<ae?(o=2*this.a*this.k0/(1+l*Math.cos(h)),i.y=o*s):(o=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*s+this.cosX0*l*Math.cos(h))),i.y=o*(this.cosX0*s-this.sinX0*l*Math.cos(h))+this.y0),i.x=o*l*Math.sin(h)+this.x0,i))}function Yk(i){i.x-=this.x0,i.y-=this.y0;var t,e,n,r,o,a=Math.sqrt(i.x*i.x+i.y*i.y);if(this.sphere){var s=2*Math.atan(a/(2*this.a*this.k0));return t=this.long0,e=this.lat0,a<=ae?(i.x=t,i.y=e,i):(e=Math.asin(Math.cos(s)*this.sinlat0+i.y*Math.sin(s)*this.coslat0/a),Math.abs(this.coslat0)<ae?this.lat0>0?t=ce(this.long0+Math.atan2(i.x,-1*i.y)):t=ce(this.long0+Math.atan2(i.x,i.y)):t=ce(this.long0+Math.atan2(i.x*Math.sin(s),a*this.coslat0*Math.cos(s)-i.y*this.sinlat0*Math.sin(s))),i.x=t,i.y=e,i)}else if(Math.abs(this.coslat0)<=ae){if(a<=ae)return e=this.lat0,t=this.long0,i.x=t,i.y=e,i;i.x*=this.con,i.y*=this.con,n=a*this.cons/(2*this.a*this.k0),e=this.con*lu(this.e,n),t=this.con*ce(this.con*this.long0+Math.atan2(i.x,-1*i.y))}else r=2*Math.atan(a*this.cosX0/(2*this.a*this.k0*this.ms1)),t=this.long0,a<=ae?o=this.X0:(o=Math.asin(Math.cos(r)*this.sinX0+i.y*Math.sin(r)*this.cosX0/a),t=ce(this.long0+Math.atan2(i.x*Math.sin(r),a*this.cosX0*Math.cos(r)-i.y*this.sinX0*Math.sin(r)))),e=-1*lu(this.e,Math.tan(.5*(X+o)));return i.x=t,i.y=e,i}var Hk=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"];const qk={init:Vk,forward:Wk,inverse:Yk,names:Hk,ssfn_:zk};function Xk(){var i=this.lat0;this.lambda0=this.long0;var t=Math.sin(i),e=this.a,n=this.rf,r=1/n,o=2*r-Math.pow(r,2),a=this.e=Math.sqrt(o);this.R=this.k0*e*Math.sqrt(1-o)/(1-o*Math.pow(t,2)),this.alpha=Math.sqrt(1+o/(1-o)*Math.pow(Math.cos(i),4)),this.b0=Math.asin(t/this.alpha);var s=Math.log(Math.tan(Math.PI/4+this.b0/2)),l=Math.log(Math.tan(Math.PI/4+i/2)),u=Math.log((1+a*t)/(1-a*t));this.K=s-this.alpha*l+this.alpha*a/2*u}function Zk(i){var t=Math.log(Math.tan(Math.PI/4-i.y/2)),e=this.e/2*Math.log((1+this.e*Math.sin(i.y))/(1-this.e*Math.sin(i.y))),n=-this.alpha*(t+e)+this.K,r=2*(Math.atan(Math.exp(n))-Math.PI/4),o=this.alpha*(i.x-this.lambda0),a=Math.atan(Math.sin(o)/(Math.sin(this.b0)*Math.tan(r)+Math.cos(this.b0)*Math.cos(o))),s=Math.asin(Math.cos(this.b0)*Math.sin(r)-Math.sin(this.b0)*Math.cos(r)*Math.cos(o));return i.y=this.R/2*Math.log((1+Math.sin(s))/(1-Math.sin(s)))+this.y0,i.x=this.R*a+this.x0,i}function Kk(i){for(var t=i.x-this.x0,e=i.y-this.y0,n=t/this.R,r=2*(Math.atan(Math.exp(e/this.R))-Math.PI/4),o=Math.asin(Math.cos(this.b0)*Math.sin(r)+Math.sin(this.b0)*Math.cos(r)*Math.cos(n)),a=Math.atan(Math.sin(n)/(Math.cos(this.b0)*Math.cos(n)-Math.sin(this.b0)*Math.tan(r))),s=this.lambda0+a/this.alpha,l=0,u=o,c=-1e3,h=0;Math.abs(u-c)>1e-7;){if(++h>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+o/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(u))/2)),c=u,u=2*Math.atan(Math.exp(l))-Math.PI/2}return i.x=s,i.y=u,i}var Jk=["somerc"];const Qk={init:Xk,forward:Zk,inverse:Kk,names:Jk};var ts=1e-7;function $k(i){var t=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],e=typeof i.PROJECTION=="object"?Object.keys(i.PROJECTION)[0]:i.PROJECTION;return"no_uoff"in i||"no_off"in i||t.indexOf(e)!==-1}function eD(){var i,t,e,n,r,o,a,s,l,u,c=0,h,d=0,p=0,f=0,g=0,v=0,y=0;this.no_off=$k(this),this.no_rot="no_rot"in this;var m=!1;"alpha"in this&&(m=!0);var A=!1;if("rectified_grid_angle"in this&&(A=!0),m&&(y=this.alpha),A&&(c=this.rectified_grid_angle*Mi),m||A)d=this.longc;else if(p=this.long1,g=this.lat1,f=this.long2,v=this.lat2,Math.abs(g-v)<=ts||(i=Math.abs(g))<=ts||Math.abs(i-X)<=ts||Math.abs(Math.abs(this.lat0)-X)<=ts||Math.abs(Math.abs(v)-X)<=ts)throw new Error;var _=1-this.es;t=Math.sqrt(_),Math.abs(this.lat0)>ae?(s=Math.sin(this.lat0),e=Math.cos(this.lat0),i=1-this.es*s*s,this.B=e*e,this.B=Math.sqrt(1+this.es*this.B*this.B/_),this.A=this.B*this.k0*t/i,n=this.B*t/(e*Math.sqrt(i)),r=n*n-1,r<=0?r=0:(r=Math.sqrt(r),this.lat0<0&&(r=-r)),this.E=r+=n,this.E*=Math.pow($n(this.e,this.lat0,s),this.B)):(this.B=1/t,this.A=this.k0,this.E=n=r=1),m||A?(m?(h=Math.asin(Math.sin(y)/n),A||(c=y)):(h=c,y=Math.asin(n*Math.sin(h))),this.lam0=d-Math.asin(.5*(r-1/r)*Math.tan(h))/this.B):(o=Math.pow($n(this.e,g,Math.sin(g)),this.B),a=Math.pow($n(this.e,v,Math.sin(v)),this.B),r=this.E/o,l=(a-o)/(a+o),u=this.E*this.E,u=(u-a*o)/(u+a*o),i=p-f,i<-Math.pi?f-=au:i>Math.pi&&(f+=au),this.lam0=ce(.5*(p+f)-Math.atan(u*Math.tan(.5*this.B*(p-f))/l)/this.B),h=Math.atan(2*Math.sin(this.B*ce(p-this.lam0))/(r-1/r)),c=y=Math.asin(n*Math.sin(h))),this.singam=Math.sin(h),this.cosgam=Math.cos(h),this.sinrot=Math.sin(c),this.cosrot=Math.cos(c),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(n*n-1)/Math.cos(y))),this.lat0<0&&(this.u_0=-this.u_0)),r=.5*h,this.v_pole_n=this.ArB*Math.log(Math.tan(vt-r)),this.v_pole_s=this.ArB*Math.log(Math.tan(vt+r))}function tD(i){var t={},e,n,r,o,a,s,l,u;if(i.x=i.x-this.lam0,Math.abs(Math.abs(i.y)-X)>ae){if(a=this.E/Math.pow($n(this.e,i.y,Math.sin(i.y)),this.B),s=1/a,e=.5*(a-s),n=.5*(a+s),o=Math.sin(this.B*i.x),r=(e*this.singam-o*this.cosgam)/n,Math.abs(Math.abs(r)-1)<ae)throw new Error;u=.5*this.ArB*Math.log((1-r)/(1+r)),s=Math.cos(this.B*i.x),Math.abs(s)<ts?l=this.A*i.x:l=this.ArB*Math.atan2(e*this.cosgam+o*this.singam,s)}else u=i.y>0?this.v_pole_n:this.v_pole_s,l=this.ArB*i.y;return this.no_rot?(t.x=l,t.y=u):(l-=this.u_0,t.x=u*this.cosrot+l*this.sinrot,t.y=l*this.cosrot-u*this.sinrot),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function iD(i){var t,e,n,r,o,a,s,l={};if(i.x=(i.x-this.x0)*(1/this.a),i.y=(i.y-this.y0)*(1/this.a),this.no_rot?(e=i.y,t=i.x):(e=i.x*this.cosrot-i.y*this.sinrot,t=i.y*this.cosrot+i.x*this.sinrot+this.u_0),n=Math.exp(-this.BrA*e),r=.5*(n-1/n),o=.5*(n+1/n),a=Math.sin(this.BrA*t),s=(a*this.cosgam+r*this.singam)/o,Math.abs(Math.abs(s)-1)<ae)l.x=0,l.y=s<0?-X:X;else{if(l.y=this.E/Math.sqrt((1+s)/(1-s)),l.y=lu(this.e,Math.pow(l.y,1/this.B)),l.y===1/0)throw new Error;l.x=-this.rB*Math.atan2(r*this.cosgam-a*this.singam,Math.cos(this.BrA*t))}return l.x+=this.lam0,l}var nD=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const rD={init:eD,forward:tD,inverse:iD,names:nD};function oD(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<ae)){var i=this.b/this.a;this.e=Math.sqrt(1-i*i);var t=Math.sin(this.lat1),e=Math.cos(this.lat1),n=br(this.e,t,e),r=$n(this.e,this.lat1,t),o=Math.sin(this.lat2),a=Math.cos(this.lat2),s=br(this.e,o,a),l=$n(this.e,this.lat2,o),u=$n(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>ae?this.ns=Math.log(n/s)/Math.log(r/l):this.ns=t,isNaN(this.ns)&&(this.ns=t),this.f0=n/(this.ns*Math.pow(r,this.ns)),this.rh=this.a*this.f0*Math.pow(u,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function aD(i){var t=i.x,e=i.y;Math.abs(2*Math.abs(e)-Math.PI)<=ae&&(e=_u(e)*(X-2*ae));var n=Math.abs(Math.abs(e)-X),r,o;if(n>ae)r=$n(this.e,e,Math.sin(e)),o=this.a*this.f0*Math.pow(r,this.ns);else{if(n=e*this.ns,n<=0)return null;o=0}var a=this.ns*ce(t-this.long0);return i.x=this.k0*(o*Math.sin(a))+this.x0,i.y=this.k0*(this.rh-o*Math.cos(a))+this.y0,i}function sD(i){var t,e,n,r,o,a=(i.x-this.x0)/this.k0,s=this.rh-(i.y-this.y0)/this.k0;this.ns>0?(t=Math.sqrt(a*a+s*s),e=1):(t=-Math.sqrt(a*a+s*s),e=-1);var l=0;if(t!==0&&(l=Math.atan2(e*a,e*s)),t!==0||this.ns>0){if(e=1/this.ns,n=Math.pow(t/(this.a*this.f0),e),r=lu(this.e,n),r===-9999)return null}else r=-X;return o=ce(l/this.ns+this.long0),i.x=o,i.y=r,i}var lD=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc"];const uD={init:oD,forward:aD,inverse:sD,names:lD};function cD(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function hD(i){var t,e,n,r,o,a,s,l=i.x,u=i.y,c=ce(l-this.long0);return t=Math.pow((1+this.e*Math.sin(u))/(1-this.e*Math.sin(u)),this.alfa*this.e/2),e=2*(Math.atan(this.k*Math.pow(Math.tan(u/2+this.s45),this.alfa)/t)-this.s45),n=-c*this.alfa,r=Math.asin(Math.cos(this.ad)*Math.sin(e)+Math.sin(this.ad)*Math.cos(e)*Math.cos(n)),o=Math.asin(Math.cos(e)*Math.sin(n)/Math.cos(r)),a=this.n*o,s=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(r/2+this.s45),this.n),i.y=s*Math.cos(a)/1,i.x=s*Math.sin(a)/1,this.czech||(i.y*=-1,i.x*=-1),i}function dD(i){var t,e,n,r,o,a,s,l,u=i.x;i.x=i.y,i.y=u,this.czech||(i.y*=-1,i.x*=-1),a=Math.sqrt(i.x*i.x+i.y*i.y),o=Math.atan2(i.y,i.x),r=o/Math.sin(this.s0),n=2*(Math.atan(Math.pow(this.ro0/a,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),t=Math.asin(Math.cos(this.ad)*Math.sin(n)-Math.sin(this.ad)*Math.cos(n)*Math.cos(r)),e=Math.asin(Math.cos(n)*Math.sin(r)/Math.cos(t)),i.x=this.long0-e/this.alfa,s=t,l=0;var c=0;do i.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(t/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(s))/(1-this.e*Math.sin(s)),this.e/2))-this.s45),Math.abs(s-i.y)<1e-10&&(l=1),s=i.y,c+=1;while(l===0&&c<15);return c>=15?null:i}var pD=["Krovak","krovak"];const fD={init:cD,forward:hD,inverse:dD,names:pD};function en(i,t,e,n,r){return i*r-t*Math.sin(2*r)+e*Math.sin(4*r)-n*Math.sin(6*r)}function Cu(i){return 1-.25*i*(1+i/16*(3+1.25*i))}function Iu(i){return .375*i*(1+.25*i*(1+.46875*i))}function Eu(i){return .05859375*i*i*(1+.75*i)}function wu(i){return i*i*i*(35/3072)}function zs(i,t,e){var n=t*e;return i/Math.sqrt(1-n*n)}function $s(i){return Math.abs(i)<X?i:i-_u(i)*Math.PI}function hh(i,t,e,n,r){var o,a;o=i/t;for(var s=0;s<15;s++)if(a=(i-(t*o-e*Math.sin(2*o)+n*Math.sin(4*o)-r*Math.sin(6*o)))/(t-2*e*Math.cos(2*o)+4*n*Math.cos(4*o)-6*r*Math.cos(6*o)),o+=a,Math.abs(a)<=1e-10)return o;return NaN}function gD(){this.sphere||(this.e0=Cu(this.es),this.e1=Iu(this.es),this.e2=Eu(this.es),this.e3=wu(this.es),this.ml0=this.a*en(this.e0,this.e1,this.e2,this.e3,this.lat0))}function vD(i){var t,e,n=i.x,r=i.y;if(n=ce(n-this.long0),this.sphere)t=this.a*Math.asin(Math.cos(r)*Math.sin(n)),e=this.a*(Math.atan2(Math.tan(r),Math.cos(n))-this.lat0);else{var o=Math.sin(r),a=Math.cos(r),s=zs(this.a,this.e,o),l=Math.tan(r)*Math.tan(r),u=n*Math.cos(r),c=u*u,h=this.es*a*a/(1-this.es),d=this.a*en(this.e0,this.e1,this.e2,this.e3,r);t=s*u*(1-c*l*(1/6-(8-l+8*h)*c/120)),e=d-this.ml0+s*o/a*c*(.5+(5-l+6*h)*c/24)}return i.x=t+this.x0,i.y=e+this.y0,i}function mD(i){i.x-=this.x0,i.y-=this.y0;var t=i.x/this.a,e=i.y/this.a,n,r;if(this.sphere){var o=e+this.lat0;n=Math.asin(Math.sin(o)*Math.cos(t)),r=Math.atan2(Math.tan(t),Math.cos(o))}else{var a=this.ml0/this.a+e,s=hh(a,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(s)-X)<=ae)return i.x=this.long0,i.y=X,e<0&&(i.y*=-1),i;var l=zs(this.a,this.e,Math.sin(s)),u=l*l*l/this.a/this.a*(1-this.es),c=Math.pow(Math.tan(s),2),h=t*this.a/l,d=h*h;n=s-l*Math.tan(s)/u*h*h*(.5-(1+3*c)*h*h/24),r=h*(1-d*(c/3+(1+3*c)*c*d/15))/Math.cos(s)}return i.x=ce(r+this.long0),i.y=$s(n),i}var yD=["Cassini","Cassini_Soldner","cass"];const AD={init:gD,forward:vD,inverse:mD,names:yD};function Lo(i,t){var e;return i>1e-7?(e=i*t,(1-i*i)*(t/(1-e*e)-.5/i*Math.log((1-e)/(1+e)))):2*t}var _D=1,CD=2,ID=3,ED=4;function wD(){var i=Math.abs(this.lat0);if(Math.abs(i-X)<ae?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(i)<ae?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var t;switch(this.qp=Lo(this.e,1),this.mmf=.5/(1-this.es),this.apa=LD(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=Lo(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function SD(i){var t,e,n,r,o,a,s,l,u,c,h=i.x,d=i.y;if(h=ce(h-this.long0),this.sphere){if(o=Math.sin(d),c=Math.cos(d),n=Math.cos(h),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e=this.mode===this.EQUIT?1+c*n:1+this.sinph0*o+this.cosph0*c*n,e<=ae)return null;e=Math.sqrt(2/e),t=e*c*Math.sin(h),e*=this.mode===this.EQUIT?o:this.cosph0*o-this.sinph0*c*n}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),Math.abs(d+this.lat0)<ae)return null;e=vt-d*.5,e=2*(this.mode===this.S_POLE?Math.cos(e):Math.sin(e)),t=e*Math.sin(h),e*=n}}else{switch(s=0,l=0,u=0,n=Math.cos(h),r=Math.sin(h),o=Math.sin(d),a=Lo(this.e,o),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(s=a/this.qp,l=Math.sqrt(1-s*s)),this.mode){case this.OBLIQ:u=1+this.sinb1*s+this.cosb1*l*n;break;case this.EQUIT:u=1+l*n;break;case this.N_POLE:u=X+d,a=this.qp-a;break;case this.S_POLE:u=d-X,a=this.qp+a;break}if(Math.abs(u)<ae)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:u=Math.sqrt(2/u),this.mode===this.OBLIQ?e=this.ymf*u*(this.cosb1*s-this.sinb1*l*n):e=(u=Math.sqrt(2/(1+l*n)))*s*this.ymf,t=this.xmf*u*l*r;break;case this.N_POLE:case this.S_POLE:a>=0?(t=(u=Math.sqrt(a))*r,e=n*(this.mode===this.S_POLE?u:-u)):t=e=0;break}}return i.x=this.a*t+this.x0,i.y=this.a*e+this.y0,i}function PD(i){i.x-=this.x0,i.y-=this.y0;var t=i.x/this.a,e=i.y/this.a,n,r,o,a,s,l,u;if(this.sphere){var c=0,h,d=0;if(h=Math.sqrt(t*t+e*e),r=h*.5,r>1)return null;switch(r=2*Math.asin(r),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(d=Math.sin(r),c=Math.cos(r)),this.mode){case this.EQUIT:r=Math.abs(h)<=ae?0:Math.asin(e*d/h),t*=d,e=c*h;break;case this.OBLIQ:r=Math.abs(h)<=ae?this.lat0:Math.asin(c*this.sinph0+e*d*this.cosph0/h),t*=d*this.cosph0,e=(c-Math.sin(r)*this.sinph0)*h;break;case this.N_POLE:e=-e,r=X-r;break;case this.S_POLE:r-=X;break}n=e===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(t,e)}else{if(u=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t/=this.dd,e*=this.dd,l=Math.sqrt(t*t+e*e),l<ae)return i.x=this.long0,i.y=this.lat0,i;a=2*Math.asin(.5*l/this.rq),o=Math.cos(a),t*=a=Math.sin(a),this.mode===this.OBLIQ?(u=o*this.sinb1+e*a*this.cosb1/l,s=this.qp*u,e=l*this.cosb1*o-e*this.sinb1*a):(u=e*a/l,s=this.qp*u,e=l*o)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(e=-e),s=t*t+e*e,!s)return i.x=this.long0,i.y=this.lat0,i;u=1-s/this.qp,this.mode===this.S_POLE&&(u=-u)}n=Math.atan2(t,e),r=GD(Math.asin(u),this.apa)}return i.x=ce(this.long0+n),i.y=r,i}var xD=.3333333333333333,MD=.17222222222222222,TD=.10257936507936508,bD=.06388888888888888,RD=.0664021164021164,OD=.016415012942191543;function LD(i){var t,e=[];return e[0]=i*xD,t=i*i,e[0]+=t*MD,e[1]=t*bD,t*=i,e[0]+=t*TD,e[1]+=t*RD,e[2]=t*OD,e}function GD(i,t){var e=i+i;return i+t[0]*Math.sin(e)+t[1]*Math.sin(e+e)+t[2]*Math.sin(e+e+e)}var kD=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const DD={init:wD,forward:SD,inverse:PD,names:kD,S_POLE:_D,N_POLE:CD,EQUIT:ID,OBLIQ:ED};function Fo(i){return Math.abs(i)>1&&(i=i>1?1:-1),Math.asin(i)}function ND(){Math.abs(this.lat1+this.lat2)<ae||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=br(this.e3,this.sin_po,this.cos_po),this.qs1=Lo(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=br(this.e3,this.sin_po,this.cos_po),this.qs2=Lo(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Lo(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>ae?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function FD(i){var t=i.x,e=i.y;this.sin_phi=Math.sin(e),this.cos_phi=Math.cos(e);var n=Lo(this.e3,this.sin_phi,this.cos_phi),r=this.a*Math.sqrt(this.c-this.ns0*n)/this.ns0,o=this.ns0*ce(t-this.long0),a=r*Math.sin(o)+this.x0,s=this.rh-r*Math.cos(o)+this.y0;return i.x=a,i.y=s,i}function UD(i){var t,e,n,r,o,a;return i.x-=this.x0,i.y=this.rh-i.y+this.y0,this.ns0>=0?(t=Math.sqrt(i.x*i.x+i.y*i.y),n=1):(t=-Math.sqrt(i.x*i.x+i.y*i.y),n=-1),r=0,t!==0&&(r=Math.atan2(n*i.x,n*i.y)),n=t*this.ns0/this.a,this.sphere?a=Math.asin((this.c-n*n)/(2*this.ns0)):(e=(this.c-n*n)/this.ns0,a=this.phi1z(this.e3,e)),o=ce(r/this.ns0+this.long0),i.x=o,i.y=a,i}function BD(i,t){var e,n,r,o,a,s=Fo(.5*t);if(i<ae)return s;for(var l=i*i,u=1;u<=25;u++)if(e=Math.sin(s),n=Math.cos(s),r=i*e,o=1-r*r,a=.5*o*o/n*(t/(1-l)-e/o+.5/i*Math.log((1-r)/(1+r))),s=s+a,Math.abs(a)<=1e-7)return s;return null}var jD=["Albers_Conic_Equal_Area","Albers","aea"];const zD={init:ND,forward:FD,inverse:UD,names:jD,phi1z:BD};function VD(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function WD(i){var t,e,n,r,o,a,s,l,u=i.x,c=i.y;return n=ce(u-this.long0),t=Math.sin(c),e=Math.cos(c),r=Math.cos(n),a=this.sin_p14*t+this.cos_p14*e*r,o=1,a>0||Math.abs(a)<=ae?(s=this.x0+this.a*o*e*Math.sin(n)/a,l=this.y0+this.a*o*(this.cos_p14*t-this.sin_p14*e*r)/a):(s=this.x0+this.infinity_dist*e*Math.sin(n),l=this.y0+this.infinity_dist*(this.cos_p14*t-this.sin_p14*e*r)),i.x=s,i.y=l,i}function YD(i){var t,e,n,r,o,a;return i.x=(i.x-this.x0)/this.a,i.y=(i.y-this.y0)/this.a,i.x/=this.k0,i.y/=this.k0,(t=Math.sqrt(i.x*i.x+i.y*i.y))?(r=Math.atan2(t,this.rc),e=Math.sin(r),n=Math.cos(r),a=Fo(n*this.sin_p14+i.y*e*this.cos_p14/t),o=Math.atan2(i.x*e,t*this.cos_p14*n-i.y*this.sin_p14*e),o=ce(this.long0+o)):(a=this.phic0,o=0),i.x=o,i.y=a,i}var HD=["gnom"];const qD={init:VD,forward:WD,inverse:YD,names:HD};function XD(i,t){var e=1-(1-i*i)/(2*i)*Math.log((1-i)/(1+i));if(Math.abs(Math.abs(t)-e)<1e-6)return t<0?-1*X:X;for(var n=Math.asin(.5*t),r,o,a,s,l=0;l<30;l++)if(o=Math.sin(n),a=Math.cos(n),s=i*o,r=Math.pow(1-s*s,2)/(2*a)*(t/(1-i*i)-o/(1-s*s)+.5/i*Math.log((1-s)/(1+s))),n+=r,Math.abs(r)<=1e-10)return n;return NaN}function ZD(){this.sphere||(this.k0=br(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function KD(i){var t=i.x,e=i.y,n,r,o=ce(t-this.long0);if(this.sphere)n=this.x0+this.a*o*Math.cos(this.lat_ts),r=this.y0+this.a*Math.sin(e)/Math.cos(this.lat_ts);else{var a=Lo(this.e,Math.sin(e));n=this.x0+this.a*this.k0*o,r=this.y0+this.a*a*.5/this.k0}return i.x=n,i.y=r,i}function JD(i){i.x-=this.x0,i.y-=this.y0;var t,e;return this.sphere?(t=ce(this.long0+i.x/this.a/Math.cos(this.lat_ts)),e=Math.asin(i.y/this.a*Math.cos(this.lat_ts))):(e=XD(this.e,2*i.y*this.k0/this.a),t=ce(this.long0+i.x/(this.a*this.k0))),i.x=t,i.y=e,i}var QD=["cea"];const $D={init:ZD,forward:KD,inverse:JD,names:QD};function e3(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function t3(i){var t=i.x,e=i.y,n=ce(t-this.long0),r=$s(e-this.lat0);return i.x=this.x0+this.a*n*this.rc,i.y=this.y0+this.a*r,i}function i3(i){var t=i.x,e=i.y;return i.x=ce(this.long0+(t-this.x0)/(this.a*this.rc)),i.y=$s(this.lat0+(e-this.y0)/this.a),i}var n3=["Equirectangular","Equidistant_Cylindrical","eqc"];const r3={init:e3,forward:t3,inverse:i3,names:n3};var Hv=20;function o3(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Cu(this.es),this.e1=Iu(this.es),this.e2=Eu(this.es),this.e3=wu(this.es),this.ml0=this.a*en(this.e0,this.e1,this.e2,this.e3,this.lat0)}function a3(i){var t=i.x,e=i.y,n,r,o,a=ce(t-this.long0);if(o=a*Math.sin(e),this.sphere)Math.abs(e)<=ae?(n=this.a*a,r=-1*this.a*this.lat0):(n=this.a*Math.sin(o)/Math.tan(e),r=this.a*($s(e-this.lat0)+(1-Math.cos(o))/Math.tan(e)));else if(Math.abs(e)<=ae)n=this.a*a,r=-1*this.ml0;else{var s=zs(this.a,this.e,Math.sin(e))/Math.tan(e);n=s*Math.sin(o),r=this.a*en(this.e0,this.e1,this.e2,this.e3,e)-this.ml0+s*(1-Math.cos(o))}return i.x=n+this.x0,i.y=r+this.y0,i}function s3(i){var t,e,n,r,o,a,s,l,u;if(n=i.x-this.x0,r=i.y-this.y0,this.sphere)if(Math.abs(r+this.a*this.lat0)<=ae)t=ce(n/this.a+this.long0),e=0;else{a=this.lat0+r/this.a,s=n*n/this.a/this.a+a*a,l=a;var c;for(o=Hv;o;--o)if(c=Math.tan(l),u=-1*(a*(l*c+1)-l-.5*(l*l+s)*c)/((l-a)/c-1),l+=u,Math.abs(u)<=ae){e=l;break}t=ce(this.long0+Math.asin(n*Math.tan(l)/this.a)/Math.sin(e))}else if(Math.abs(r+this.ml0)<=ae)e=0,t=ce(this.long0+n/this.a);else{a=(this.ml0+r)/this.a,s=n*n/this.a/this.a+a*a,l=a;var h,d,p,f,g;for(o=Hv;o;--o)if(g=this.e*Math.sin(l),h=Math.sqrt(1-g*g)*Math.tan(l),d=this.a*en(this.e0,this.e1,this.e2,this.e3,l),p=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),f=d/this.a,u=(a*(h*f+1)-f-.5*h*(f*f+s))/(this.es*Math.sin(2*l)*(f*f+s-2*a*f)/(4*h)+(a-f)*(h*p-2/Math.sin(2*l))-p),l-=u,Math.abs(u)<=ae){e=l;break}h=Math.sqrt(1-this.es*Math.pow(Math.sin(e),2))*Math.tan(e),t=ce(this.long0+Math.asin(n*h/this.a)/Math.sin(e))}return i.x=t,i.y=e,i}var l3=["Polyconic","poly"];const u3={init:o3,forward:a3,inverse:s3,names:l3};function c3(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function h3(i){var t,e=i.x,n=i.y,r=n-this.lat0,o=e-this.long0,a=r/Nl*1e-5,s=o,l=1,u=0;for(t=1;t<=10;t++)l=l*a,u=u+this.A[t]*l;var c=u,h=s,d=1,p=0,f,g,v=0,y=0;for(t=1;t<=6;t++)f=d*c-p*h,g=p*c+d*h,d=f,p=g,v=v+this.B_re[t]*d-this.B_im[t]*p,y=y+this.B_im[t]*d+this.B_re[t]*p;return i.x=y*this.a+this.x0,i.y=v*this.a+this.y0,i}function p3(i){var t,e=i.x,n=i.y,r=e-this.x0,o=n-this.y0,a=o/this.a,s=r/this.a,l=1,u=0,c,h,d=0,p=0;for(t=1;t<=6;t++)c=l*a-u*s,h=u*a+l*s,l=c,u=h,d=d+this.C_re[t]*l-this.C_im[t]*u,p=p+this.C_im[t]*l+this.C_re[t]*u;for(var f=0;f<this.iterations;f++){var g=d,v=p,y,m,A=a,_=s;for(t=2;t<=6;t++)y=g*d-v*p,m=v*d+g*p,g=y,v=m,A=A+(t-1)*(this.B_re[t]*g-this.B_im[t]*v),_=_+(t-1)*(this.B_im[t]*g+this.B_re[t]*v);g=1,v=0;var C=this.B_re[1],I=this.B_im[1];for(t=2;t<=6;t++)y=g*d-v*p,m=v*d+g*p,g=y,v=m,C=C+t*(this.B_re[t]*g-this.B_im[t]*v),I=I+t*(this.B_im[t]*g+this.B_re[t]*v);var E=C*C+I*I;d=(A*C+_*I)/E,p=(_*C-A*I)/E}var w=d,S=p,x=1,T=0;for(t=1;t<=9;t++)x=x*w,T=T+this.D[t]*x;var L=this.lat0+T*Nl*1e5,G=this.long0+S;return i.x=G,i.y=L,i}var f3=["New_Zealand_Map_Grid","nzmg"];const g3={init:c3,forward:h3,inverse:p3,names:f3};function v3(){}function m3(i){var t=i.x,e=i.y,n=ce(t-this.long0),r=this.x0+this.a*n,o=this.y0+this.a*Math.log(Math.tan(Math.PI/4+e/2.5))*1.25;return i.x=r,i.y=o,i}function y3(i){i.x-=this.x0,i.y-=this.y0;var t=ce(this.long0+i.x/this.a),e=2.5*(Math.atan(Math.exp(.8*i.y/this.a))-Math.PI/4);return i.x=t,i.y=e,i}var A3=["Miller_Cylindrical","mill"];const _3={init:v3,forward:m3,inverse:y3,names:A3};var C3=20;function I3(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=x_(this.es)}function E3(i){var t,e,n=i.x,r=i.y;if(n=ce(n-this.long0),this.sphere){if(!this.m)r=this.n!==1?Math.asin(this.n*Math.sin(r)):r;else for(var o=this.n*Math.sin(r),a=C3;a;--a){var s=(this.m*r+Math.sin(r)-o)/(this.m+Math.cos(r));if(r-=s,Math.abs(s)<ae)break}t=this.a*this.C_x*n*(this.m+Math.cos(r)),e=this.a*this.C_y*r}else{var l=Math.sin(r),u=Math.cos(r);e=this.a*Qh(r,l,u,this.en),t=this.a*n*u/Math.sqrt(1-this.es*l*l)}return i.x=t,i.y=e,i}function w3(i){var t,e,n,r;return i.x-=this.x0,n=i.x/this.a,i.y-=this.y0,t=i.y/this.a,this.sphere?(t/=this.C_y,n=n/(this.C_x*(this.m+Math.cos(t))),this.m?t=Fo((this.m*t+Math.sin(t))/this.n):this.n!==1&&(t=Fo(Math.sin(t)/this.n)),n=ce(n+this.long0),t=$s(t)):(t=M_(i.y/this.a,this.es,this.en),r=Math.abs(t),r<X?(r=Math.sin(t),e=this.long0+i.x*Math.sqrt(1-this.es*r*r)/(this.a*Math.cos(t)),n=ce(e)):r-ae<X&&(n=this.long0)),i.x=n,i.y=t,i}var S3=["Sinusoidal","sinu"];const P3={init:I3,forward:E3,inverse:w3,names:S3};function x3(){}function M3(i){for(var t=i.x,e=i.y,n=ce(t-this.long0),r=e,o=Math.PI*Math.sin(e);;){var a=-(r+Math.sin(r)-o)/(1+Math.cos(r));if(r+=a,Math.abs(a)<ae)break}r/=2,Math.PI/2-Math.abs(e)<ae&&(n=0);var s=.900316316158*this.a*n*Math.cos(r)+this.x0,l=1.4142135623731*this.a*Math.sin(r)+this.y0;return i.x=s,i.y=l,i}function T3(i){var t,e;i.x-=this.x0,i.y-=this.y0,e=i.y/(1.4142135623731*this.a),Math.abs(e)>.999999999999&&(e=.999999999999),t=Math.asin(e);var n=ce(this.long0+i.x/(.900316316158*this.a*Math.cos(t)));n<-Math.PI&&(n=-Math.PI),n>Math.PI&&(n=Math.PI),e=(2*t+Math.sin(2*t))/Math.PI,Math.abs(e)>1&&(e=1);var r=Math.asin(e);return i.x=n,i.y=r,i}var b3=["Mollweide","moll"];const R3={init:x3,forward:M3,inverse:T3,names:b3};function O3(){Math.abs(this.lat1+this.lat2)<ae||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Cu(this.es),this.e1=Iu(this.es),this.e2=Eu(this.es),this.e3=wu(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=br(this.e,this.sinphi,this.cosphi),this.ml1=en(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<ae?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=br(this.e,this.sinphi,this.cosphi),this.ml2=en(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=en(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function L3(i){var t=i.x,e=i.y,n;if(this.sphere)n=this.a*(this.g-e);else{var r=en(this.e0,this.e1,this.e2,this.e3,e);n=this.a*(this.g-r)}var o=this.ns*ce(t-this.long0),a=this.x0+n*Math.sin(o),s=this.y0+this.rh-n*Math.cos(o);return i.x=a,i.y=s,i}function G3(i){i.x-=this.x0,i.y=this.rh-i.y+this.y0;var t,e,n,r;this.ns>=0?(e=Math.sqrt(i.x*i.x+i.y*i.y),t=1):(e=-Math.sqrt(i.x*i.x+i.y*i.y),t=-1);var o=0;if(e!==0&&(o=Math.atan2(t*i.x,t*i.y)),this.sphere)return r=ce(this.long0+o/this.ns),n=$s(this.g-e/this.a),i.x=r,i.y=n,i;var a=this.g-e/this.a;return n=hh(a,this.e0,this.e1,this.e2,this.e3),r=ce(this.long0+o/this.ns),i.x=r,i.y=n,i}var k3=["Equidistant_Conic","eqdc"];const D3={init:O3,forward:L3,inverse:G3,names:k3};function N3(){this.R=this.a}function F3(i){var t=i.x,e=i.y,n=ce(t-this.long0),r,o;Math.abs(e)<=ae&&(r=this.x0+this.R*n,o=this.y0);var a=Fo(2*Math.abs(e/Math.PI));(Math.abs(n)<=ae||Math.abs(Math.abs(e)-X)<=ae)&&(r=this.x0,e>=0?o=this.y0+Math.PI*this.R*Math.tan(.5*a):o=this.y0+Math.PI*this.R*-Math.tan(.5*a));var s=.5*Math.abs(Math.PI/n-n/Math.PI),l=s*s,u=Math.sin(a),c=Math.cos(a),h=c/(u+c-1),d=h*h,p=h*(2/u-1),f=p*p,g=Math.PI*this.R*(s*(h-f)+Math.sqrt(l*(h-f)*(h-f)-(f+l)*(d-f)))/(f+l);n<0&&(g=-g),r=this.x0+g;var v=l+h;return g=Math.PI*this.R*(p*v-s*Math.sqrt((f+l)*(l+1)-v*v))/(f+l),e>=0?o=this.y0+g:o=this.y0-g,i.x=r,i.y=o,i}function U3(i){var t,e,n,r,o,a,s,l,u,c,h,d,p;return i.x-=this.x0,i.y-=this.y0,h=Math.PI*this.R,n=i.x/h,r=i.y/h,o=n*n+r*r,a=-Math.abs(r)*(1+o),s=a-2*r*r+n*n,l=-2*a+1+2*r*r+o*o,p=r*r/l+(2*s*s*s/l/l/l-9*a*s/l/l)/27,u=(a-s*s/3/l)/l,c=2*Math.sqrt(-u/3),h=3*p/u/c,Math.abs(h)>1&&(h>=0?h=1:h=-1),d=Math.acos(h)/3,i.y>=0?e=(-c*Math.cos(d+Math.PI/3)-s/3/l)*Math.PI:e=-(-c*Math.cos(d+Math.PI/3)-s/3/l)*Math.PI,Math.abs(n)<ae?t=this.long0:t=ce(this.long0+Math.PI*(o-1+Math.sqrt(1+2*(n*n-r*r)+o*o))/2/n),i.x=t,i.y=e,i}var B3=["Van_der_Grinten_I","VanDerGrinten","vandg"];const j3={init:N3,forward:F3,inverse:U3,names:B3};function z3(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function V3(i){var t=i.x,e=i.y,n=Math.sin(i.y),r=Math.cos(i.y),o=ce(t-this.long0),a,s,l,u,c,h,d,p,f,g,v,y,m,A,_,C,I,E,w,S,x,T,L;return this.sphere?Math.abs(this.sin_p12-1)<=ae?(i.x=this.x0+this.a*(X-e)*Math.sin(o),i.y=this.y0-this.a*(X-e)*Math.cos(o),i):Math.abs(this.sin_p12+1)<=ae?(i.x=this.x0+this.a*(X+e)*Math.sin(o),i.y=this.y0+this.a*(X+e)*Math.cos(o),i):(E=this.sin_p12*n+this.cos_p12*r*Math.cos(o),C=Math.acos(E),I=C?C/Math.sin(C):1,i.x=this.x0+this.a*I*r*Math.sin(o),i.y=this.y0+this.a*I*(this.cos_p12*n-this.sin_p12*r*Math.cos(o)),i):(a=Cu(this.es),s=Iu(this.es),l=Eu(this.es),u=wu(this.es),Math.abs(this.sin_p12-1)<=ae?(c=this.a*en(a,s,l,u,X),h=this.a*en(a,s,l,u,e),i.x=this.x0+(c-h)*Math.sin(o),i.y=this.y0-(c-h)*Math.cos(o),i):Math.abs(this.sin_p12+1)<=ae?(c=this.a*en(a,s,l,u,X),h=this.a*en(a,s,l,u,e),i.x=this.x0+(c+h)*Math.sin(o),i.y=this.y0+(c+h)*Math.cos(o),i):(d=n/r,p=zs(this.a,this.e,this.sin_p12),f=zs(this.a,this.e,n),g=Math.atan((1-this.es)*d+this.es*p*this.sin_p12/(f*r)),v=Math.atan2(Math.sin(o),this.cos_p12*Math.tan(g)-this.sin_p12*Math.cos(o)),v===0?w=Math.asin(this.cos_p12*Math.sin(g)-this.sin_p12*Math.cos(g)):Math.abs(Math.abs(v)-Math.PI)<=ae?w=-Math.asin(this.cos_p12*Math.sin(g)-this.sin_p12*Math.cos(g)):w=Math.asin(Math.sin(o)*Math.cos(g)/Math.sin(v)),y=this.e*this.sin_p12/Math.sqrt(1-this.es),m=this.e*this.cos_p12*Math.cos(v)/Math.sqrt(1-this.es),A=y*m,_=m*m,S=w*w,x=S*w,T=x*w,L=T*w,C=p*w*(1-S*_*(1-_)/6+x/8*A*(1-2*_)+T/120*(_*(4-7*_)-3*y*y*(1-7*_))-L/48*A),i.x=this.x0+C*Math.sin(v),i.y=this.y0+C*Math.cos(v),i))}function W3(i){i.x-=this.x0,i.y-=this.y0;var t,e,n,r,o,a,s,l,u,c,h,d,p,f,g,v,y,m,A,_,C,I,E,w;return this.sphere?(t=Math.sqrt(i.x*i.x+i.y*i.y),t>2*X*this.a?void 0:(e=t/this.a,n=Math.sin(e),r=Math.cos(e),o=this.long0,Math.abs(t)<=ae?a=this.lat0:(a=Fo(r*this.sin_p12+i.y*n*this.cos_p12/t),s=Math.abs(this.lat0)-X,Math.abs(s)<=ae?this.lat0>=0?o=ce(this.long0+Math.atan2(i.x,-i.y)):o=ce(this.long0-Math.atan2(-i.x,i.y)):o=ce(this.long0+Math.atan2(i.x*n,t*this.cos_p12*r-i.y*this.sin_p12*n))),i.x=o,i.y=a,i)):(l=Cu(this.es),u=Iu(this.es),c=Eu(this.es),h=wu(this.es),Math.abs(this.sin_p12-1)<=ae?(d=this.a*en(l,u,c,h,X),t=Math.sqrt(i.x*i.x+i.y*i.y),p=d-t,a=hh(p/this.a,l,u,c,h),o=ce(this.long0+Math.atan2(i.x,-1*i.y)),i.x=o,i.y=a,i):Math.abs(this.sin_p12+1)<=ae?(d=this.a*en(l,u,c,h,X),t=Math.sqrt(i.x*i.x+i.y*i.y),p=t-d,a=hh(p/this.a,l,u,c,h),o=ce(this.long0+Math.atan2(i.x,i.y)),i.x=o,i.y=a,i):(t=Math.sqrt(i.x*i.x+i.y*i.y),v=Math.atan2(i.x,i.y),f=zs(this.a,this.e,this.sin_p12),y=Math.cos(v),m=this.e*this.cos_p12*y,A=-m*m/(1-this.es),_=3*this.es*(1-A)*this.sin_p12*this.cos_p12*y/(1-this.es),C=t/f,I=C-A*(1+A)*Math.pow(C,3)/6-_*(1+3*A)*Math.pow(C,4)/24,E=1-A*I*I/2-C*I*I*I/6,g=Math.asin(this.sin_p12*Math.cos(I)+this.cos_p12*Math.sin(I)*y),o=ce(this.long0+Math.asin(Math.sin(v)*Math.sin(I)/Math.cos(g))),w=Math.sin(g),a=Math.atan2((w-this.es*E*this.sin_p12)*Math.tan(g),w*(1-this.es)),i.x=o,i.y=a,i))}var Y3=["Azimuthal_Equidistant","aeqd"];const H3={init:z3,forward:V3,inverse:W3,names:Y3};function q3(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function X3(i){var t,e,n,r,o,a,s,l,u=i.x,c=i.y;return n=ce(u-this.long0),t=Math.sin(c),e=Math.cos(c),r=Math.cos(n),a=this.sin_p14*t+this.cos_p14*e*r,o=1,(a>0||Math.abs(a)<=ae)&&(s=this.a*o*e*Math.sin(n),l=this.y0+this.a*o*(this.cos_p14*t-this.sin_p14*e*r)),i.x=s,i.y=l,i}function Z3(i){var t,e,n,r,o,a,s;return i.x-=this.x0,i.y-=this.y0,t=Math.sqrt(i.x*i.x+i.y*i.y),e=Fo(t/this.a),n=Math.sin(e),r=Math.cos(e),a=this.long0,Math.abs(t)<=ae?(s=this.lat0,i.x=a,i.y=s,i):(s=Fo(r*this.sin_p14+i.y*n*this.cos_p14/t),o=Math.abs(this.lat0)-X,Math.abs(o)<=ae?(this.lat0>=0?a=ce(this.long0+Math.atan2(i.x,-i.y)):a=ce(this.long0-Math.atan2(-i.x,i.y)),i.x=a,i.y=s,i):(a=ce(this.long0+Math.atan2(i.x*n,t*this.cos_p14*r-i.y*this.sin_p14*n)),i.x=a,i.y=s,i))}var K3=["ortho"];const J3={init:q3,forward:X3,inverse:Z3,names:K3};var Dt={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},mt={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function Q3(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=X-vt/2?this.face=Dt.TOP:this.lat0<=-(X-vt/2)?this.face=Dt.BOTTOM:Math.abs(this.long0)<=vt?this.face=Dt.FRONT:Math.abs(this.long0)<=X+vt?this.face=this.long0>0?Dt.RIGHT:Dt.LEFT:this.face=Dt.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function $3(i){var t={x:0,y:0},e,n,r,o,a,s,l={value:0};if(i.x-=this.long0,this.es!==0?e=Math.atan(this.one_minus_f_squared*Math.tan(i.y)):e=i.y,n=i.x,this.face===Dt.TOP)o=X-e,n>=vt&&n<=X+vt?(l.value=mt.AREA_0,r=n-X):n>X+vt||n<=-(X+vt)?(l.value=mt.AREA_1,r=n>0?n-Zt:n+Zt):n>-(X+vt)&&n<=-vt?(l.value=mt.AREA_2,r=n+X):(l.value=mt.AREA_3,r=n);else if(this.face===Dt.BOTTOM)o=X+e,n>=vt&&n<=X+vt?(l.value=mt.AREA_0,r=-n+X):n<vt&&n>=-vt?(l.value=mt.AREA_1,r=-n):n<-vt&&n>=-(X+vt)?(l.value=mt.AREA_2,r=-n-X):(l.value=mt.AREA_3,r=n>0?-n+Zt:-n-Zt);else{var u,c,h,d,p,f,g;this.face===Dt.RIGHT?n=_s(n,+X):this.face===Dt.BACK?n=_s(n,+Zt):this.face===Dt.LEFT&&(n=_s(n,-X)),d=Math.sin(e),p=Math.cos(e),f=Math.sin(n),g=Math.cos(n),u=p*g,c=p*f,h=d,this.face===Dt.FRONT?(o=Math.acos(u),r=ec(o,h,c,l)):this.face===Dt.RIGHT?(o=Math.acos(c),r=ec(o,h,-u,l)):this.face===Dt.BACK?(o=Math.acos(-u),r=ec(o,h,-c,l)):this.face===Dt.LEFT?(o=Math.acos(-c),r=ec(o,h,u,l)):(o=r=0,l.value=mt.AREA_0)}return s=Math.atan(12/Zt*(r+Math.acos(Math.sin(r)*Math.cos(vt))-X)),a=Math.sqrt((1-Math.cos(o))/(Math.cos(s)*Math.cos(s))/(1-Math.cos(Math.atan(1/Math.cos(r))))),l.value===mt.AREA_1?s+=X:l.value===mt.AREA_2?s+=Zt:l.value===mt.AREA_3&&(s+=1.5*Zt),t.x=a*Math.cos(s),t.y=a*Math.sin(s),t.x=t.x*this.a+this.x0,t.y=t.y*this.a+this.y0,i.x=t.x,i.y=t.y,i}function eN(i){var t={lam:0,phi:0},e,n,r,o,a,s,l,u,c,h={value:0};if(i.x=(i.x-this.x0)/this.a,i.y=(i.y-this.y0)/this.a,n=Math.atan(Math.sqrt(i.x*i.x+i.y*i.y)),e=Math.atan2(i.y,i.x),i.x>=0&&i.x>=Math.abs(i.y)?h.value=mt.AREA_0:i.y>=0&&i.y>=Math.abs(i.x)?(h.value=mt.AREA_1,e-=X):i.x<0&&-i.x>=Math.abs(i.y)?(h.value=mt.AREA_2,e=e<0?e+Zt:e-Zt):(h.value=mt.AREA_3,e+=X),c=Zt/12*Math.tan(e),a=Math.sin(c)/(Math.cos(c)-1/Math.sqrt(2)),s=Math.atan(a),r=Math.cos(e),o=Math.tan(n),l=1-r*r*o*o*(1-Math.cos(Math.atan(1/Math.cos(s)))),l<-1?l=-1:l>1&&(l=1),this.face===Dt.TOP)u=Math.acos(l),t.phi=X-u,h.value===mt.AREA_0?t.lam=s+X:h.value===mt.AREA_1?t.lam=s<0?s+Zt:s-Zt:h.value===mt.AREA_2?t.lam=s-X:t.lam=s;else if(this.face===Dt.BOTTOM)u=Math.acos(l),t.phi=u-X,h.value===mt.AREA_0?t.lam=-s+X:h.value===mt.AREA_1?t.lam=-s:h.value===mt.AREA_2?t.lam=-s-X:t.lam=s<0?-s-Zt:-s+Zt;else{var d,p,f;d=l,c=d*d,c>=1?f=0:f=Math.sqrt(1-c)*Math.sin(s),c+=f*f,c>=1?p=0:p=Math.sqrt(1-c),h.value===mt.AREA_1?(c=p,p=-f,f=c):h.value===mt.AREA_2?(p=-p,f=-f):h.value===mt.AREA_3&&(c=p,p=f,f=-c),this.face===Dt.RIGHT?(c=d,d=-p,p=c):this.face===Dt.BACK?(d=-d,p=-p):this.face===Dt.LEFT&&(c=d,d=p,p=-c),t.phi=Math.acos(-f)-X,t.lam=Math.atan2(p,d),this.face===Dt.RIGHT?t.lam=_s(t.lam,-X):this.face===Dt.BACK?t.lam=_s(t.lam,-Zt):this.face===Dt.LEFT&&(t.lam=_s(t.lam,+X))}if(this.es!==0){var g,v,y;g=t.phi<0?1:0,v=Math.tan(t.phi),y=this.b/Math.sqrt(v*v+this.one_minus_f_squared),t.phi=Math.atan(Math.sqrt(this.a*this.a-y*y)/(this.one_minus_f*y)),g&&(t.phi=-t.phi)}return t.lam+=this.long0,i.x=t.lam,i.y=t.phi,i}function ec(i,t,e,n){var r;return i<ae?(n.value=mt.AREA_0,r=0):(r=Math.atan2(t,e),Math.abs(r)<=vt?n.value=mt.AREA_0:r>vt&&r<=X+vt?(n.value=mt.AREA_1,r-=X):r>X+vt||r<=-(X+vt)?(n.value=mt.AREA_2,r=r>=0?r-Zt:r+Zt):(n.value=mt.AREA_3,r+=X)),r}function _s(i,t){var e=i+t;return e<-Zt?e+=au:e>+Zt&&(e-=au),e}var tN=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const iN={init:Q3,forward:$3,inverse:eN,names:tN};var Zp=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Cl=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],R_=.8487,O_=1.3523,L_=yr/5,nN=1/L_,ls=18,dh=function(i,t){return i[0]+t*(i[1]+t*(i[2]+t*i[3]))},rN=function(i,t){return i[1]+t*(2*i[2]+t*3*i[3])};function oN(i,t,e,n){for(var r=t;n;--n){var o=i(r);if(r-=o,Math.abs(o)<e)break}return r}function aN(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function sN(i){var t=ce(i.x-this.long0),e=Math.abs(i.y),n=Math.floor(e*L_);n<0?n=0:n>=ls&&(n=ls-1),e=yr*(e-nN*n);var r={x:dh(Zp[n],e)*t,y:dh(Cl[n],e)};return i.y<0&&(r.y=-r.y),r.x=r.x*this.a*R_+this.x0,r.y=r.y*this.a*O_+this.y0,r}function lN(i){var t={x:(i.x-this.x0)/(this.a*R_),y:Math.abs(i.y-this.y0)/(this.a*O_)};if(t.y>=1)t.x/=Zp[ls][0],t.y=i.y<0?-X:X;else{var e=Math.floor(t.y*ls);for(e<0?e=0:e>=ls&&(e=ls-1);;)if(Cl[e][0]>t.y)--e;else if(Cl[e+1][0]<=t.y)++e;else break;var n=Cl[e],r=5*(t.y-n[0])/(Cl[e+1][0]-n[0]);r=oN(function(o){return(dh(n,o)-t.y)/rN(n,o)},r,ae,100),t.x/=dh(Zp[e],r),t.y=(5*e+r)*Mi,i.y<0&&(t.y=-t.y)}return t.x=ce(t.x+this.long0),t}var uN=["Robinson","robin"];const cN={init:aN,forward:sN,inverse:lN,names:uN};function hN(){this.name="geocent"}function dN(i){var t=y_(i,this.es,this.a);return t}function pN(i){var t=A_(i,this.es,this.a,this.b);return t}var fN=["Geocentric","geocentric","geocent","Geocent"];const gN={init:hN,forward:dN,inverse:pN,names:fN};var Ui={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},ul={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function vN(){if(Object.keys(ul).forEach((function(e){if(typeof this[e]>"u")this[e]=ul[e].def;else{if(ul[e].num&&isNaN(this[e]))throw new Error("Invalid parameter value, must be numeric "+e+" = "+this[e]);ul[e].num&&(this[e]=parseFloat(this[e]))}ul[e].degrees&&(this[e]=this[e]*Mi)}).bind(this)),Math.abs(Math.abs(this.lat0)-X)<ae?this.mode=this.lat0<0?Ui.S_POLE:Ui.N_POLE:Math.abs(this.lat0)<ae?this.mode=Ui.EQUIT:(this.mode=Ui.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var i=this.tilt,t=this.azi;this.cg=Math.cos(t),this.sg=Math.sin(t),this.cw=Math.cos(i),this.sw=Math.sin(i)}function mN(i){i.x-=this.long0;var t=Math.sin(i.y),e=Math.cos(i.y),n=Math.cos(i.x),r,o;switch(this.mode){case Ui.OBLIQ:o=this.sinph0*t+this.cosph0*e*n;break;case Ui.EQUIT:o=e*n;break;case Ui.S_POLE:o=-t;break;case Ui.N_POLE:o=t;break}switch(o=this.pn1/(this.p-o),r=o*e*Math.sin(i.x),this.mode){case Ui.OBLIQ:o*=this.cosph0*t-this.sinph0*e*n;break;case Ui.EQUIT:o*=t;break;case Ui.N_POLE:o*=-(e*n);break;case Ui.S_POLE:o*=e*n;break}var a,s;return a=o*this.cg+r*this.sg,s=1/(a*this.sw*this.h1+this.cw),r=(r*this.cg-o*this.sg)*this.cw*s,o=a*s,i.x=r*this.a,i.y=o*this.a,i}function yN(i){i.x/=this.a,i.y/=this.a;var t={x:i.x,y:i.y},e,n,r;r=1/(this.pn1-i.y*this.sw),e=this.pn1*i.x*r,n=this.pn1*i.y*this.cw*r,i.x=e*this.cg+n*this.sg,i.y=n*this.cg-e*this.sg;var o=$h(i.x,i.y);if(Math.abs(o)<ae)t.x=0,t.y=i.y;else{var a,s;switch(s=1-o*o*this.pfact,s=(this.p-Math.sqrt(s))/(this.pn1/o+o/this.pn1),a=Math.sqrt(1-s*s),this.mode){case Ui.OBLIQ:t.y=Math.asin(a*this.sinph0+i.y*s*this.cosph0/o),i.y=(a-this.sinph0*Math.sin(t.y))*o,i.x*=s*this.cosph0;break;case Ui.EQUIT:t.y=Math.asin(i.y*s/o),i.y=a*o,i.x*=s;break;case Ui.N_POLE:t.y=Math.asin(a),i.y=-i.y;break;case Ui.S_POLE:t.y=-Math.asin(a);break}t.x=Math.atan2(i.x,i.y)}return i.x=t.x+this.long0,i.y=t.y,i}var AN=["Tilted_Perspective","tpers"];const _N={init:vN,forward:mN,inverse:yN,names:AN};function CN(i){i.Proj.projections.add(fc),i.Proj.projections.add(gc),i.Proj.projections.add(Rk),i.Proj.projections.add(jk),i.Proj.projections.add(qk),i.Proj.projections.add(Qk),i.Proj.projections.add(rD),i.Proj.projections.add(uD),i.Proj.projections.add(fD),i.Proj.projections.add(AD),i.Proj.projections.add(DD),i.Proj.projections.add(zD),i.Proj.projections.add(qD),i.Proj.projections.add($D),i.Proj.projections.add(r3),i.Proj.projections.add(u3),i.Proj.projections.add(g3),i.Proj.projections.add(_3),i.Proj.projections.add(P3),i.Proj.projections.add(R3),i.Proj.projections.add(D3),i.Proj.projections.add(j3),i.Proj.projections.add(H3),i.Proj.projections.add(J3),i.Proj.projections.add(iN),i.Proj.projections.add(cN),i.Proj.projections.add(gN),i.Proj.projections.add(_N)}qt.defaultDatum="WGS84";qt.Proj=Er;qt.WGS84=new qt.Proj("WGS84");qt.Point=js;qt.toPoint=__;qt.defs=Ji;qt.nadgrid=LG;qt.transform=ch;qt.mgrs=ZG;qt.version="__VERSION__";CN(qt);var IN=Ye.getLogger("CRS");function aa(i){const t=Object.keys(i.defs);IN.trace("proj. codes :",t);const e=t.length;let n,r;for(n=0;n<e;++n){const o=t[n];if(!Ee(o)){const a=i.defs(o);pf(new Ih({code:o,axisOrientation:a.axis,metersPerUnit:a.to_meter,units:a.units}))}}for(n=0;n<e;++n){const o=t[n],a=Ee(o);for(r=0;r<e;++r){const s=t[r],l=Ee(s);if(!vm(o,s))if(i.defs[o]===i.defs[s])pp([a,l]);else{const u=i(o,s);VI(a,l,u.forward,u.inverse)}}}}var $t={isLoaded:!1,get:function(i){if(!(i===""||i===null||typeof i>"u")){var t=i.split(":");if(t.length===2){var e=t[0],n=t[1];if(this.hasOwnProperty(e)&&this[e].hasOwnProperty(n))return this[e][n]}}},exist:function(i){if(i===""||i===null||typeof i>"u")return!1;var t=i.split(":");if(t.length!==2)return!1;var e=t[0],n=t[1];return!(!this.hasOwnProperty(e)||!this[e].hasOwnProperty(n))},load:function(i){if(!this.isLoaded){for(var t=["IGNF","EPSG","CRS"],e=0;e<t.length;e++){var n=t[e],r=this[n];for(var o in r)if(r.hasOwnProperty(o)){var a=n+":"+o;i.defs(a,this.get(a))}}this.isLoaded=!0}},loadByDefault:function(i){var t={EPSG:{2154:$t.EPSG[2154],27571:$t.EPSG[27571],27572:$t.EPSG[27572],27573:$t.EPSG[27573],27574:$t.EPSG[27574]},CRS:{84:$t.CRS[84]},IGNF:{LAMB93:$t.IGNF.LAMB93,LAMBE:$t.IGNF.LAMBE,LAMB1:$t.IGNF.LAMB1,LAMB2:$t.IGNF.LAMB2,LAMB3:$t.IGNF.LAMB3,LAMB4:$t.IGNF.LAMB4,RGF93G:$t.IGNF.RGF93G,WGS84G:$t.IGNF.WGS84G}};for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];for(var r in n)if(n.hasOwnProperty(r)){var o=e+":"+r;i.defs(o,n[r])}}},loadByName:function(i,t){if(!this.exist(t))return!1;try{i.defs(t,this.get(t))}catch{return!1}return!0},EPSG:{4978:"+proj=geocent +datum=WGS84 +units=m +no_defs ",3857:"+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs",3785:"+title=WGS 84 / Pseudo-Mercator (deprecated) +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs",4149:"+title=CH1903 +proj=longlat +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +no_defs ",4150:"+title=CH1903plus +proj=longlat +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +no_defs ",4151:"+title=CHTRF95 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4171:"+title=RGF93 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4230:"+title=ED50 +proj=longlat +ellps=intl +no_defs ",4235:"+title=Guyane Francaise +proj=longlat +ellps=intl +no_defs ",4258:"+title=ETRS89 +proj=longlat +ellps=GRS80 +no_defs ",4275:"+title=NTF +proj=longlat +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +no_defs ",4322:"+title=WGS 72 +proj=longlat +ellps=WGS72 +no_defs ",4326:"+title=WGS 84 +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs ",4467:"+proj=utm +zone=21 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",4470:"+proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4471:"+proj=utm +zone=38 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",4474:"+proj=utm +zone=38 +south +ellps=intl +towgs84=-382,-59,-262,0,0,0,0 +units=m +no_defs ",4558:"+proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4559:"+proj=utm +zone=20 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",4621:"+title=Fort Marigot +proj=longlat +ellps=intl +towgs84=137,248,-430,0,0,0,0 +no_defs ",4622:"+title=Guadeloupe 1948 +proj=longlat +ellps=intl +no_defs ",4623:"+title=CSG67 +proj=longlat +ellps=intl +towgs84=-186,230,110,0,0,0,0 +no_defs ",4624:"+title=RGFG95 +proj=longlat +ellps=GRS80 +towgs84=2,2,-2,0,0,0,0 +no_defs ",4625:"+title=Martinique 1938 +proj=longlat +ellps=intl +no_defs ",4626:"+title=Reunion 1947 +proj=longlat +ellps=intl +no_defs ",4627:"+title=RGR92 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4628:"+title=Tahiti 52 +proj=longlat +ellps=intl +towgs84=162,117,154,0,0,0,0 +no_defs ",4629:"+title=Tahaa 54 +proj=longlat +ellps=intl +no_defs ",4630:"+title=IGN72 Nuku Hiva +proj=longlat +ellps=intl +no_defs ",4632:"+title=Combani 1950 +proj=longlat +ellps=intl +towgs84=-382,-59,-262,0,0,0,0 +no_defs ",4633:"+title=IGN56 Lifou +proj=longlat +ellps=intl +no_defs ",4634:"+title=IGN72 Grand Terre +proj=longlat +ellps=intl +no_defs ",4637:"+title=Perroud 1950 +proj=longlat +ellps=intl +towgs84=325,154,172,0,0,0,0 +no_defs ",4638:"+title=Saint Pierre et Miquelon 1950 +proj=longlat +ellps=clrk66 +towgs84=30,430,368,0,0,0,0 +no_defs ",4640:"+title=RRAF 1991 +proj=longlat +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +no_defs ",4641:"+title=IGN53 Mare +proj=longlat +ellps=intl +no_defs ",4645:"+title=RGNC 1991 +proj=longlat +ellps=intl +towgs84=0,0,0,0,0,0,0 +no_defs ",4687:"+proj=longlat +ellps=GRS80 +no_defs ",4662:"+title=IGN72 Grande Terre +proj=longlat +ellps=intl +no_defs ",4689:"+title=IGN63 Hiva Oa +proj=longlat +ellps=intl +no_defs ",4690:"+title=Tahiti 79 +proj=longlat +ellps=intl +no_defs ",4691:"+title=Moorea 87 +proj=longlat +ellps=intl +towgs84=215.525,149.593,176.229,-3.2624,-1.692,-1.1571,10.4773 +no_defs ",4692:"+title=Maupiti 83 +proj=longlat +ellps=intl +towgs84=217.037,86.959,23.956,0,0,0,0 +no_defs ",4698:"+title=IGN 1962 Kerguelen +proj=longlat +ellps=intl +towgs84=145,-187,103,0,0,0,0 +no_defs ",4749:"+title=RGNC91-93 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4750:"+title=ST87 Ouvea +proj=longlat +ellps=WGS84 +towgs84=-56.263,16.136,-22.856,0,0,0,0 +no_defs ",4807:"+title=NTF (Paris) +proj=longlat +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +no_defs ",2056:"+title=CH1903+ / LV95 +proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +x_0=2600000 +y_0=1200000 +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +units=m +no_defs ",2154:"+title=RGF93 / Lambert-93 +proj=lcc +lat_1=49 +lat_2=44 +lat_0=46.5 +lon_0=3 +x_0=700000 +y_0=6600000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2213:"+title=ETRS89 / TM 30 NE +proj=tmerc +lat_0=0 +lon_0=30 +k=0.9996 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs ",2969:"+title=Fort Marigot / UTM zone 20N +proj=utm +zone=20 +ellps=intl +towgs84=137,248,-430,0,0,0,0 +units=m +no_defs ",2970:"+title=Guadeloupe 1948 / UTM zone 20N +proj=utm +zone=20 +ellps=intl +units=m +no_defs ",2971:"+title=CSG67 / UTM zone 22N +proj=utm +zone=22 +ellps=intl +towgs84=-186,230,110,0,0,0,0 +units=m +no_defs ",2972:"+title=RGFG95 / UTM zone 22N +proj=utm +zone=22 +ellps=GRS80 +towgs84=2,2,-2,0,0,0,0 +units=m +no_defs ",2973:"+title=Martinique 1938 / UTM zone 20N +proj=utm +zone=20 +ellps=intl +units=m +no_defs ",2975:"+title=RGR92 / UTM zone 40S +proj=utm +zone=40 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2976:"+title=Tahiti 52 / UTM zone 6S +proj=utm +zone=6 +south +ellps=intl +towgs84=162,117,154,0,0,0,0 +units=m +no_defs ",2977:"+title=Tahaa 54 / UTM zone 5S +proj=utm +zone=5 +south +ellps=intl +units=m +no_defs ",2978:"+title=IGN72 Nuku Hiva / UTM zone 7S +proj=utm +zone=7 +south +ellps=intl +units=m +no_defs ",2980:"+title=Combani 1950 / UTM zone 38S +proj=utm +zone=38 +south +ellps=intl +towgs84=-382,-59,-262,0,0,0,0 +units=m +no_defs ",2981:"+title=IGN56 Lifou / UTM zone 58S +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",2982:"+title=IGN72 Grand Terre / UTM zone 58S (deprecated) +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",2984:"+title=RGNC 1991 / Lambert New Caledonia (deprecated) +proj=lcc +lat_1=-20.66666666666667 +lat_2=-22.33333333333333 +lat_0=-21.5 +lon_0=166 +x_0=400000 +y_0=300000 +ellps=intl +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2986:"+title=Terre Adelie 1950 +proj=stere +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +lat_0=-90.000000000 +lon_0=140.000000000 +lat_ts=-67.000000000 +k=0.96027295 +x_0=300000.000 +y_0=-2299363.482 +units=m +no_defs",2987:"+title=Saint Pierre et Miquelon 1950 / UTM zone 21N +proj=utm +zone=21 +ellps=clrk66 +towgs84=30,430,368,0,0,0,0 +units=m +no_defs ",2989:"+title=RRAF 1991 / UTM zone 20N +proj=utm +zone=20 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2990:"+title=Reunion 1947 / TM Reunion (deprecated) +proj=tmerc +lat_0=-21.11666666666667 +lon_0=55.53333333333333 +k=1 +x_0=50000 +y_0=160000 +ellps=intl +units=m +no_defs ",2995:"+title=IGN53 Mare / UTM zone 58S +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",3038:"+proj=utm +zone=26 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3039:"+proj=utm +zone=27 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3040:"+proj=utm +zone=28 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3041:"+proj=utm +zone=29 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3045:"+proj=utm +zone=33 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3046:"+proj=utm +zone=34 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3047:"+proj=utm +zone=35 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3048:"+proj=utm +zone=36 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3049:"+proj=utm +zone=37 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3050:"+proj=utm +zone=38 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3051:"+proj=utm +zone=39 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3034:"+title=ETRS89 / ETRS-LCC +proj=lcc +lat_1=35 +lat_2=65 +lat_0=52 +lon_0=10 +x_0=4000000 +y_0=2800000 +ellps=GRS80 +units=m +no_defs ",3035:"+title=ETRS89 / ETRS-LAEA +proj=laea +lat_0=52 +lon_0=10 +x_0=4321000 +y_0=3210000 +ellps=GRS80 +units=m +no_defs ",3042:"+title=ETRS89 / ETRS-TM30 +proj=utm +zone=30 +ellps=GRS80 +units=m +no_defs ",3043:"+title=ETRS89 / ETRS-TM31 +proj=utm +zone=31 +ellps=GRS80 +units=m +no_defs ",3044:"+title=ETRS89 / ETRS-TM32 +proj=utm +zone=32 +ellps=GRS80 +units=m +no_defs ",25828:"+proj=utm +zone=28 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25829:"+proj=utm +zone=29 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25833:"+proj=utm +zone=33 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25834:"+proj=utm +zone=34 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25835:"+proj=utm +zone=35 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25836:"+proj=utm +zone=36 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25837:"+proj=utm +zone=37 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25838:"+proj=utm +zone=38 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3060:"+title=IGN72 Grande Terre / UTM zone 58S +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",3163:"+title=RGNC91-93 / Lambert New Caledonia +proj=lcc +lat_1=-20.66666666666667 +lat_2=-22.33333333333333 +lat_0=-21.5 +lon_0=166 +x_0=400000 +y_0=300000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3164:"+title=ST87 Ouvea / UTM zone 58S +proj=utm +zone=58 +south +ellps=WGS84 +towgs84=-56.263,16.136,-22.856,0,0,0,0 +units=m +no_defs ",3165:"+title=NEA74 Noumea / Noumea Lambert +proj=lcc +lat_1=-22.24469175 +lat_2=-22.29469175 +lat_0=-22.26969175 +lon_0=166.44242575 +x_0=0.66 +y_0=1.02 +ellps=intl +units=m +no_defs ",3166:"+title=NEA74 Noumea / Noumea Lambert 2 +proj=lcc +lat_1=-22.24472222222222 +lat_2=-22.29472222222222 +lat_0=-22.26972222222222 +lon_0=166.4425 +x_0=8.313000000000001 +y_0=-2.354 +ellps=intl +units=m +no_defs ",3169:"+title=RGNC91-93 / UTM zone 57S +proj=utm +zone=57 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3170:"+title=RGNC91-93 / UTM zone 58S +proj=utm +zone=58 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3171:"+title=RGNC91-93 / UTM zone 59S +proj=utm +zone=59 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3172:"+title=IGN53 Mare / UTM zone 59S +proj=utm +zone=59 +south +ellps=intl +units=m +no_defs ",3296:"+title=RGPF / UTM zone 5S +proj=utm +zone=5 +south +ellps=GRS80 +units=m +no_defs ",3297:"+title=RGPF / UTM zone 6S +proj=utm +zone=6 +south +ellps=GRS80 +units=m +no_defs ",3298:"+title=RGPF / UTM zone 7S +proj=utm +zone=7 +south +ellps=GRS80 +units=m +no_defs ",3299:"+title=RGPF / UTM zone 8S +proj=utm +zone=8 +south +ellps=GRS80 +units=m +no_defs ",3302:"+title=IGN63 Hiva Oa / UTM zone 7S +proj=utm +zone=7 +south +ellps=intl +units=m +no_defs ",3303:"+title=Fatu Iva 72 / UTM zone 7S +proj=utm +zone=7 +south +ellps=intl +towgs84=347.103,1078.12,2623.92,-33.8875,70.6773,-9.3943,186.074 +units=m +no_defs ",3304:"+title=Tahiti 79 / UTM zone 6S +proj=utm +zone=6 +south +ellps=intl +units=m +no_defs ",3305:"+title=Moorea 87 / UTM zone 6S +proj=utm +zone=6 +south +ellps=intl +towgs84=215.525,149.593,176.229,-3.2624,-1.692,-1.1571,10.4773 +units=m +no_defs ",3306:"+title=Maupiti 83 / UTM zone 5S +proj=utm +zone=5 +south +ellps=intl +towgs84=217.037,86.959,23.956,0,0,0,0 +units=m +no_defs ",3312:"+title=CSG67 / UTM zone 21N +proj=utm +zone=21 +ellps=intl +towgs84=-186,230,110,0,0,0,0 +units=m +no_defs ",3313:"+title=RGFG95 / UTM zone 21N +proj=utm +zone=21 +ellps=GRS80 +towgs84=2,2,-2,0,0,0,0 +units=m +no_defs ",3336:"+title=IGN 1962 Kerguelen / UTM zone 42S +proj=utm +zone=42 +south +ellps=intl +towgs84=145,-187,103,0,0,0,0 +units=m +no_defs ",3395:"+title=WGS 84 / World Mercator +proj=merc +lon_0=0 +k=1 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",3727:"+title=Reunion 1947 / TM Reunion +proj=tmerc +lat_0=-21.11666666666667 +lon_0=55.53333333333333 +k=1 +x_0=160000 +y_0=50000 +ellps=intl +units=m +no_defs ",21781:"+title=CH1903 / LV03 +proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +x_0=600000 +y_0=200000 +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +units=m +no_defs ",25830:"+title=ETRS89 / UTM zone 30N +proj=utm +zone=30 +ellps=GRS80 +units=m +no_defs ",25831:"+title=ETRS89 / UTM zone 31N +proj=utm +zone=31 +ellps=GRS80 +units=m +no_defs ",25832:"+title=ETRS89 / UTM zone 32N +proj=utm +zone=32 +ellps=GRS80 +units=m +no_defs ",27561:"+title=NTF (Paris) / Lambert Nord France +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27562:"+title=NTF (Paris) / Lambert Centre France +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27563:"+title=NTF (Paris) / Lambert Sud France +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27564:"+title=NTF (Paris) / Lambert Corse +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27571:"+title=NTF (Paris) / Lambert zone I +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=1200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27572:"+title=NTF (Paris) / Lambert zone II +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=2200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27573:"+title=NTF (Paris) / Lambert zone III +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=3200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27574:"+title=NTF (Paris) / Lambert zone IV +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=4185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27581:"+title=NTF (Paris) / France I (deprecated) +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=1200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27582:"+title=NTF (Paris) / France II (deprecated) +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=2200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27583:"+title=NTF (Paris) / France III (deprecated) +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=3200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27584:"+title=NTF (Paris) / France IV (deprecated) +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=4185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27591:"+title=NTF (Paris) / Nord France (deprecated) +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27592:"+title=NTF (Paris) / Centre France (deprecated) +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27593:"+title=NTF (Paris) / Sud France (deprecated) +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27594:"+title=NTF (Paris) / Corse (deprecated) +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",32601:"+proj=utm +zone=1 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32602:"+proj=utm +zone=2 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32603:"+proj=utm +zone=3 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32604:"+proj=utm +zone=4 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32605:"+proj=utm +zone=5 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32606:"+proj=utm +zone=6 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32607:"+proj=utm +zone=7 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32608:"+proj=utm +zone=8 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32609:"+proj=utm +zone=9 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32610:"+proj=utm +zone=10 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32611:"+proj=utm +zone=11 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32612:"+proj=utm +zone=12 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32613:"+proj=utm +zone=13 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32614:"+proj=utm +zone=14 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32615:"+proj=utm +zone=15 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32616:"+proj=utm +zone=16 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32617:"+proj=utm +zone=17 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32618:"+proj=utm +zone=18 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32619:"+proj=utm +zone=19 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32620:"+proj=utm +zone=20 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32621:"+proj=utm +zone=21 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32622:"+proj=utm +zone=22 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32623:"+proj=utm +zone=23 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32624:"+proj=utm +zone=24 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32625:"+proj=utm +zone=25 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32626:"+proj=utm +zone=26 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32627:"+proj=utm +zone=27 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32628:"+proj=utm +zone=28 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32629:"+proj=utm +zone=29 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32630:"+proj=utm +zone=30 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32631:"+proj=utm +zone=31 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32632:"+proj=utm +zone=32 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32633:"+proj=utm +zone=33 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32634:"+proj=utm +zone=34 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32635:"+proj=utm +zone=35 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32636:"+proj=utm +zone=36 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32637:"+proj=utm +zone=37 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32638:"+proj=utm +zone=38 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32639:"+proj=utm +zone=39 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32640:"+proj=utm +zone=40 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32641:"+proj=utm +zone=41 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32642:"+proj=utm +zone=42 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32643:"+proj=utm +zone=43 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32644:"+proj=utm +zone=44 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32645:"+proj=utm +zone=45 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32646:"+proj=utm +zone=46 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32647:"+proj=utm +zone=47 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32648:"+proj=utm +zone=48 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32649:"+proj=utm +zone=49 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32650:"+proj=utm +zone=50 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32651:"+proj=utm +zone=51 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32652:"+proj=utm +zone=52 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32653:"+proj=utm +zone=53 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32654:"+proj=utm +zone=54 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32655:"+proj=utm +zone=55 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32656:"+proj=utm +zone=56 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32657:"+proj=utm +zone=57 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32658:"+proj=utm +zone=58 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32659:"+proj=utm +zone=59 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32660:"+proj=utm +zone=60 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32661:"+proj=stere +lat_0=90 +lat_ts=90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32662:"+title=WGS 84 / Plate Carree +proj=eqc +lat_ts=0 +lon_0=0 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32701:"+proj=utm +zone=1 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32702:"+proj=utm +zone=2 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32703:"+proj=utm +zone=3 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32704:"+proj=utm +zone=4 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32705:"+proj=utm +zone=5 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32706:"+proj=utm +zone=6 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32707:"+proj=utm +zone=7 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32708:"+proj=utm +zone=8 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32709:"+proj=utm +zone=9 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32710:"+proj=utm +zone=10 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32711:"+proj=utm +zone=11 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32712:"+proj=utm +zone=12 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32713:"+proj=utm +zone=13 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32714:"+proj=utm +zone=14 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32715:"+proj=utm +zone=15 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32716:"+proj=utm +zone=16 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32717:"+proj=utm +zone=17 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32718:"+proj=utm +zone=18 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32719:"+proj=utm +zone=19 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32720:"+proj=utm +zone=20 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32721:"+proj=utm +zone=21 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32722:"+proj=utm +zone=22 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32723:"+proj=utm +zone=23 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32724:"+proj=utm +zone=24 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32725:"+proj=utm +zone=25 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32726:"+proj=utm +zone=26 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32727:"+proj=utm +zone=27 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32728:"+proj=utm +zone=28 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32729:"+proj=utm +zone=29 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32730:"+proj=utm +zone=30 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32731:"+proj=utm +zone=31 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32732:"+proj=utm +zone=32 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32733:"+proj=utm +zone=33 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32734:"+proj=utm +zone=34 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32735:"+proj=utm +zone=35 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32736:"+proj=utm +zone=36 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32737:"+proj=utm +zone=37 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32738:"+proj=utm +zone=38 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32739:"+proj=utm +zone=39 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32740:"+proj=utm +zone=40 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32741:"+proj=utm +zone=41 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32742:"+proj=utm +zone=42 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32743:"+proj=utm +zone=43 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32744:"+proj=utm +zone=44 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32745:"+proj=utm +zone=45 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32746:"+proj=utm +zone=46 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32747:"+proj=utm +zone=47 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32748:"+proj=utm +zone=48 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32749:"+proj=utm +zone=49 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32750:"+proj=utm +zone=50 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32751:"+proj=utm +zone=51 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32752:"+proj=utm +zone=52 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32753:"+proj=utm +zone=53 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32754:"+proj=utm +zone=54 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32755:"+proj=utm +zone=55 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32756:"+proj=utm +zone=56 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32757:"+proj=utm +zone=57 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32758:"+proj=utm +zone=58 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32759:"+proj=utm +zone=59 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32760:"+proj=utm +zone=60 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32761:"+proj=stere +lat_0=-90 +lat_ts=-90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",310024802:"+title=Geoportail - France metropolitaine +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=46.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310915814:"+title=Geoportail - Antilles francaises +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310486805:"+title=Geoportail - Guyane +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=4.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310700806:"+title=Geoportail - Reunion et dependances +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-21.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310702807:"+title=Geoportail - Mayotte +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-12.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310706808:"+title=Geoportail - Saint-Pierre et Miquelon +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=47.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310547809:"+title=Geoportail - Nouvelle-Caledonie +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-22.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642810:"+title=Geoportail - Wallis et Futuna +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.000000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-14.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310032811:"+title=Geoportail - Polynesie francaise +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642812:"+title=Geoportail - Kerguelen +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-49.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642801:"+title=Geoportail - Crozet +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-46.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642813:"+title=Geoportail - Amsterdam et Saint-Paul +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-38.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642901:"+title=Geoportail - Monde +proj=mill +towgs84=0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.000000 +a=6378137.0000 +rf=298.2572221010000 +lon_0=0.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",5489:"+title=RGAF09 geographiques (dms) +proj=longlat +nadgrids=@null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137 +rf=298.257222101 +units=m +no_defs",5490:"+title=RGAF09 UTM Nord Fuseau 20 +proj=tmerc +nadgrids=@null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137 +rf=298.257222101 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs"},CRS:{84:"+title=WGS 84 longitude-latitude +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs "},IGNF:{AMST63:"+title=Amsterdam 1963 +proj=geocent +towgs84=109.753,-528.133,-362.244,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CROZ63:"+title=Crozet 1963 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CSG67:"+title=Guyane CSG67 +proj=geocent +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",ED50:"+title=ED50 +proj=geocent +towgs84=-84.0000,-97.0000,-117.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",ETRS89:"+title=Systeme de reference terrestre Europeen (1989) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",GUAD48:"+title=Guadeloupe Ste Anne +proj=geocent +towgs84=-472.2900,-5.6300,-304.1200,0.4362,-0.8374,0.2563,1.898400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",GUADFM49:"+title=Guadeloupe Fort Marigot +proj=geocent +towgs84=136.5960,248.1480,-429.7890 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN63:"+title=IGN 1963 (Hiva Oa, Tahuata, Mohotani) +proj=geocent +towgs84=410.7210,55.0490,80.7460,-2.5779,-2.3514,-0.6664,17.331100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN72:"+title=IGN 1972 Grande-Terre / Ile des Pins +proj=geocent +towgs84=-11.6400,-348.6000,291.6800 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",KERG62CAR:"+title=Kerguelen - K0 +proj=geocent +towgs84=144.8990,-186.7700,100.9230 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MART38:"+title=Martinique Fort-Desaix +proj=geocent +towgs84=126.9260,547.9390,130.4090,-2.7867,5.1612,-0.8584,13.822650 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MAYO50:"+title=Mayotte Combani +proj=geocent +towgs84=-599.9280,-275.5520,-195.6650,-0.0835,-0.4715,0.0602,49.281400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MOOREA87:"+title=Moorea 1987 +proj=geocent +towgs84=215.9820,149.5930,176.2290,3.2624,1.6920,1.1571,10.477300 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",NTF:"+title=Nouvelle Triangulation Francaise +proj=geocent +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +units=m +no_defs",NUKU72:"+title=IGN 1972 Nuku Hiva +proj=geocent +towgs84=165.7320,216.7200,180.5050,-0.6434,-0.4512,-0.0791,7.420400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",REUN47:"+title=Reunion 1947 +proj=geocent +towgs84=789.5240,-626.4860,-89.9040,0.6006,76.7946,-10.5788,-32.324100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",RGF93:"+title=Reseau geodesique francais 1993 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGFG95:"+title=Reseau geodesique francais de Guyane 1995 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGM04:"+title=RGM04 (Reseau Geodesique de Mayotte 2004) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGNC:"+title=Reseau Geodesique de Nouvelle-Caledonie +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGPF:"+title=RGPF (Reseau Geodesique de Polynesie Francaise) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGR92:"+title=Reseau geodesique Reunion 1992 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGSPM06:"+title=Reseau Geodesique Saint-Pierre-et-Miquelon (2006) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGTAAF07:"+title=Reseau Geodesique des TAAF (2007) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RRAF91:"+title=RRAF 1991 (Reseau de Reference des Antilles Francaises) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",STPL69:"+title=Saint-Paul 1969 +proj=geocent +towgs84=225.571,-346.608,-46.567,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",STPM50:"+title=St Pierre et Miquelon 1950 +proj=geocent +towgs84=-95.5930,573.7630,173.4420,-0.9602,1.2510,-1.3918,42.626500 +a=6378206.4000 +rf=294.9786982000000 +units=m +no_defs",TAHAA:"+title=Raiatea - Tahaa 51-54 (Tahaa, Base Terme Est) +proj=geocent +towgs84=72.4380,345.9180,79.4860,-1.6045,-0.8823,-0.5565,1.374600 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TAHI79:"+title=IGN79 (Tahiti) Iles de la Societe +proj=geocent +towgs84=221.5250,152.9480,176.7680,2.3847,1.3896,0.8770,11.474100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TERA50:"+title=Pointe Geologie - Perroud 1950 +proj=geocent +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WALL78:"+title=Wallis-Uvea 1978 (MOP78) +proj=geocent +towgs84=253.0000,-133.0000,-127.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WGS72:"+title=World Geodetic System 1972 +proj=geocent +towgs84=0.0000,12.0000,6.0000 +a=6378135.0000 +rf=298.2600000000000 +units=m +no_defs",WGS84:"+title=World Geodetic System 1984 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",AMST63GEO:"+title=Amsterdam 1963 +proj=longlat +towgs84=109.753,-528.133,-362.244,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CROZ63GEO:"+title=Crozet 1963 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CSG67GEO:"+title=Guyane CSG67 +proj=longlat +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",ED50G:"+title=ED50 +proj=longlat +towgs84=-84.0000,-97.0000,-117.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",GUAD48GEO:"+title=Guadeloupe Ste Anne +proj=longlat +towgs84=-472.2900,-5.6300,-304.1200,0.4362,-0.8374,0.2563,1.898400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",GUADFM49GEO:"+title=Guadeloupe Fort Marigot +proj=longlat +towgs84=136.5960,248.1480,-429.7890 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN63GEO:"+title=IGN 1963 (Hiva Oa, Tahuata, Mohotani) +proj=longlat +towgs84=410.7210,55.0490,80.7460,-2.5779,-2.3514,-0.6664,17.331100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN72GEO:"+title=IGN 1972 Grande-Terre / Ile des Pins +proj=longlat +towgs84=-11.6400,-348.6000,291.6800 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",KERG62GEO:"+title=Kerguelen - K0 +proj=longlat +towgs84=144.8990,-186.7700,100.9230 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MART38GEO:"+title=Martinique Fort-Desaix +proj=longlat +towgs84=126.9260,547.9390,130.4090,-2.7867,5.1612,-0.8584,13.822650 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MAYO50GEO:"+title=Mayotte Combani +proj=longlat +towgs84=-599.9280,-275.5520,-195.6650,-0.0835,-0.4715,0.0602,49.281400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MOOREA87GEO:"+title=Moorea 1987 +proj=longlat +towgs84=215.9820,149.5930,176.2290,3.2624,1.6920,1.1571,10.477300 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",NTFG:"+title=Nouvelle Triangulation Francaise Greenwich degres sexagesimaux +proj=longlat +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +units=m +no_defs",NTFP:"+title=Nouvelle Triangulation Francaise Paris grades +proj=longlat +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +units=m +no_defs",NUKU72GEO:"+title=IGN 1972 Nuku Hiva +proj=longlat +towgs84=165.7320,216.7200,180.5050,-0.6434,-0.4512,-0.0791,7.420400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",REUN47GEO:"+title=Reunion 1947 +proj=longlat +towgs84=789.5240,-626.4860,-89.9040,0.6006,76.7946,-10.5788,-32.324100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",RGF93G:"+title=Reseau geodesique francais 1993 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGFG95GEO:"+title=Reseau geodesique francais de Guyane 1995 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGM04GEO:"+title=RGM04 (Reseau Geodesique de Mayotte 2004) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGNCGEO:"+title=Reseau Geodesique de Nouvelle-Caledonie +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGPFGEO:"+title=RGPF (Reseau Geodesique de Polynesie Francaise) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGR92GEO:"+title=Reseau geodesique de la Reunion 1992 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGSPM06GEO:"+title=Saint-Pierre-et-Miquelon (2006) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGTAAF07G:"+title=Reseau Geodesique des TAAF (2007) (dms) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",STPL69GEO:"+title=Saint-Paul 1969 +proj=longlat +towgs84=225.571,-346.608,-46.567,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",STPM50GEO:"+title=St Pierre et Miquelon 1950  +proj=longlat +towgs84=-95.5930,573.7630,173.4420,-0.9602,1.2510,-1.3918,42.626500 +a=6378206.4000 +rf=294.9786982000000 +units=m +no_defs",TAHAAGEO:"+title=Raiatea - Tahaa 51-54 (Tahaa, Base Terme Est) +proj=longlat +towgs84=72.4380,345.9180,79.4860,-1.6045,-0.8823,-0.5565,1.374600 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TAHI79GEO:"+title=IGN79 (Tahiti) Iles de la Societe +proj=longlat +towgs84=221.5250,152.9480,176.7680,2.3847,1.3896,0.8770,11.474100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TERA50G:"+title=Pointe Geologie - Perroud 1950 +proj=longlat +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WALL78GEO:"+title=Wallis - Uvea 1978 (MOP78) +proj=longlat +towgs84=253.0000,-133.0000,-127.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WGS72G:"+title=WGS72 +proj=longlat +towgs84=0.0000,12.0000,6.0000 +a=6378135.0000 +rf=298.2600000000000 +units=m +no_defs",WGS84G:"+title=World Geodetic System 1984 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",WGS84RRAFGEO:"+title=Reseau de reference des Antilles francaises (1988-1991) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",XGEO:"+title=Systeme CIO-BIH +proj=longlat +towgs84=0.0000,0.0000,0.5000,0.0000,0.0000,0.0140,-0.100000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",AMST63UTM43S:"+title=Amsterdam 1963 UTM fuseau 43 Sud +proj=tmerc +towgs84=109.753,-528.133,-362.244,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=75.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",CROZ63UTM39S:"+title=Crozet 1963 +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",CSG67UTM21:"+title=Guyane CSG67 UTM fuseau 21 +proj=tmerc +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",CSG67UTM22:"+title=Guyane CSG67 UTM fuseau 22 +proj=tmerc +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",GEOPORTALANF:"+title=Geoportail - Antilles francaises +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALASP:"+title=Geoportail - Amsterdam et Saint-Paul +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-38.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALCRZ:"+title=Geoportail - Crozet +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-46.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALFXX:"+title=Geoportail - France metropolitaine +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=46.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALGUF:"+title=Geoportail - Guyane +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=4.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALKER:"+title=Geoportail - Kerguelen +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-49.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALMYT:"+title=Geoportail - Mayotte +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-12.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALNCL:"+title=Geoportail - Nouvelle-Caledonie +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-22.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALPYF:"+title=Geoportail - Polynesie francaise +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALREU:"+title=Geoportail - Reunion et dependances +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-21.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALSPM:"+title=Geoportail - Saint-Pierre et Miquelon +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=47.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALWLF:"+title=Geoportail - Wallis et Futuna +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-14.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GUAD48UTM20:"+title=Guadeloupe Ste Anne +proj=tmerc +towgs84=-472.2900,-5.6300,-304.1200,0.4362,-0.8374,0.2563,1.898400 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",GUADFM49U20:"+title=Guadeloupe Fort Marigot  +proj=tmerc +towgs84=136.5960,248.1480,-429.7890 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",IGN63UTM7S:"+title=IGN 1963 - Hiva Oa, Tahuata, Mohotani - UTM fuseau 7 Sud +proj=tmerc +towgs84=410.7210,55.0490,80.7460,-2.5779,-2.3514,-0.6664,17.331100 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-141.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",IGN72UTM58S:"+title=IGN 1972 - UTM fuseau 58 Sud +proj=tmerc +towgs84=-11.6400,-348.6000,291.6800 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=165.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",KERG62UTM42S:"+title=Kerguelen 1962 +proj=tmerc +towgs84=144.8990,-186.7700,100.9230 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=69.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",LAMB1:"+title=Lambert I +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=49.500000000 +lon_0=0.000000000 +k_0=0.99987734 +lat_1=49.500000000 +x_0=600000.000 +y_0=200000.000 +units=m +no_defs",LAMB1C:"+title=Lambert I Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=49.500000000 +lon_0=0.000000000 +k_0=0.99987734 +lat_1=49.500000000 +x_0=600000.000 +y_0=1200000.000 +units=m +no_defs",LAMB2:"+title=Lambert II +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=46.800000000 +lon_0=0.000000000 +k_0=0.99987742 +lat_1=46.800000000 +x_0=600000.000 +y_0=200000.000 +units=m +no_defs",LAMB2C:"+title=Lambert II Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=46.800000000 +lon_0=0.000000000 +k_0=0.99987742 +lat_1=46.800000000 +x_0=600000.000 +y_0=2200000.000 +units=m +no_defs",LAMB3:"+title=Lambert III +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=44.100000000 +lon_0=0.000000000 +k_0=0.99987750 +lat_1=44.100000000 +x_0=600000.000 +y_0=200000.000 +units=m +no_defs",LAMB3C:"+title=Lambert III Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=44.100000000 +lon_0=0.000000000 +k_0=0.99987750 +lat_1=44.100000000 +x_0=600000.000 +y_0=3200000.000 +units=m +no_defs",LAMB4:"+title=Lambert IV +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=42.165000000 +lon_0=0.000000000 +k_0=0.99994471 +lat_1=42.165000000 +x_0=234.358 +y_0=185861.369 +units=m +no_defs",LAMB4C:"+title=Lambert IV Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=42.165000000 +lon_0=0.000000000 +k_0=0.99994471 +lat_1=42.165000000 +x_0=234.358 +y_0=4185861.369 +units=m +no_defs",LAMB93:"+title=Lambert 93 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=46.500000000 +lon_0=3.000000000 +lat_1=44.000000000 +lat_2=49.000000000 +x_0=700000.000 +y_0=6600000.000 +units=m +no_defs",RGF93CC42:"+title=Lambert conique conforme Zone 1 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=42.000000000 +lon_0=3.000000000 +lat_1=41.200000000 +lat_2=42.800000000 +x_0=1700000.000 +y_0=1200000.000 +units=m +no_defs",RGF93CC43:"+title=Lambert conique conforme Zone 2 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=43.000000000 +lon_0=3.000000000 +lat_1=42.200000000 +lat_2=43.800000000 +x_0=1700000.000 +y_0=2200000.000 +units=m +no_defs",RGF93CC44:"+title=Lambert conique conforme Zone 3 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=44.000000000 +lon_0=3.000000000 +lat_1=43.200000000 +lat_2=44.800000000 +x_0=1700000.000 +y_0=3200000.000 +units=m +no_defs",RGF93CC45:"+title=Lambert conique conforme Zone 4 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=45.000000000 +lon_0=3.000000000 +lat_1=44.200000000 +lat_2=45.800000000 +x_0=1700000.000 +y_0=4200000.000 +units=m +no_defs",RGF93CC46:"+title=Lambert conique conforme Zone 5 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=46.000000000 +lon_0=3.000000000 +lat_1=45.200000000 +lat_2=46.800000000 +x_0=1700000.000 +y_0=5200000.000 +units=m +no_defs",RGF93CC47:"+title=Lambert conique conforme Zone 6 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=47.000000000 +lon_0=3.000000000 +lat_1=46.200000000 +lat_2=47.800000000 +x_0=1700000.000 +y_0=6200000.000 +units=m +no_defs",RGF93CC48:"+title=Lambert conique conforme Zone 7 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=48.000000000 +lon_0=3.000000000 +lat_1=47.200000000 +lat_2=48.800000000 +x_0=1700000.000 +y_0=7200000.000 +units=m +no_defs",RGF93CC49:"+title=Lambert conique conforme Zone 8 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=49.000000000 +lon_0=3.000000000 +lat_1=48.200000000 +lat_2=49.800000000 +x_0=1700000.000 +y_0=8200000.000 +units=m +no_defs",RGF93CC50:"+title=Lambert conique conforme Zone 9 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=50.000000000 +lon_0=3.000000000 +lat_1=49.200000000 +lat_2=50.800000000 +x_0=1700000.000 +y_0=9200000.000 +units=m +no_defs",LAMBE:"+title=Lambert II etendu +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=46.800000000 +lon_0=0.000000000 +k_0=0.99987742 +lat_1=46.800000000 +x_0=600000.000 +y_0=2200000.000 +units=m +no_defs",MART38UTM20:"+title=Martinique Fort-Desaix +proj=tmerc +towgs84=126.9260,547.9390,130.4090,-2.7867,5.1612,-0.8584,13.822650 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",MAYO50UTM38S:"+title=Mayotte Combani +proj=tmerc +towgs84=-599.9280,-275.5520,-195.6650,-0.0835,-0.4715,0.0602,49.281400 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=45.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",MILLER:"+title=Geoportail - Monde +proj=mill +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lon_0=0.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",MOOREA87U6S:"+title=Moorea 1987 - UTM fuseau 6 Sud +proj=tmerc +towgs84=215.9820,149.5930,176.2290,3.2624,1.6920,1.1571,10.477300 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",NUKU72U7S:"+title=IGN 1972 Nuku Hiva - UTM fuseau 7 Sud +proj=tmerc +towgs84=165.7320,216.7200,180.5050,-0.6434,-0.4512,-0.0791,7.420400 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-141.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGM04UTM38S:"+title=UTM fuseau 38 Sud (Reseau Geodesique de Mayotte 2004) +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=45.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGNCUTM57S:"+title=Reseau Geodesique de Nouvelle-Caledonie - UTM fuseau 57 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=159.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGNCUTM58S:"+title=Reseau Geodesique de Nouvelle-Caledonie - UTM fuseau 58 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=165.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGNCUTM59S:"+title=Reseau Geodesique de Nouvelle-Caledonie - UTM fuseau 59 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=171.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGPFUTM5S:"+title=RGPF - UTM fuseau 5 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-153.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGPFUTM6S:"+title=RGPF - UTM fuseau 6 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGPFUTM7S:"+title=RGPF - UTM fuseau 7 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-141.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGR92UTM40S:"+title=RGR92 UTM fuseau 40 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGSPM06U21:"+title=Saint-Pierre-et-Miquelon (2006) UTM Fuseau 21 Nord +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",STPL69UTM43S:"+title=Saint-Paul 1969 UTM fuseau 43 Sud +proj=tmerc +towgs84=225.571,-346.608,-46.567,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=75.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",STPM50UTM21:"+title=St Pierre et Miquelon 1950 +proj=tmerc +towgs84=-95.5930,573.7630,173.4420,-0.9602,1.2510,-1.3918,42.626500 +a=6378206.4000 +rf=294.9786982000000 +lat_0=0.000000000 +lon_0=-57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",TAHAAUTM05S:"+title=Tahaa 1951 +proj=tmerc +towgs84=72.4380,345.9180,79.4860,-1.6045,-0.8823,-0.5565,1.374600 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-153.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",TAHI51UTM06S:"+title=Tahiti-Terme Nord UTM fuseau 6 Sud +proj=tmerc +towgs84=162.0000,117.0000,154.0000 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",TAHI79UTM6S:"+title=Tahiti 1979 +proj=tmerc +towgs84=221.5250,152.9480,176.7680,2.3847,1.3896,0.8770,11.474100 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",TERA50STEREO:"+title=Terre Adelie 1950 +proj=stere +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +lat_0=-90.000000000 +lon_0=140.000000000 +lat_ts=-67 +k=0.96027295 +x_0=300000.000 +y_0=-2299363.482 +units=m +no_defs",UTM01SW84:"+title=World Geodetic System 1984 UTM fuseau 01 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-177.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",UTM20W84GUAD:"+title=World Geodetic System 1984 UTM fuseau 20 Nord-Guadeloupe +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM20W84MART:"+title=World Geodetic System 1984 UTM fuseau 20 Nord-Martinique +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM22RGFG95:"+title=RGFG95 UTM fuseau 22 Nord-Guyane +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM39SW84:"+title=World Geodetic System 1984 UTM fuseau 39 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",UTM42SW84:"+title=World Geodetic System 1984 UTM fuseau 42 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=69.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",UTM43SW84:"+title=World Geodetic System 1984 UTM fuseau 43 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=75.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",WALL78UTM1S:"+title=Wallis-Uvea 1978 (MOP78) UTM 1 SUD +proj=tmerc +towgs84=253.0000,-133.0000,-127.0000 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-177.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",ETRS89GEO:"+title=ETRS89 geographiques (dms) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",ETRS89LAEA:"+title=ETRS89 Lambert Azimutal Equal Area +proj=laea +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=52.000000000 +lon_0=10.000000000 +x_0=4321000.000 +y_0=3210000.000 +units=m +no_defs",ETRS89LCC:"+title=ETRS89 Lambert Conformal Conic +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=52.000000000 +lon_0=9.999999995 +lat_1=35.000000000 +lat_2=65.000000000 +x_0=4000000.000 +y_0=2800000.000 +units=m +no_defs",UTM26ETRS89:"+title=Europe - de 30d a 24d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-27.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM27ETRS89:"+title=Europe - de 24d a 18d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-21.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM28ETRS89:"+title=Europe - de 18d a 12d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-15.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM29ETRS89:"+title=Europe - de 12d a 6d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-9.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM30ETRS89:"+title=Europe - de -6d a 0d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-3.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM31ETRS89:"+title=Europe - de 0d a 6d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=3.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM32ETRS89:"+title=Europe - de 6d a 12d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=9.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM33ETRS89:"+title=Europe - de 12d a 18d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=15.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM34ETRS89:"+title=Europe - de 18d a 24d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=21.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM35ETRS89:"+title=Europe - de 24d a 30d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=27.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM36ETRS89:"+title=Europe - de 30d a 36d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=33.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM37ETRS89:"+title=Europe - de 36d a 42d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=39.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM38ETRS89:"+title=Europe - de 42d a 48d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=45.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs"}},ea=Ye.getLogger("CRS"),ph={projectionsExtent:{"EPSG:2154":{left:-9.62,bottom:41.18,right:10.3,top:51.54},"EPSG:27572":{left:-4.87,bottom:42.33,right:8.23,top:51.14}},load:function(){if(ea.trace("Loading custom definitions projections"),!$t.isLoaded){$t.load(qt);try{aa(qt),window.ol&&window.ol.proj&&window.ol.proj.proj4&&(window.ol.proj.proj4.register=aa,window.ol.proj.proj4.register(qt))}catch(i){ea.error(i)}}},loadByDefault:function(){if(ea.trace("Loading custom definitions projections by default"),!$t.isLoaded){$t.loadByDefault(qt);try{aa(qt),window.ol&&window.ol.proj&&window.ol.proj.proj4&&(window.ol.proj.proj4.register=aa,window.ol.proj.proj4.register(qt))}catch(i){ea.error(i)}}},loadByName:function(i){if(ea.trace("Loading a custom definition projection : ",i),!$t.isLoaded){$t.loadByName(qt,i);try{aa(qt),window.ol&&window.ol.proj&&window.ol.proj.proj4&&(window.ol.proj.proj4.register=aa,window.ol.proj.proj4.register(qt))}catch(t){ea.error(t)}}},overload:function(){ea.trace("Loading projections aera (extent)");for(var i in this.projectionsExtent)if(this.projectionsExtent.hasOwnProperty(i)){var t=this.projectionsExtent[i],e=Ee(i),n=Ps("EPSG:4326",e),r=of([t.bottom,t.right,t.top,t.left],n);e.setExtent(r),pf(e),window.ol&&window.ol.proj&&window.ol.proj.addProjection&&window.ol.proj.addProjection(e)}}};window.ol&&window.ol.proj&&window.ol.proj.proj4&&(window.ol.proj.proj4.register=aa);var EN={_addUID:function(i){var t=this._uid?i+"-"+this._uid:i;return t},_createMainContainerElement:function(){var i=document.createElement("div");return i.id=this._addUID("GPmousePosition"),i.className="GPwidget",i},_createShowMousePositionElement:function(){var i=document.createElement("input");return i.id=this._addUID("GPshowMousePosition"),i.type="checkbox",i},_createShowMousePositionPictoElement:function(i){var t=this,e=document.createElement("label");e.id=this._addUID("GPshowMousePositionPicto"),e.className="GPshowAdvancedToolPicto",e.htmlFor=this._addUID("GPshowMousePosition"),e.title="Afficher les coordonnées du curseur",e.addEventListener("click",function(r){var o="";!document.getElementById(t._addUID("GPshowMousePosition")).checked&&!i&&(o="GPmapCenterVisible"),document.getElementById("GPmapCenter").className=o,t.onShowMousePositionClick(r)});var n=document.createElement("span");return n.id=this._addUID("GPshowMousePositionOpen"),n.className="GPshowAdvancedToolOpen",e.appendChild(n),e},_createMousePositionPanelElement:function(){var i=document.createElement("div");return i.id=this._addUID("GPmousePositionPanel"),i.className="GPpanel",i},_createMapCenter:function(){var i=document.createElement("div");return i.id="GPmapCenter",i.className="",i},_createMousePositionPanelHeaderElement:function(){var i=document.createElement("div");i.className="GPpanelHeader";var t=document.createElement("div");t.className="GPpanelTitle",t.innerHTML="Coordonnées",i.appendChild(t);var e=document.createElement("div");e.id="GPmousePositionPanelClose",e.className="GPpanelClose",e.title="Fermer le panneau";var n=this;return e.addEventListener?e.addEventListener("click",function(){document.getElementById(n._addUID("GPshowMousePositionPicto")).click()},!1):e.attachEvent&&e.attachEvent("onclick",function(){document.getElementById(n._addUID("GPshowMousePositionPicto")).click()}),i.appendChild(e),i},_createMousePositionPanelBasicElement:function(i,t,e,n){i=typeof i>"u"?!0:i,t=typeof t>"u"?!0:t,e=typeof e>"u"?!1:e;var r=document.createElement("div");return r.id=this._addUID("GPmousePositionBasicPanel"),r.appendChild(this._createMousePositionPanelBasicCoordinateElement(t,e,n)),r.appendChild(this._createMousePositionPanelEditToolsElement(e)),r.appendChild(this._createMousePositionPanelBasicAltitudeElement(i)),r},_createCoordinateElement:function(i,t){var e=this;if(["Lon","Lat"].indexOf(i)===-1)return[];var n=[],r=document.createElement("input");r.id=this._addUID("GPmousePosition"+i),r.title=t===!0?"Cliquer pour saisir des coordonnées":"",r.readOnly=!0,t&&(r.addEventListener("click",function(){e.onMousePositionEditModeClick(!0)}),r.addEventListener("change",function(a){this.classList.remove("error");var s=e.validateExtentCoordinate(i,this.value,a);s?this.classList.remove("error"):this.classList.add("error")})),n.push(r);var o=document.createElement("span");return o.className="GPmousePositionUnits",n.push(o),n},_createDMSCoordinateElement:function(i,t){if(["Lon","Lat"].indexOf(i)===-1)return[];var e=this,n=[],r=document.createElement("input");r.id=this._addUID("GPmousePosition"+i+"Degrees"),r.className="GPSexagesimal",r.setAttribute("name","degrees"),r.title=t===!0?"Cliquer pour saisir des coordonnées":"",r.readOnly=!0,r.dataset.min=0,r.dataset.max=i==="Lon"?180:90,t&&(r.addEventListener("click",function(){e.onMousePositionEditModeClick(!0)}),r.addEventListener("change",function(){this.classList.remove("error");var p=e._checkDMSDegrees(i,this);p?this.classList.remove("error"):this.classList.add("error")})),n.push(r);var o=document.createElement("span");o.className="GPmousePositionSexagesimalLabel",o.innerHTML="°",n.push(o);var a=document.createElement("input");a.id=this._addUID("GPmousePosition"+i+"Minutes"),a.className="GPSexagesimal",a.setAttribute("name","minutes"),a.title=t===!0?"Cliquer pour saisir des coordonnées":"",a.readOnly=!0,a.dataset.min=0,a.dataset.max=59,t&&(a.addEventListener("click",function(){e.onMousePositionEditModeClick(!0)}),a.addEventListener("change",function(){this.classList.remove("error");var p=e._checkDMSElement(this);p?this.classList.remove("error"):this.classList.add("error")})),n.push(a);var s=document.createElement("span");s.className="GPmousePositionSexagesimalLabel",s.innerHTML="'",n.push(s);var l=document.createElement("input");l.id=this._addUID("GPmousePosition"+i+"Seconds"),l.className="GPSexagesimalsec",l.setAttribute("name","seconds"),l.title=t===!0?"Cliquer pour saisir des coordonnées":"",l.readOnly=!0,l.dataset.min=0,l.dataset.max=59,t&&(l.addEventListener("click",function(){e.onMousePositionEditModeClick(!0)}),l.addEventListener("change",function(){this.classList.remove("error");var p=e._checkDMSElement(this,!0);p?this.classList.remove("error"):this.classList.add("error")})),n.push(l);var u=document.createElement("span");u.className="GPmousePositionSexagesimalLabel",u.innerHTML="''",n.push(u);var c=document.createElement("select");c.id=this._addUID("GPmousePosition"+i+"Direction"),c.className="GPmousePositionDirection",c.setAttribute("name","direction"),c.disabled=!0;var h=document.createElement("option");h.value=i==="Lon"?"E":"N",h.innerHTML=i==="Lon"?"E":"N",c.appendChild(h);var d=document.createElement("option");return d.value=i==="Lon"?"O":"S",d.innerHTML=i==="Lon"?"O":"S",c.appendChild(d),n.push(c),n},_createMousePositionPanelBasicCoordinateElement:function(i,t,e){var n=document.createElement("div");n.id=this._addUID("GPmousePositionCoordinate"),n.style.display=i?"block":"none";var r=document.createElement("div"),o=document.createElement("span");o.className="GPmousePositionLabel",o.id=this._addUID("GPmousePositionLatLabel"),o.innerHTML="Latitude : ",r.appendChild(o);var a=document.createElement("span");a.id=this._addUID("GPmousePositionLatCoordinate");var s;e==="DMS"?s=this._createDMSCoordinateElement("Lat",t):s=this._createCoordinateElement("Lat",t);for(var l=0;l<s.length;l++)a.appendChild(s[l]);r.appendChild(a),n.appendChild(r);var u=document.createElement("div"),c=document.createElement("span");c.className="GPmousePositionLabel",c.id=this._addUID("GPmousePositionLonLabel"),c.innerHTML="Longitude : ",u.appendChild(c);var h=document.createElement("span");h.id=this._addUID("GPmousePositionLonCoordinate");var d;e==="DMS"?d=this._createDMSCoordinateElement("Lon",t):d=this._createCoordinateElement("Lon",t);for(var p=0;p<d.length;p++)h.appendChild(d[p]);return u.appendChild(h),n.appendChild(u),n},_createMousePositionPanelBasicAltitudeElement:function(i){var t=document.createElement("div");t.id=this._addUID("GPmousePositionAltitude"),t.style.display=i?"block":"none";var e=document.createElement("span");e.className="GPmousePositionLabel",e.innerHTML="Altitude : ",t.appendChild(e);var n=document.createElement("span");n.className="GPmousePositionCoords",n.id=this._addUID("GPmousePositionAlt"),n.innerHTML="...",t.appendChild(n);var r=document.createElement("span");return r.className="GPmousePositionAltitudeUnits",r.innerHTML="m",t.appendChild(r),t},_createMousePositionPanelEditToolsElement:function(i){var t=this,e=document.createElement("div");e.className="GPmousePositionPanelEditTools",e.id=this._addUID("GPmousePositionPanelEditTools"),i||(e.style.display="none");var n=document.createElement("span");n.className="GPmousePositionEditTool",n.id=this._addUID("GPmousePositionLocate"),n.title=i===!0?"Cliquer pour saisir des coordonnées":"",i&&n.addEventListener("click",function(){t.onMousePositionEditModeLocateClick()}),e.appendChild(n);var r=document.createElement("span");return r.className="GPmousePositionEditTool",r.id=this._addUID("GPmousePositionCloseEdit"),r.title="Quitter la saisie des coordonnées",r.style.display="none",i&&r.addEventListener("click",function(){t.onMousePositionEditModeClick(!1)}),e.appendChild(r),e},_createShowMousePositionSettingsElement:function(i){var t=[],e=this,n=document.createElement("input");n.type="checkbox",n.id=this._addUID("GPshowMousePositionSettings");var r=document.createElement("label");return r.id=this._addUID("GPshowMousePositionSettingsPicto"),r.htmlFor=this._addUID("GPshowMousePositionSettings"),r.title="Réglages",r.className="GPshowMoreOptionsImage GPshowMoreOptions GPshowMousePositionSettingsPicto",r.style.display=i?"block":"none",r.addEventListener?r.addEventListener("click",function(o){typeof e.onShowMousePositionSettingsClick=="function"&&e.onShowMousePositionSettingsClick(o)},!1):r.attachEvent&&r.attachEvent("onclick",function(o){typeof e.onShowMousePositionSettingsClick=="function"&&e.onShowMousePositionSettingsClick(o)}),t.push(n),t.push(r),t},_createMousePositionSettingsElement:function(i){var t=document.createElement("div");t.id=this._addUID("GPmousePositionSettings"),t.style.display=i===void 0||i?"block":"none";var e=document.createElement("span");return e.className="GPmousePositionSettingsLabel",e.innerHTML="Système de référence",t.appendChild(e),t},_createMousePositionSettingsSystemsElement:function(i){var t=this,e=document.createElement("select");e.id=this._addUID("GPmousePositionProjectionSystem"),e.className="GPinputSelect GPmousePositionSettingsSelect",e.addEventListener("change",function(a){t.onMousePositionProjectionSystemChange(a)}),e.addEventListener("mouseover",function(a){a.target.nodeName!=="OPTION"&&t.onMousePositionProjectionSystemMouseOver(a)});for(var n=0;n<i.length;n++){var r=i[n],o=document.createElement("option");o.value=r.code,o.text=r.label||n,e.appendChild(o)}return e},_createMousePositionSettingsUnitsElement:function(i){var t=this,e=document.createElement("select");e.id=this._addUID("GPmousePositionProjectionUnits"),e.className="GPinputSelect GPmousePositionSettingsSelect",e.addEventListener("change",function(a){t.onMousePositionProjectionUnitsChange(a)});for(var n=0;n<i.length;n++){var r=i[n],o=document.createElement("option");o.value=r.code?r.code:n,o.text=r.label||n,e.appendChild(o)}return e},_resetLabelElements:function(i){var t=document.getElementById(this._addUID("GPmousePositionLatLabel"));t.innerHTML=i==="Geographical"?"Latitude :":"X :";var e=document.getElementById(this._addUID("GPmousePositionLonLabel"));e.innerHTML=i==="Geographical"?"Longitude :":"Y :"},_resetUnitElements:function(i){var t="";(i==="M"||i==="KM")&&(t=i.toLowerCase());for(var e=document.getElementsByClassName("GPmousePositionUnits"),n=0;n<e.length;n++)e[n].innerHTML=t},_resetCoordinateElements:function(i,t,e){for(var n=document.getElementById(this._addUID("GPmousePositionLatCoordinate"));n.firstChild;)n.removeChild(n.firstChild);var r;e==="DMS"?r=this._createDMSCoordinateElement("Lat",i):r=this._createCoordinateElement("Lat",i);for(var o=0;o<r.length;o++)n.appendChild(r[o]);for(var a=document.getElementById(this._addUID("GPmousePositionLonCoordinate"));a.firstChild;)a.removeChild(a.firstChild);var s;e==="DMS"?s=this._createDMSCoordinateElement("Lon",i):s=this._createCoordinateElement("Lon",i);for(var l=0;l<s.length;l++)a.appendChild(s[l])},_setEditMode:function(i){var t=document.getElementById(this._addUID("GPmousePositionLocate"));t.title=i?"Aller à la position ...":"Cliquer pour saisir des coordonnées";var e=document.getElementById(this._addUID("GPmousePositionCloseEdit"));e.style.display=i?"inline-block":"none";for(var n="div[id^="+this._addUID("GPmousePositionCoordinate")+"]",r=document.querySelectorAll(n+" input"),o=0;o<r.length;o++)r[o].readOnly=!i,i&&(r[o].value="",r[o].classList.remove("error"));for(var a=document.querySelectorAll(n+" select"),s=0;s<a.length;s++)a[s].disabled=!i},_checkDMSElement:function(i,t){var e=t!==void 0,n=i.value;if(e&&(n=n.replace(",",".")),isNaN(n))return!1;var r=parseFloat(n);if(!e&&(r|0)!==r)return!1;var o=Number(i.dataset.min),a=Number(i.dataset.max);return r>=o&&r<=a},_checkDMSDegrees:function(i,t){if(isNaN(t.value))return!1;var e=parseFloat(t.value);if((e|0)!==e)return!1;var n=Number(t.dataset.min),r=Number(t.dataset.max);if(e<n||e>r)return!1;var o=document.getElementById(this._addUID("GPmousePosition"+i+"Minutes")),a=document.getElementById(this._addUID("GPmousePosition"+i+"Seconds"));return e>=r?(o.dataset.max=0,a.dataset.max=0):(o.dataset.max=59,a.dataset.max=59.9999),!0},GPdisplayCoords:function(i){if(i){var t=document.getElementById(this._addUID("GPmousePositionLonLabel")),e=document.getElementById(this._addUID("GPmousePositionLatLabel"));if(i.x||i.y?(e.innerHTML="X : ",t.innerHTML="Y : "):i.e||i.n?(e.innerHTML="E : ",t.innerHTML="N : "):(e.innerHTML="Latitude : ",t.innerHTML="Longitude : "),typeof i.lat=="object"&&typeof i.lng=="object"){var n={lng:"Lon",lat:"Lat"},r=["Degrees","Minutes","Seconds"];for(var o in n)for(var a=0;a<r.length;++a){var s="GPmousePosition"+n[o]+r[a],l=document.getElementById(this._addUID(s)),u=r[a].charAt(0).toLowerCase();l.value=i[o][u]}document.getElementById(this._addUID("GPmousePositionLonDirection")).value=i.lng.direction,document.getElementById(this._addUID("GPmousePositionLatDirection")).value=i.lat.direction}else{var c=document.getElementById(this._addUID("GPmousePositionLat")),h=document.getElementById(this._addUID("GPmousePositionLon"));c.value=i.x||i.lat||i.e||"0",h.value=i.y||i.lng||i.lon||i.n||"0";for(var d=i.unit===void 0?"":i.unit,p=document.getElementsByClassName("GPmousePositionUnits"),f=0;f<p.length;++f)p[f].innerHTML=d}}},GPdisplayElevation:function(i,t,e,n){var r=this,o;t||(t=500),clearTimeout(o),document.getElementById(this._addUID("GPmousePositionAlt")).innerHTML="...",e==null&&(e=-99999),n==null&&(n=99980);var a=e+n,s=e-n;i&&document.getElementById(this._addUID("GPmousePositionAltitude"))&&(o=setTimeout(function(){r.onRequestAltitude(i,function(l){s<l&&l<a?r.GPresetElevation():document.getElementById(r._addUID("GPmousePositionAlt")).innerHTML=l})},t))},GPresetElevation:function(){document.getElementById(this._addUID("GPmousePositionAltitude"))&&(document.getElementById(this._addUID("GPmousePositionAlt")).innerHTML="---")}},ci=Ye.getLogger("GeoportalMousePosition"),G_=function(i){function t(e){if(e=e||{},!(this instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(e);var n=this._container=this._initContainer(e);i.call(this,{element:n,target:e.target,render:e.render})}return i&&(t.__proto__=i),t.prototype=Object.create(i.prototype,{}),he.assign(t.prototype,EN),t.prototype.constructor=t,t.prototype.setMap=function(e){var n=this;if(e){var r=this._createMapCenter();if(e.getViewport().appendChild(r),!this.collapsed&&!this._isDesktop&&(r.className="GPmapCenterVisible"),this.draggable&&Oo.dragElement(this._panelMousePositionContainer,this._panelHeaderMousePositionContainer,e.getTargetElement()),this.collapsed||(this._isDesktop?this.listenerKey=e.on("pointermove",s=>{this.onMouseMove(s)}):this.listenerKey=e.on("moveend",s=>this.onMapMove(s))),this.options.editCoordinates){var o=document.createElement("img");o.id=this._addUID("GPmousePositionMarker"),o.src=this._markerUrl,o.title="Cliquer pour supprimer",o.addEventListener("click",function(){n._markerOverlay.setPosition(void 0)}),this._markerOverlay=new dn({offset:this._markerOffset,element:o,stopEvent:!1}),e.addOverlay(this._markerOverlay)}}else Kt(this.listenerKey);if(i.prototype.setMap.call(this,e),e!==null&&!this.collapsed){var a=document.getElementById("GPshowMousePosition-"+this._uid);a.checked="checked",this._setElevationPanel(this.options.displayAltitude),this._setCoordinatesPanel(this.options.displayCoordinates),this.options.displayCoordinates||this._setSettingsPanel(!1)}},t.prototype.addSystem=function(e){if(typeof e!="object"){ci.log("[ERROR] MousePosition:addSystem - system parameter should be an object");return}if(!e.crs){ci.error("crs not defined !");return}if(e.label||(ci.warn("crs label not defined, use crs code by default."),e.label=e.crs),e.type||(ci.warn("type srs not defined, use 'Metric' by default."),e.type="Metric"),ph.loadByName(e.crs),!Ee(e.crs)){ci.error("crs '{}' not available into proj4 definitions !",e.crs);return}for(var n=0;n<this._projectionSystems.length;n++){var r=this._projectionSystems[n];e.crs===r.crs&&ci.info("crs '{}' already configured",r.crs)}e.code=this._projectionSystems.length,this._projectionSystems.push(e);var o=document.getElementById("GPmousePositionProjectionSystem-"+this._uid);if(o){var a=document.createElement("option");a.value=e.code,a.text=e.label,o.appendChild(a)}},t.prototype.addSystems=function(e){if(e){if(!Array.isArray(e)){ci.log("[ERROR] MousePosition:addSystems - systems parameter should be an array");return}for(var n=0;n<e.length;n++)this.addSystem(e[n])}},t.prototype.removeSystem=function(e){if(!e||typeof e!="string"){ci.log("[ERROR] MousePosition:removeSystem - systemCode parameter should be a string");return}for(var n=document.getElementById("GPmousePositionProjectionSystem-"+this._uid),r=null,o=0;o<this._projectionSystems.length;o++){var a=this._projectionSystems[o];if(e===a.crs){r=a.code,this._projectionSystems.splice(o,1);break}}if(r==null){ci.log("[WARN] MousePosition:removeSystem - system not found");return}for(var s=[],l=0;l<this._projectionSystems.length;l++)s[Number(this._projectionSystems[l].code)]=l,this._projectionSystems[l].code=l;for(var u=null,c=0;c<n.childNodes.length;c++){if(r===n.childNodes[l].value){u=c;continue}n.childNodes[l].value=s[Number(n.childNodes[l].value)]}u!=null&&n.removeChild(n.childNodes[u]),this._currentProjectionSystems.code===Number(r)&&(n.childNodes[0].setAttribute("selected","selected"),this._setCurrentSystem(n.childNodes[0].value))},t.prototype.setUnits=function(e){!e||!Array.isArray(e)||(this.options.units=e,this._projectionUnits=[],this._initProjectionUnits(),this._currentProjectionType&&this._setTypeUnitsPanel(this._currentProjectionType))},t.prototype.setAltitudeOptions=function(e){if(!(!e||typeof e!="object")&&(this.options.altitude.triggerDelay=e.triggerDelay,this.options.altitude.responseDelay=e.responseDelay,e.serviceOptions))for(var n in e.serviceOptions)e.serviceOptions.hasOwnProperty(n)&&(this.options.altitude.serviceOptions[n]=e.serviceOptions[n])},t.prototype.displayAltitude=function(e){e!==void 0&&(this.options.displayAltitude=e,this._setElevationPanel(e))},t.prototype.displayCoordinates=function(e){e!==void 0&&(this.options.displayCoordinates=e,this._setCoordinatesPanel(e),this._setSettingsPanel(e))},t.prototype.setCollapsed=function(e){if(e===void 0){ci.log("[ERROR] MousePosition:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(this._isDesktop||(document.getElementById("GPmapCenter").className=e?"":"GPmapCenterVisible"),this.onShowMousePositionClick(),this._showMousePositionContainer.checked=!e)},t.prototype._initialize=function(e){if(e=e||{},this.options=e,this.options.collapsed=e.collapsed!==void 0?e.collapsed:!0,this.collapsed=this.options.collapsed,this.options.draggable=e.draggable!==void 0?e.draggable:!1,this.draggable=this.options.draggable,this._markerOverlay=null,this._markerUrl=null,this._markerOffset=[0,0],this._hideMarker=!1,this._initMarker(e.positionMarker),this.options.units=e.units||[],this.options.displayAltitude=e.displayAltitude!==void 0?e.displayAltitude:!0,this.options.displayCoordinates=e.displayCoordinates!==void 0?e.displayCoordinates:!0,this.options.displayCoordinates?this.options.editCoordinates=e.editCoordinates!==void 0?e.editCoordinates:!1:this.options.editCoordinates=!1,this.editing=!1,this.options.systems=e.systems||[],e.altitude){var n=e.altitude;this.options.altitude={triggerDelay:n.triggerDelay!==void 0?n.triggerDelay:200,responseDelay:n.responseDelay!==void 0?n.responseDelay:500,serviceOptions:n.serviceOptions||{},noDataValue:n.noDataValue!==void 0?n.noDataValue:-99999,noDataValueTolerance:n.noDataValueTolerance!==void 0?n.noDataValueTolerance:9e4}}else this.options.altitude={triggerDelay:200,responseDelay:500,serviceOptions:{}};this._uid=Re.generate(),this._projectionSystems=[],this._initProjectionSystems(),this._projectionUnits={},this._initProjectionUnits(),this._isDesktop=he.detectSupport(),this.options.altitude.triggerDelay<100&&(this.options.altitude.triggerDelay=100),this._timer=this.options.altitude.triggerDelay,this._currentProjectionSystems=this._projectionSystems[0],this._currentProjectionType=this._projectionSystems[0].type,this._currentProjectionUnits=this._projectionUnits[this._currentProjectionType][0].code,this._projectionUnitsContainer=null,this._showMousePositionContainer=null,this._panelMousePositionContainer=null,this._panelHeaderMousePositionContainer=null,!this.options.displayAltitude&&!this.options.displayCoordinates&&(this.options.displayCoordinates=!0),this.listenerKey=null},t.prototype._initMarker=function(e){if(this.options.editCoordinates){if(!e){this._markerUrl=It.lightOrange,this._markerOffset=It.defaultOffset;return}this._hideMarker=e.hide!==void 0?e.hide:!1,e.offset?Array.isArray(e.offset)&&e.offset.length===2?this._markerOffset=e.offset:(ci.log("positionMarker.offset should be an array. e.g. : [0,0]"),this._markerOffset=It.defaultOffset):this._markerOffset=It.defaultOffset;var n=e.url;n?n.match(/^[a-zA-Z]+$/)?this._markerUrl=It[n]!==void 0?It[n]:It.lightOrange:this._markerUrl=n:this._markerUrl=It.lightOrange}},t.prototype._initProjectionSystems=function(){for(var e=[{label:"Géographique",crs:Ee("EPSG:4326").getCode(),type:"Geographical"},{label:"Web Mercator",crs:Ee("EPSG:3857").getCode(),type:"Metric"},{label:"Lambert 93",crs:Ee("EPSG:2154").getCode(),type:"Metric",geoBBox:{left:-9.86,bottom:41.15,right:10.38,top:51.56}},{label:"Lambert II étendu",crs:Ee("EPSG:27572").getCode(),type:"Metric",geoBBox:{left:-4.87,bottom:42.33,right:8.23,top:51.14}}],n=this.options.systems,r=0;r<n.length;r++){var o=n[r];this.addSystem(o)}if(this._projectionSystems.length===0)for(var a=0;a<e.length;a++)this.addSystem(e[a])},t.prototype._initProjectionUnits=function(){var e={Geographical:[{code:"DEC",label:"degrés décimaux",format:this._displayDEC},{code:"DMS",label:"degrés sexagésimaux",format:this._displayDMS},{code:"RAD",label:"radians",format:this._displayRAD},{code:"GON",label:"grades",format:this._displayGON}],Metric:[{code:"M",label:"mètres",format:this._displayMeter},{code:"KM",label:"kilomètres",format:this._displayKMeter}]},n=this.options.units;for(var r in e)if(e.hasOwnProperty(r)){for(var o=!1,a=0;a<e[r].length;a++)for(var s=e[r][a],l=0;l<n.length;l++){var u=n[l];s.code===u&&(o=!0,this._projectionUnits[r]||(this._projectionUnits[r]=[]),this._projectionUnits[r].push(s))}o||(this._projectionUnits[r]=e[r])}typeof this._projectionUnits=="object"&&Object.keys(this._projectionUnits).length===0&&(this._projectionUnits=e)},t.prototype._getCurrentProjectionInformation=function(){for(var e=[this._currentProjectionSystems.label,"en"],n=this._projectionUnits[this._currentProjectionType],r=0;r<n.length;++r)if(n[r].code===this._currentProjectionUnits){e.push(n[r].label);break}return e.join(" ")},t.prototype._initContainer=function(){var e=this._createMainContainerElement(),n=this._showMousePositionContainer=this._createShowMousePositionElement();e.appendChild(n);var r=this._createShowMousePositionPictoElement(this._isDesktop);e.appendChild(r);var o=this._panelMousePositionContainer=this._createMousePositionPanelElement(),a=this._panelHeaderMousePositionContainer=this._createMousePositionPanelHeaderElement();o.appendChild(a);var s=this._createMousePositionPanelBasicElement(this.options.displayAltitude,this.options.displayCoordinates,this.options.editCoordinates,this._currentProjectionUnits);o.appendChild(s);for(var l=this._createShowMousePositionSettingsElement(this.options.displayCoordinates),u=0;u<l.length;u++)o.appendChild(l[u]);var c=this._createMousePositionSettingsElement(),h=this._projectionSystemsContainer=this._createMousePositionSettingsSystemsElement(this._projectionSystems),d=this._projectionUnitsContainer=this._createMousePositionSettingsUnitsElement(this._projectionUnits[this._currentProjectionType]);return c.appendChild(h),c.appendChild(d),o.appendChild(c),e.appendChild(o),e},t.prototype._setElevationPanel=function(e){var n=null;e?(n=document.getElementById("GPmousePositionAltitude-"+this._uid),n.style.display=""):(n=document.getElementById("GPmousePositionAltitude-"+this._uid),n.style.display="none")},t.prototype._setCoordinatesPanel=function(e){var n=document.getElementById("GPmousePositionCoordinate-"+this._uid);e?n.style.display="":n.style.display="none"},t.prototype._setSettingsPanel=function(e){var n=document.getElementById("GPshowMousePositionSettingsPicto-"+this._uid),r=document.getElementById("GPmousePositionSettings-"+this._uid);e?(n.style.display="",r.style.display=""):(n.style.display="none",r.style.display="none")},t.prototype._setTypeUnitsPanel=function(e){for(var n=this._projectionUnitsContainer;n.firstChild;)n.removeChild(n.firstChild);for(var r=this._projectionUnits[e],o=0;o<r.length;o++){var a=r[o],s=document.createElement("option");s.value=a.code?a.code:o,s.text=a.label||o,n.appendChild(s)}var l=this._projectionUnits[e][0].code;(this._currentProjectionUnits==="DMS"||l==="DMS")&&(this._resetCoordinateElements(this.options.editCoordinates,e,l),this._setEditMode(this.editing)),this._currentProjectionType=e,this._resetLabelElements(e),this._resetUnitElements(l),this._currentProjectionUnits=l},t.prototype._displayDEC=function(e){var n={};return n.lat=e[1].toFixed(6),n.lng=e[0].toFixed(6),n.unit="°",n},t.prototype._displayDMS=function(e){return{lng:ur.decimalToDMS(e[0],"EO",2),lat:ur.decimalToDMS(e[1],"NS",2),unit:"DMS"}},t.prototype._displayRAD=function(e){var n={},r=.017453292519943295;return n.lng=e[0]*r,n.lng=n.lng.toFixed(8),n.lat=e[1]*r,n.lat=n.lat.toFixed(8),n.unit="rad",n},t.prototype._displayGON=function(e){var n={},r=1.1111111111111112;return n.lng=e[0]*r,n.lng=n.lng.toFixed(8),n.lat=e[1]*r,n.lat=n.lat.toFixed(8),n.unit="gon",n},t.prototype._displayMeter=function(e){var n={};return n.x=e[0].toFixed(2),n.y=e[1].toFixed(2),n.unit="m",n},t.prototype._displayKMeter=function(e){var n={};return n.x=(e[0]/1e3).toFixed(2),n.y=(e[1]/1e3).toFixed(2),n.unit="km",n},t.prototype._setCoordinate=function(e,n){var r={},o=this._currentProjectionSystems.crs;if(!o){ci.log("ERROR : system crs not found");return}e=ut(e,n,o);for(var a=this._currentProjectionSystems.type,s=null,l=this._projectionUnits[a],u=0;u<l.length;u++)if(l[u].code===this._currentProjectionUnits){s=l[u].format;break}if(!s||typeof s!="function"){ci.log("WARNING : coordinates format function not found");return}else r=s(e);!r||Object.keys(r).length===0||this.GPdisplayCoords(r)},t.prototype._setElevation=function(e){var n=this.options.altitude.responseDelay,r=this.options.altitude.noDataValue,o=this.options.altitude.noDataValueTolerance;this.GPdisplayElevation(e,n,r,o)},t.prototype.onMoveStopped=function(e,n){var r=ut(e,n,"EPSG:4326");this._setElevation(r)},t.prototype.onMouseMove=function(e){var n=this,r=e.coordinate;if(!(!e.map||!e.map.getView())){var o=e.map.getView().getProjection();this._setCoordinate(r,o),clearTimeout(this._timer),this._timer=setTimeout(function(){n.onMoveStopped(r,o)},this.options.altitude.triggerDelay)}},t.prototype.onMapMove=function(){var e=this,n=this.getMap();if(!(!n||!n.getView())){var r=n.getView(),o=r.getCenter(),a=r.getProjection();this._setCoordinate(o,a),clearTimeout(this._timer),this._timer=setTimeout(function(){e.onMoveStopped(o,a)},this.options.altitude.triggerDelay)}},t.prototype.onRequestAltitude=function(e,n){if(!(!e||Object.keys(e).length===0)&&this.options.displayAltitude){var r=this.options.altitude.serviceOptions||{},o=r.protocol||"XHR",a=r.timeOut||0;o==="JSONP"&&a===0&&(a=15e3);var s=r.outputFormat||"json",l=!0,u=[{lon:e[0],lat:e[1]}],c=this,h=r.rawResponse||!1,d=null,p=null;h?d=function(v){ci.log("alti service raw response : ",v)}:d=function(v){v&&Object.keys(v).length&&n.call(this,v.elevations[0].z)},p=function(v){ci.log("[getAltitude] ERROR : "+v.message)};var f=r.apiKey||this.options.apiKey;typeof r.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?r.ssl=this.options.ssl:r.ssl=!0);var g=r.ssl;tt.Services.getAltitude({apiKey:f,protocol:o,ssl:g,timeOut:a,scope:c,outputFormat:s,rawResponse:h,onSuccess:d,onFailure:p,zonly:l,positions:u})}},t.prototype.onShowMousePositionClick=function(){var e=this.getMap();Tr.unset(e),this.collapsed=this._showMousePositionContainer.checked,this.dispatchEvent("change:collapsed"),this._showMousePositionContainer.checked?Kt(this.listenerKey):this.editing||(this._isDesktop?this.listenerKey=e.on("pointermove",n=>{this.onMouseMove(n)}):(this.listenerKey=e.on("moveend",n=>this.onMapMove(n)),this.onMapMove())),this._setElevationPanel(this.options.displayAltitude),this._setCoordinatesPanel(this.options.displayCoordinates),this.options.displayCoordinates||this._setSettingsPanel(!1)},t.prototype.onShowMousePositionSettingsClick=function(e){if(!this.draggable){this._panelMousePositionContainer.style.transition="top 0.5s ease-out 0s",this._panelMousePositionContainer.style.transitionProperty="top",this._panelMousePositionContainer.style.transitionDuration="0.5s",this._panelMousePositionContainer.style.transitionTimingFunction="ease-out",this._panelMousePositionContainer.style.transitionDelay="0s";var n=-95,r=this._panelMousePositionContainer.offsetTop;document.getElementById(e.target.htmlFor).checked?this._panelMousePositionContainer.style.top=r-n+"px":this._panelMousePositionContainer.style.top=r+n+"px"}},t.prototype.onMousePositionEditModeClick=function(e){if(this.options.editCoordinates&&this.editing!==e){this.editing=e,this._setEditMode(this.editing);var n=this.getMap();this._isDesktop?this.editing?Kt(this.listenerKey):(this.listenerKey=n.on("pointermove",r=>{this.onMouseMove(r)}),this.onMapMove()):this.editing?Kt(this.listenerKey):(this.listenerKey=n.on("moveend",r=>this.onMapMove(r)),this.onMapMove()),!this.editing&&this._markerOverlay&&this._markerOverlay.setPosition(void 0)}},t.prototype.getCoordinate=function(e){var n=document.getElementById(this._addUID("GPmousePosition"+e+"Degrees")),r=n.value;if(!r||(r=r.replace(",","."),!ur.isInteger(r)))return null;var o=ur.toInteger(r);if(o<Number(n.dataset.min)||o>Number(n.dataset.max))return null;var a=document.getElementById(this._addUID("GPmousePosition"+e+"Direction")).value,s=document.getElementById(this._addUID("GPmousePosition"+e+"Minutes")),l=s.value;if(l&&(l=l.replace(",","."),ur.isInteger(l))){var u=ur.toInteger(l);u>=Number(s.dataset.min)&&u<=Number(s.dataset.max)&&(o+=u/60)}var c=document.getElementById(this._addUID("GPmousePosition"+e+"Seconds")),h=c.value;if(h){h=h.replace(",",".");var d=ur.toFloat(h);d&&d>=Number(c.dataset.min)&&d<=Number(c.dataset.max)&&(o+=d/3600)}return(a==="O"||a==="S")&&(o=-o),o},t.prototype.locateDMSCoordinates=function(){var e=[this.getCoordinate("Lon"),this.getCoordinate("Lat")];if(!(e[0]===null||e[1]===null)){var n=this._currentProjectionSystems.crs;if(!n){ci.log("ERROR : system crs not found");return}var r=this.getMap().getView(),o=ut(e,n,r.getProjection());r.setCenter(o),this._markerOverlay&&!this._hideMarker&&this._markerOverlay.setPosition(o)}},t.prototype.locateCoordinates=function(){var e=document.getElementById(this._addUID("GPmousePositionLon")).value;if(e=e.replace(",","."),e=ur.toFloat(e),e!==null){var n=document.getElementById(this._addUID("GPmousePositionLat")).value;if(n=n.replace(",","."),n=ur.toFloat(n),n!==null){var r=this._currentProjectionSystems.crs;if(!r){ci.log("ERROR : system crs not found");return}var o;this._currentProjectionSystems.type==="Geographical"?o=[this.convert(e),this.convert(n)]:o=[this.convert(n),this.convert(e)];var a=ut(o,this._currentProjectionSystems.crs,"EPSG:4326"),s=this._currentProjectionSystems.geoBBox;if(s){var l=[s.left,s.bottom,s.right,s.top];if(a[0]<l[0]||a[0]>l[2]||a[1]<l[1]||a[1]>l[3])return}var u=this.getMap().getView(),c=ut(o,r,u.getProjection());u.setCenter(c),this._markerOverlay&&!this._hideMarker&&this._markerOverlay.setPosition(c)}}},t.prototype.onMousePositionEditModeLocateClick=function(){if(this.options.editCoordinates){if(!this.editing){this.onMousePositionEditModeClick(!0);return}this._currentProjectionUnits==="DMS"?this.locateDMSCoordinates():this.locateCoordinates();var e=this.options.mapCenterCallback;if(typeof e=="function"){var n=this.getMap().getView(),r=n.getCenter();e.call(this,r)}}},t.prototype.onMousePositionProjectionSystemChange=function(e){var n=e.target.selectedIndex,r=e.target.options[n].value;this._setCurrentSystem(r)},t.prototype._setCurrentSystem=function(e){for(var n=null,r=0;r<this._projectionSystems.length;++r)if(this._projectionSystems[r].code===Number(e)){n=this._projectionSystems[r].type;break}if(!n){ci.log("system not found in projection systems container");return}this._currentProjectionSystems=this._projectionSystems[Number(e)],n!==this._currentProjectionType&&this._setTypeUnitsPanel(n),this._isDesktop||this.onMapMove()},t.prototype.onMousePositionProjectionSystemMouseOver=function(e){ci.trace(e);var n=this.getMap();if(!(!n||!n.getView())){var r=n.getView(),o=r.getProjection(),a=r.calculateExtent(n.getSize());a=vr(a,o,"EPSG:4326");var s=document.getElementById(this._addUID("GPmousePositionProjectionSystem"));s.innerHTML="";for(var l=0;l<this._projectionSystems.length;l++){var u=this._projectionSystems[l],c=null;if(u.geoBBox&&(a[0]>u.geoBBox.right||a[1]>u.geoBBox.top||a[2]<u.geoBBox.left||a[3]<u.geoBBox.bottom)){u===this._currentProjectionSystems&&(c=document.createElement("option"),c.value=u.code,c.text=u.label||l,c.setAttribute("selected","selected"),c.setAttribute("disabled","disabled"),s.appendChild(c));continue}var h=document.createElement("option");h.value=u.code,h.text=u.label||l,u===this._currentProjectionSystems&&h.setAttribute("selected","selected"),s.appendChild(h)}}},t.prototype.onMousePositionProjectionUnitsChange=function(e){var n=e.target.selectedIndex,r=e.target.options[n].value,o=this._currentProjectionUnits;this._currentProjectionUnits=r,this._resetLabelElements(this._currentProjectionType),this._resetUnitElements(this._currentProjectionUnits),(o==="DMS"||this._currentProjectionUnits==="DMS")&&(this._resetCoordinateElements(this.options.editCoordinates,this._currentProjectionType,this._currentProjectionUnits),this._setEditMode(this.editing)),this._isDesktop||this.onMapMove()},t.prototype.convert=function(e){var n;if(this._currentProjectionUnits==="M"||this._currentProjectionUnits==="DEC")n=e;else if(this._currentProjectionUnits==="KM")n=e*1e3;else if(this._currentProjectionUnits==="RAD"){var r=(180/Math.PI).toFixed(20);n=(e*r).toFixed(20)}else if(this._currentProjectionUnits==="GON"){var o=.9.toFixed(20);n=(e*o).toFixed(20)}return n},t.prototype.validateExtentCoordinate=function(e,n){if(["Lon","Lat"].indexOf(e)===-1)return!1;var r=n.replace(",",".");if(r=ur.toFloat(r),r===null)return!1;r=this.convert(r);var o=this._currentProjectionSystems.geoBBox;if(o===void 0)return!0;var a=[o.left,o.bottom,o.right,o.top];return a=vr(a,"EPSG:4326",this._currentProjectionSystems.crs),!(e==="Lat"&&(r<a[0]||r>a[2])||e==="Lon"&&(r<a[1]||r>a[3]))},t}(yi);window.ol&&window.ol.control&&(window.ol.control.GeoportalMousePosition=G_);var wN={drawing_portail:[{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAClFBMVEUAAAD//////////////////////////////////////////////////////////fv/+fL//////////////////////////////////////////////////////////////////////////////////////v7//////fr/////+vL//////////////////Pj//////////////////////////////////////////////////////////////////////////v7//////////////////////////////////////v7//////////////////////////////////////////////////////////////////////////////v7/////////////9+v/9ej/9+z/7tT/3q3/y3//v2D/uU//+O7/5L3/xW//piH/mQH/mAD//v7/79f/yXj/oxr/lwD/mQD//fv/58T/tkr/mQL//v3/58P/sTz/79b/tUf/x3X/mQP/5Lv/oRX/ng3/s0H/w2n/u1b/4rf/8Nr/9eb/7tX/pBv/x3P/8d7/3av/79j///7/zH//mgX/2qP//vz/9+3/wGH/qyz/6Mb/vFj/sj//7NH/wGL/rTP/6sr/+fH/yXf/oBP/37H/2aH/6sz/nw//oBT/0pD/+vT/9OX/uE7/pB3/y33/7ND//Pj/26b/mwj/nAn/sT7/w2r/zYL/8+P/ulT/mwb/5Lz/qCj/+/b/1JT/nQz/nQ3/9uj/w2j/mAH/9un/6sv/skH/lwH/3Kf/pB7/pR7/3Kj/nAj/y37/+/f/8t//mQT/rDD/rDH/1JX/7tb/4LT/pR//z4j/z4n/vFn/7dP/4rn//fq31ydlAAAAY3RSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD++P3qw/2N+0j2GMcHYx68BOkMd/x2IKf+pjrS0WDvXxSL+Cy3TEsIdRyhoDXINOSK8rY72mnrhe2jCycJAAAAAWJLR0QB/wIt3gAAAAd0SU1FB+cFGQAhKnVAysoAAAMmSURBVDjLY2AAA0ZGJmYWVjZ2juRkDnY2VhZmJkZGBiTAyMnFzcPLxy+QkpqaIsDPx8vDzcWJpIJRUEhYRDQtPSMzKzs7KzMjPU1URFhIEK6CUUxcIjknNy+/oBAMCvLzcnOSJcTFGGHyklJFxSWlZYWF5WBQWFhWWlJcJCUJUcEoLSNbUVlVDZWFqqmuqqyQlZEGqZCTV6iprStDkQeqKKurrVGQlwMawMWTXN+ALg9S0VCfzMPFyCAorpjW2ASzvQwIYOymxjRFcUEGLqWa5pZCqONa27Ky2lqhji1saa5R4mJQVklpL4M6rKOzq7u7q7MD6uCy9hQVZQZVtZ5eML+woK+/KBkIivr7CiAivT1qqgzqGhPA3MKy7ImTksFg0sRssEMKCyZoqDNoak2GKJ8ydVoyFEybOgUiNllLk0F7+gwwp2zmrGQ4mDUT7KzCGdO1GZJTZkMUzJmLUDB3DkTB7JRkBp3p8yAK5i9AKFgwH6Jg3nQdBt2FiyD2LV5SBJMvWrIYIrZooS6Dnv5SCKesPQ2mIK0dEpyFS/X1GAwMly2H8FasXAWRX7VyBURk+TJDAwYj49VroAG3dt16oC1F69ethQbtmtXGRgwmphs2boKq2Lxl67ZtW7dshspv2rjB1ITBzFxn+44yeGTu3AmPzrId23XMzRg4LSwrdu2GJQdQkoQxd++qsLTgZGC0MrLes3cfZoLZv3ePtZEVMM0x2tjqHDh4CD3JHdp62M7eBpxqOR0cnY4cPYaaaI8dPeLk7MAJSfZyLq4Vx08UIqkoLDx5qsLNRQ6WMQTdPfasO42sYPOZsx6eiKzF6eXtc27HebiKwvM7zvl4e3EiZU5fv+TcC4icdTFX1M8XNXv7yyZfaoEpaLmULBuAIs/AEGivsrAd4ozCze0LVYICUeUZGIND+C63gTJQYVNbMV9oMJoBQBVh4clXroKC+uqV5PAIDHmgCsnIimv7Cgv3Xa+IlMQiDwzyqOiUG1Om3EiJjrLBpgDojBi7mxcu3LSLCcYqD1QRGzft1q1pcbE45IExH59w+3ZCvBUuBUBnJCYlJaI6AABB269xUXFElwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMy0wNS0yNVQwMDoyOTozNyswMDowMEpaoL8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjMtMDUtMjRUMjI6NDM6MjIrMDA6MDB1WI3HAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACplBMVEUAAAD//////////////////////////////////////////////////////////fz/9/P//////////////////////////////////////////////////////////////////////////////////////v7//////Pr/////////////////////+/n//////////////////////////////////////////////////////////////////////////v7//////////////////////////////////////v7//////////////////////////////////////////////////////////////////////////////v7/////////////8+3/8er/9O7/5dj/zrX/s4z/oHH/lmL/9fD/2MT/qX7/ejj/Zxz/Zhn/Zhr//v7/59z/rof/djL/ZBf/Zxv//fz/3Mr/k13/aBz/ZRn//f3/i1D/5tr/kVr/ZRj/rIP//v3/1sL/cy3/byf/jVX/pnn/aB3/mmf/077/6d7/8On/5tn/dzT/q4H/6+H/zbP/lmH/s43/ah//yK3/9O//oXL/gUP/3cz/m2n/jVT/5Nb/onP/hkn/4ND/9vL/rob/cSv/0Ln/x6r/Zxr/Yxb/pXn/8+7/4NH/cCj/ciz/vZz/+PX/7+f/lWH/eDT/sov/49X/+/n/ya//ayH/bCP/jFL/pnr/tJD/7ub/mWb/ZBb/aiD/18P/fj3/+vf/vp//bSX/bib/v5//pXj/8uv/yrD/eDX/eTb/y7H/bCL/soz/7OL/18T/g0b/hEb/v6D/cy7/wKH/9vP/5tv/jlX/59v/0rz/ejf/uJX/nGr/aR//nGv/g0X/1cD//PvyoJNrAAAAYnRSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD4/erD/Y37SPYYxwdjHrwE6Qx3/HYgp/6mOtLRYO9fFIv4LLdMSwh1HKGgNcg05IrytjvaaeuF7djGYAwAAAABYktHRAH/Ai3eAAAAB3RJTUUH5wUZACErAkf6XAAAA0JJREFUOMtjYAADRkYmZhZWNnaOpCQOdjZWFmYmRkYGJMDIycXNw8vHL5CckpIswM/Hy8PNxYmkglFQSFhENDUtPSMzKyszIz0tVVREWEgQroJRTFwiKTsnNy+/oBAICvLzcnOykyTExRhh8pJSRcUlpWWFheVgUFhYVlpSXCQlCVHBKC0jW1FZVV1TjgRqqqsqK2RlpEEq5OQVaivrygrLUUBhWV1lrYK8HNAALp6k+oZGNHmgisaG+iQeLkYGQXHF1KZ8mO2NZWUwtYX5TamK4oIMXErNLa0FEKGatvbMzPa2GoiSgtaWZiUuBmWV5I5GiHxnV3dPb29Pd1cnREVjR7KKMoOqWl9/IcTICROLkoCgaOIEiJWF/X1qqgzqGpPA3MKyycVgeaCK4slgTxXmT9JQZ9AUmAJRPnVaRRIUVEybChGbIqDJoDV9BpjTOHNWEhzMmgl2VuGM6VoMScmzwQrK5sxFKJg7pwysYHZyEoP29HkQE+YvQChYMB9iwrzp2gw6CxeBFRQsXlIEky9ashgcMoWLFuow6OotBXOWLV+xEqZg5Yrly8CalurpMugbrFoNMWLN2nUQ+XVr10AMWL3KQJ/B0Gj9BkhINm7ctBkkv3nTRqjAhvVGhgzGJlu2boMG7fYdO3ft2rljOzTot23dYmLMYGqmvXvPXmgE7i3bt69sLzQ69+7ZrW1mysBpblGx/0AjLLGBAITdeGB/hYU5JwOjpaHVwUOHMRPMkaMHrQwtgWmO0dpGO+VYAXqSK+g4bmtnDU61nPYOjgvaURNdYWP7Kkcne05Ispdzdqk4cbIGSUVhzanTFa7OcrCMIejmfnDTmQKEgoIzZw+6eyCyFqenl/e5PeVwIwrL95zz9vLkRMqcPr5J5y/AHFpYcPG8qK8Pavb2k026dBkaGo2XryTJ+qPIMzAE2KlcXbEN7IyCbR1XVQIDUOUZGIOC+a61VwMtKay+foMvJAjNAKCK0LCkm7dAIX3rZlJYOIY8UIVkRMXtI4WFR25XREhikQcGeWRU8p27d+8lR0VaY1MAdEa0bdr9+2m20UFY5YEqYmJrHzyojY3BIQ+M+bj4hw/j4yxxKQA6IyExMQHVAQBpWLIaKI0lIgAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMy0wNS0yNVQwMDoyOTozNyswMDowMEpaoL8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjMtMDUtMjRUMjI6NDQ6MDYrMDA6MDAh7rXQAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACbVBMVEUAAAD/////////////////////////////////////////////////////////+/v/8vL//////////////////////////////////////////////////////////////////////////////////////v7/////+vr/////////////////////+Pj//////////////////////////////////////////////////////////////////////////v7//////////////////////////////////////v7//////////////////////////////////////////////////////////////////////////////v7/////////////6+v/6Oj/7Oz/1NT/ra3/f3//YGD/T0//7u7/vb3/b2//ISH/AQH/AAD//v7/19f/eHj/Ghr/+/v/xMT/Skr/AgL//f3/w8P/PDz/1tb/R0f/dXX/AwP/u7v/FRX/DQ3/QUH/aWn/Vlb/t7f/2tr/5ub/1dX/Gxv/c3P/3t7/q6v/2Nj/BQX/o6P//Pz/7e3/YWH/LCz/xsb/WFj/Pz//0dH/YmL/MzP/ysr/8fH/d3f/ExP/sbH/oaH/zMz/Dw//FBT/kJD/9PT/5eX/Tk7/HR3/fX3/0ND/+Pj/pqb/CAj/CQn/Pj7/amr/goL/4+P/VFT/Bgb/vLz/KCj/9vb/lJT/DAz/aGj/6en/y8v/p6f/Hh7/qKj/fn7/9/f/39//BAT/MDD/MTH/lZX/tLT/Hx//iIj/iYn/WVn/09P/ubn/+vpgzcAPAAAAYnRSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD4/erD/Y37SPYYxwdjHrwE6Qx3/HYgp/6mOtLRYO9fFIv4LLdMSwh1HKGgNcg05IrytjvaaeuF7djGYAwAAAABYktHRAH/Ai3eAAAAB3RJTUUH5wUZACErAkf6XAAAAu1JREFUOMtjYAADRkYmZhZWNnaOpCQOdjZWFmYmRkYGJMDIycXNw8vHL5CckpIswM/Hy8PNxYmkglFQSFhENDUtPSMzKyszIz0tVVREWEgQroJRTFwiKTsnNy+/AAzy83JzspMkxMUYYfKSUoVFxSUFSKCkuKhQShKiglFaRra0rLyiAAVUlJeVyspIg1TIyStUVlUXYIDqqkoFeTmgAVw8STW1BVhAbU0SDxcjg6C4YmpdPTYF9XWpiuKCDFxKlQ2NMLGm5szM5iYYr7GhUomLQVkluQXmsNa29o6O9rZWmINbklWUGVTVOrug3u/uKUwCgsKebmiAdHWqqTKoa/RCuVl9YHmgir4sqJZeDXUGTYEMCK9/wsQkKJg4oR8iliGgyaA1aTKEM2VqEhxMnQIRmzxJiyEpeRqEM30GQsGM6RCxaclJDNqTZkI4s2YjFMyeBRGbOUmbQWfOXAhn3vxCmHzh/HkQsblzdBh09RbAfJ0KU5AKC5kFeroM+gYLF0F4i5cshcgvXbIYIrJooYE+g6HRsuVQ9StWrgLaUrhq5QqowPJlRoYMxiar16yFCqxbv2Hjxg3r10G5a9esNjFmMDXT3rQZEYVbtiDYmzdpm5kycJpblG7dhi26t20ttTDnZGC0NLTavmMnpnzTju1WhpbANMdobaOdsisfXT5/w25bO2twquW0d3Dc04ymIr95j6OTPSck2cs5u5Tu3YeqYN/+UldnOVjGEHRz375yLbL8ugMH3T0QWYvT08v70ObDCPnDmw95e3lyImVOH9+knCMIBUdzRH19ULO3n2zSMXjibjyWJOuPIs/AEGCnMqcF6ox1LXNUAgNQ5RkYg4L5aprBGai+uYgvJAjNAKCK0LCk4ydACk4cTwoLx5AHqpCMKD0JDPKdp0ojJLHIA4M8Mir5dH//6eSoSGtsCoDOiLY9c+TIGdvoIKzyQBUxsRPPnp0YG4NDHhjzcfHnzsXHWeJSAHRGQmJiAqoDAOgCnVLAYqeOAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI5OjM3KzAwOjAwSlqgvwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMjo0NDoxOSswMDowMBsMxacAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACf1BMVEUAAAD//////////////////////////////////////////////////////////P3/9Pn//////////////////////////////////////////////////////////////////////////////////////v7/////+/3/////9fr/////////////////+vz//////////////////////////////////////////////////////////////////////////v7//////////////////////////////////////v7//////////////////////////////////////////////////////////////////////////////v7/////////////7/f/7PX/8Pf/3O7/vd7/mcv/gL//c7n/8fj/yuT/jMX/Tab/NJn/MZj/Mpj//v7/3+//k8n/R6P/L5f/M5n//P3/0Of/brb//f7/z+f/Y7H/MJf/bLX/kcf/yeT/Q6H/PZ7/ZrP/h8P/d7v/xeL/4fD/6/X/3e7/SaT/j8f/5PH/u93/crn//v//mMz/N5r/tdr/gcD/Vqv/0ej/ebz/ZrL/2uz/gsD/XK3/1er/8/n/ksn/QaD/wN//tNn/1ur/P5//QqD/ptL/9vr/6vT/cbj/l8v/+vz/t9v/OJv/Opz/ZLH/iMP/m83/6fP/d7r/N5v/Uqj/Mpn/+Pv/qdT/PJ3/7fb/Z7L/uNz/SqT/S6X/udz/OZz/mMv/5fL/drr/Waz/Wqz/qtT/RKH/q9T/9Pn/3u7/Z7P/w+D/TKX/oM//PZ3/erz/Npr/3O3/x+L/+/0F2pMDAAAAY3RSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD++P3qw/2N+0j2GMcHYx68BOkMd/x2IKf+pjrS0WDvXxSL+Cy3TEsIdRyhoDXINOSK8rY72mnrhe2jCycJAAAAAWJLR0QB/wIt3gAAAAd0SU1FB+cFGQAhKwJH+lwAAAM4SURBVDjLdZNnWxNBFIVnEZGEGpBeROkSuoIUwS4KFkTFQp+wFEWzk+AmEFhEDBZQlA5ioxcRsCDYELADSvlBbnY2kACeTztz3r1znztnAOBEEAYbDDcabTKG0HiT0UbDDQYEAXRECIQmpmbmFpaS7GyJpYW5mamJUKBDECIr6802ZE5uXv6lS/l5uTmkzWZrK9EyQdja2cPLBVeuSinEipJevVJwGdrb2RJa38FRJi+8RiOk4IQQfa1QLnN0wATh5OyiLCqWUgodUdLiIqWLs5OGcN3ipiopZZBCT4gpLVG5bXFlCwhNobxsta8hyuTQVEgAkd1W8rpUezrDSvstvU5utRMB4TZV+Q18PqIqbubn36ygMELdKFdtEwJ3D4ma4X+pvHX7zp3btyr5goxa4uEOPL3uViHsV9+TQVaye9WYQFV3vTyBt899bomYGvkDyOmBvIZrBEnv+3gD3+0PMV5bp4K8VHW1eO/hdl/gR9ZzC6ahES6rsYFrC9WTfgBKmjiAbm5ZAVqaaQ5okkAgJltxhUdtK0DbI1yhlRQD/8dPOIB6+kym9WXPnnKTQU8e+4OAwOe4IVpNagFSTeO954EBICi4vQOvOru6sd/d1Yl3OtqDg0BIaE8vnjRT1dfCniJr6avCo6V6e0JDwI6d/QMv+NEOvhwaHh56OciP/sVA/84dICxcPPKK5i+Qpl+/pmn+OulXI+LwMCDYFaEsf8PH6a0mk2/5UL0pV0bsEgAiMiRq9N3Y2sCMvRuNColkM0dE7xaPq6nVkaPU4zGx0VxqBXv27mtr1g8dYt637du/R4Bj73rgoPLDR90aiPr0WXnogKv2YYgOx432Tejknhr8Mhp3ZOVpCY7GJ0xOKZZLIMXUZEL8UYHO4zx2HBZMaw9B1NcCm+PH9J/3CRf47Tt/CPX9B3Q5qecDkBjr8VON26Amhn56nErU9wGRdNr8129NfJH0t9z8TNKqAixxNhnOzGpGPTsDk8+t8VnC4bxybgyhP3PK8w7r+OzIL1yU/J2f/yu5eCF6PYBtIyVmYXp6ISYlaV2fJVLTVIuLqrTU//jszadnLC1lpEf+D2DbyMzKytRv4B+n7ayGbXJj1gAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMy0wNS0yNVQwMDoyOTozNyswMDowMEpaoL8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjMtMDUtMjRUMjI6NDQ6MjkrMDA6MDCVg8JEAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACslBMVEUAAAD////////////////////////////////////////////////////////+/fz79/T////////////////////////////////////////////////////////////////////////////////////+/v7////9/Pv////79/X////////////////9+/r////////////////////////////////////////////////////////////////////////+/v7////////////////////////////////////+/v7////////////////////////////////////////////////////////////////////////////+/v7////////////58+/48ez69PDz5dzpzr3cspnUoIDQlXP69PHt18rYqIzDeU27ZjS6ZTG6ZTL+/v7059/brpPCdUe6Yy+7ZjP+/fzv29DOkm67ZzS6ZDH+/f3v28/LiWO6YzD05t/OkGy6ZDDarJH+/v3t1snAckO+bj3MjWbUn4DXpYfRmXfr08X16eH48Ovz5t3CdknZqo/26+TozLvQlXL//v7dspi8aTfmyLXUoIHGgFbv3NHSm3m5Yy/LjGby49rVoYLIhVzx39X79vPbrZK/cEHq0MDmxrS6ZjK5Yi/58/Dx4Na+bz/AcULhvab8+Pb47+rPlHHCd0ncsZf9+/rnybe9aji9azrLi2TXpojdtJv37unt18nFfVK7ZTL8+vjivqm+bTziv6n58e3WpIfWpYfx4NXMjWfnyrjCd0rDeEvoyrm9azncsZj27OXRmHbHg1nIg1rt2Mriv6rAckTjwKv79vS8ajm9ajnXpYj05t7r0sPDeUzfuKC+bT3Sm3q8aTbIglns1cf9/Pua7OXrAAAAY3RSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD++P3qw/2N+0j2GMcHYx68BOkMd/x2IKf+pjrS0WDvXxSL+Cy3TEsIdRyhoDXINOSK8rY72mnrhe2jCycJAAAAAWJLR0QB/wIt3gAAAAd0SU1FB+cFGQAhKwJH+lwAAANISURBVDjLY2AAA0ZGJmYWVjZ2juRkDnY2VhZmJkZGBiTAyMnFzcPLxy+QkpqaIsDPx8vDzcWJpIJRUEhYRDQtPSMzKzs7KzMjPU1URFhIEK6CUUxcIjknNy+/oLAICAoL8vNyc5IlxMUYYfKSUsUlpWXlRUUVYFBUVF5WWlIsJQlRwSgtI1tZVV1TW4EEamuqqyplZaRBKuTkFerqGxqLKlBAUWNDfZ2CvBzQAC6e5KbmFjR5oIqW5qZkHi5GBkFxxbTWApjtLY2NMLVFBa1piuKCDFxKbe0dhRCh2s6u7u6uzlqIksKO9jYlLgZllZSeFoh8TW9f/4QJ/X29NRAVLT0pKsoMqmoTJxVBjJw8pTgZCIqnTIZYWTRpopoqg7rGVDC3qHFayfRkMJheMg3sqaKCqRrqDJpaMyDKZ86qS4aCulkzIWIztDQZtNNmgzktc+Ymw8HcOWBnFc1O02ZITpkHVjB/wUKEgoUL5oMVzEtJZtBJWwQxYfEShIIliyEmLErTYdBdugysoHD5imKYfPGK5eCQKVq2VJdBT38lWMGq1T1rYArW9KxeBVawUl+PwcBw7TqIk9dv2AiR37hhPURk3VpDAwYj402bITHdsmXrQqAtxQu3boEEbe3mTcZGDCam27bvgAbtzl279+zZvWsnNOh3bN9masJgZq6zt3c+NALnz585c/58aHTO792rY27GwGlhWblvPzQ5HQClyQPQRLV/X6WlBScDo5WR9cFDhzETzOEjB62NrIBpjtHGVufosUL0JFd4/KidvQ041XI6ODqd6EJNdEUtJ084OTtwQpK9nItr5anTtUgqimrPnK10c5GDZQxBd4+DW88VIhQU7jx/0MMTkbU4vbx9LlysgBtRVHHxgo+3FydS5vT1S869BHNoUeHlK6J+vqjZ2182+eo1aGjUXrueLBuAIs/AEGivcqPnJtgZhbdu31AJCkSVZ2AMDuG7cxKU3otqTpbwhQajGQBUERaefPceKKjv3U0Oj8CQB6qQjKy8f7io6MH9ykhJLPLAII+KTnn46NHDlOgoG2wKgM6IsUt//DjdLiYYqzxQRWxc3ZMndXGxOOSBMR+f8PRpQrwVLgVAZyQmJSWiOgAArqa4BP2YBKMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjk6MzcrMDA6MDBKWqC/AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIyOjQ0OjQ2KzAwOjAwpaS7KgAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAChVBMVEUAAAD//////////////////////////////////////////////////////////vv//fL//////////////////////////////////////////////////////////////////////////////////////v7//////vr//////////////////////vj//////v///////////////////////////////////////////////////////////////////v7//////////////////////////////////////v7//////////////////////////////////////////////////////////////////////////////v7//////////////Ov/++j//Oz/+dT/863/7X//6mD/50///O7/9r3/62//4SH/3QH/3AD//v7/+df/7Xj/4Br/3QD//vv/98T/5kr/3QL//v3/98P/5Tz/+db/5kf/7HX/3QP/9rv/4BX/3g3/5UH/6WD/62n/6Fb/9bf/+tr/++b/+dX/4Bv/7HP/+t7///7/86v/+dj/3QX/8qP//vz//O3/6mH/4iz/98b/6Fj/5T//+dH/6mL/4zP/+Mr//fH/7Hf/3xP/9LH/8qH/6mn/+Mz/3g//3xT/8JD//fT/++X/507/4B3/7X3/+ND//vj/86b/3Qj/3gn/5T7/62r/7oL/++P/6FT/3Qb/9rz/4ij//fb/8ZT/3gz//Oj/62j/3AH//On/+Mv/86f/4R7/86j/7n7//vf/+t//3QT/4zD/4zH/8JX/3xX/3gj/9bT/4R//74j/74n/6Fn/+dP/9bn//vrsMn7uAAAAYnRSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD4/erD/Y37SPYYxwdjHrwE6Qx3/HYgp/6mOtLRYO9fFIv4LLdMSwh1HKGgNcg05IrytjvaaeuF7djGYAwAAAABYktHRAH/Ai3eAAAAB3RJTUUH5wUZACErAkf6XAAAAxZJREFUOMtjYAADRkYmZhZWNnaOpCQOdjZWFmYmRkYGJMDIycXNw8vHL5CckpIswM/Hy8PNxYmkglFQSFhENDUtPSMzKyszIz0tVVREWEgQroJRTFwiKTsnNy+/AAzy83JzspMkxMUYYfKSUoVFxSVAqVIwADJKiosKpSQhKhilZWTLyisqobJQNZUV5WWyMtIgFXLyClXVNQUo8iBTaqqrFOTlgAZw8STV1qHLg1TU1SbxcDEyCIorptY3IGxHuKShPlVRXJCBS6mqsakAKt3c0tra0gxVUtDUWKXExaCsktwGFahs7+js6ursaIc6uKAtWUWZQVWtuwfML8jv7etPAoL+vt58iEhPt5oqg7rGBDC3oCBrYmESGBROzALbUpA/QUOdQVMgA6J80uQpSVAwZfIkiFiGgCaD1tRpEM70GUlwMGM6RGzaVC2GpOSZEM6s2QgFs2dBxGYmJzFoT50D4cydh1Awby5EbM5UbQad+QsgnIWLCmHyhYsWQsQWzNdh0NVbDPX1klSYgtQlUKHFeroM+gZLl0GUL1+xEiK/csVyiMiypQb6DIZGq1ZD1a9Zuw5oS+G6tWugAqtXGRkyGJus37ARKrBp85atW7ds3gTlbtyw3sSYwdRMe9t2RGTu2IGIzu3btM1MGTjNLcp27oIlB0Rslxbs2llmYc7JwGhpaLV7z17MBNO8Z7eVoSUwzTFa22jv238APckd2HLQ1s4anGo57R0cD7Wgqig40HLI0cmeE5Ls5Zxdyg4fQVZQUHDkaJmrsxwsYwi6ue9euxFJRcGmY8fdPRBZi9PTy/vE9pNwFQUnt5/w9vLkRMqcPr5JOacQOet0jqivD2r29pNNOnMWpuDsmSRZfxR5BoYAO5X5becgcbSpbb5KYACqPANjUDBfbQsoAxU0tBTxhQShGQBUERqWdP4CKKgvnE8KC8eQB6qQjCi7uLegYO+lsghJLPLAII+MSr48adLl5KhIa2wKgM6Itr1y6tQV2+ggrPJAFTGxU65enRIbg0MeGPNx8deuxcdZ4lIAdEZCYmICqgMA6f6os3UKuXAAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjk6MzcrMDA6MDBKWqC/AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIyOjQ0OjU4KzAwOjAwOTHA6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACr1BMVEUAAAD////////////////////////////////////////////////////////7/v3y+/n////////////////////////////////////////////////////////////////////////////////////+/v7////6/f3////y+/r////////////////4/fz//////v/////////////////////////////////////////////////////////////////+/v7////////////////////////////////////+/v7////////////////////////////////////////////////////////////////////////////+/v7////////////r+ffo+PXs+ffU8+2t591/28tg0r5Pzbju+vi97ORv1sQhwKUBt5gAtpf+/v7X9O942ckavqIAtZYAt5j7/v3E7udKy7UCt5j9/v7D7uY8x7DW8+5Hy7QAtpZ118cDt5i77OQVvKANup1BybJg0b5p1cJWz7q36uLa9PDm9/XV8u4bvqNz18be9fGr59zY8+9/2ssFuJmj5dr8/v7t+fdh0r8sw6rG7+hYz7s/ybHR8uxi0r8zxazK8Onx+/l32MgTvJ+x6N+h5Nlp1MLM8OoPu54UvJ+Q39L0/Prl9/ROzbcdv6N92srQ8ez4/fym5tsIuJoJuZs+yLBq1cOC28zj9/NUz7oGuJq87OMowaf2/PuU4NQMupwNupyU4dTo+PZo1MIBtpdq1cLp+fbL8OoBtpan5tsev6Mev6So5twIuZt+2sv3/Pvf9fJUzroEt5gwxKsxxKuV4NQVvaCV4dTW8+/X8++06eEfv6T7/f2I3c6J3c9Zz7wFuJrT8u256+L6/f3ow7cxAAAAY3RSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD++P3qw/2N+0j2GMcHYx68BOkMd/x2IKf+pjrS0WDvXxSL+Cy3TEsIdRyhoDXINOSK8rY72mnrhe2jCycJAAAAAWJLR0QB/wIt3gAAAAd0SU1FB+cFGQAhKwJH+lwAAAMvSURBVDjLY2AAA0ZGJmYWVjZ2juRkDnY2VhZmJkZGBiTAyMnFzcPLxy+QkpqaIsDPx8vDzcWJpIJRUEhYRDQtPSMzKzs7KzMjPU1URFhIEK6CUUxcIjknNy+/oBAMCvLzcnOSJcTFGGHyklJFxSWlZYWF5WBQWFhWWlJcJCUJUcEoLSNbUVlVDZWFqqmuqqyQlZEGqZCTV6iprStDkQeqKKurrVGQlwMawMWTXN/QiCYPVNHYUJ/Mw8XIICiumNbUDLO9sawMprawuSlNUVyQgUuppqW1EOq4tvaOjvY2qGMLW1tqlLgYlFVSOhuhDuvq7unt7enugjq4sTNFRZlBVa2vH8wvLJgwsSgZCIomTiiAiPT3qakyqGtMAnMLG7Mng+WBKiZngx1SWDBJQ51BU2sKRPnUadOToWD6tKkQsSlamgzaM2aCOY2zZifDwexZYGcVzpyhzZCcMgesoGzuPISCeXPLwArmpCQz6MyYDzFhwUKEgoULICbMn6HDoLtoMcS+JUuLYPJFS5dAxBYv0mXQ018G4ZQtT4MpSFsOiZrCZfp6DAaGK1ZCeKtWr4HIr1m9CiKycoWhAYOR8dp10IBbv2Ej0JaijRvWQ4N23VpjIwYT002bt0BVbN22fceO7du2QuW3bN5kasJgZq6zc1cZLBGU7d5dBksaZbt26pibMXBaWFbs2QtLDqAkCWPu3VNhacHJwGhlZL1v/wHMBHPw0D5rIytgmmO0sdU5fOQoepI7euy4nb0NONVyOjg6nWg/iZpoT7afcHJ24IQkezkX14pTpwuRVBQWnjlb4eYiB8sYgu4e+zacQ1aw9fwFD09E1uL08va5eOkyXEXh5UsXfby9OJEyp69fcu4VRM66mivq54uavf1lk6+1whRcv5EsG4Aiz8AQaK+yaDnEGYVbly9SCQpElWdgDA7hu9kOykCFze23+EKD0QwAqggLT759BxTUd24nh0dgyANVSEbevXegsPDA/buRkljkgUEeFZ3y4OHDBynRUTbYFACdEWP36MqVR3YxwVjlgSpi46Y/fjw9LhaHPDDm4xOePEmIt8KlAOiMxKSkRFQHAAAsgrQ2sknLAAAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMy0wNS0yNVQwMDoyOTozNyswMDowMEpaoL8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjMtMDUtMjRUMjI6NDU6MTIrMDA6MDD2yfpjAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACfFBMVEUAAAD////////////////////////////////////////////////////////8/vz0/fT////////////////////////////////////////////////////////////////////////////////////+/v7////7/vv////1/fX////////////////6/vr//////v/////////////////////////////////////////////////////////////////+/v7////////////////////////////////////+/v7////////////////////////////////////////////////////////////////////////////+/v7////////////v/O/s++zw/PDc+dy9872Z7ZmA6oBz53Px/PHK9sqM64xN4U003TQx3DEy3DL+/v7f+d+T7ZNH4Ecv3C8z3TP8/vzQ99Bu5m79/v3P989j5WMw3DBs5myR7JHJ9slD4EM93j1m5WaA6YCH64d36HfF9cXh+uHr++vd+d1J4EmP7I/k+uT+//6787ty53KY7Zg33Te18rWB6oFW4lbR99F56Hna+dqC6oJc41zV+NXz/fOS7JJB30HA9MC08rQy3TKH6ofW+NY/3j9C30Km8Kb2/fbq++px53GX7Zfa+Nr6/vq387c43Tg63jpk5WSI64ib7pvp++lS4lL4/fip8ak83jzt/O1n5We487hK4UpL4Uu587k53TmY7pj4/vjl+uV26HZZ41la41qq8KpE30Sr8Kv0/fQ53jne+d7D9cNM4Uyg76B66Ho23TbH9cf7/vts+qXUAAAAY3RSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD++P3qw/2N+0j2GMcHYx68BOkMd/x2IKf+pjrS0WDvXxSL+Cy3TEsIdRyhoDXINOSK8rY72mnrhe2jCycJAAAAAWJLR0QB/wIt3gAAAAd0SU1FB+cFGQAhKwJH+lwAAAM8SURBVDjLdZP3X9NQFMVfFIUWLJRpVcoeYlVEQEUExIUyFFFRcfJqqiyb12paDQQKpQXZorJXARcbFRC3oohb/yHTJIUW8fyU5Hxz7/3cdx4ArDBs2XK7FSvtHSB0sF+5wm75MgwDVsIEQkenVSJnF/mlS3IXZ9EqJ0ehwIrAxK5u7h644vKVnNzcnCuXFbiHu5ureJ7APL1Ww7z8gqtKAjEilFcL8vPgai9PzOJL1qjU166TCGlYIURev6ZWrZFwBLZ2nbf2xk0lobESobx5Q+u9bq2ZkPr4UoVFNNLYCNFFhZSvj5QpIHSC6uLFvpkoVkMnIQbEXn54idLSnWZkeVaW4H5eYiD0p3SlXH9ElOnLy/VlBIcQpTrKXwgCAuUGmv/FWFF561ZlhZEvSBvkgQEgKLiqGnF+TW0dZFRXW8MRqLoqOAiEhNazr4huUKsgK5W6gR0EKetDQ8D6sNsc3niHgryoO43ct9th68EG/C77Qt9rgvNquseOhe7iGwCUN7MAqW9ZAFr0JAs0yyGQ4a1chbb2BaC9javQisvAxo5OFiC6ulUWX9XdxW4GdXZsBJs297CAiezFLQDeS5pYoGfzJhC+pa+fG/n+g4ec//DBfe5Lf9+WcBCx9dFjbtN09cAg00U1OFDNrZZ4/GhrBIiMGhoe4Vc7Ojb+5Mn42Ci/+pHhoahIEL1N9tRI8gdIko2NJMkfJ2l8KtsWDQTbd2h1z/g4mcyZNPGheqbT7tguAFhMxM6Jyal/AzM1ObEzIobJHBa7S/bcQCyOHGF4Hhcfy6ZWkLA7sV1vGzpET7cn7kkQcLGX7t2nffGSMFn//+q1dv9eqeViiA8kTQy8sco9Mfr2XdLBhaslOJSc8v6DZr4J0nx4n5J8SGB1OVPTYP6MZVBEfMz3SEu1vd6HveGnWb4JMfsZeh+x8QFIjw+cM3xhCeLL+Fzg0XRbH2AZx0Rfp83xRcppteh4xqICDHEiE377bl71928w8+Q/PkNITml/TCFU9kN7SrKEz6z8dJb8569fP+VZp2OXApgxzsQpZmYUcWcylvQZ4uw56vdv6tzZ//jMyZ+/8OfPhfMx/wOYMS5mZ1+0HeAvs9msMpv5tz0AAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjk6MzcrMDA6MDBKWqC/AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIyOjQ1OjQxKzAwOjAwj8HumgAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACr1BMVEUAAAD////////////////////////////////////////////////////////9/vv5+/L////////////////////////////////////////////////////////////////////////////////////+/v7////9/fr////5+/P////////////////8/fn////////////////////////////////////////////////////////////////////////+/v7////////////////////////////////////+/v7////////////////////////////////////////////////////////////////////////////+/v7////////////3+uz1+en3+u3t9Nbd6rHK34W912i20lj4+u/j7sDD23ajxyyWvw6VvguVvgz+/v7u9drH3X+gxSWUvgmWvw39/vvm8Me00VP+/v3m8MauzkXu9Nmz0FDG3HyUvgrj7r+exCCbwhqwz0rB2XGWvw+51F7h7Lrv9dz0+Oft9NehxifF3Hrx9t/c6a+201j+//7K3oaYwBHZ56j+/vy+12moyjfn8Mn2+uy61WCwzkns89P3+u6+12qryz7p8c35+/HH3X6dwx7e67XY56aVvg2UvQjq8s6cwhuexB/R45b6/PT0+Oa20leVvgqhxijJ3oT8/fna6KqYwBOZwRavzkfB2XLL34nz+OS41F2UvQmYwBKmyDGWvwz7/PfS5JmawRebwhjT5JrB2XD1+erp8s79/vzb6ayiximixir7/PbJ3oOZwRXK3oTx9+Cpyzuqyzvj7sGexCH5+/KZwBSwz0vu9dng7LijxivO4Y6awRjO4Y+61WGXwBHt89Wpyzri7bz9/frM0I39AAAAY3RSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD++P3qw/2N+0j2GMcHYx68BOkMd/x2IKf+pjrS0WDvXxSL+Cy3TEsIdRyhoDXINOSK8rY72mnrhe2jCycJAAAAAWJLR0QB/wIt3gAAAAd0SU1FB+cFGQAhKwJH+lwAAANESURBVDjLY2AAA0ZGJmYWVjZ2juRkDnY2VhZmJkZGBiTAyMnFzcPLxy+QkpqaIsDPx8vDzcWJpIJRUEhYRDQtPSMzKzs7KzMjPU1URFhIEK6CUUxcIjknNy+/oLAICAoL8vNyc5IlxMUYYfKSUsUlpWXlhUUVYFBUWF5WWlIsJQlRwSgtI1tZVV1QWIEECguqqyplZaRBKuTkFWpq68qLKlBAUXldbY2CvBzQAC6e5PoGdHmQiob6ZB4uRgZBccW0xgKY7U3l5U0wdkFjmqK4IAOXUk1zSyHUca1tWVltrVDHFrY01yhxMSirpLQ3QeQ7Oru6e3q6uzo7ICqa2lNUlBlU1Xr7iiBG9k8oTgaC4gn9ECuL+nrVVBnUNSaCuUXlk0omJ4PB5JJJYEcXFUzUUGfQ1JoCUT512vRkKJg+bSpEbIqWJoN22gwwp2nmrGQ4mDUT7KyiGWnaDMmz54AVlM+dh1Awb245WMGc2ckMOvMXQBQsXIRQsGghRMGC+ToMuouXgBUULl1WDJMvXrYUHDJFSxbrMujpLwdzVqxsT4MpSGtfuQKsabm+HoOB4arVECPWrF0HkV+3dg3EgNWrDA0YjIzXb9gICbhNm+cBbSmet3kTJGg3blhvbMRgYrpl6zZo0G7fsXPXrp07tkODftvWLaYmDGbmOrv3rIQmk5V79+3buxKadFbu2a1jbsbAaWFZ2bwfYknFAVCaPABhb9zfXGlpwcnAaGVkffDQYcwEc+ToQWsjK2CaY7Sx1Uk9Voie5Ap3HreztwGnWk4HR6cTbU0oKoqa2k44OTtwQpK9nIvryVOnNyKpKNp45tRJNxc5WMYQdPc4e+48UrovPH/hoIcnImtxenn7XNxTATeiqGLPRR9vL06kzOnrl5x7CZGzLl8R9fNFzd7+sslHr0JDY+PVo8myASjyDAyB9irX2q+DnVF4vf2aSlAgqjwDY3AIX30bKPkWFdy4yRcajGYAUEVYePKt26Cgvn0rOTwCQx6oQjKy8s7doqK79yojJbHIA4M8Knr2/QcP7s+OjrLBpgDojBi7h48ePbSLCcYqD1QRGzf98ePpcbE45IExH5/w5ElCvBUuBUBnJCYlJaI6AADXv7i4Kd/lawAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMy0wNS0yNVQwMDoyOTozNyswMDowMEpaoL8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjMtMDUtMjRUMjI6NDk6NDUrMDA6MDBhsioHAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACnVBMVEUAAAD////////////////////////////////////////////////////////7/fvy+fL////////////////////////////////////////////////////////////////////////////////////+/v7////6/Pr////////////////////4/Pj////////////////////////////////////////////////////////////////////////+/v7////////////////////////////////////+/v7////////////////////////////////////////////////////////////////////////////+/v7////////////r9uvo9Ojs9uzU69St2K1/w39gtWBPrU/u9+694L1vu28hlyEBiAEAhwD+/v7X7Nd4wHgalBoAhgAAiAD7/fvE48RKqkoCiAL9/v3D48M8pDzW7NZHqUd1vnUDiAO737sVkRUNjg1BpkFgtGBpuWkCiQJWsFa33bfa7drm8+bV69UblBtzvXPe796r16vY7Nj+//4FigWj1KP8/fzt9u1htWEsnCzG5Mbr9etYsVg/pT/R6dFitmIzoDPK5srx+PF3wHcTkBOx2rGh06EAhQDM58wPjg8UkRSQy5D0+vTl8uVOrE4dlR19wn3Q6dD4/Pim1aYIiwgJjAk+pD5qumqCxYLj8uNUr1QGiga837womij2+/aUzZQMjQwNjQ1ouGgBhwFquWrp9OnL5ssBhgGn1qcelR4elh6o1qj2+vZ+w373+/ff8N8EiAQwnjAxnjGVzZUVkhUJiwm03LQflh+IyIiJyIlZsVnT6tP8/vy53rn6/Pq97PRtAAAAYnRSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD4/erD/Y37SPYYxwdjHrwE6Qx3/HYgp/6mOtLRYO9fFIv4LLdMSwh1HKGgNcg05IrytjvaaeuF7djGYAwAAAABYktHRAH/Ai3eAAAAB3RJTUUH5wUZACErAkf6XAAAAzFJREFUOMtjYAADRkYmZhZWNnaOpCQOdjZWFmYmRkYGJMDIycXNw8vHL5CckpIswM/Hy8PNxYmkglFQSFhENDUtPSMzKyszIz0tVVREWEgQroJRTFwiKTsnNy+/AAzy83JzspMkxMUYYfKSUoVFxSWlBQVlYFBQUFpSXFQoJQlRwSgtI1teUVkFlYWqqaqsKJeVkQapkJNXqK6pLUWRB6oora2pVpCXAxrAxZNUV48uD1JRX5fEw8XIICiumNrQCLO9FAhg7MaGVEVxQQYupeqm5gKo41pa29paW6COLWhuqlbiYlBWSW4vhQh0dHZ19/R0d3V2QFSUtierKDOoqvX2gfkF+f0TCpOAoHBCfz5EpK9XTZVBXWMimFtQmjVpchIYTJ6UBXZIQf5EDXUGTYEMiPIpU6clQcG0qVMgYhkCmgxa02eAOaUzZyXBwayZYGcVzJiuxZA0ew5Ewdx5CAXz5kIUzJmdxKA9fT5EwYKFCAULF0AUzJ+uzaCzaDHEviVLC2HyhUuXQMQWL9Jh0NVbBuEsb0+FKUhtXw4RW6any6BvsGIlhLdq9RqI/JrVqyAiK1cY6DMYGq1dBwnJ0vUbNgJDYvLGDeuhAuvWGhkyGJts2rwFGrRbt23fsWP7tq3QoN+yeZOJMYOpmfbOXcuhEbi8dPfu0uXQ6Fy+a6e2mSkDp7lF+Z69pbBUUABLd2Wle/eUW5hzMjBaGlrt238AM8Ec3L/PytASmOYYrW20Uw4dRk9yh48ctbWzBqdaTnsHx2Otx1ET7fHWY45O9pyQZC/n7FJ+4mQBkoqCglOny12d5WAZQ9DN/cyGLcgKtp495+6ByFqcnl7e53ddgKsouLDrvLeXJydS5vTxTcq5iMhZl3JEfX1Qs7efbNLlK9DQKL1yOUnWH0WegSHATmVRO8QZBVfbF6kEBqDKMzAGBfPVtYIyUEFjaxFfSBCaAUAVoWFJ166Dgvr6taSwcAx5oArJiPIbBwoKDtwsj5DEIg8M8sio2bemTLk1OyrSGpsCoDOibW9fvHjbNjoIqzxQRUzsnbt378TG4JAHxnxc/L178XGWuBQAnZGQmJiA6gAAFLyvxAL3bxQAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjk6MzcrMDA6MDBKWqC/AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIyOjQ5OjU2KzAwOjAwnPAwBAAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAClFBMVEUAAAD////////////////////////////////////////////////////////7//3y//n////////////////////////////////////////////////////////////////////////////////////+//7////6//3////y//r////////////////4//z////////////////////////////////////////////////////////////////////////+//7////////////////////////////////////+//7////////////////////////////////////////////////////////////////////////////+//7////////////r//fo//Xs//fU/+6t/95//8tg/79P/7nu//i9/+Rv/8Uh/6YB/5kA/5j+//7X/+94/8ka/6MA/5cA/5n7//3E/+dK/7YC/5n9//7D/+c8/7HW/+9H/7V1/8cD/5m7/+QV/6EN/55B/7Np/8NW/7u3/+La//Dm//XV/+4b/6Rz/8fe//Gr/93Y/+/+//9//8wF/5qj/9r8//7t//dh/8As/6vG/+hY/7w//7LR/+xi/8Az/63K/+rx//l3/8kT/6Cx/9+h/9nM/+oP/58U/6CQ/9L0//rl//RO/7gd/6R9/8vQ/+z4//ym/9sI/5sJ/5w+/7Fq/8OC/83j//NU/7oG/5u8/+Qo/6j2//uU/9QM/50N/53o//Zo/8MB/5jp//bL/+pB/7IB/5en/9we/6Qe/6Wo/9wI/5x+/8v3//vf//IE/5kw/6wx/6yV/9TW/+60/+Af/6WI/8+J/89Z/7zT/+25/+L6//2DMMmrAAAAY3RSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD++P3qw/2N+0j2GMcHYx68BOkMd/x2IKf+pjrS0WDvXxSL+Cy3TEsIdRyhoDXINOSK8rY72mnrhe2jCycJAAAAAWJLR0QB/wIt3gAAAAd0SU1FB+cFGQAhKwJH+lwAAAMmSURBVDjLY2AAA0ZGJmYWVjZ2juRkDnY2VhZmJkZGBiTAyMnFzcPLxy+QkpqaIsDPx8vDzcWJpIJRUEhYRDQtPSMzKzs7KzMjPU1URFhIEK6CUUxcIjknNy+/oBAMCvLzcnOSJcTFGGHyklJFxSWlZYWF5WBQWFhWWlJcJCUJUcEoLSNbUVlVDZWFqqmuqqyQlZEGqZCTV6iprStDkQeqKKurrVGQlwMawMWTXN+ALg9S0VCfzMPFyCAorpjW2ASzvQwIYOymxjRFcUEGLqWa5pZCqONa27Ky2lqhji1saa5R4mJQVklpL4M6rKOzq7u7q7MD6uCy9hQVZQZVtZ5eML+woK+/KBkIivr7CiAivT1qqgzqGhPA3MKy7ImTksFg0sRssEMKCyZoqDNoak2GKJ8ydVoyFEybOgUiNllLk0F7+gwwp2zmrGQ4mDUT7KzCGdO1GZJTZkMUzJmLUDB3DkTB7JRkBp3p8yAK5i9AKFgwH6Jg3nQdBt2FiyD2LV5SBJMvWrIYIrZooS6Dnv5SCKesPQ2mIK0dEpyFS/X1GAwMly2H8FasXAWRX7VyBURk+TJDAwYj49VroAG3dt16oC1F69ethQbtmtXGRgwmphs2boKq2Lxl67ZtW7dshspv2rjB1ITBzFxn+44yeGTu3AmPzrId23XMzRg4LSwrdu2GJQdQkoQxd++qsLTgZGC0MrLes3cfZoLZv3ePtZEVMM0x2tjqHDh4CD3JHdp62M7eBpxqOR0cnY4cPYaaaI8dPeLk7MAJSfZyLq4Vx08UIqkoLDx5qsLNRQ6WMQTdPfasO42sYPOZsx6eiKzF6eXtc27HebiKwvM7zvl4e3EiZU5fv+TcC4icdTFX1M8XNXv7yyZfaoEpaLmULBuAIs/AEGivsrAd4ozCze0LVYICUeUZGIND+C63gTJQYVNbMV9oMJoBQBVh4clXroKC+uqV5PAIDHmgCsnIimv7Cgv3Xa+IlMQiDwzyqOiUG1Om3EiJjrLBpgDojBi7mxcu3LSLCcYqD1QRGzft1q1pcbE45IExH59w+3ZCvBUuBUBnJCYlJaI6AABB269xUXFElwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMy0wNS0yNVQwMDoyOTozNyswMDowMEpaoL8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjMtMDUtMjRUMjI6NTA6MDYrMDA6MDDpi8pqAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACbVBMVEUAAAD////////////////////////////////////////////////////////7///y///////////////////////////////////////////////////////////////////////////////////////+///////6///////////////////////4///////////////////////////////////////////////////////////////////////////+///////////////////////////////////////+///////////////////////////////////////////////////////////////////////////////+///////////////r///o///s///U//+t//9///9g//9P///u//+9//9v//8h//8B//8A///+///X//94//8a///7///E//9K//8C///9///D//88///W//9H//91//8D//+7//8V//8N//9B//9p//9W//+3///a///m///V//8b//9z///e//+r///Y//8F//+j///8///t//9h//8s///G//9Y//8////R//9i//8z///K///x//93//8T//+x//+h///M//8P//8U//+Q///0///l//9O//8d//99///Q///4//+m//8I//8J//8+//9q//+C///j//9U//8G//+8//8o///2//+U//8M//9o///p///L//+n//8e//+o//9+///3///f//8E//8w//8x//+V//+0//8f//+I//+J//9Z///T//+5///6//8Ngdu6AAAAYnRSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD4/erD/Y37SPYYxwdjHrwE6Qx3/HYgp/6mOtLRYO9fFIv4LLdMSwh1HKGgNcg05IrytjvaaeuF7djGYAwAAAABYktHRAH/Ai3eAAAAB3RJTUUH5wUZACErAkf6XAAAAu1JREFUOMtjYAADRkYmZhZWNnaOpCQOdjZWFmYmRkYGJMDIycXNw8vHL5CckpIswM/Hy8PNxYmkglFQSFhENDUtPSMzKyszIz0tVVREWEgQroJRTFwiKTsnNy+/AAzy83JzspMkxMUYYfKSUoVFxSUFSKCkuKhQShKiglFaRra0rLyiAAVUlJeVyspIg1TIyStUVlUXYIDqqkoFeTmgAVw8STW1BVhAbU0SDxcjg6C4YmpdPTYF9XWpiuKCDFxKlQ2NMLGm5szM5iYYr7GhUomLQVkluQXmsNa29o6O9rZWmINbklWUGVTVOrug3u/uKUwCgsKebmiAdHWqqTKoa/RCuVl9YHmgir4sqJZeDXUGTYEMCK9/wsQkKJg4oR8iliGgyaA1aTKEM2VqEhxMnQIRmzxJiyEpeRqEM30GQsGM6RCxaclJDNqTZkI4s2YjFMyeBRGbOUmbQWfOXAhn3vxCmHzh/HkQsblzdBh09RbAfJ0KU5AKC5kFeroM+gYLF0F4i5cshcgvXbIYIrJooYE+g6HRsuVQ9StWrgLaUrhq5QqowPJlRoYMxiar16yFCqxbv2Hjxg3r10G5a9esNjFmMDXT3rQZEYVbtiDYmzdpm5kycJpblG7dhi26t20ttTDnZGC0NLTavmMnpnzTju1WhpbANMdobaOdsisfXT5/w25bO2twquW0d3Dc04ymIr95j6OTPSck2cs5u5Tu3YeqYN/+UldnOVjGEHRz375yLbL8ugMH3T0QWYvT08v70ObDCPnDmw95e3lyImVOH9+knCMIBUdzRH19ULO3n2zSMXjibjyWJOuPIs/AEGCnMqcF6ox1LXNUAgNQ5RkYg4L5aprBGai+uYgvJAjNAKCK0LCk4ydACk4cTwoLx5AHqpCMKD0JDPKdp0ojJLHIA4M8Mir5dH//6eSoSGtsCoDOiLY9c+TIGdvoIKzyQBUxsRPPnp0YG4NDHhjzcfHnzsXHWeJSAHRGQmJiAqoDAOgCnVLAYqeOAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI5OjM3KzAwOjAwSlqgvwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMjo1MDoyMSswMDowMG4J85kAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACu1BMVEUAAAD////////////////////////////////////////////////////////8/f3y9/r////////////////////////////////////////////////////////////////////////////////////+/v7////6/P3////z9/r////////////////5+/z//////v/////////////////////////////////////////////////////////////////+/v7////////////////////////////////////+/v7////////////////////////////////////////////////////////////////////////////+/v7////////////s8/jp8fft9PjW5vCwz+KEtdJno8hXmcLu9fnA2Oh1q80qfrIMa6cJaqYKaqb+/v7Z6PF+sdAkea8HaKULa6f8/f3G3epRlcAJaab9/f7G3OpEjrsHaaXY5/FOlL97rs8Iaab9/v6+2Ocfdq0Yc6tJkb1no8dvqMsIaaUNbKhdncS61ebb6fLn8PbX5vAle7B5rs7f7POuzuGFtdMPbainyt/8/f5oo8g1hbbI3utfnsVHkLzT5O/u9PhppMk8ibjM4Ozx9/p9sNAcda200eSlyN4La6YGaKVwqMvO4e0Zc6wddq2Vv9j0+Pvm8PZWmMIme7GDs9LS5O/+/v/5+/ypy98Rb6kTcKpGj7xxqcyIt9Pk7/VcnMQQbqj7/f0wgbQKaqf3+vyYwdkVcaoWcquZwdpvp8vq8vfN4e1JkL2rzOAnfLEofLGszOH2+vyCs9ITb6mDtNLg7PNbnMQ5h7c5h7jA2egfd66awtry9/pvqMoSb6kMbKe30+UpfbGNutaOutZgn8XV5vC81ub7/P0PF+8/AAAAY3RSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD++P3qw/2N+0j2GMcHYx68BOkMd/x2IKf+pjrS0WDvXxSL+Cy3TEsIdRyhoDXINOSK8rY72mnrhe2jCycJAAAAAWJLR0QB/wIt3gAAAAd0SU1FB+cFGQAhKwJH+lwAAANLSURBVDjLY2AAA0ZGJmYWVjZ2juRkDnY2VhZmJkZGBiTAyMnFzcPLxy+QkpqaIsDPx8vDzcWJpIJRUEhYRDQtPSMzKzs7KzMjPU1URFhIEK6CUUxcIjknNy+/oLAICAoL8vNyc5IlxMUYYfKSUsUlpWXlhUUVYFBUWF5WWlIsJQlRwSgtI1tZVV1QU4EEagqqqyplZaRBKuTkFWrr6huKKlBAUUN9Xa2CvBzQAC6e5MYmdHmQiqbGZB4uRgZBccW05gKY7S3l5S0wdkFzmqK4IAOXUmtbeyFEqKajs6urs6MGoqSwva1ViYtBWSWluwci39vXP2HixAn9fb0QFT3dKSrKDKpqkyYXQYycMrU4GQiKp06BWFk0eZKaKoO6xjQwt6ghuwQsD1RRkg12dFHBNA11Bk2t6RDlM2bOSoaCWTNnQMSma2kyaKfNBnNa5sxNhoO5c1rACmanaTMkp8wDKyifvwChYMH8crCCeSnJDDoLF4EVNCxeglCwZHEDWMGihToMukuXgRUULl9RDJMvXrEcHDJFy5bqMujprwRzVq1ekwZTkLZm9SqwppX6egwGhmvXQYxYv2EjRH7jhvUQA9atNTRgMDLetBns5IqWLVu3bU9O3r5t6xaowOZNxkYMJqY7du6CBG3L7j179+3bu2c3RL5o184dpiYMZuY6+w+shkRg4erygwfLV0OirmL1gf065mYMnBaWh9oOQ/RUHAGlySMQdsvhtkOWFpwMjFZG1kePHcdMMCdOHrU2sgKmOUYbW53UU4XoSa5wzWk7extwquV0cHQ6c7YFRUVRy9kzTs4OnJBkL+fiWnnuPLKKopYLFyvdXORgGUPQ3ePS5SuFCAWFu68e9fBEZC1OL2+fa9cr4EYUVRy45uPtxYmUOX39knNvIHLWzVuifr6o2dtfNvnkbWhotNy+kywbgCLPwBBor3L33n2wMwrvr7mrEhSIKs/AGBzC13j2AdCSogdnS/hCg9EMAKoIC09++AgU1I8eJodHYMgDVUhGHnp8oqjoxJNDkZJY5IFBHhWd8nTGjKcp0VE22BQAnRFj9+zGjWd2McFY5YEqYuNmPX8+Ky4Whzww5uMTXrxIiLfCpQDojMSkpERUBwAAPAa7YJpbYIgAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjk6MzcrMDA6MDBKWqC/AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIyOjUwOjM0KzAwOjAw8JvcoAAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACzVBMVEUAAAD////////////////////////////////////////////////////////7/Pzy9Pb////////////////////////////////////////////////////////////////////////////////////+/v7////6+/v////////////////////4+fr////////////////////////////////////////////////////////////////////////+/v7////////////////////////////////////+/v7////////////////////////////////////////////////////////////////////////////+/v7////////////r7/Ho7O/s7/LU2+GtusZ/lKdge5JPbIfu8fO9yNFvh5whRWYBK1AAKE8AKU/+/v7X3uR4j6IaP2EAJk0AKlD7/PzEztZKZ4ICK1EAKE79/f3DzdY8XHkAJ03W3eNHZYB1jKADK1EAJ067xtAVO14NNVlBYHxgepHr7vFpgpgCLFFWcou3ws3a4OXm6u3V2+IbQWMBK1Fzip7e4+iruMVPbIbY3uQFLlOjssD8/f3t8PJhe5IsT27Gz9hYc4w/X3vR2d9ifJMzVXPK09vx8/V3jqITOVyxvcmhsL4AKVAAJUzM1NwPNloUOl2QorP09vfl6e1Oa4UdQmN9k6bQ2N/4+fqmtMIIL1QJMVY+XXpqg5mCl6nj6OxUcYoAJkwGL1S8x9EoSmr2+PmUpbUMM1cNNFiUprVogZgBKE5qgpjp7PDL1NsBJ06ntcIeQmQeQ2WotsP29/l9kqUIMVV+k6b3+Pnf5OlUcIoEKlAwUnExUnG9yNKVprYVPF4IMFUJMFVBYH3X3uO0wMwfRGWInK0MNFiJnK5ZdI3T2uEwUnC5xM/6+/yAxxLtAAAAYnRSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD4/erD/Y37SPYYxwdjHrwE6Qx3/HYgp/6mOtLRYO9fFIv4LLdMSwh1HKGgNcg05IrytjvaaeuF7djGYAwAAAABYktHRAH/Ai3eAAAAB3RJTUUH5wUZACErAkf6XAAAA0hJREFUOMtjYAADRkYmZhZWNnaOpCQOdjZWFmYmRkYGJMDIycXNw8vHL5CckpIswM/Hy8PNxYmkglFQSFhENDUtPSMzKyszIz0tVVREWEgQroJRTFwiKTsnNy+/oBAICvLzcnOykyTExRhh8pJSRcUlpWWFheVgUFhYVlpSXCQlCVHBKC0jW1FZVV1TjgRqqqsqK2RlpEEq5OQVauvqGwrLUUBhQ31drYK8HNAALp6kxiZ0eZCKpsYkHi5GBkFxxdTmFpjtrWVlrTB2S3OqorggA5dSbVs7xP7Cmo7Orq7OjhqIkpr2tlolLgZlle6eBoh8b1//hIkTJ/T39UJUNPR0qygzqKpNmgzmF06ZOq0oCQiKpk2dAhGZPElNlUFdY3p+IdhRM2aC5YEqZs4AO7owf7qGOoOmQAZE+azZc5KgYM7sWRCxDAFNBq2588Cc1vkLkuBgwfxWsIJ5c7UYkroXghWULVqMULB4URlYwcLuJAbtuUvAChqWLkMoWLYU7LHCJXO1GXSWrwArKFi5qggmX7RqZQFYwYrlOgy6eqvBCtas7UmFKUjtWbsGrGC1ni6DvsG69RAnb9i4CSK/aeMGiMj6dQb6DIZGm7dAQrp167btQFuKtm/b2goJ6y2bjQwZjE127NwFCdrW3Xv27tu3d89uiHzhrp07TIwZTM209x84CI3AgwcPHTp4EBqdBw/s1zYzZeA0t6g4fKQGlthAAJqojhyusDDnZGC0NLQ6euw4ZoI5cfKolaElMM0xWttop5w6jZ7kTp85a2tnDU61nPYOjuc6z6OoKDzfec7RyZ4TkuzlnF0qLlysQVJRWHPpcoWrsxwsYwi6uV+5eg0p3dfsvn7D3QORtTg9vbxv3roNN6Lw9q2b3l6enEiZ08c3KecOzJLCmrv3RH19ULO3n2zSfWjiLq95cD9J1h9FnoEhwE5lec9DcCQXPOpZrhIYgCrPwBgUzNfYCcpAhS2Pn/CFBKEZAFQRGpb09BkopJ89TQoLx5AHqpCMqHj+orDwxcuKCEks8sAgj4zqfjVr1qvuqEhrbAqAzoi2ff3mzWvb6CCs8kAVMbFz3r6dExuDQx4Y83Hx797Fx1niUgB0RkJiYgKqAwC8prs7Sn3FCAAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMy0wNS0yNVQwMDoyOTozNyswMDowMEpaoL8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjMtMDUtMjRUMjI6NTA6NDMrMDA6MDA/+es3AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACfFBMVEUAAAD////////////////////////////////////////////////////////8/P709P3////////////////////////////////////////////////////////////////////////////////////+/v7////7+/7////19f3////////////////6+v7///////7////////////////////////////////////////////////////////////////+/v7////////////////////////////////////+/v7////////////////////////////////////////////////////////////////////////////+/v7////////////v7/zs7Pvw8Pzc3Pm9vfOZme2AgOpzc+fx8fzKyvaMjOtNTeE0NN0xMdwyMtz+/v7f3/mTk+1HR+AvL9wzM938/P7Q0Pdubub9/f7Pz/djY+UwMNxsbOaRkezJyfZDQ+A9Pd5mZuWAgOmHh+t3d+jFxfXh4frr6/vd3flJSeCPj+zk5Pr+/v+7u/NycueYmO03N921tfKBgepWVuLR0fd5eeja2vmCgupcXOPV1fjz8/2SkuxBQd/AwPS0tPIyMt2Hh+rW1vg/P95CQt+mpvD29v3q6vtxceeXl+3a2vj6+v63t/M4ON06Ot5kZOWIiOubm+7p6ftSUuL4+P2pqfE8PN7t7fxnZ+W4uPNKSuFLS+G5ufM5Od2YmO74+P7l5fp2duhZWeNaWuOqqvBERN+rq/D09P05Od7e3vnDw/VMTOGgoO96eug2Nt3Hx/X7+/4Nm4E+AAAAY3RSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD++P3qw/2N+0j2GMcHYx68BOkMd/x2IKf+pjrS0WDvXxSL+Cy3TEsIdRyhoDXINOSK8rY72mnrhe2jCycJAAAAAWJLR0QB/wIt3gAAAAd0SU1FB+cFGQAhKwJH+lwAAAM8SURBVDjLdZP3X9NQFMVfFIUWLJRpVcoeYlVEQEUExIUyFFFRcfJqqiyb12paDQQKpQXZorJXARcbFRC3oohb/yHTJIUW8fyU5Hxz7/3cdx4ArDBs2XK7FSvtHSB0sF+5wm75MgwDVsIEQkenVSJnF/mlS3IXZ9EqJ0ehwIrAxK5u7h644vKVnNzcnCuXFbiHu5ureJ7APL1Ww7z8gqtKAjEilFcL8vPgai9PzOJL1qjU166TCGlYIURev6ZWrZFwBLZ2nbf2xk0lobESobx5Q+u9bq2ZkPr4UoVFNNLYCNFFhZSvj5QpIHSC6uLFvpkoVkMnIQbEXn54idLSnWZkeVaW4H5eYiD0p3SlXH9ElOnLy/VlBIcQpTrKXwgCAuUGmv/FWFF561ZlhZEvSBvkgQEgKLiqGnF+TW0dZFRXW8MRqLoqOAiEhNazr4huUKsgK5W6gR0EKetDQ8D6sNsc3niHgryoO43ct9th68EG/C77Qt9rgvNquseOhe7iGwCUN7MAqW9ZAFr0JAs0yyGQ4a1chbb2BaC9javQisvAxo5OFiC6ulUWX9XdxW4GdXZsBJs297CAiezFLQDeS5pYoGfzJhC+pa+fG/n+g4ec//DBfe5Lf9+WcBCx9dFjbtN09cAg00U1OFDNrZZ4/GhrBIiMGhoe4Vc7Ojb+5Mn42Ci/+pHhoahIEL1N9tRI8gdIko2NJMkfJ2l8KtsWDQTbd2h1z/g4mcyZNPGheqbT7tguAFhMxM6Jyal/AzM1ObEzIobJHBa7S/bcQCyOHGF4Hhcfy6ZWkLA7sV1vGzpET7cn7kkQcLGX7t2nffGSMFn//+q1dv9eqeViiA8kTQy8sco9Mfr2XdLBhaslOJSc8v6DZr4J0nx4n5J8SGB1OVPTYP6MZVBEfMz3SEu1vd6HveGnWb4JMfsZeh+x8QFIjw+cM3xhCeLL+Fzg0XRbH2AZx0Rfp83xRcppteh4xqICDHEiE377bl71928w8+Q/PkNITml/TCFU9kN7SrKEz6z8dJb8569fP+VZp2OXApgxzsQpZmYUcWcylvQZ4uw56vdv6tzZ//jMyZ+/8OfPhfMx/wOYMS5mZ1+0HeAvs9msMpv5tz0AAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjk6MzcrMDA6MDBKWqC/AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIyOjUwOjU2KzAwOjAwoWvEDgAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACTFBMVEUAAAD////////////////////////////////////////////////////////9/v/5+v/////////////////////////////////////////////////////////////////////////////////////+/v/////8/f/////////////////////8/P///////v/////////////////////////////////////////////////////////////////+/v/////////////////////////////////////+/v/////////////////////////////////////////////////////////////////////////////+/v/////////////2+P/09//r8P/Y5P/D1P+1yv+txP/3+f/g6f+7z/+Xtf+Iqv+Hqf/+/v/s8f/A0v+Usv+GqP/9/f/j6/+qwv+kvv+pwf++0f+Gqf/f6P+RsP+Orv+mv/+0yv+5zf+Jq/+wxv/d5//t8v/z9v+Us/+90P/v9P/X4/+Kq//U4P/9/v/2+f+cuP/k7P/1+P+xx/+lv//p7/+2yv+gu//m7f/4+v+Qr//a5P/T3/+FqP/n7f/L2v/6+//y9v+sxP+Vs//C1P/8/P/V4f+LrP+Mrf+6zf/F1f/y9f+vxv+KrP+atv/7/P/N2/+Nrf+Nrv+4zP/W4v+VtP+WtP/6/P/C0/+MrP/D0//w9P+euv+SsP+Ssf/N3P/c5v/I1//q8P/e5//8/f/tCMxjAAAAYnRSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD4/erD/Y37SPYYxwdjHrwE6Qx3/HYgp/6mOtLRYO9fFIv4LLdMSwh1HKGgNcg05IrytjvaaeuF7djGYAwAAAABYktHRAH/Ai3eAAAAB3RJTUUH5wUZACErAkf6XAAAAyFJREFUOMt1k+db01AUxm+U1QKllT0KAlXUInsjoOICRREVFZGRMMrKTSFlBVoKKGgZUqZShiJDUUARFyrrHzPkJrRlnE855/09J+9z7jkAcIFhx47b2NrZO+C4g72drc3xYxgGLAITiR2dnCUuUqKkhJC6SJydHMUiCwKTnXB1cydKy8pVFRWq8rJSwt3N9YRsj8A8PL3wyqrqGhJyQdZUV1XiXp4emKB7+1Dq2jqalbiAkK6rVVM+3ojAfP3kmvoGkld5hmyo18j9fHcJ/4CTVH0jbaWzBN1YT50M8GcbiJ1wddN+fZdoUuNOYgzIPAOJZqE/ZGiaEb7JZiLQUwbEQVRLK+TNaXVtbTotbxa2tlBBYhCsIPQ0KrR3dD57/vxZZ0c7Img9oQgGp06XdkHUsvsFhbNBvehGv4RdpadPgZAzL7kU0hVqnA91BWcaki/PhICz0nKEG3p6BaC3x4Bq5dKz4FyfikuY/lf4XrzqZzhA1XcO4ANGDqAHh8zA0CDnGxoHcKDsG0bAyKgZGB1BwHCfEoSO1aL/vX5DCTr15jWq1Y6FgvNh4ygx6QkBIPQmVBsPOw/CIya0KGudnEL61CQaLdRORISDyKjpt5xlknk3w/kcmnnHF95OR0WC6Jj3s3NotMx848KHDwuN80iHc7PvY6JBbJzy46KJf0AT/ekTbeKf07T4URkXC0TxCZqWz4ywBVDYO5L53KJJiBcBLDEyaWl55eDCfFleSopMZHcOS76gLPkK968c1JekpCZzWytKu3hpVMdYLy2jG710OU2E1t4//Ypm9ZtlDwjXVjVX0/2Fw5Bdu/79x5wl8PPX0vUb5tMSZWTe/L1ovgxILv6+mZkhsjjOW1l41br5star3LNuWZ/3bTm+/IefBvP3Hy6/Y6UDkJ2qGNMjG3BOP6a4m22tAyznnkSt27UBSZ1acj9nXwOWeJCLb6ztjnptA899eEBnCe9Hms0VCFc2NY+8D9HZkT/OGzAaDMaBvMfJhwGsjScpW+vrWylPcg7VWSL/KbW9TT3NP0JnX76gcGensCDxKIC1UVRcXGRt4D+SPpTGEJHXggAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMy0wNS0yNVQwMDoyOTozNyswMDowMEpaoL8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjMtMDUtMjRUMjI6NTE6MDYrMDA6MDAGSaFUAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAClFBMVEUAAAD////////////////////////////////////////////////////////9+//58v/////////////////////////////////////////////////////////////////////////////////////+/v/////9+v/////68v/////////////////8+P/////////////////////////////////////////////////////////////////////////+/v/////////////////////////////////////+/v/////////////////////////////////////////////////////////////////////////////+/v/////////////36//16P/37P/u1P/erf/Lf/+/YP+5T//47v/kvf/Fb/+mIf+ZAf+YAP/+/v/v1//JeP+jGv+XAP+ZAP/9+//nxP+2Sv+ZAv/+/f/nw/+xPP/v1v+1R//Hdf+ZA//ku/+hFf+eDf+zQf/Daf+7Vv/it//w2v/15v/u1f+kG//Hc//x3v/dq//v2P///v/Mf/+aBf/ao//+/P/37f/AYf+rLP/oxv+8WP+yP//s0f/AYv+tM//qyv/58f/Jd/+gE//fsf/Zof/qzP+fD/+gFP/SkP/69P/05f+4Tv+kHf/Lff/s0P/8+P/bpv+bCP+cCf+xPv/Dav/Ngv/z4/+6VP+bBv/kvP+oKP/79v/UlP+dDP+dDf/26P/DaP+YAf/26f/qy/+yQf+XAf/cp/+kHv+lHv/cqP+cCP/Lfv/79//y3/+ZBP+sMP+sMf/Ulf/u1v/gtP+lH//PiP/Pif+8Wf/t0//iuf/9+v/1rAt3AAAAY3RSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD++P3qw/2N+0j2GMcHYx68BOkMd/x2IKf+pjrS0WDvXxSL+Cy3TEsIdRyhoDXINOSK8rY72mnrhe2jCycJAAAAAWJLR0QB/wIt3gAAAAd0SU1FB+cFGQAhKwJH+lwAAAMmSURBVDjLY2AAA0ZGJmYWVjZ2juRkDnY2VhZmJkZGBiTAyMnFzcPLxy+QkpqaIsDPx8vDzcWJpIJRUEhYRDQtPSMzKzs7KzMjPU1URFhIEK6CUUxcIjknNy+/oBAMCvLzcnOSJcTFGGHyklJFxSWlZYWF5WBQWFhWWlJcJCUJUcEoLSNbUVlVDZWFqqmuqqyQlZEGqZCTV6iprStDkQeqKKurrVGQlwMawMWTXN+ALg9S0VCfzMPFyCAorpjW2ASzvQwIYOymxjRFcUEGLqWa5pZCqONa27Ky2lqhji1saa5R4mJQVklpL4M6rKOzq7u7q7MD6uCy9hQVZQZVtZ5eML+woK+/KBkIivr7CiAivT1qqgzqGhPA3MKy7ImTksFg0sRssEMKCyZoqDNoak2GKJ8ydVoyFEybOgUiNllLk0F7+gwwp2zmrGQ4mDUT7KzCGdO1GZJTZkMUzJmLUDB3DkTB7JRkBp3p8yAK5i9AKFgwH6Jg3nQdBt2FiyD2LV5SBJMvWrIYIrZooS6Dnv5SCKesPQ2mIK0dEpyFS/X1GAwMly2H8FasXAWRX7VyBURk+TJDAwYj49VroAG3dt16oC1F69ethQbtmtXGRgwmphs2boKq2Lxl67ZtW7dshspv2rjB1ITBzFxn+44yeGTu3AmPzrId23XMzRg4LSwrdu2GJQdQkoQxd++qsLTgZGC0MrLes3cfZoLZv3ePtZEVMM0x2tjqHDh4CD3JHdp62M7eBpxqOR0cnY4cPYaaaI8dPeLk7MAJSfZyLq4Vx08UIqkoLDx5qsLNRQ6WMQTdPfasO42sYPOZsx6eiKzF6eXtc27HebiKwvM7zvl4e3EiZU5fv+TcC4icdTFX1M8XNXv7yyZfaoEpaLmULBuAIs/AEGivsrAd4ozCze0LVYICUeUZGIND+C63gTJQYVNbMV9oMJoBQBVh4clXroKC+uqV5PAIDHmgCsnIimv7Cgv3Xa+IlMQiDwzyqOiUG1Om3EiJjrLBpgDojBi7mxcu3LSLCcYqD1QRGzft1q1pcbE45IExH59w+3ZCvBUuBUBnJCYlJaI6AABB269xUXFElwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMy0wNS0yNVQwMDoyOTozNyswMDowMEpaoL8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjMtMDUtMjRUMjI6NTE6MjArMDA6MDAnvJMTAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACbVBMVEUAAAD/////////////////////////////////////////////////////////+///8v///////////////////////////////////////////////////////////////////////////////////////v//////+v//////////////////////+P///////////////////////////////////////////////////////////////////////////v///////////////////////////////////////v///////////////////////////////////////////////////////////////////////////////v//////////////6///6P//7P//1P//rf//f///YP//T///7v//vf//b///If//Af//AP///v//1///eP//Gv//+///xP//Sv//Av///f//w///PP//1v//R///df//A///u///Ff//Df//Qf//af//Vv//t///2v//5v//1f//G///c///3v//q///2P//Bf//o////P//7f//Yf//LP//xv//WP//P///0f//Yv//M///yv//8f//d///E///sf//of//zP//D///FP//kP//9P//5f//Tv//Hf//ff//0P//+P//pv//CP//Cf//Pv//av//gv//4///VP//Bv//vP//KP//9v//lP//DP//aP//6f//y///p///Hv//qP//fv//9///3///BP//MP//Mf//lf//tP//H///iP//if//Wf//0///uf//+v8BRUUXAAAAYnRSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD4/erD/Y37SPYYxwdjHrwE6Qx3/HYgp/6mOtLRYO9fFIv4LLdMSwh1HKGgNcg05IrytjvaaeuF7djGYAwAAAABYktHRAH/Ai3eAAAAB3RJTUUH5wUZACErAkf6XAAAAu1JREFUOMtjYAADRkYmZhZWNnaOpCQOdjZWFmYmRkYGJMDIycXNw8vHL5CckpIswM/Hy8PNxYmkglFQSFhENDUtPSMzKyszIz0tVVREWEgQroJRTFwiKTsnNy+/AAzy83JzspMkxMUYYfKSUoVFxSUFSKCkuKhQShKiglFaRra0rLyiAAVUlJeVyspIg1TIyStUVlUXYIDqqkoFeTmgAVw8STW1BVhAbU0SDxcjg6C4YmpdPTYF9XWpiuKCDFxKlQ2NMLGm5szM5iYYr7GhUomLQVkluQXmsNa29o6O9rZWmINbklWUGVTVOrug3u/uKUwCgsKebmiAdHWqqTKoa/RCuVl9YHmgir4sqJZeDXUGTYEMCK9/wsQkKJg4oR8iliGgyaA1aTKEM2VqEhxMnQIRmzxJiyEpeRqEM30GQsGM6RCxaclJDNqTZkI4s2YjFMyeBRGbOUmbQWfOXAhn3vxCmHzh/HkQsblzdBh09RbAfJ0KU5AKC5kFeroM+gYLF0F4i5cshcgvXbIYIrJooYE+g6HRsuVQ9StWrgLaUrhq5QqowPJlRoYMxiar16yFCqxbv2Hjxg3r10G5a9esNjFmMDXT3rQZEYVbtiDYmzdpm5kycJpblG7dhi26t20ttTDnZGC0NLTavmMnpnzTju1WhpbANMdobaOdsisfXT5/w25bO2twquW0d3Dc04ymIr95j6OTPSck2cs5u5Tu3YeqYN/+UldnOVjGEHRz375yLbL8ugMH3T0QWYvT08v70ObDCPnDmw95e3lyImVOH9+knCMIBUdzRH19ULO3n2zSMXjibjyWJOuPIs/AEGCnMqcF6ox1LXNUAgNQ5RkYg4L5aprBGai+uYgvJAjNAKCK0LCk4ydACk4cTwoLx5AHqpCMKD0JDPKdp0ojJLHIA4M8Mir5dH//6eSoSGtsCoDOiLY9c+TIGdvoIKzyQBUxsRPPnp0YG4NDHhjzcfHnzsXHWeJSAHRGQmJiAqoDAOgCnVLAYqeOAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI5OjM3KzAwOjAwSlqgvwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMjo1MTo0MiswMDowMHZMi70AAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAQAAAD+fOO3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAHdElNRQfnBRkAISsCR/pcAAADj0lEQVRIx5WWO2xURxSGvzN7H7a0AdFRkFSQBovKqcCyBF0kmlDS0SHRpkJKEYmGEBeENImFRJMoLlLk4caJrCguEDSguMEijYMQAu+uwfZ672v+FHe93nu9fnCmO3P+f87jn7nXGDIBNPiAD5limgk+oglsssoyf/E3/7FBAcZIEzKd0CXd1yslPve+ULm897kSvdJ9XdIJmfaBhzqnu1qTL5QrUVeb2tCGNtVVolyF5LWmuzqnUCPg47qsJalQqi2tq63W0GprXVtKVUjSki5rfIfC+rWP8xlf6GNPSoLf3RruDo6YCIet8CU/s21llCDiU77S6YJtMvZtEgJCxmlgz/mceVLDAY4Jbh4OL3cytinQaW4ygQMnOM4NJv2h8GEKD5Pc4LhwhFzgiifZA9fQqlMkeLjCBUJHk2s6VpBW4EIYITExIVYhMSClQMe4RjPgDNMixVfgJdhhgCjz0yDC8KQ0sGnOBFxUU2S1XsfENAaeBg5Hb4gCMsZQ0y46pnBFZQuiCrykiIkqnRAFOKYcZ0uC4fQj3J7+OyKsEleA46zjpMzXTnMjhmm4WlYeGScd8d7Q0VoY6Y8dvu6rzv0Qv3e0rFaxx48IFb52lsOg5XiGH67N8GQjCbKKVqABnmeOR+YdrgLJSGsUIq1pxeEwzyPHApkjqOWQ0KMYeAp6JLXzAxxkLDie8NRqMzYKenTpss02Xbr0KGpSjzB4yhNHh1nzAWFtZCKj119ZTakQEmCeWTqOlAUWjZhG7draYHRWu+YNYgwWWSB1iJfcsdcBcaWMHZK6fIQjJsBec4eXyBnkLDFjPiKCfUS0C4eICCv4miVyw4HBFj8xZ4oJD6QoH9UIE3PMsWXQF6FY5RtbbhCPuIdV9cU0sH+4x2p5kitrxfOYGVsPR3RieHgxIbbODI/xxoAADHJ+Y5Zk5w0cBQ+JIWGW38ltkNNOx8UaD2zR9V+jupTLV8nJFnnA2u73dahkg2W+5XkwshPl8PiXeyxbxV+ZO3/wvXWiWhll+hHW4Tv+tBpx1Xr8wK+WjhEMKIQRMIal/MKP9DjYhD7RQylRRy211VZLHSWS9FCT4ggmdFUvvLr9f4S2uvLSC109EhyEmrqtd4U21FZbGyqkd7qt5hEJQOiU5pXnequ3yqVc8zp1ZHif4rxWvFKl8tKKzr8XHIQCXfdvvLz8G11X8J4E/U7cUkst3Tqo+v8BGqkQrMMFpyAAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjk6MzcrMDA6MDBKWqC/AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIyOjUyOjAxKzAwOjAwKNkk2QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAQAAAD+fOO3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAHdElNRQfnBRkAISsCR/pcAAAD/0lEQVRIx5WVP2wcRRTGf29u9/44a5/Pd2cHEagIEgoFRYSQHMtSQkVJOsoICUVKi+gokFIgghubArAipTHCBVL448ZBFiI0caQ4whGKFRoTx3aS89k+fL7b3ZtHcb7zzdkOyWyzOzPf99773jezQsdQgAS9vMIIo7zJqwTAvyyzyG/8zj9UaIBw6FBUNKfn9Kquad3GsY001FAjja2Nta5relXPaU5FO1DSEd3nDT7kAwZiiaixS0gMeCTJkMbHUzaYYpK/iMQlUMjwLp8wHFNli01C3DhJ+snSgwd/8Dk32JV9AoUM7/Opvl6nRInQTa6lDkny5EkhS3zGD00KAYUk7/GFvrbDKtvoUSKhCH28xDHkAR8zQygIqOEtvtbTO6xQ4UiN25n08jLHkNt8xIJYo5DlEqdrrP4vvLlaYZUanOYSWcXgc4bzMSW2D9S9/7gU25SI4Txn8A0BF7SvSsmpXVES9FGgQB8Jh0RQSlTRPi4QeJxktEGZyIELOfKkSAAN6pQodwQQIsr04I1y0uOsBhFbXVoPUSS5B/BJkSbJupPjFoMkAjlrGMHUiBydsxTa8JaNCmTbfgCIqIFhxHDKml2HW8iR6uqGkCLn7FF2sYZThuMqobM5cwDeosg4MyEqHDekwDoLCcyhHjAknG8LkDJYugDW6XunuLaLELCGkuA7C3WiQyiUiLoz4yNQMtwXm3ZqjdiicYCgwZbjFUgjlvuGW8am8RynldnoomiwQdmxmkcaY7llmCXyCZwcYtZYp9qeqbLOGrETP8CHiFmPBe567wywje2wasgaFTL4QMQuOx2roBgG8OAuCx5lJs3bgclSdrKwVKhgWu3qckaWAGOZpGwImWXOp0i669gKYLHt9/34aYr4MMcsoUF5xBV5HDBIoqt9sve47UwwSIA85gqPUCMQc5MxY3MMwBEm2odDnhymwZfcJBYMCOzwPdOeFuh9JkXzRszjKdNMsyMtP6IsMy6LPRRJHkmhQJIiPcifTLDc3Gb2FLbMMyab/RSOOErNzQX6kU3GmMcKbQIQiPmZSannySKHngWhnzxSZ5JfiKVN2lJceco1mUtRJHOgDAUyFEmpzHGNp/v/1458BRb5igd9FLrOJ4BPgV74mwkWOxvrFCxwg28p5+nHdOSgGPrJQ5lv+NX1RbdiNab4KREOEbSVUISAIRIhP/IdNZ5FIPCQCe6kGdxraLN5g6ThDhM87L4tD/RMYJ5xVrIU9+7ABEWysMI4tw9etoc3/TpTUimQxWDIUkAqTHGd5x2KntAZjat6T+9pVTXWGT2hz41vUgzrktVN3VSruqTDLwQHRT29aJ9YtWqf6EX1XpAAFA30spa0pJc1OBr+H/Nbm042akI7AAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI5OjM3KzAwOjAwSlqgvwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMjo1MjoyOCswMDowMP9kZncAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAQAAAD+fOO3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAHdElNRQfnBRkAISsCR/pcAAAEJklEQVRIx5XVT2xc1RUG8N+9M2M79tgxJDLR1MHYjosQrdRFVFUKUSToqsuy6xJVqpDYVuy6qMSiKmSTdNHWQmKTqllUon+yIFRRVbohSAQRgRxRJXWwSQzGjpzYnsnMOyzsOPPGNoX7Nk9P9/vO+b7z5yVdJ6Bi2FEnnfI9j6vjrnlX/cu/3bSmQ7LnCZHikXguXo9b0SzarWIzNmIjNqNVFO1oxq14PZ6LRyJFFyp1Ra95ys/9zKPNtOmuVeta6DNoVN2A/vClc2Z97H4qEwQH/NjLTrSsWrTonnKcIQ0No/r4j99420Z6SBAc8FO/iu+u+Z8b1iVlpYEw6AkThqVrfu0vWxSJoM9P/LY49qWP3RL7mSQkRzzlUfkTv3RBK0lE9gO/j+PLPrQk7QvfNtqY7zskvecXrqQiBwe95Piaj/4vnCRZ8pE1jnvJwZDVPOP5phtu98BDKBSix87kthuaPO8ZtazuhRhZdb2kPYSaMVOmjKmVSJJw3aoY8YJ61YxTLQs25S549h2ThlTRds91CwoPa79pwaj+U2aqno36psVS9GTGMYM73+qGDbrWlWOyaFpfPT2bnYy8ZqOUfMOkoS7KZMikRknIhjWRncye7uQ7Jf0V44Z3+T9sXKXkwx2d7OnsSKT1nqv1PYqZ1Hto10VyJOsPnVLx+rsidZ+K/lJBO4L+rEg9gLZiT4JCu4cwUWTLyUAp1bs2SpEeZLbhbknagMRyNpeLsram21q7CFpua/Z4lQtz2bu5GFHbiZkkN833pNs272ZXq4eaEbnwbnYx3T9grCSiac6c1Z0vq+bMaZYEjDkg3Xex6ooP+n501C2drj5bN2fJQQPYdMeKdqlXK47q4wNXqlbMVn54ODfMl3qvbcnS9izYNacNh1UKs1aylosuDZgy0jO2WdLR2X7rho+YMsAlF7WysOjVvHTYjGpP+dL2Uy5nzYzD8pJXLYqcaHvH6UoxboI9OqAMZ8K4Ssdr3tFOMol7/ux8f0wa+1qKwJgn9IfzzruX2N4iYd6ZdHXUtKF9KQJDpo1KHzprfuta3tKqcNnpvNowsc8oQcWEhrzqtMuKLW/yA7u0/d1sbk5qSHvOQtIwKTfN+of2A2t3FmEKX3gjXdpKsldGYNS0oUiXvOGLh//Xh5tU4qrf+WTMpP5dGQyYMsZ/nXW1u7C5+1LibX+0MuGoSlcOoWLc46z4g3+W+yL3BNp0zt9qrWMO7TgRkkOOqbX81Z9s+jqCxKfOen/EkwbZ3sODnjTC+876tHdb9mYgcdkZC4+ZVgVV0x5jwRnv7V62uwjAm87ltUkNWd4q3ppz3vRNT4jxuBDt1Xgr3orViHZciPH4xvgtihNxrYjP4rMoIq7FiW8FJ0Q1Xiw+70Qnis/jxah+SwJC1OOVWI7leCXq+8O/AuFKp/3c1qOQAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI5OjM3KzAwOjAwSlqgvwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMjo1Mjo0MiswMDowMJ17ML4AAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAQAAAD+fOO3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAHdElNRQfnBRkAISsCR/pcAAAER0lEQVRIx5XVS2xV1xXG8d/evrbxC7CpMbVSECGg2qlRU5tXDEVNOmmHzazDqFIVKdOqsw4qZVA1RZGgg7ZWpEyoyqBS+qADgpxSOglYkIQE2aFCIuGNMcEOhsu9Z3WAgXts0yb7zI7O919nfevbeycNK6BJl2/YY69vWa8Tcy4445/+5VOz6iTLrhApuuPFeDOuxL167W4xF7fjdszF3aJei3txJd6MF6M7UjSoUkP1ZgN+4sd67qRZ110xYx5tuq3Tq0t7uOmgMWfdT2VA0Ob7fm503iUf+9iMcp1ugwb1a+PffuUd8+kxIGjzI7+ILTdMmHBLVu40UFht2LCvSVN+6c8PEImgxQ/9unjmgnFT6vLyJik02eJ71svn/Mxh1SQR2bf9rhi54B/OS0/y+KHRNvqB9fJJP3U6FTlY5VUjNxz9v3KS5LyjbjDiVatC1my3l+446ZNF8lAsPLEI8YmT7vCS3ZqzTi/HyosmRIM8FFbYbJttNltRgiRhwkWx0ss6Kzbbe8dHZhusC9mQYWu0oGrahA8VHs9+1kf6dey1ueKF6JxztlQ9222X7kfv1ui1yvES4qxd2jvTC9meIl/zecnnAdsb5A9itN2AaGjkc9cU2Z7s2Vq+Wuq/YsiaRdNI1hhSKflwVS17NltXTzMl73v1LBOlrEdvaR4z6sm6rDXUSoB2LctmoEV7CVATtGZF0lz62ar6soC6aqmxZokim846SoCbbpcqPfyz226WAB0y09lkpVhbAsyZMr8EMG/KXAmwVqUwmb3XVPRpa6iZfeCUakledcoHpai16dNUeC87ku6v9HQpqnOOedflhXfhsncdK9UPT1sp3Xek4rT323duNan26INsxjHn9enCrKs+VS3Vb7ZVO+87XTFjrLJ9Yx50WlNDG/edc25hL5BLySgM2qhSGDOTVR0x3mWHPkXJzCZZTU3WVDKv0GeHLsYdUc3CJa/naxs8r3XR+NLCUx7nCqM2yNe87pLIiZrj9jUXWw2zTALKcr5jSHPdbxxXSzKJL/zJoY4Ysam045bKwyYjOsIhh3yRWPAmXLA/nem3Q88TESH02KFf+tABFx58lh/0qnDCvnxr0PATthK0GDYo37LPCUXyCECi5m/GKveGfVNadi8kA4ZV7hnzd7XHmXnoeLjhrTTeY6evLzEz0G+nnkjj3nLj8f3akI/EGb917hnbdS4BdNpmE/9xwJnGwZaOnsQ7/mDmOUNaGhChxZDnmPF7R8u5WHx23XXQX1dUn7f+kRMh2WDUiqq/+KO7/hcg8ZkDTq31XasXRsdqe/RyygGfLb76lpyeiRP2u7jFTq2g1S5buGi/k0tvzuVv8rcdzLPbDGjSZMCIPOugt33ZFeKpOBy1y/FGvBGXI2pxOJ6KL61/gBiNqXpMxmTUI6Zi9CvJCVGJV4rrtahFcT1eicpXBBCiM16L6ZiO16LzyfL/AjzmtojnBFLlAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI5OjM3KzAwOjAwSlqgvwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMjo1Mjo1NCswMDowMDIBBRoAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAQAAAD+fOO3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAHdElNRQfnBRkAISsCR/pcAAAEXklEQVRIx5XVS2xdxR3H8c/MuX5g/CBGTQzkATIggQt1K7fNgzgI5YVDWmjaRdsdrRQhsa2666ISi6o0m6SLtu6CRYIS1Er0EdGYEKV1GwlbTaxGRYkCgWAiYuKH4kaxfX3PdOHg3HPttDBnNXPm9x39/vObmaCqJci0WGOzLb5orWb8xyVnnfQ3H5pWIVRpQkEe3OUrvq/Piko2G8shR1SXGvKsYtJRB/3TlBSWAhJ1HvFD39N+LUz40EVjptFipQes0a41mXBIv3eUQxGQuMNWP7Zp2rtO+YcrKov0JLPKRht0auHvfuZNN8ItQOIO3/KT9PCoYwaMiUV3EnIrbbPdauG8n/r9AiKQqNfn55UH3/GqIRXR8i2X+arvekR2wY8cNRcEUtTtV3nPv/3WiFhYubYluS/5gUfFYXudCXlMtHlRz6iD/1dOEI04aJQeL2pLojpP2HPNG4Zr5EmuoiJfyEcVYtgbrrHHE+pKmj2ft15wTF7lPUnu9LBVuOK864JbG5c7pkd3a3zeYMlDtkwbNCGrkke9drhXI2Zc9hd/lS8iogmDOrVt8VDJU6l5yqnC6tEe39CxKLjXal/wuwLilG9qbQ5PRZsr8QNXC8436KuSE3Tos6FQjas+UIk2R11z8X2panq9XvfV7EZwn171Vf3kfXNRV9QxH8YKYVnrnmWiFN1jrbxqZMx80BE1JLOFqS0al81Ao5ZCf1aiIcpDjeCG8rKAshs1wEAejWfaCm4/Nl6IzqfFHfdxoTJtMsajc/X5uoLXScOmlwCmDZss1Gad+ty56O26fJ3mqjUzJx03U5DPOO5kIWrN1qnLvR0NKN/t8SpAMOU1h723OPKew14zVWUgedzdlA2UnDHSuv5JQ8pVObviiBEPaMeEi86ZKWS13pNaGXGmZFJ/3dceixu9pVRViVmnnb55FsgK7iu2eExdrt9kNGfAiXa73F+ISZDJlJVlskL1c/fbpZ0TBsxFyWUvZ2NdntVUc/JvfdXbeafndMnGvOyyFAPzBu1ryHttY5kEFNPANr0aKn5h0HwQCVx32JG70k7d0v9AJEm3HdqSI464HrhZm+SS/eFsp11W3RaRJB2e0Sn8ywGXFqbFBbdyQ/ZlUxtt13hbQKPtNsqm7DMkDxYBBOb9SX/97E5fF5c9C9F6O9TN6vdn87cy82nNk6teCSc67Na5xEaSPGi3jhROeMXVsPi7Kh+Bs37pwpf1WbEEsMLTunnXAWert7Vw9QTe9BuTW/VqqEIkDXptZdKvHS9edrV314xD/tg096xHFyuRRF2e0zTnD16tOaa1gMCoA06v9R0rb3pnpW9bw2kHjNY+fUtuz8CQ/T7q8Ywm0GS3Hj6y3/DSl3P5l/x1h7Lpp61XUrLeTtm0Q173WVuSVqejaf5i2pv2pospzaejaXX6zPoFxKZ0vpKG0lCqpHQ+bfpccpJUSi/kn5RTOeWfpBdS6XMCSFJzeimNp/H0Umq+vfy/0JikOgfvvUIAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjk6MzcrMDA6MDBKWqC/AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIyOjUzOjA1KzAwOjAwM1Rr9AAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAQAAAD+fOO3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAHdElNRQfnBRkAISsCR/pcAAADzElEQVRIx5WVTUxUVxiG33tnhmF0iJ0iCVF+NJpghTSUVNOoTTMrCS1qm4mJZVFSu+h048Jg2dCdSatb3TWkTaw2ISkbBY2waGBBJGmsoggkasEfyDhDsQjM33m6YGjnzgw4fmd1v++8z7nnnPecYykrkCSXylStD/WRGlQjv6RFTWtMv2tIM/pHacnK0lgOuaW31KQ2tSiQci3bcSstySUvPuNOa159+kV/6G9h5QOQPHpHX+lzvR21ZjWhO/pL85ICqtW7qlOlylFMl/WjxpXM/gtJCB+tDEOMQU6xEwtlNYudnGKQGMAwrfjIk7cxYRink20OaXbbRifjGJigLQuBKOEYU0mGacFeVy6ETQvDJGGKY5RkENg0MZpmiEMbitfaIYZIwyhN2KvjB+iG+xwuSi7EYe4DdBNAwkMrCy/owFU0wEUHL2CBVjwiQG+am1TkdSsjSDvtBCnLq1VwkzT0EhD7iUUI5y3WcfqZ5BnPmKSf43mLGyYCMfaLTpO4x/acXT/NQwxrYXjI6RxnbOceJkGnuJZI9eQUj/IgS76KeMDRnEF6SKS4Zqt+xR5Ttq88Cmm3nFa1tFsheRzmG9OKrXpblUlr2tG5TrvkUm64tEt1jsy0kpYqbXmNlh2Fcm1Wodiscsf3sozktWVsbXIUFhUvCIhr0fG9SbZkbEXdqnAUHuu5Y03W5vxcjx2ZCrmlqK0Jr9nrKER1XbE8QEzXFXVk9sprNGHrltfUa4uj1KNLeuXIvNIl9TgyW1Qvr9Et0czSU47k+KyaLm5nvGC4TRfVOT2O8BSWaLaoVG/8g9/0pVYcI/i0Tw2qlDSrMY3m7FSpuvWZvCP6VHg5SXqGUMFzV0JJwXyIGUhzEq+wqGEgyQB7ij7OexggCQPUYAnhppm5JS7gL0pexgWWYI5m3KzuMH6+JT3L1zmHqlCz+IY5SHEG///XqsUOrhgzSvA1CIsgoxjDZXZkvS4ImwPcSXKFmg0BNfxKEv7kAHbuy+ChnfkluihdV+7jO5Zhni/w5Jkdi62cNyuPCOEuKHcT4hFmhfNsxVJ+IBroh0EaCwLeYxAM/TSgdQLxCVNwscAdXcFFgCk+XlcuSZRyhtgC4ZyV8BFmAWJ0UKoNAaKKn4nfJ5j10LgIMg5xfqJqw/EziH2MwFVq/wPUchVghPdfK88g2niS5PuMtf38QBKe0FaUPGPtc7yMcAIPHk4QgZecy7JuEYgq+kjdpZFG7kKKviJmn4M4yGSKG9wgBZMcfCO5Vo0XNpEECUyEcObgviHCz1miRDm70ez/BYYI/lv2W3BZAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI5OjM3KzAwOjAwSlqgvwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMjo1MzoxNiswMDowMM4WcfcAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAAAAElFTkSuQmCC",anchor:[.5,1]}],drawing_api:[{src:"data:image/png;base64,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",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABm5JREFUWMO1mFtsXFcVhr+195mLx3bshNghKWkNpCglPEBpUYSAKg88gGigUftARSJzkbiIB54QalQkKvGISkGQSkTQplJBKQgQbbmUW6CkTZuGVq0pjV3n4jSOnUzG47HHM545++fhjNs6npDjISzpaDQ6s9f69tr/XnvtMTo0fbYfAhACbN5knJ1ch9QHlseIgAZSHbMyhRsvUj0qvIPeHPbd6Y5iRp3CIkGjy8jUtnJ28mbgg8B7gEGgB5gDpoCXmD92GOxZ3pt/haN1dRrSOuLcvQYitwHpNsTtwE0gj5kAXeLfkGLgKGaPgPslIZ62A7P/X9hk6YMRuB5nX8PYBeoBiy+BbBfHA3OIXyDdh7NRXFP24/nU8VcnA3OG6R047QXtTACsmWaeQBNUAO7E6Ea6B984cYVJLjOXOqvD/aC4D/gSxk7MPFhY1WSx0Bq3E/gizVyf9vSmHp0aloBH3ALcCeZIakEnFkgk8RmCfQTkryqshvshoh/4AtBNu6WTjBAbzUWjUYfmYvJdWrkvDLX8fB58n/b0p4JNp1lhBG0D3k+yWZbDJkCBd95c5H0fz1LoX0u1VOKfv11k/Ln1SNaqFMuR4SaMbYgnSaHddLAmD+wAsm0zigI33lrh09/OMzDUD3QBxvY7Zvjp3lmO/aYX4ZYBmwHkEDswPQVccaOm1KwcaCuJ1i55FWDDlgq79i4yMLSJZHkd0M3A0CZ23bXIhi0V1FbiHtNWTKk4UsKagQ22/X0IMDhU4JobBlhZt41r3j3A4FCB0BbWgW1YSvOVLK1mAfKAtTbHm18Kn4kwy11mnll8RpeRpLX8prK0pUvALO0imjMqF+aols+3HTk/c4HZC3NJtVvhVUhlpFQHQ1rNCvQqEK/04GFiJMuhB+uEUFn2LoQKhx6sc2Yki2tbTptgY8hSwaY9bgNwBNMdYMujmkG9muPR7/RTnZ3glt095HsHWKic59CBOf68fwP1agbXLi9qAs9i6Q6YVMLWcK8hfx3oVxhvZ6UcDAl8pkmuYPjIEzdj6lURN6LW/mlXZ09g9knUPG0PzF0xu+k1GzSFeAQRt5mkMCBuRFTLnkpRVMv+v4KKGHEQaRrSySB1i6jdfeDYAuzD2E47/aY3j/Q0xpd3He0de74S4QLEweF9IDjDgEKtxofPnWNfa1DqFtEeKqPhNSeR7UNch/FWVtHMSK3EGIY0WWy4n9z2zJriVMMGWxyu9cQtv4uC6vmuQu1dA4NszIRVNt/DfRAoYHwd01fBMlz2TBfSG8VeyCRzTaF/lKKnvvHv7sfPL7paZIqUQFqr7VDrWA6IJqLkYMScRld9rdGePjBdC9wLfHTlVeYNyCC5gHmBCZmBjc378W8e7/79c+Wo7F2SLHvTWLCkUtpSf0QwWAjoifT97JIcDpTBwgTSD4Fxlu5ZCEkWZC4WviGyTcgE4aQkc6WGK/1sMvfMsdloxhuyBCTw+mPJp1kAC2YKZphQAal/1bAA9sCcmF74K/AjpPmlbAaZb4pMLKKAnLBkp5hoBGv8pZh5/ueTuVOOtN2AGZLJ7KycG+0IFoCLzZhgD4M9KpliETUhkuRkMsPUWlAk00jFH7//dP6FxWAhBagBTlADXnDwuMvnX+v8f4MtfVDIzlCvf09ia4x9QBKtZC5p2Awxtein9p/JH5lY8AsrOWVLZwqtNh+pCoxh9gowUerqmutrNFZxB7t06g+Xod4QxCO12H4Qi7IlZUnQSimiHlvt11PZI4eKmWnj9eVPlle4pHdXE5gHTgr+5KPoIcHvPnby5MvA3OaZGcbHxjr7k2NZXoZ7GatE/etzujvn9RVnconMZEEW/n4xc/Rbo4UnJ+uu7pcULGFmi8C8RMnQKTM3GsN5Gc2FYjHuXrsWvOfV8fFl2vif7fAn1tr6vG1bn42/3+X5kFlyLTgx70/eM1b4w+FSphglV6MGUDKzaWDSzCZ8FL2GaITQJG7EUuQp9PTw0osvrlzNqwELcPz2deRd+NS6rO7NODaXG1a6/1T+if1nci9nnJUMJpHOCM4V8vmphXq9Zmb4TIa3bd/OHw8cuGKMqwYL8NitA7kb8s27+jL63NOl6G93j/UcnGnYCYeK3mxmIpud31irkctm+dfo6Kr9d14N2thbolA/VbP7rnc6ODIXzZyqZy76M6cX1ly7EUnsuHCBx4rFjv3/B5an/+2QIsMIAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzowMjo1MCswMDowMGqPVM4AAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,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",anchor:[.5,1]},{src:"data:image/png;base64,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",anchor:[.5,1]},{src:"data:image/png;base64,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",anchor:[.5,1]},{src:"data:image/png;base64,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",anchor:[.5,1]},{src:"data:image/png;base64,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",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABjBJREFUWMO1mFFsXFcRhr//3F1713biOCVxotiolJiUlpLKtiBFiiqqgpS3tkhFQjwU8QBRpUr0BSHEA+IFVNoIIVQeQ4CAKiVCoUSIFokEKUSENGpCYxJnnUQmteN4u+v12r7ru+cMD+tESbOO727DSFfn4dwz852ZOXPmXtGmDE0NkY/zuODYnGxWMVv8GEavyXJCGaBuZjFQnp+fL/b29prHU8vUOP/x823ZzLQL27vYy9imMe2Y2fFIMVN8AtgN7AS2AD1AFZgG3l23bt3xEMLJmb6Z8/2lfmvXptpZNFwYxsltCRaeB74GfB5raNMqKg07CRw07A2Zrr+z/Z3/L+zoxCg+eEnaIfRd4HmMrrRaDFvEeAP4iUwXAsHODJ1Jbb+lNIhcpGBhO/AjjGcMy0jp9yvUBXzdsC7Dvm91KwCp08K14tW6r28QegnjGURLoLcRZ4SeQ7ykrDaMFEZSL00Na7IIeAp4QVLbB/MmMPANSU8B0X2FHZkYwXnXB7xI46TfvRkzggUSS1i2ZRJLCBawVaIsqQfj2yGEvtHCaCrYVB4yzAWFz2J8rtlhMjMQ9mjno9O787uj9dH6DZVQKR9fOO7HamNbDFOzlBF6QtJjGH8jRe6mgpXJAV9CdDYFhfBk95MfvLzxZQayA900Qtu9p2dP5bXia8VjC8cewLgbuKHvacP+DtTX4kiXs4bDeIQm+RUIDGQH5vZu2Ds/kB3oB27BDmYH+/f27Z0fzA6WA6GZ5gjjM1g6jlQvGSbDttCkLhvGtuy2/PaO7Q800eeGOoY2bstsyzfNXUNAPynrfbo0aIQvt8pGyJDJaJU6JqkzUhQ1hRVg5NMwpPbsisw1hUGUfKla8ZXZZvMVX5kth/LCatcwopz2BkybswFjHMN/eCoiopAUcocrh0OwMH/7XLAwf6hyyArLhXzUpJwa5g27aFgghaQt7gE4QaNpucOqJOIQ5/aX9/fPh/nJZ9c/W+523ZsWwsKNw5XDy4cqhwbjEHc43e0XoQQ4uaJ/TUkVgNHxUXn8J5zcW4iHmjrfjIwyPqcckaLIm/exxdStHt3jWp4wZ09HFl059dCpNets2py1SNEU4uBqXpBE3epRNVSjOT9HNVSjNUCDYb8lMG1YqmYmdScyWhjF4z8l9CuhXWnX3UP+YZG9sPituYu1/9RxAXxwRFEguMZx7Ipjdk9P83qrsAAjl0ayiOeAfcDWtjGNqVAO35t7sXwkmg7ZOmRcwPngXBQFH5yCYDkfx4ufnqvEZzdtZms2tPhZIxLgj8Aw8B0g2wIgCCxYqJ9OLiz9uNqnYviqOTIOHA5FzgDMNd4OcWeufmZTruTgvSmv8ZYb0pX+80HDfin05Vaj46/6icWfVt/0Z5OyIsl0u4KbO7KVQQBBsBSwt1q5FAA4/cnTAFdl2odxuZW1Vgnl5SPxCX8uKRFhiKDGgV151BilAAqSBQkZ1oXZhpZhV4AtP5N/G/gFsJgKtG715GTyr+U348u4W1f4GiJhJpPeN+fG24IF6Pmgx5vZfjP7g9k9So81arC/6MfiA4tnLLGQAlSAM4iBdx0cdbnctbY/T25sv8GyLZc61PEK8LCZDTeFENhsuF77/eKJcM0vNunbBLpZaQ0RMFsELiFdACZL+Xy1N0laamTukNMPnyarrEk6S8I+PPM3PdkYV6zXQm35L7UTyYnkOroV/kZ4DWcmMKsDC8AVg79GmcyvDf6858qVMaA6WC4zcelSez85bpeRwgj+mu9zG90P6WSvnDK3lSlfP5WcWnq1eizMhFiRBMjMkLQMLJhREnZVcuMebpioLxWLvruvD6KIwsTEHbnxkWXnkZ1Srx5zG93r5PiCnBqFcrJ+eelnC0fr/0xmyRABCVCSNANMSZqMMplrGEkIdXzizTIRXT09/PvcuWYZdX/k8WOPo6y+oo36ubLaatUwH/9m6Wjt4NJ7yqoETGH2X4Pprlzu+lKtFksiymYZ2LWLtw8cWNPGfYMFGN4/nLMh+4F69c36meRY/MrCQT8XLksUI6k82dGxsDWO6ezo4Pz4eMv6P9rPig+J9Vns3/evRp2Z3/nxULJJila6FuvBbZgZX5yd5U/FYtv6/weDRwGc3Jre9AAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMy0wNS0yNVQwMDoyODo1OSswMDowMDPIuVsAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjMtMDUtMjRUMjM6MDc6NDkrMDA6MDDVlNrHAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,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",anchor:[.5,1]},{src:"data:image/png;base64,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",anchor:[.5,1]},{src:"data:image/png;base64,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",anchor:[.5,1]},{src:"data:image/png;base64,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",anchor:[.5,1]},{src:"data:image/png;base64,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",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABhBJREFUWMO1l0tsXGcVx3//e+94xmPHzsSxPXm4NK/adRKKQISUKjz6QIBKFIQUpMCiwIoFSF3RDQsELCIWCLEosKiggiyyQKWQSFV5pJRHUKpaVbDj2HnUedmOPR57xmOPPfd+h8Wk1JbH9Z1p+kmf7uK795zfd87/nu98otHxkScgbAYLYM4XbdFWsHZQCiNAhIgy2CwtTTmKy0YgaHfwj5cbchk0DLvcCh23xcyOftqiRzGOIB4BskArMI8xAbzFfOXv4J1nb2KIkWVr1KUa+qr/GMhlMR0HToA+gRlohbm1SOcRp/B0GucmGfrDBwy7/yg4T4he4HtgxzGl41kyQAvAabCTOF0GZwzHl4RfF2zXPoH2gn4MHMeURHG3LDASyA5gZIEBQsszM/IBwO4/CngZ4DlMXwcLVqU9Ji/IA/UifHzO0/VwmanhWJ97dbjyMR4HnkHUD7oaOgC+gfQ4ZrEDFu/F/i8DdAA/AXpr5t2sOsMIogicvftarY1JTaAtyDtDV99CnOjGLV0epg8jDtVcNQOwjx3cN/Glz3zcz7S1bM4XSrMvn7sQvTl4JYuZ1snEo2AHwc5Rq340Bmse4imM5JqgmiFwT3/20MxPn/sme3qyLVQz1vK1pz9VePbkC7k//e1CxzrASeBJ0OtAuHHE4sJi/aiGbJyx+4Hs3I++e6K4pyfbDfwfdu8D27p/+J0Txd092VlcjcAZPsYBXDyOmLASKEstsTrHgzu6mw8+9KGOGva8R3of3LJrZ3czztU0DNYNFutvree4Ta23kAj8QKotSknJRODX/pGrpaw5LkA9pWuutkMxnS/O5wvz07WWZ+aK01P5Quk9St3s/YU1c5iNAtGaNd9j6MpY6penX3GRc8WVS5FzxV+cfsUujd5oxq/pKsIYwXDEGPHqbGefgA7E50GrpSNRqYTBG0NXmwvFhfFdO7OlyLnkxHR+/OQLvy/87Ldnts+XFpN4tWBtGfgVaIDp4Q1LV7xjqO+o8LxdwKvA7nWiTxAEUbo5SeB7fhi5aGGxTBhG/voSsGvIniTy3mb4pQ1h42rWEONgp9ZPmQjD0C8US/7MbJFCseS/J2jVzu8wTRDjQIgfWYD9x8DcQ6DfYDrcYCe8kvbfwDM9iyMjgVvAcxA5D99397pQSJfLHJmY4Pl7X8TvuqaGoau3AJoDPYbY1DinjXsWntxZHhpIuaU2B+0y2s202fOs1aRWQTIIQ9KRi8LtO3Rga5vqvdZUMP0R+CjwLJBogNSlXfFy19JYJrDwqwaBBx4e8r1qj+FVZeHKyVQ40JnKezA4Hmm0vuZ76jJ09VUQV4D9wB4M1SOJhCtf31q583rSLQmpzaQWSenqtOrTrEWiFdSG2IrYHcF8fbBQlUN3/xzmpoDHQJm4sJ6Fs5lw6i+bwtk7AEimahTvTVWfkoFMMpMkwxKYTdYPC3D3EuzreZtyk4d0hDhyMAtbo7l/dVQmLgqzeM27hJlMumPSf+o5blePlrkI6dfAS2xUesxIuYVLWyoTAzLnYoAK8AzKwFsenPVSqduNRRag9RBAGeMqZocQ29arhL5VJjsq4682u1L+nYCt2IlAqrbFgHCYlYBBpH8K3syn09PJMIx//1kzJoehsw+Mu2Al0FNIyRUQgJC5pbYo99f2KHdN74JW01u9PCIsBC0Ct028EQTBOefc4BfHxiaubN683FkqcenGjfdf2uk/hh8uZZwf/MDkfbvaO1RBMYvSUfFC1/KN1wKrlKm2kTIzJC0DJTPywsYkbzSCKRPhYi4XtWQy4PtcvXZtlTbe90js/ZxI+AdDgucN75PvpDnhytc7l26dTbvCtCEfqAB5SXeBcUk3/SC4jVFxLiSqRGaBT7q1lf9evLjGz32BBUj0fwHn+ErkNf0ctM2zsJipTJ7NVCYHkZcHxjG7ZTCRTqUmF5eWypLwEwl2Hj7Mn198cUMf9w0WYNPDn04tkv5+RPCtdDT/Wnfl5inPwutAzpdmbzY1lbaVyySbmhgaHa3b/n2Fbe57AnO2peI3b2+v5PJZG89Vbtwq244ePGBfsciZXK5h+/8DFYWTIIiuQPwAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjg6NTkrMDA6MDAzyLlbAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIzOjA5OjIzKzAwOjAwqUK8vQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABilJREFUWMO1mF9sXEcVh78zd9fetZ04TkmcKDYqJSalpaSyLUiRooqqIOWtLVKREA9FPEBUqRJ9QQjxgHgBlTZCCJXHECCgSolQKBGiRSJBSiNCGjWhMYljJ5FJ7Tje7np3bd/duzM/HtZFCazju9twpNU83J0z3znzmzN/jA5tZGSWfD7GucDWrYkVCtmPgPoly5mRARqSYqBUqVQK/f398h5qtQwXL360ozEzncL29y8zMbHFdu2af6hQyDwG7AV2A9uAPqAKzAHvbNiw4WQI4fT8/MDFwcGiOh3TOuk0OjqFc7YtBD0LfAX4LAgwbA2PEqeBwxKvmenm22/v/P/Cjo9P430wM9tlxreBZ0E9ad1ILINeA35kpkshoHPnRlKP35YMoshZCNoJ/AD0lETGLH28ZvQAX5Xokfiu1JiiOSWpzLWT1UbDbzLjBdBTYG2B3oacMeMZsBfMspvGxqZS90wNK1kEPAE8Z2YdL8wPgIGvmdkTQHRPYcfGpnHODwDP01zpLYIRIYgkEfV6sw1BaI1JNrM+0DdDCAPj4+mymypDEi4E+zToM60WkyTA9PDD3XN79+ajjRujTeVyKJ08ueQnJmrbJKyVZMx4zMweAf2FFNpNBWsmB3wBrLs1KOHxx3vff/HFzQwNZXtpTm3vvn195VdeKRROnFi6D9QC2LqBJyX+CjTW40ipWTnQQ7TQVwgwNJRd3L9/U2VoKDsI/Ad2eDg7uH//QGV4OFsKoaXjCPSppv/1LdWfJExiGy00IMGOHdn8zp1d97Xw50ZGujbv2JHJt9auDBgkZaFOKQMDyK0RCJkMGVujjplZdxRZ1BrWAOXTMKTO7KottoaBYtFXy2W/0Op7uewXSqWwtHZJtlLaHTCtZgNoEuT/+0sUwdRUkjt6tBxCUOX2byGocuRIWVNT9XzUoppKeInLEoEUlra4B+AUzUPLHcOaGXEccgcPlgYrlTDz9NMbS729bsvSUrh19Gi5fuRIeTiOQ5dzLUtXApxe9b+upcr/+Pikec/HnLM3wB5omXuJTMZ8LmdEkUXey8exaDQU3WVbnpbck1Gka2fOPLBunU2rWUWRzYIdXisLZkajoahaDdHioqdaDdE6oEHi1xDmpHSHmdQnkfHxKbznE2b8wow9afvdxd6SoueWF79xudb4Jy6AD44oCgRnGNATx+ydm+PVdmEBxsauZMGeAQ4A2zvn1GwIpe8slp4/FoW5bAMyLuB8cC6Kgg/OgkE9H8fLn1wsx+e3bGV7NrR7rbEE+D0wCnwLyLYBCBhSCI3k7KWV6g8HLBS+LFzGgcNhkROsbpdAiLtzjXNbckUH7856m2z7QLp6/rxf4udmfLHd2fH++vRy9cev++R8ySwyYbc5aAaEtNoYQDBYCeiNdjYFAM6e/TjAdTMdAF1tp69CuVSPj53yyYUiRAIL1lywqz9rtmYBLJgpmGFCPUib2oZdBVY+P/8m8DNgORWoGo0kOf33evz6VXCku2WYIZnM3pNzkx3BAvT1ve8lHZT0O0l3KT1CEt5fnoiXD52TkpAC1AAniIF3HBx3udyNjq8nt27tpF5XsavLXgIelDTaGsJQWLhZW/7tqeBvLP+vxGXNhbcamRGQloErmF0CZor5fLU/Sdo6yNxhZ88+SDZrMrPzkBwAX/kgk81mdfRQq9VrfzqVJKduNt8VbDUCmYSTDKQGsARcE/w5ymR+KfjjvmvXJoDqcKnE9JUrnT1y3G5jY1N4f2PAuc3fh+79Zi5zW5nyjeTMmZXqyydCmI/NIgNMzXtOHViSKBq6buYmPdyS0VgpFHzvwABEEVPT03do40Pb7t3HzKz/Eec2vwq5z5m5ZqFszFxdWfrJ8UbytwXIREACFM1sHpg1s5kok7mBSEJo4BMvZSJ6+vr4x4ULLQR1j+zRR09glv2S2eafmmW3K1Qr8cqvjtdWDr9rli0Cs0j/Esz15HI3V2q12MyIslmG9uzhzUOH1h3jnsECjI4ezEkj3zPr/3ojOXciXnrpsA+LVw0rRGalma6upe1xTHdXFxcnJ9v2/yEfK+40aSD2/r2Xo6j7N95fKYqZgm4UY9txP5L4/MICfygUOvb/b4OFAZuQsv++AAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzowOTo0MSswMDowMPiypBMAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,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",anchor:[.5,1]},{src:"data:image/png;base64,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",anchor:[.5,1]},{src:"data:image/png;base64,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",anchor:[.5,1]},{src:"data:image/png;base64,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",anchor:[.5,1]},{src:"data:image/png;base64,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",anchor:[.5,1]},{src:"data:image/png;base64,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",anchor:[.5,1]},{src:"data:image/png;base64,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",anchor:[.5,1]},{src:"data:image/png;base64,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",anchor:[.5,1]},{src:"data:image/png;base64,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",anchor:[.5,1]}]},SN=Ye.getLogger("DrawingDOM"),PN={_addUID:function(i){var t=this._uid?i+"-"+this._uid:i;return t},_createMainContainerElement:function(){var i=document.createElement("div");return i.id=this._addUID("GPdrawing"),i.className="GPwidget",i},_createShowDrawingElement:function(){var i=document.createElement("input");return i.id=this._addUID("GPshowDrawing"),i.className="GPshowDrawing",i.type="checkbox",i},_createShowDrawingPictoElement:function(){var i=this,t=document.createElement("label");t.id=this._addUID("GPshowDrawingPicto"),t.className="GPshowAdvancedToolPicto",t.htmlFor=this._addUID("GPshowDrawing"),t.title=this.options.labels.control,t.addEventListener?t.addEventListener("click",function(n){i.onShowDrawingClick(n)}):t.attachEvent&&t.attachEvent("onclick",function(n){i.onShowDrawingClick(n)});var e=document.createElement("span");return e.id=this._addUID("GPshowDrawingOpen"),e.className="GPshowAdvancedToolOpen",t.appendChild(e),t},_createDrawingPanelElement:function(){var i=document.createElement("div");return i.id=this._addUID("GPdrawingPanel"),i.className="GPpanel",i},_createDrawingPanelHeaderElement:function(){var i=document.createElement("div");i.className="GPpanelHeader";var t=document.createElement("div");t.className="GPpanelTitle",t.innerHTML=this.options.controlLabel||"Annoter la carte",i.appendChild(t);var e=document.createElement("div");e.id=this._addUID("GPdrawingPanelClose"),e.className="GPpanelClose",e.title="Fermer le panneau";var n=this;return e.addEventListener?e.addEventListener("click",function(){document.getElementById(n._addUID("GPshowDrawingPicto")).click()},!1):e.attachEvent&&e.attachEvent("onclick",function(){document.getElementById(n._addUID("GPshowDrawingPicto")).click()}),i.appendChild(e),i},_createDrawingToolsSections:function(){var i=[];return this.dtOptions={},this.options.tools.points&&(this.dtOptions.points={label:this.options.labels.points,active:!1,panel:"draw",id:"point"}),this.options.tools.lines&&(this.dtOptions.lines={label:this.options.labels.lines,active:!1,panel:"draw",id:"line"}),this.options.tools.polygons&&(this.dtOptions.polygons={label:this.options.labels.polygons,active:!1,panel:"draw",id:"polygon"}),this.options.tools.holes&&(this.dtOptions.holes={label:this.options.labels.holes,active:!1,panel:"draw",id:"holes"}),this.options.tools.text&&(this.dtOptions.text={label:this.options.labels.text,active:!1,panel:"draw",id:"text"}),this.options.tools.edit&&(this.dtOptions.edit={label:this.options.labels.edit,active:!1,panel:"edit",id:"edit"}),this.options.tools.display&&(this.dtOptions.display={label:this.options.labels.display,active:!1,panel:"edit",id:"display"}),this.options.tools.tooltip&&(this.dtOptions.tooltip={label:this.options.labels.tooltip,active:!1,panel:"edit",id:"tooltip"}),this.options.tools.remove&&(this.dtOptions.remove={label:this.options.labels.remove,active:!1,panel:"edit",id:"remove"}),(this.dtOptions.points||this.dtOptions.lines||this.dtOptions.polygons||this.dtOptions.text)&&i.push(this._createDrawingToolSection(this.options.labels.creatingTools,"draw")),(this.dtOptions.edit||this.dtOptions.display||this.dtOptions.tooltip||this.dtOptions.remove)&&i.push(this._createDrawingToolSection(this.options.labels.editingTools,"edit")),this.options.tools.export&&i.push(this._createSavingSection(this.options.labels.export,this.options.labels.exportTitle)),i},_createDrawingToolSection:function(i,t){var e=document.createElement("div");e.className="drawing-tool-section";var n=document.createElement("p");n.className="drawing-tool-section-title",n.innerHTML=i,e.appendChild(n);var r=document.createElement("ul");r.className="drawing-tools-flex-display";var o=this;function a(u){o._handleDOMToolClick(u,this.id,o),o._handleToolClick(u,this.id,o)}for(var s in this.dtOptions)if(this.dtOptions[s].panel===t){var l=document.createElement("li");l.className="drawing-tool",l.id=this._addUID("drawing-tool-"+this.dtOptions[s].id),l.title=this.dtOptions[s].label,l.addEventListener("click",a),r.appendChild(l)}return e.appendChild(r),e},_createSavingSection:function(i,t){var e=document.createElement("div");e.className="drawing-tool-section drawing-tools-flex-display";var n=document.createElement("button");n.title=t,n.className="tool-form-submit drawing-button",n.id=this._addUID("drawing-export"),n.type="button",n.textContent=i;var r=this;return n.onclick=function(){r.onExportFeatureClick()},e.appendChild(n),e},_createMarkersChooser:function(i){var t=document.createElement("li");t.className=i.className;for(var e=0;e<this.options.markersList.length;e++){var n=document.createElement("input");n.type="radio",n.name="marker",n.id=this._addUID("marker-"+e),n.value=this.options.markersList[e].src,n.className="marker-input-radio",i.defaultValue===n.value&&(n.checked=!0),t.appendChild(n);var r=document.createElement("label");r.className="marker-label",r.setAttribute("for",n.id);var o=document.createElement("img");o.src=n.value,r.appendChild(o),t.appendChild(r)}return t},_createStylingElement:function(i){var t=document.createElement("li");t.className=i.className;var e=document.createTextNode(i.label);t.appendChild(e);var n=document.createElement("input");try{n.type=i.type}catch{n.type="text"}return n.id=i.id,n.value=i.defaultValue,i.title&&(n.title=i.title),i.checked!==void 0&&(n.checked=i.checked),i.min!==void 0&&(n.min=i.min),i.max!==void 0&&(n.max=i.max),i.step!==void 0&&(n.step=i.step),t.appendChild(n),t},_createStylingDiv:function(i){var t=document.createElement("div");t.className="gp-styling-div";var e=document.createElement("ul"),n=null,r=i.geomType.toLowerCase();switch(r){case"point&text":case"point":n=this._createMarkersChooser({className:"gp-styling-option",defaultValue:i.initValues.markerSrc}),e.appendChild(n),n=this._createStylingElement({type:"range",className:"gp-styling-option",label:this.options.labels.markerSize,title:"petit, moyen ou grand",id:this._addUID("markerSize"),min:5,max:15,step:5,defaultValue:i.initValues.markerSize*10}),e.appendChild(n),i.initValues.markerCustom,r==="point&text"&&(n=this._createStylingElement({type:"checkbox",className:"gp-styling-option",label:this.options.labels.labelDisplay,id:this._addUID("labelDisplay"),checked:i.initValues.labelDisplay,defaultValue:i.initValues.labelDisplay}),e.appendChild(n));break;case"text":n=this._createStylingElement({type:"color",className:"gp-styling-option",label:this.options.labels.fillColor,id:this._addUID("fillColor"),defaultValue:i.initValues.fillColor}),e.appendChild(n),n=this._createStylingElement({type:"color",className:"gp-styling-option",label:this.options.labels.strokeColor,id:this._addUID("strokeColor"),defaultValue:i.initValues.strokeColor}),e.appendChild(n),n=this._createStylingElement({type:"range",className:"gp-styling-option",label:this.options.labels.strokeWidth,title:"1 à 10 pixels",id:this._addUID("strokeWidth"),min:1,max:10,step:1,defaultValue:i.initValues.strokeWidth}),e.appendChild(n);break;case"line":n=this._createStylingElement({type:"color",className:"gp-styling-option",label:this.options.labels.strokeColor,id:this._addUID("strokeColor"),defaultValue:i.initValues.strokeColor}),e.appendChild(n),n=this._createStylingElement({type:"range",className:"gp-styling-option",label:this.options.labels.strokeWidth,title:"1 à 10 pixels",id:this._addUID("strokeWidth"),min:1,max:10,step:1,defaultValue:i.initValues.strokeWidth}),e.appendChild(n);break;case"polygon":n=this._createStylingElement({type:"color",className:"gp-styling-option",label:this.options.labels.strokeColor,id:this._addUID("strokeColor"),defaultValue:i.initValues.strokeColor}),e.appendChild(n),n=this._createStylingElement({type:"range",className:"gp-styling-option",label:this.options.labels.strokeWidth,title:"1 à 10 pixels",id:this._addUID("strokeWidth"),min:1,max:10,step:1,defaultValue:i.initValues.strokeWidth}),e.appendChild(n),n=this._createStylingElement({type:"color",className:"gp-styling-option",label:this.options.labels.fillColor,id:this._addUID("fillColor"),defaultValue:i.initValues.fillColor}),e.appendChild(n),n=this._createStylingElement({type:"range",className:"gp-styling-option",label:this.options.labels.fillOpacity,title:"0 (transparent) à 100% (opaque)",id:this._addUID("fillOpacity"),min:0,max:10,step:1,defaultValue:i.initValues.fillOpacity*10}),e.appendChild(n);break;default:SN.log("Unhandled geometry type for styling.")}t.appendChild(e);var o=document.createElement("input");o.type="button",o.className="gp-styling-button",o.value=this.options.labels.applyToObject,o.onclick=function(){i.applyFunc.call(this,"apply")},t.appendChild(o);var a=document.createElement("input");a.type="button",a.value=this.options.labels.setAsDefault,a.className="gp-styling-button",a.onclick=function(){i.applyFunc.call(this,"default")},t.appendChild(a);var s=document.createElement("input");return s.type="button",s.className="gp-styling-button closer",s.onclick=function(){i.applyFunc.call(this,"cancel")},t.appendChild(s),t},_createLabelDiv:function(i){var t=document.createElement("div");t.className="gp-label-div";var e=null;if(i.geomType==="Text"?(e=document.createElement("input"),e.type="text",e.className="gp-input-label-style"):(e=document.createElement("textArea"),e.rows=2,e.cols=40,e.className="gp-textarea-att-label-style"),i.text&&(e.value=i.text),e.autocomplete="off",e.placeholder=i.placeholder,e.id=i.inputId,t.appendChild(e),e.onblur=function(){i.applyFunc.call(this,i.key,e.value,!0)},e.onkeyup=function(a){i.geomType==="Text"&&a.keyCode===13&&i.applyFunc.call(this,i.key,e.value,!0),a.keyCode===27&&i.applyFunc.call(this,i.key,e.value,!1)},i.measure&&i.geomType!=="Text"){var n=document.createElement("input");n.type="text",n.readonly=!0,n.className="gp-input-measure-style",n.value=i.measure,t.appendChild(n)}if(i.geomType!=="Text"){var r=document.createElement("input");r.type="button",r.className="gp-styling-button",r.value=this.options.labels.saveDescription,r.onclick=function(){i.applyFunc.call(this,i.key,e.value,!0)},t.appendChild(r);var o=document.createElement("input");o.type="button",o.className="gp-styling-button closer",o.onclick=function(){i.applyFunc.call(this,i.key,e.value,!1)},t.appendChild(o)}return t},_handleDOMToolClick:function(i,t,e){for(var n in e.dtOptions){var r=e._addUID("drawing-tool-"+e.dtOptions[n].id),o=document.getElementById(r);if(r!==t){o.className="drawing-tool",e.dtOptions[n].active=!1;continue}e.dtOptions[n].active?o.className="drawing-tool":o.className="drawing-tool drawing-tool-active",e.dtOptions[n].active=!e.dtOptions[n].active}}},wi=Ye.getLogger("Drawing"),k_=function(i){function t(e){if(e=e||{},!(this instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(e),this._container=this._initContainer(),i.call(this,{element:this._container,target:e.target,render:e.render})}return i&&(t.__proto__=i),t.DefaultTools={points:!0,lines:!0,polygons:!0,holes:!1,text:!0,remove:!0,display:!0,tooltip:!0,edit:!0,export:!0,measure:!1},t.DefaultLabels={control:"Annoter la carte",creatingTools:"Outils de création",points:"Placer des points",lines:"Dessiner des lignes",polygons:"Dessiner des polygones",holes:"Créer des trous sur un polygone",text:"Ecrire sur la carte",editingTools:"Outils d'édition",edit:"Editer les tracés",display:"Modifier l'apparence des objets",tooltip:"Modifier les textes / infos-bulles",remove:"Supprimer des objets",export:"Exporter",exportTitle:"Exporter en KML",applyToObject:"Appliquer à l'objet",saveDescription:"Enregistrer",setAsDefault:"Définir par défaut",strokeColor:"Couleur du trait : ",strokeWidth:"Epaisseur du trait : ",fillColor:"Couleur de remplissage : ",fillOpacity:"Opacité du remplissage : ",markerSize:"Taille du pictogramme : ",markerColor:"Couleur du pictogramme : ",labelDisplay:"Afficher le label : "},t.DefaultStyles={textFillColor:"#000000",textStrokeColor:"#FFFFFF",textStrokeWidth:6,textIcon1x1:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGNiYAAAAAkAAxkR2eQAAAAASUVORK5CYII=",anchor:[0,0]},polyFillColor:"#ffffff",polyFillOpacity:.4,polyStrokeColor:"#ffcc33",polyStrokeWidth:4,strokeColor:"#ffcc33",strokeWidth:4,markerSize:1,markerColor:"#ffcc33",labelDisplay:!0},t.DefaultCursorStyle={radius:6,strokeColor:"#FFF",strokeWidth:1,fillColor:"rgba(0, 153, 255, 1)"},t.prototype=Object.create(i.prototype,{}),t.prototype.assign=function(e){for(var n in e)e.hasOwnProperty(n)&&(this[n]=e[n])},t.prototype.assign(PN),t.prototype.constructor=t,t.prototype.setMap=function(e){if(i.prototype.setMap.call(this,e),this.getMap()&&this.eventKey&&Kt(this.eventKey),e!=null){if(this.draggable&&Oo.dragElement(this._drawingPanel,this._drawingPanelHeader,e.getTargetElement()),!this.collapsed){var n=document.getElementById(this._addUID("GPshowDrawing"));n.checked="checked"}this.layer&&this.setLayer(this.layer),this.eventKey=this.getMap().getLayers().on("remove",r=>{r.element===this.layer&&(this.layer=null,this.interactionCurrent&&(this.getMap().removeInteraction(this.interactionCurrent),this.interactionCurrent=null))})}},t.prototype.exportFeatures=function(){var e=null;if(i.prototype.getMap.call(this)==null)return wi.log("Impossible to export : control isn't attached to any map."),e;if(!this.layer)return wi.log("Impossible to export : no layer is hosting features."),e;if(!this.layer.getSource()||!this.layer.getSource().getFeatures()||!this.layer.getSource().getFeatures().length)return wi.log("Impossible to export : no features found."),e;this.featuresCollectionSelected&&this.featuresCollectionSelected.clear();var n=null;switch(this.getExportFormat()){case"KML":n=new Gs({writeStyles:!0});break;case"GPX":n=new ks({});break;case"GEOJSON":n=new kn({});break}if(!n)return wi.log("Impossible to export : format unknown !?"),e;var r=this.layer.getSource().getProjection();return r=r||this.getMap().getView().getProjection(),e=n.writeFeatures(this.layer.getSource().getFeatures(),{dataProjection:"EPSG:4326",featureProjection:r}),e},t.prototype.setCollapsed=function(e){if(e===void 0){wi.error("[ERROR] Drawing:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(this.onShowDrawingClick(),this._showDrawingContainer.checked=!e)},t.prototype.setExportName=function(e){this._exportName=e},t.prototype.getExportName=function(){return this._exportName},t.prototype.setExportFormat=function(e){switch(this._exportFormat=e?e.toUpperCase():"KML",e.toUpperCase()){case"KML":this._exportExt=".kml",this._exportMimeType="application/vnd.google-earth.kml+xml";break;case"GPX":this._exportExt=".gpx",this._exportMimeType="application/gpx+xml";break;case"GEOJSON":this._exportExt=".geojson",this._exportMimeType="application/geo+json";break;default:this._exportFormat="KML";break}},t.prototype.getExportFormat=function(){return this._exportFormat},t.prototype.setLayer=function(e){if(!e){this.layer=null;return}if(!(e instanceof mi)){wi.log("no valid layer given for hosting drawn features.");return}var n=this.getMap().getLayers();if(n){var r=!1;n.forEach(o=>{o===e&&(wi.trace("layer already in map. Not adding."),r=!0)}),r||this.getMap().addLayer(e),e.getSource().getFeatures().forEach(o=>{var a=o.getStyle();if(typeof a=="function"){var s=o.getStyleFunction();if(s){var l=s.call(this,o,0);l&&l.length!==0&&o.setStyle(Array.isArray(l)?l[0]:l)}}}),this.layer=e,this.getMap().getControls().forEach(o=>{if(o instanceof Mr){var a=this.layer.gpLayerId;o._layers[a].title===a&&o.addLayer(this.layer,{title:this.options.layerDescription.title,description:this.options.layerDescription.description})}})}},t.prototype.getLayer=function(){return this.layer},t.prototype.getContainer=function(){return this._container},t.prototype._getsMarkersOptionsFromSrc=function(e){for(var n=null,r=0;r<this.options.markersList.length;r++)if(e&&this.options.markersList[r].src===e)return n=this.options.markersList[r],n;return n},t.prototype._getIconStyleOptions=function(e){var n={};return Object.keys(e).forEach(r=>{switch(r){case"src":case"size":case"scale":case"color":case"anchor":case"anchorOrigin":case"anchorXUnits":case"anchorYUnits":n[r]=e[r];break}}),n},t.prototype._initialize=function(e){this._uid=Re.generate(),this._exportName="Croquis",this._exportFormat="KML",this._exportMimeType="application/vnd.google-earth.kml+xml",this._exportExt=".kml",e=e||{},this.options=e,this.options.layerDescription||(this.options.layerDescription={title:"Croquis",description:"Mon croquis"}),this.options.tools||(this.options.tools={}),Object.keys(t.DefaultTools).forEach(n=>{this.options.tools.hasOwnProperty(n)||(this.options.tools[n]=t.DefaultTools[n])}),this.options.cursorStyle||(this.options.cursorStyle={}),Object.keys(t.DefaultCursorStyle).forEach(n=>{this.options.cursorStyle.hasOwnProperty(n)||(this.options.cursorStyle[n]=t.DefaultCursorStyle[n])}),this.options.collapsed=e.collapsed!==void 0?e.collapsed:!0,this.collapsed=this.options.collapsed,this.options.draggable=e.draggable!==void 0?e.draggable:!1,this.draggable=this.options.draggable,this.options.markersList=e.markersList||wN.drawing_api,this.options.labels||(this.options.labels={}),Object.keys(t.DefaultLabels).forEach(n=>{this.options.labels.hasOwnProperty(n)||(this.options.labels[n]=t.DefaultLabels[n])}),this.options.defaultStyles||(this.options.defaultStyles={}),Object.keys(t.DefaultStyles).forEach(n=>{if(!e.defaultStyles.hasOwnProperty(n)){this.options.defaultStyles[n]=t.DefaultStyles[n];return}if(n==="polyFillOpacity"&&(e.defaultStyles[n]<0||e.defaultStyles[n]>1)){wi.log("Wrong value ("+e.defaultStyles[n]+") for defaultStyles.polyFillOpactity. Must be between 0 and 1"),this.options.defaultStyles[n]=t.DefaultStyles[n];return}if(n==="strokeWidth"||n==="polyStrokeWidth"){var r=parseInt(e.defaultStyles[n],10);if(isNaN(r)||r<0){wi.log("Wrong value ("+e.defaultStyles[n]+") for defaultStyles.strokeWidth. Must be a positive interger value."),this.options.defaultStyles[n]=t.DefaultStyles[n];return}this.options.defaultStyles[n]=r}if(n==="markerSize"){var o=parseFloat(e.defaultStyles[n]);if(isNaN(o)||o<0){wi.log("Wrong value ("+e.defaultStyles[n]+") for defaultStyles.markerSize. Must be a positive value."),this.options.defaultStyles[n]=t.DefaultStyles[n];return}this.options.defaultStyles[n]=o}}),this.interactionCurrent=null,this.interactionSelectEdit=null,this.featuresCollectionSelected=null,this.stylingOvl=null,this.popupOvl=null,this.layer=null,this.options.layer&&this.options.layer instanceof mi&&(this.layer=this.options.layer),this._isDesktop=this._detectSupport(),this.options.popup||(this.options.popup={display:!0,apply:null})},t.prototype._createEmptyLayer=function(){var e=new oi,n=new mi({source:new fn({features:e})});n.gpResultLayerId="drawing",this.setLayer(n)},t.prototype._detectSupport=function(){var e=!0,n=window.navigator.userAgent.toLowerCase();return(n.indexOf("iphone")!==-1||n.indexOf("ipod")!==-1||n.indexOf("ipad")!==-1||n.indexOf("android")!==-1||n.indexOf("mobile")!==-1||n.indexOf("blackberry")!==-1||n.indexOf("tablet")!==-1||n.indexOf("phone")!==-1||n.indexOf("touch")!==-1)&&(e=!1),(n.indexOf("msie")!==-1||n.indexOf("trident")!==-1)&&(e=!0),e},t.prototype._initContainer=function(){var e=this._createMainContainerElement(),n=this._showDrawingContainer=this._createShowDrawingElement();e.appendChild(n);var r=this._createShowDrawingPictoElement();e.appendChild(r);var o=this._drawingPanel=this._createDrawingPanelElement(),a=this._drawingPanelHeader=this._createDrawingPanelHeaderElement();o.appendChild(a);for(var s=this._createDrawingToolsSections(),l=0;l<s.length;l++)o.appendChild(s[l]);return e.appendChild(o),e},t.prototype._drawEndFeature=function(e,n){var r=null;switch(n){case"Point":r=new de({image:new ni(this._getIconStyleOptions(this.options.markersList[0]))});break;case"LineString":r=new de({stroke:new Me({color:this.options.defaultStyles.strokeColor,width:this.options.defaultStyles.strokeWidth})});break;case"Polygon":r=new de({fill:new Ge({color:ge.hexToRgba(this.options.defaultStyles.polyFillColor,this.options.defaultStyles.polyFillOpacity)}),stroke:new Me({color:this.options.defaultStyles.polyStrokeColor,width:this.options.defaultStyles.polyStrokeWidth})});break}if(e.setStyle(r),this._updateMeasure(e,n),this.options.popup.display){var o=this,a=function(h,d,p){if(o.getMap().removeOverlay(o.popupOvl),o.popupOvl=null,p&&d&&d.trim().length>0){var f={};f[h]=d.replace(/\n/g,"<br>"),e.setProperties(f)}},s=null,l=!0,u=this.options.popup.function;u&&typeof u=="function"&&(s=u.call(o,{feature:e,geomType:n,closeFunc:function(){a(null,!1)},saveFunc:function(h){a(h,!0)}}),s&&(l=!1,s.tabIndex=-1,s.onblur=function(){o.getMap().removeOverlay(o.popupOvl),o.popupOvl=null})),l&&(s=this._createLabelDiv({applyFunc:a,inputId:this._addUID("att-input"),placeholder:"Saisir une description...",measure:this.options.tools.measure?e.getProperties().measure:null,geomType:n,key:"description"})),this.popupOvl&&(this.getMap().removeOverlay(this.popupOvl),this.popupOvl=null),this.popupOvl=new dn({element:s,positioning:"top-center"}),this.getMap().addOverlay(this.popupOvl);var c=e.getGeometry().getExtent();this.popupOvl.setPosition([(c[0]+c[2])/2,(c[1]+c[3])/2]),document.getElementById(this._addUID("att-input"))&&document.getElementById(this._addUID("att-input")).focus()}},t.prototype._createRemoveInteraction=function(){var e=new qn({layers:[this.layer],style:!1});return e.on("select",n=>{!n||!n.selected||n.selected.length===0||(this.layer.getSource().removeFeature(n.selected[0]),this.getMap().removeInteraction(this.interactionCurrent),this.interactionCurrent=this._createRemoveInteraction(),this.getMap().addInteraction(this.interactionCurrent))}),e},t.prototype._createStylingInteraction=function(){var e=new qn({layers:[this.layer],style:!1});return e.on("select",n=>{if(this.stylingOvl&&this.getMap().removeOverlay(this.stylingOvl),!(!n||!n.selected||n.selected.length===0)){var r=null,o=null,a=null,s=null,l={},u=n.selected[0].getGeometry(),c=n.selected[0].getStyle();if(u instanceof Wi||u instanceof Ea){if(c&&c.getImage()&&typeof c.getImage().getSrc=="function"&&c.getImage().getSrc()!==this.options.defaultStyles.textIcon1x1.src&&(s="Point",typeof c.getImage().getSrc=="function"?(l.markerSrc=c.getImage().getSrc(),l.markerSize=c.getImage().getScale()||1,l.markerAnchor=c.getImage().getAnchor(),c.getImage().getColor()?(r=c.getImage().getColor(),Array.isArray(r)?r="rgba("+r.join()+")":l.markerColor=r,o=ge.isRGB(r)?ge.rgbaToHex(r):{hex:r,opacity:1},l.markerColor=o.hex,l.markerOpacity=o.opacity):l.markerColor=this.options.markersList[0].color||"#ffffff"):(l.markerSrc=this.options.markersList[0].src,l.markerSize=this.options.markersList[0].scale||1,l.markerColor=this.options.markersList[0].color||"#ffffff",l.markerAnchor=this.options.markersList[0].anchor),l.markerCustom=!this._getsMarkersOptionsFromSrc(l.markerSrc)),c&&c.getText()){var h=n.selected[0].getProperties().name;if(h&&(s=s==="Point"?"Point&Text":"Text",c.getText().getStroke()&&c.getText().getStroke().getColor()&&(r=c.getText().getStroke().getColor(),Array.isArray(r)?r="rgba("+r.join()+")":l.strokeColor=r,o=ge.isRGB(r)?ge.rgbaToHex(r):{hex:r,opacity:1},l.strokeColor=o.hex,l.strokeOpacity=o.opacity),c.getText().getStroke()&&c.getText().getStroke().getWidth()&&(l.strokeWidth=c.getText().getStroke().getWidth()),c.getText().getFill()&&c.getText().getFill().getColor()&&(r=c.getText().getFill().getColor(),Array.isArray(r)?r="rgba("+r.join()+")":l.fillColor=r,o=ge.isRGB(r)?ge.rgbaToHex(r):{hex:r,opacity:1},l.fillColor=o.hex,l.fillOpacity=o.opacity),l.strokeColor=l.hasOwnProperty("strokeColor")?l.strokeColor:this.options.defaultStyles.textStrokeColor,l.strokeWidth=l.hasOwnProperty("strokeWidth")?l.strokeWidth:this.options.defaultStyles.textStrokeWidth,l.fillColor=l.hasOwnProperty("fillColor")?l.fillColor:this.options.defaultStyles.textFillColor,s==="Point&Text")){var d=c.getText().getText();d||c.getText().setText(h);var p=n.selected[0].get("checked");l.labelDisplay=p===void 0?this.options.defaultStyles.labelDisplay:p}}}else u instanceof xn||u instanceof Zr?(s="Line",c&&c.getStroke()&&(c.getStroke().getWidth()&&(l.strokeWidth=c.getStroke().getWidth()),c.getStroke().getColor()&&(r=c.getStroke().getColor(),Array.isArray(r)?r="rgba("+r.join()+")":l.strokeColor=r,o=ge.isRGB(r)?ge.rgbaToHex(r):{hex:r,opacity:1},l.strokeColor=o.hex,l.strokeOpacity=o.opacity)),l.strokeWidth=l.hasOwnProperty("strokeWidth")?l.strokeWidth:this.options.defaultStyles.strokeWidth,l.strokeColor=l.hasOwnProperty("strokeColor")?l.strokeColor:this.options.defaultStyles.strokeColor):(u instanceof zi||u instanceof wa)&&(s="Polygon",c&&c.getStroke()&&(c.getStroke().getWidth()&&(l.strokeWidth=c.getStroke().getWidth()),c.getStroke().getColor()&&(r=c.getStroke().getColor(),Array.isArray(r)?r="rgba("+r.join()+")":l.strokeColor=r,o=ge.isRGB(r)?ge.rgbaToHex(r):{hex:r,opacity:1},l.strokeColor=o.hex,l.strokeOpacity=o.opacity)),c&&c.getFill()&&c.getFill().getColor()&&(r=c.getFill().getColor(),Array.isArray(r)?r="rgba("+r.join()+")":l.fillColor=r,o=ge.isRGB(r)?ge.rgbaToHex(r):{hex:r,opacity:1},l.fillColor=o.hex,l.fillOpacity=o.opacity),l.strokeWidth=l.hasOwnProperty("strokeWidth")?l.strokeWidth:this.options.defaultStyles.polyStrokeWidth,l.strokeColor=l.hasOwnProperty("strokeColor")?l.strokeColor:this.options.defaultStyles.polyStrokeColor,l.fillColor=l.hasOwnProperty("fillColor")?l.fillColor:this.options.defaultStyles.polyFillColor,l.fillOpacity=l.hasOwnProperty("fillOpacity")?l.fillOpacity:this.options.defaultStyles.polyFillOpacity);if(!s){wi.log("Unhandled geometry type for styling.");return}var f=this,g=function(y){if(y==="cancel"){f.getMap().removeOverlay(a);return}var m=y!=="apply",A=document.getElementById(f._addUID("fillColor")),_=document.getElementById(f._addUID("fillOpacity")),C=document.getElementById(f._addUID("strokeColor")),I=document.getElementById(f._addUID("strokeWidth")),E=document.getElementById(f._addUID("markerSize"));switch(s.toLowerCase()){case"text":m?(f.options.defaultStyles.textStrokeColor=C.value,f.options.defaultStyles.textStrokeWidth=I.value,f.options.defaultStyles.textFillColor=A.value):n.selected[0].setStyle(new de({text:new Cr({font:"16px sans",textAlign:"left",text:c.getText().getText(),fill:new Ge({color:A.value}),stroke:new Me({color:C.value,width:parseInt(I.value,10)})})}));break;case"point&text":case"point":var w=document.querySelector("input[type='checkbox']"),S=null,x=parseInt(E.value,10)/10,T=document.querySelector("input[name='marker']:checked");if(T&&(S=f._getsMarkersOptionsFromSrc(T.value),S.scale=x),m){if(f.options.defaultStyles.markerSize=x,f.options.markersList.length>1){var L=f.options.markersList.findIndex(function(B){return B===S});L>0&&(f.options.markersList.splice(L,1),f.options.markersList.splice(0,0,S))}s.toLowerCase()==="point&text"&&(f.options.defaultStyles.textStrokeColor=l.strokeColor,f.options.defaultStyles.textStrokeWidth=l.strokeWidth,f.options.defaultStyles.textFillColor=l.fillColor,f.options.defaultStyles.labelDisplay=l.labelDisplay)}else{var G={};s.toLowerCase()==="point&text"&&(n.selected[0].set("checked",w.checked),G={text:new Cr({font:"16px sans",textAlign:"left",text:w.checked?n.selected[0].get("name"):"",fill:new Ge({color:l.fillColor}),stroke:new Me({color:l.strokeColor,width:parseInt(l.strokeWidth,10)})})}),S?n.selected[0].setStyle(new de(Object.assign({image:new ni(f._getIconStyleOptions(S))},G))):n.selected[0].setStyle(new de(Object.assign({image:new ni({src:l.markerSrc,anchor:l.markerAnchor,anchorOrigin:"top-left",anchorXUnits:"pixels",anchorYUnits:"pixels",scale:x})},G)))}break;case"line":m?(f.options.defaultStyles.strokeColor=C.value,f.options.defaultStyles.strokeWidth=parseInt(I.value,10)):n.selected[0].setStyle(new de({stroke:new Me({width:parseInt(I.value,10),color:C.value})}));break;case"polygon":var N=parseInt(_.value,10)/10;m?(f.options.defaultStyles.polyStrokeColor=C.value,f.options.defaultStyles.polyFillColor=A.value,f.options.defaultStyles.polyFillOpacity=N,f.options.defaultStyles.polyStrokeWidth=parseInt(I.value,10)):n.selected[0].setStyle(new de({stroke:new Me({width:parseInt(I.value,10),color:C.value}),fill:new Ge({color:ge.hexToRgba(A.value,N)})}));break}m||f.getMap().removeOverlay(a)},v=this._createStylingDiv({geomType:s,initValues:l,applyFunc:g});a=new dn({element:v,positioning:"top-center"}),this.getMap().addOverlay(a),a.setPosition(n.mapBrowserEvent.coordinate),this.stylingOvl=a,this.getMap().removeInteraction(this.interactionCurrent),this.interactionCurrent=this._createStylingInteraction(),this.getMap().addInteraction(this.interactionCurrent)}}),e},t.prototype._createLabelInteraction=function(){var e=new qn({layers:[this.layer],style:!1});return e.on("select",n=>{if(this.labelOvl&&this.getMap().removeOverlay(this.labelOvl),!(!n||!n.selected||n.selected.length===0)){var r=null,o=null,a=null,s=null,l=n.selected[0].getGeometry(),u=n.selected[0].getStyle();if(l instanceof Wi||l instanceof Ea){var c=n.selected[0].getProperties().name;u&&u.getText()&&c?o="Text":u&&u.getImage()&&(o="Point")}else if(l instanceof xn||l instanceof Zr)o="Line";else if(l instanceof zi||l instanceof wa)o="Polygon";else{wi.log("Geometry type for styling not supported .");return}if(!o){wi.log("Unhandled geometry type for styling.");return}if(o==="Text")a=u.getText().getText();else{var h=n.selected[0].getProperties();h&&(h.hasOwnProperty("description")||h.hasOwnProperty("desc"))&&(a=h.description||h.desc),h&&h.hasOwnProperty("measure")&&(s=h.measure)}var d=this,p=function(g,v,y){if(d.getMap().removeOverlay(r),!!y){var m=n.selected[0];if(o==="Text"){var A=m.getStyle();A.getText().setText(v),m.setProperties({name:v}),m.setStyle(A);return}var _={};_[g]=v.replace(/\n/g,"<br>"),m.setProperties(_)}},f=this._createLabelDiv({applyFunc:p,inputId:this._addUID("label-input"),placeholder:o==="Text"?"Saisir un label...":"Saisir une description...",text:a,key:"description",measure:this.options.tools.measure?s:null,geomType:o});r=new dn({element:f,positioning:"top-center"}),this.getMap().addOverlay(r),r.setPosition(n.mapBrowserEvent.coordinate),document.getElementById(this._addUID("label-input")).focus(),this.labelOvl=r,this.getMap().removeInteraction(this.interactionCurrent),this.interactionCurrent=this._createLabelInteraction(),this.getMap().addInteraction(this.interactionCurrent)}}),e},t.prototype._updateMeasure=function(e,n){wi.log(e);var r=null,o=this.getMap().getView().getProjection();function a(I,E){E=E||2;var w=Math.pow(10,E);return Math.round(I*w)/w}var s=n||e.getProperties().type;switch(s){case"Point":var l=e.getGeometry().getCoordinates(),u=ut(l,o,"EPSG:4326");r="lon : ",r+=a(u[0],4)+"°",r+=" / ",r+="lat : ",r+=a(u[1],4)+"°";break;case"LineString":for(var c=0,h=e.getGeometry().getCoordinates(),d=0,p=h.length-1;d<p;++d){var f=ut(h[d],o,"EPSG:4326"),g=ut(h[d+1],o,"EPSG:4326");c+=Ia(f,g)}r=c>1e3?a(c/1e3,3)+" km":a(c,3)+" m";break;case"Polygon":var v=0,y=e.getGeometry().clone(),m=y.getLinearRing(0).getCoordinates();v=Math.abs(wc(new zi([m])));var A=y.getLinearRings();if(A.length>1)for(var _=1;_<A.length;_++){var C=A[_].getCoordinates();v-=Math.abs(wc(new zi([C])))}r=v>1e6?a(v/1e6,3)+" km^2":a(v,2)+" m^2";break}e.setProperties({measure:r,type:s})},t.prototype._handleToolClick=function(e,n,r){var o=r.getMap();if(!o){wi.trace("Drawing control not attached to any map.");return}switch(Tr.unset(o,{current:"Drawing"}),r.interactionCurrent&&(o.removeInteraction(r.interactionCurrent),r.interactionCurrent=null),r.interactionSelectEdit&&(o.removeInteraction(r.interactionSelectEdit),r.interactionSelectEdit=null),r.popupOvl&&(r.getMap().removeOverlay(r.popupOvl),r.popupOvl=null),this.layer||this._createEmptyLayer(),n){case this._addUID("drawing-tool-point"):r.dtOptions.points.active&&(r.interactionCurrent=new Ln({stopClick:!0,source:r.layer.getSource(),style:new de({image:new ni(this._getIconStyleOptions(this.options.markersList[0]))}),type:"Point"}),r.interactionCurrent.on("drawend",function(a){r._drawEndFeature(a.feature,"Point")},r));break;case this._addUID("drawing-tool-line"):r.dtOptions.lines.active&&(r.interactionCurrent=new Ln({stopClick:!0,source:r.layer.getSource(),style:new de({image:new gi({radius:this.options.cursorStyle.radius,stroke:new Me({color:this.options.cursorStyle.strokeColor,width:this.options.cursorStyle.strokeWidth}),fill:new Ge({color:this.options.cursorStyle.fillColor})}),stroke:new Me({color:this.options.defaultStyles.strokeColor,width:this.options.defaultStyles.strokeWidth})}),type:"LineString"}),r.interactionCurrent.on("drawend",function(a){r._drawEndFeature(a.feature,"LineString")},r));break;case this._addUID("drawing-tool-polygon"):r.dtOptions.polygons.active&&(r.interactionCurrent=new Ln({stopClick:!0,source:r.layer.getSource(),style:new de({image:new gi({radius:this.options.cursorStyle.radius,stroke:new Me({color:this.options.cursorStyle.strokeColor,width:this.options.cursorStyle.strokeWidth}),fill:new Ge({color:this.options.cursorStyle.fillColor})}),stroke:new Me({color:this.options.defaultStyles.polyStrokeColor,width:this.options.defaultStyles.polyStrokeWidth}),fill:new Ge({color:ge.hexToRgba(this.options.defaultStyles.polyFillColor,this.options.defaultStyles.polyFillOpacity)})}),type:"Polygon"}),r.interactionCurrent.on("drawend",function(a){r._drawEndFeature(a.feature,"Polygon")},r));break;case this._addUID("drawing-tool-holes"):r.dtOptions.holes.active&&(r.interactionSelectEdit=new qn({stopClick:!0,condition:Of,layers:[this.layer]}),r.interactionSelectEdit.setProperties({name:"Drawing",source:r}),o.addInteraction(r.interactionSelectEdit),r.interactionCurrent=new Ln({stopClick:!0,features:this.interactionSelectEdit.getFeatures(),style:new de({image:new gi({radius:this.options.cursorStyle.radius,stroke:new Me({color:this.options.cursorStyle.strokeColor,width:this.options.cursorStyle.strokeWidth}),fill:new Ge({color:this.options.cursorStyle.fillColor})}),stroke:new Me({color:this.options.defaultStyles.polyStrokeColor,width:this.options.defaultStyles.polyStrokeWidth}),fill:new Ge({color:ge.hexToRgba(this.options.defaultStyles.polyFillColor,this.options.defaultStyles.polyFillOpacity)})}),type:"Polygon"}),r.interactionCurrent.on("drawstart",function(a){},r),r.interactionCurrent.on("drawend",function(a){var s=r.interactionSelectEdit.getFeatures();if(s.getLength()){for(var l=s.item(0),u=a.feature.getGeometry().getCoordinates()[0],c=!0,h=0;h<u.length;h++)if(!l.getGeometry().intersectsCoordinate(u[h])){c=!1;break}if(!c)return;l.getGeometry().appendLinearRing(new gp(u)),a.feature=l,r._drawEndFeature(a.feature,"Polygon")}},r));break;case this._addUID("drawing-tool-text"):r.dtOptions.text.active&&(r.interactionCurrent=new Ln({stopClick:!0,source:r.layer.getSource(),style:new de({image:new gi({radius:this.options.cursorStyle.radius,stroke:new Me({color:this.options.cursorStyle.strokeColor,width:this.options.cursorStyle.strokeWidth}),fill:new Ge({color:this.options.cursorStyle.fillColor})})}),type:"Point"}),r.interactionCurrent.on("drawend",a=>{var s=null,l=function(c,h,d){if(r.getMap().removeOverlay(s),!d){r.layer.getSource().removeFeature(a.feature);return}var p={};p[c]=h,a.feature.setProperties(p),a.feature.setStyle(new de({image:new ni(r._getIconStyleOptions(r.options.defaultStyles.textIcon1x1)),text:new Cr({textAlign:"left",font:"16px sans",text:h,fill:new Ge({color:r.options.defaultStyles.textFillColor}),stroke:new Me({color:r.options.defaultStyles.textStrokeColor,width:3})})}))},u=this._createLabelDiv({applyFunc:l,inputId:r._addUID("label-input"),geomType:"Text",key:"name",placeholder:"Saisir un label..."});s=new dn({element:u,positioning:"top-center"}),r.getMap().addOverlay(s),s.setPosition(a.feature.getGeometry().getCoordinates()),document.getElementById(this._addUID("label-input")).focus()}));break;case this._addUID("drawing-tool-edit"):r.dtOptions.edit.active&&(this.featuresCollectionSelected=new oi,r.interactionSelectEdit=new qn({condition:Lf,layers:[this.layer],features:this.featuresCollectionSelected}),r.interactionSelectEdit.on("select",a=>{}),r.interactionSelectEdit.setProperties({name:"Drawing",source:r}),o.addInteraction(r.interactionSelectEdit),r.interactionCurrent=new Uf({stopClick:!0,features:this.interactionSelectEdit.getFeatures(),style:new de({image:new gi({radius:this.options.cursorStyle.radius,stroke:new Me({color:this.options.cursorStyle.strokeColor,width:this.options.cursorStyle.strokeWidth}),fill:new Ge({color:this.options.cursorStyle.fillColor})})})}),r.interactionCurrent.on("modifyend",a=>{var s=a.features.item(0);r._updateMeasure(s)}));break;case this._addUID("drawing-tool-display"):r.dtOptions.display.active&&(r.interactionCurrent=this._createStylingInteraction());break;case this._addUID("drawing-tool-tooltip"):r.dtOptions.tooltip.active&&(r.interactionCurrent=this._createLabelInteraction());break;case this._addUID("drawing-tool-remove"):r.dtOptions.remove.active&&(r.interactionCurrent=r._createRemoveInteraction());break;default:wi.trace("unhandled tool type")}r.interactionCurrent&&(r.interactionCurrent.setProperties({name:"Drawing",source:this}),o.addInteraction(r.interactionCurrent)),wi.log("interactions",o.getInteractions())},t.prototype.onShowDrawingClick=function(){var e=this.getMap();Tr.unset(e),this.collapsed=this._showDrawingContainer.checked,this.dispatchEvent("change:collapsed");for(var n in this.dtOptions)if(this.dtOptions.hasOwnProperty(n)&&this.dtOptions[n].active){var r=this._addUID("drawing-tool-"+this.dtOptions[n].id);document.getElementById(r).className="drawing-tool",this.dtOptions[n].active=!1}},t.prototype.onExportFeatureClick=function(){var e=this.exportFeatures();if(e){var n=document.createElement("a"),r="utf-8";if(n.setAttribute("href","data:"+this._exportMimeType+";charset="+r+","+encodeURIComponent(e)),n.setAttribute("download",this.getExportName()+this._exportExt),document.createEvent){var o=document.createEvent("MouseEvents");o.initEvent("click",!0,!0),n.dispatchEvent(o)}else n.click()}},t}(yi);window.ol&&window.ol.control&&(window.ol.control.Drawing=k_);var ip=Ye.getLogger("LocationSelectorDOM"),xN={_addUID:function(i){var t=this._uid?i+"-"+this._uid:i;return t},_createMainContainerElement:function(){var i=document.createElement("div");return i.className=this._addUID("GPlocationPoint"),i.className+=" GPwidget",i},_createLocationPointElement:function(i,t){var e=document.createElement("div");return e.id=this._addUID("GPlocationPoint_"+i),e.className=t?"GPflexInput GPlocationStageFlexInput":"GPflexInput GPlocationStageFlexInputHidden",e.style.cssText="",e},_createLocationPointLabelElement:function(i,t){var e=this,n=document.createElement("label");return n.id=this._addUID("GPlocationOriginLabel_"+i),n.htmlFor=this._addUID("GPlocationOrigin_"+i),n.innerHTML=t,n.addEventListener("click",function(r){for(var o=Re.index(this.id),a=document.getElementsByClassName(e._addUID("GPlocationPoint")),s=0;s<a.length;s++){var l=a[s].childNodes[0].id,u=Re.index(l);document.getElementById(e._addUID("GPlocationPoint_"+u)).style.cssText=""}document.getElementById(e._addUID("GPlocationOriginCoords_"+o)).value="",document.getElementById(e._addUID("GPlocationOrigin_"+o)).value="",document.getElementById(e._addUID("GPlocationPoint_"+o)).style.cssText="",document.getElementById(e._addUID("GPlocationOriginPointer_"+o)).checked=!1,document.getElementById(e._addUID("GPlocationOrigin_"+o)).className="GPlocationOriginVisible",document.getElementById(e._addUID("GPlocationOriginCoords_"+o)).className="GPlocationOriginHidden",document.getElementById(e._addUID("GPlocationStageRemove_"+o))&&(document.getElementById(e._addUID("GPlocationStageRemove_"+o)).className="GPlocationStageRemove"),document.getElementById(e._addUID("GPlocationStageAdd"))&&(document.getElementById(e._addUID("GPlocationStageAdd")).className=""),e.onLocationClearPointClick(r)}),n},_createLocationAutoCompleteteInputElement:function(i){var t=this,e=document.createElement("input");return e.id=this._addUID("GPlocationOrigin_"+i),e.className="GPlocationOriginVisible",e.type="text",e.placeholder="Saisir une adresse",e.autocomplete="off",e.addEventListener("keyup",function(n){var r=n.which||n.keyCode;if(!(r===13||r===10||r===38||r===40)){var o=Re.index(this.id);document.getElementById(t._addUID("GPlocationOrigin_"+o)).value.length>2?document.getElementById(t._addUID("GPlocationAutoCompleteList_"+o)).style.display="block":document.getElementById(t._addUID("GPlocationAutoCompleteList_"+o)).style.display="none",t.onAutoCompleteSearchText(n)}}),e.addEventListener("keydown",function(n){var r=n.which||n.keyCode,o=document.getElementById(t._addUID("GPlocationAutoCompleteList_"+i));if(o){var a=o.getElementsByClassName("GPautoCompleteProposal current"),s=o.getElementsByClassName("GPautoCompleteProposal"),l=s.length;if(l){var u=null;if(a.length)u=a[0];else{u=s[0],u.className="GPautoCompleteProposal current",u.style.color="#000000",u.style["background-color"]="#CEDBEF";return}var c=parseInt(Re.index(u.id),10),h=c===l-1?s[0]:s[c+1],d=c===0?s[l-1]:s[c-1];switch(u.style["background-color"]="",u.style.color="",d.style["background-color"]="",d.style.color="",h.style["background-color"]="",h.style.color="",r){case 38:ip.log("arrow up"),u.className="GPautoCompleteProposal",d.className="GPautoCompleteProposal current",d.style.color="#000000",d.style["background-color"]="#CEDBEF";break;case 40:ip.log("arrow down"),u.className="GPautoCompleteProposal",h.className="GPautoCompleteProposal current",h.style.color="#000000",h.style["background-color"]="#CEDBEF";break;case 13:ip.log("enter"),u.click(n);break}u.focus()}}}),e},_createLocationCoordinateInputElement:function(i){var t=this,e=document.createElement("input");return e.id=this._addUID("GPlocationOriginCoords_"+i),e.className="GPlocationOriginHidden",e.type="text",e.disabled=!1,e.addEventListener("click",function(){var n=Re.index(this.id);document.getElementById(t._addUID("GPlocationOriginLabel_"+n)).click()}),e},_createLocationPointerShowInputElement:function(i){var t=document.createElement("input");return t.id=this._addUID("GPlocationOriginPointer_"+i),t.type="checkbox",t},_createLocationPointerInputElement:function(i){var t=this,e=document.createElement("label");return e.id=this._addUID("GPlocationOriginPointerImg_"+i),e.htmlFor=this._addUID("GPlocationOriginPointer_"+i),e.className="GPlocationOriginPointerImg",e.title="Pointer un lieu sur la carte",e.addEventListener("click",function(n){n.preventDefault(),n.stopPropagation();var r=Re.index(this.id),o=document.getElementsByClassName(t._addUID("GPlocationPoint")),a,s,l;for(a=0;a<o.length;a++)s=o[a].childNodes[0].id,l=Re.index(s),r!==l&&(document.getElementById(t._addUID("GPlocationOriginPointer_"+l)).checked=!1,document.getElementById(t._addUID("GPlocationOriginCoords_"+l)).value==="Pointer un lieu sur la carte"&&(document.getElementById(t._addUID("GPlocationOriginCoords_"+l)).value="",document.getElementById(t._addUID("GPlocationOrigin_"+l)).className="GPlocationOriginVisible",document.getElementById(t._addUID("GPlocationOriginCoords_"+l)).className="GPlocationOriginHidden"));if(document.getElementById(t._addUID("GPlocationOriginPointer_"+r)).checked){for(document.getElementById(t._addUID("GPlocationOriginCoords_"+r)).value="",a=0;a<o.length;a++)s=o[a].childNodes[0].id,l=Re.index(s),document.getElementById(t._addUID("GPlocationPoint_"+l)).style.cssText="";document.getElementById(t._addUID("GPlocationStageRemove_"+r))&&(document.getElementById(t._addUID("GPlocationStageRemove_"+r)).className="GPlocationStageRemove"),document.getElementById(t._addUID("GPlocationStageAdd"))&&(document.getElementById(t._addUID("GPlocationStageAdd")).className=""),document.getElementById(t._addUID("GPlocationOriginPointer_"+r)).checked=!1,document.getElementById(t._addUID("GPlocationOrigin_"+r)).className="GPlocationOriginVisible",document.getElementById(t._addUID("GPlocationOriginCoords_"+r)).className="GPlocationOriginHidden"}else{for(document.getElementById(t._addUID("GPlocationOriginCoords_"+r)).value="Pointer un lieu sur la carte",a=0;a<o.length;a++)s=o[a].childNodes[0].id,l=Re.index(s),r===l?document.getElementById(t._addUID("GPlocationPoint_"+l)).style.cssText="":document.getElementById(t._addUID("GPlocationPoint_"+l)).style.display="none";document.getElementById(t._addUID("GPlocationStageRemove_"+r))&&(document.getElementById(t._addUID("GPlocationStageRemove_"+r)).className="GPlocationOriginHidden"),document.getElementById(t._addUID("GPlocationStageAdd"))&&(document.getElementById(t._addUID("GPlocationStageAdd")).className="GPlocationOriginHidden"),document.getElementById(t._addUID("GPlocationOriginPointer_"+r)).checked=!0,document.getElementById(t._addUID("GPlocationOrigin_"+r)).className="GPlocationOriginHidden",document.getElementById(t._addUID("GPlocationOriginCoords_"+r)).className="GPlocationOriginVisible",document.getElementById(t._addUID("GPlocationOriginCoords_"+r)).disabled=!0}t.onActivateMapPointClick(n)}),e},_createLocationRemovePointElement:function(i){var t=this,e=document.createElement("div");return e.id=this._addUID("GPlocationStageRemove_"+i),e.className="GPlocationStageRemove",e.title="Supprimer l'étape",e.addEventListener("click",function(n){var r=document.getElementsByClassName(t._addUID("GPlocationPoint")),o=r.length-1,a=r[0].childNodes[0].id,s=r[o].childNodes[0].id,l=Re.index(a),u=Re.index(s);if(i!==l&&i!==u){var c=Re.index(this.id);document.getElementById(t._addUID("GPlocationPoint_"+c)).className="GPflexInput GPlocationStageFlexInputHidden",document.getElementById(t._addUID("GPlocationOrigin_"+c)).value="",document.getElementById(t._addUID("GPlocationOrigin_"+c)).className="GPlocationOriginVisible",document.getElementById(t._addUID("GPlocationOriginCoords_"+c)).value="",document.getElementById(t._addUID("GPlocationOriginCoords_"+c)).className="GPlocationOriginHidden",document.getElementById(t._addUID("GPlocationStageAdd")).style.display="",t.onLocationRemovePointClick(n)}}),e},_createLocationAddPointElement:function(){var i=this,t=document.createElement("div");return t.id=this._addUID("GPlocationStageAdd"),t.title="Ajouter une étape",t.addEventListener("click",function(e){for(var n=1,r=0,o=document.getElementsByClassName(i._addUID("GPlocationPoint")),a=1;a<o.length-1;a++){var s=o[a].childNodes[0].id,l=Re.index(s);document.getElementById(i._addUID("GPlocationPoint_"+l))&&(document.getElementById(i._addUID("GPlocationPoint_"+l)).className==="GPflexInput GPlocationStageFlexInputHidden"?n===1&&(n=l):r++)}n<o.length&&(document.getElementById(i._addUID("GPlocationPoint_"+n)).className="GPflexInput GPlocationStageFlexInput"),r===4&&(document.getElementById(i._addUID("GPlocationStageAdd")).style.display="none"),i.onLocationAddPointClick(e)}),t},_createLocationAutoCompleteResultElement:function(i){var t=this,e=document.createElement("div");return e.id=this._addUID("GPlocationAutoCompleteList_"+i),e.className="GPadvancedAutoCompleteList",e.addEventListener?e.addEventListener("click",function(n){t.onAutoCompletedResultsItemClick(n),document.getElementById(t._addUID("GPlocationAutoCompleteList_"+i)).style.display="none"},!1):e.attachEvent&&e.attachEvent("onclick",function(n){t.onAutoCompletedResultsItemClick(n),document.getElementById(t._addUID("GPlocationAutoCompleteList_"+i)).style.display="none"}),e},_createLocationAutoCompletedLocationElement:function(i,t,e){var n=document.getElementById(this._addUID("GPlocationAutoCompleteList_"+i)),r=document.createElement("div");r.id=this._addUID("AutoCompletedLocation_"+e),r.className="GPautoCompleteProposal",r.innerHTML=gr.getSuggestedLocationFreeform(t),n.appendChild(r)},GPdisplayCoordinate:function(i){for(var t=document.getElementsByClassName(this._addUID("GPlocationPoint")),e=0;e<t.length;e++){var n=t[e].childNodes[0].id,r=Re.index(n);if(document.getElementById(this._addUID("GPlocationOriginPointer_"+r)).checked){document.getElementById(this._addUID("GPlocationOriginCoords_"+r)).value=i,document.getElementById(this._addUID("GPlocationOriginCoords_"+r)).disabled=!1;for(var o=0;o<t.length;o++){n=t[o].childNodes[0].id;var a=Re.index(n);document.getElementById(this._addUID("GPlocationPoint_"+a)).style.cssText="",document.getElementById(this._addUID("GPlocationStageRemove_"+a))&&(document.getElementById(this._addUID("GPlocationStageRemove_"+a)).className="GPlocationStageRemove")}document.getElementById(this._addUID("GPlocationOriginPointer_"+r)).checked=!1,document.getElementById(this._addUID("GPlocationStageAdd"))&&(document.getElementById(this._addUID("GPlocationStageAdd")).className="");return}}}},ta=Ye.getLogger("locationselector"),Cs=function(i){function t(e){if(e=e||{},!(this instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this.initialize(e),this._container=this._initContainer(),e.element&&e.element.appendChild&&(e.element.appendChild(this._container),this._container=e.element),i.call(this,{element:this._container,target:e.target,render:e.render})}return i&&(t.__proto__=i),t.prototype=Object.create(i.prototype,{}),he.assign(t.prototype,xN),t.prototype.constructor=t,t.prototype.initialize=function(e){this.options={tag:{id:1,groupId:null,label:">",display:!0,addOption:!1,removeOption:!1},displayInfo:!0,autocompleteOptions:{}},he.mergeParams(this.options,e),this._uid=this.options.tag.groupId||Re.generate(),this._map=null,this._inputsContainer=null,this._inputLabelContainer=null,this._inputAutoCompleteContainer=null,this._inputShowPointerContainer=null,this._inputShowPointer=null,this._inputCoordinateContainer=null,this._addPointElement=null,this._removePointElement=null,this._coordinate=null,this._suggestedContainer=null,this._suggestedLocations=[],this._currentLocation=null,this._initMarker(),this._resources={},this.listenerKey=null},t.prototype._initMarker=function(){if(this._marker=null,this._markerUrl="",this._markerOffset=[0,0],this.options.tag.markerOpts&&this.options.tag.markerOpts.url){this._markerUrl=this.options.tag.markerOpts.url;var e=this.options.tag.markerOpts.offset;e&&(Array.isArray(e)&&e.length===2?this._markerOffset=e:ta.log("markerOpts.offset should be an array. e.g. : [0,0]"))}else this._markerUrl=It.lightOrange,this._markerOffset=It.defaultOffset},t.prototype.getCoordinate=function(){return this._coordinate},t.prototype.setCoordinate=function(e,n){var r=this.getMap(),o=r.getView().getProjection();n===null&&(n=o),this._setCoordinate(e,n),e=ut(e,n,o),this._setMarker([e[0],e[1]],null,!1)},t.prototype.clear=function(){this.clearResults(),this._inputLabelContainer.click()},t.prototype.clearResults=function(){this._currentLocation=null,this._coordinate=null,this._hideSuggestedLocation(),this._clearSuggestedLocation(),this._setMarker(),Kt(this.listenerKey)},t.prototype._initContainer=function(){var e=this.options.tag.id,n=this._createMainContainerElement(),r=this._inputsContainer=this._createLocationPointElement(e,this.options.tag.display);n.appendChild(r);var o=this._inputLabelContainer=this._createLocationPointLabelElement(e,this.options.tag.label);r.appendChild(o);var a=this._inputAutoCompleteContainer=this._createLocationAutoCompleteteInputElement(e);a.addEventListener?a.addEventListener("click",()=>this.onAutoCompleteInputClick()):a.attachEvent&&a.attachEvent("onclick",()=>this.onAutoCompleteInputClick()),r.appendChild(a);var s=this._inputCoordinateContainer=this._createLocationCoordinateInputElement(e);r.appendChild(s);var l=this._inputShowPointerContainer=this._createLocationPointerShowInputElement(e);r.appendChild(l);var u=this._inputShowPointer=this._createLocationPointerInputElement(e);if(r.appendChild(u),this.options.tag.addOption){var c=this._addPointElement=this._createLocationAddPointElement();r.appendChild(c)}if(this.options.tag.removeOption){var h=this._removePointElement=this._createLocationRemovePointElement(e);r.appendChild(h)}var d=this._suggestedContainer=this._createLocationAutoCompleteResultElement(e);return n.appendChild(d),n},t.prototype.onAutoCompleteInputClick=function(){this._inputAutoCompleteContainer&&this._inputAutoCompleteContainer.value.length>2&&this._displaySuggestedLocation()},t.prototype.onAutoCompleteSearchText=function(e){var n=e.target.value;if(n){if(this._currentLocation=n,n.length<3){this._clearSuggestedLocation();return}var r=this;this._requestAutoComplete({text:n,maximumResponses:5,onSuccess:function(a){if(a){var s=a.suggestedLocations;r._fillAutoCompletedLocationListContainer(s)}},onFailure:function(a){r._clearSuggestedLocation(),ta.log(a.message)}});var o=this.getMap();o.on("click",()=>this._hideSuggestedLocation()),o.on("pointerdrag",()=>this._hideSuggestedLocation())}},t.prototype.onAutoCompletedResultsItemClick=function(e){var n=Re.index(e.target.id);if(n){var r=[this._suggestedLocations[n].position.x,this._suggestedLocations[n].position.y];this._coordinate=r;var o={type:this._suggestedLocations[n].type,fields:this._suggestedLocations[n]},a=gr.getSuggestedLocationFreeform(this._suggestedLocations[n]);this._setLabel(a);var s=this.getMap().getView(),l=s.getProjection().getCode();l!=="EPSG:4326"&&(r=ut(r,"EPSG:4326",l)),this._setPosition(r),this._setMarker(r,o,this.options.displayInfo)}},t.prototype.onActivateMapPointClick=function(){var e=this.getMap();this._inputShowPointerContainer.checked?(this.clearResults(),this.listenerKey=e.on("click",n=>this.onMouseMapClick(n)),this._setCursor("crosshair")):(Kt(this.listenerKey),this._setCursor())},t.prototype.onLocationClearPointClick=function(){this._setCursor(),this.clearResults()},t.prototype.onLocationRemovePointClick=function(){this._setCursor(),this.clearResults()},t.prototype.onLocationAddPointClick=function(e){ta.log("onRouteAddPointClick",e)},t.prototype.onMouseMapClick=function(e){var n=e.coordinate;if(!(!e.map||!e.map.getView())){var r=e.map.getView().getProjection();this._setCoordinate(n,r),this._setMarker([n[0],n[1]],null,!1),this.onActivateMapPointClick(e)}},t.prototype._setLabel=function(e){this._inputAutoCompleteContainer.value=e},t.prototype._setCursor=function(e){var n=this.getMap(),r=n.getTargetElement();e?r.style.cursor=e:r.style.cursor=null},t.prototype._setCoordinate=function(e,n){this._coordinate=ut(e,n,"EPSG:4326");var r=this._coordinate[0].toFixed(4),o=this._coordinate[1].toFixed(4),a=o+" / "+r;this.GPdisplayCoordinate(a)},t.prototype._setPosition=function(e){var n=this.getMap().getView();n.setCenter(e)},t.prototype._setMarker=function(e,n,r){var o=this.getMap();if(this._marker!=null&&(o.removeOverlay(this._marker),this._marker=null),e){var a=document.createElement("img");a.src=this._markerUrl,this._marker=new dn({position:e,offset:this._markerOffset,element:a,stopEvent:!1}),o.addOverlay(this._marker),r&&ta.log("marker information : ",n)}},t.prototype._clearSuggestedLocation=function(){if(this._suggestedLocations=[],this._suggestedContainer)for(;this._suggestedContainer.firstChild;)this._suggestedContainer.removeChild(this._suggestedContainer.firstChild)},t.prototype._hideSuggestedLocation=function(){this._suggestedContainer&&(this._suggestedContainer.style.display="none")},t.prototype._displaySuggestedLocation=function(){this._suggestedContainer&&(this._suggestedContainer.style.display="block")},t.prototype._requestAutoComplete=function(e){if(ta.log("_requestAutoComplete()",e),!(!e||Object.keys(e).length===0)&&e.text){ta.log(e);var n={};he.assign(n,this.options.autocompleteOptions),he.assign(n,e);var r=this._resources.AutoCompletion||null;r&&Array.isArray(r)&&(n.filterOptions||(n.filterOptions={}),n.filterOptions.type=r),n.apiKey=n.apiKey||this.options.apiKey,typeof n.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?n.ssl=this.options.ssl:n.ssl=!0),ta.log(n),tt.Services.autoComplete(n)}},t.prototype._fillAutoCompletedLocationListContainer=function(e){if(!(!e||e.length===0)){var n=this._suggestedContainer;if(n.childElementCount)for(;n.firstChild;)n.removeChild(n.firstChild);for(var r=0;r<e.length;r++)this._createLocationAutoCompletedLocationElement(this.options.tag.id,e[r],r);this._suggestedLocations=e}},t}(yi);window.ol&&window.ol.control&&(window.ol.control.LocationSelector=Cs);var MN={_addUID:function(i){var t=this.uid?i+"-"+this.uid:i;return t}},cl=Ye.getLogger("export");class Vo extends yi{constructor(t){if(t=t||{control:null,target:null,format:"geojson",name:"export",title:"Exporter",menu:!1,onExport:null},cl.trace("[constructor] Export",t),super({element:document.createElement("div"),render:t.render,target:t.target}),!(this instanceof Vo))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this.EXPORT_ROUTE={},this.EXPORT_ISOCHRON={},this.EXPORT_PROFILE={},this.uid=t.id||Re.generate(),this.extension=null,this.mimeType=null,this.container=null,this.button=null,this.menu=null,this.icon="☰ ",this.menuClassHidden="GPexportMenuHidden",this.initOptions(t),this.initContainer()}render(){if(!this.options.target&&this.options.control){var t=this.options.control.getContainer();this.options.target=t.lastChild}this.container&&this.options.target.appendChild(this.container)}initOptions(t){this.options=t,this.options.control,this.options.target;var e=this.options.format;e?this.setFormat(e):this.setFormat(""),this.options.name||this.setName("export"),this.options.title||this.setTitle("Exporter"),this.options.menu===void 0&&this.setMenu(!1)}initContainer(){var t=this.options.title;this.options.menu&&(t=this.icon+this.options.title);var e=document.createElement("div");e.id=this._addUID("GPexportContainer"),e.className="GPexportMenuContainer";var n=this.stringToHTML(`
            <input type="button"
                id="${this._addUID("GPexportButton")}" 
                class="GPinputSubmit"
                value="${t}">
        `);this.button=n.firstChild,this.button&&this.button.addEventListener("click",s=>this.onClickButtonExport(s)),e.appendChild(n.firstChild);var r=this.stringToHTML(`
            <div class="GPexportMenuContent ${this.menuClassHidden}">
                <label class="container">GeoJSON
                    <input type="radio" 
                        id="GPmenuFormatGeojson-${this.uid}"
                        name="format" 
                        value="geojson">
                    <span class="checkmark"></span>
                </label>
                <label class="container">KML
                    <input type="radio" 
                        id="GPmenuFormatKml-${this.uid}"
                        name="format" 
                        value="kml">
                    <span class="checkmark"></span>
                </label>
                <label class="container">GPX
                    <input type="radio" 
                        id="GPmenuFormatGpx-${this.uid}"
                        name="format" 
                        value="gpx">
                    <span class="checkmark"></span>
                </label>
            </div>
        `);if(this.menu=r.firstChild,this.menu){if(this.options.menu){var o=this.menu.className;this.menu.className=o.replace(this.menuClassHidden,"")}var a=this.menu.querySelectorAll('input[type=radio][name="format"]');a.forEach(s=>{s.id.toUpperCase().includes(this.options.format.toUpperCase())&&(s.checked=!0),s.addEventListener("change",l=>{this.setFormat(l.target.value)})})}e.appendChild(r.firstChild),this.container=e}stringToHTML(t){var e=function(){if(!window.DOMParser)return!1;var a=new DOMParser;try{a.parseFromString("x","text/html")}catch{return!1}return!0};if(e()){var n=new DOMParser,r=n.parseFromString(t,"text/html");return r.body}var o=document.createElement("div");return o.innerHTML=t,o}isPluggableControl(){return!!(this.options.control&&typeof this.options.control.getContainer=="function"&&typeof this.options.control.getLayer=="function")}exportFeatures(t,e,n){var r=null;if(!t)return cl.warn("Impossible to export : no layer is hosting features."),r;if(!t.getSource()||!t.getSource().getFeatures()||!t.getSource().getFeatures().length)return cl.warn("Impossible to export : no features found."),r;t.getSource().getFeatures().forEach(c=>{var h=c.getStyle();!h&&typeof this.options.control.getStyle=="function"&&c.setStyle(this.options.control.getStyle())});var o={defaultStyle:n};e&&(o.extensions={"geoportail:compute":e});var a=null;switch(this.options.format.toUpperCase()){case"KML":o.writeStyles=!0,o.showPointNames=!0,a=new Gs(o);break;case"GPX":a=new ks(o);break;case"GEOJSON":a=new kn(o);break}if(!a)return cl.warn("Impossible to export : format unknown !?"),r;var s=t.getSource().getProjection(),l=this.getMap();l&&(s=s||l.getView().getProjection());var u=t.getSource().getFeatures();return r=a.writeFeatures(u,{dataProjection:"EPSG:4326",featureProjection:s||"EPSG:3857"}),r}onClickButtonExport(t){if(!this.isPluggableControl()){cl.warn("Componant not pluggable with the control !");return}var e=this.options.control.getLayer(),n=this.options.control.getData!==void 0?this.options.control.getData():{},r=this.options.control.getStyle!==void 0?this.options.control.getStyle():{},o=this.exportFeatures(e,n,r);if(!(!o||o==="null")){if(this.dispatchEvent({type:"export:compute",content:o}),this.options.onExport&&typeof this.options.onExport=="function"){this.options.onExport(o);return}var a=document.createElement("a"),s="utf-8";if(a.setAttribute("href","data:"+this.mimeType+";charset="+s+","+encodeURIComponent(o)),a.setAttribute("download",this.options.name+this.extension),document.createEvent){var l=document.createEvent("MouseEvents");l.initEvent("click",!0,!0),a.dispatchEvent(l)}else a.click()}}setControl(t){this.options.control=t}setTarget(t){this.options.target=t}setFormat(t){switch(this.options.format=t.toUpperCase(),this.options.format){case"KML":this.extension=".kml",this.mimeType="application/vnd.google-earth.kml+xml";break;case"GPX":this.extension=".gpx",this.mimeType="application/gpx+xml";break;case"GEOJSON":this.extension=".geojson",this.mimeType="application/geo+json";break;default:this.options.format="GEOJSON",this.extension=".geojson",this.mimeType="application/geo+json";break}}setName(t){this.options.name=t}setTitle(t){this.options.title=t,this.button&&(this.button.value=this.options.menu?this.icon+t:t)}setMenu(t){if(this.options.menu=t,this.button&&(this.button.value=this.options.menu?this.icon+this.options.title:this.options.title),this.menu&&this.options.menu){var e=this.menu.className;this.menu.className=e.replace(this.menuClassHidden,"");var n=this.menu.querySelectorAll('input[type=radio][name="format"]');n.forEach(r=>{r.id.toUpperCase().includes(this.options.format.toUpperCase())&&(r.checked=!0)})}}}he.assign(Vo.prototype,MN);window.ol&&window.ol.control&&(window.ol.control.Export=Vo);var TN=Ye.getLogger("RouteDOM"),bN={_addUID:function(i){var t=this._uid?i+"-"+this._uid:i;return t},_createMainContainerElement:function(){var i=document.createElement("div");return i.id=this._addUID("GProute"),i.className="GPwidget",i},_createShowRouteElement:function(){var i=document.createElement("input");return i.id=this._addUID("GPshowRoute"),i.type="checkbox",i},_createShowRoutePictoElement:function(){var i=this,t=document.createElement("label");t.id=this._addUID("GPshowRoutePicto"),t.className="GPshowAdvancedToolPicto",t.htmlFor=this._addUID("GPshowRoute"),t.title="Ouvrir le calcul d'itinéraire",t.addEventListener?t.addEventListener("click",function(n){i.onShowRoutePanelClick(n)}):t.attachEvent&&t.attachEvent("onclick",function(n){i.onShowRoutePanelClick(n)});var e=document.createElement("span");return e.id=this._addUID("GPshowRouteOpen"),e.className="GPshowAdvancedToolOpen",t.appendChild(e),t},_createRoutePanelElement:function(){var i=document.createElement("div");return i.id=this._addUID("GProutePanel"),i.className="GPpanel",i},_createRoutePanelHeaderElement:function(){var i=this,t=document.createElement("div");t.className="GPpanelHeader";var e=document.createElement("div");e.className="GPpanelTitle",e.innerHTML="Calcul d'itinéraire",t.appendChild(e);var n=document.createElement("div");return n.id=this._addUID("GProutePanelClose"),n.className="GPpanelClose",n.title="Masquer le panneau",n.addEventListener?n.addEventListener("click",function(){document.getElementById(i._addUID("GPshowRoutePicto")).click()},!1):n.attachEvent&&n.attachEvent("onclick",function(){document.getElementById(i._addUID("GPshowRoutePicto")).click()}),t.appendChild(n),t},_createRoutePanelFormElement:function(){var i=this,t=document.createElement("form");return t.id=this._addUID("GProuteForm"),t.setAttribute("onkeypress","return event.keyCode != 13;"),t.addEventListener("submit",function(e){TN.log(e),e.preventDefault();var n=document.getElementsByClassName(i._addUID("GPlocationPoint")),r=n[0].childNodes[0].id,o=n[n.length-1].childNodes[0].id,a=Re.index(r),s=Re.index(o);if(document.getElementById(i._addUID("GPlocationOrigin_"+a)).value===""&&document.getElementById(i._addUID("GPlocationOriginCoords_"+a)).value===""||document.getElementById(i._addUID("GPlocationOrigin_"+s)).value===""&&document.getElementById(i._addUID("GPlocationOriginCoords_"+s)).value==="")return!1;i._addRouteResultsStagesValuesElement(n);var l=null;if(document.getElementById(i._addUID("GProuteComputationSelect"))){var u=document.getElementById(i._addUID("GProuteResultsComputationSelect"));u.selectedIndex=document.getElementById(i._addUID("GProuteComputationSelect")).selectedIndex,l=u.options[u.selectedIndex].value}var c=null;document.getElementById(i._addUID("GProuteTransportCar"))&&document.getElementById(i._addUID("GProuteTransportCar")).checked&&(c=document.getElementById(i._addUID("GProuteTransportCar")).value),document.getElementById(i._addUID("GProuteTransportPedestrian"))&&document.getElementById(i._addUID("GProuteTransportPedestrian")).checked&&(c=document.getElementById(i._addUID("GProuteTransportPedestrian")).value);for(var h=[],d=document.getElementsByClassName("GProuteExclusionsOption"),p=0;p<d.length;p++){var f=d[p].htmlFor,g=document.getElementById(f);g.checked||h.push(g.value)}return i.onRouteComputationSubmit({computation:l,transport:c,exclusions:h}),!1}),t},_createRoutePanelResultsElement:function(){var i=document.createElement("div");i.id=this._addUID("GProuteResultsPanel"),i.className="GProuteComponentHidden",i.appendChild(this._createRouteResultsStagesElement()),i.appendChild(this._createRouteResultsElement());var t=document.createElement("div");t.className="GPfakeBorder GPfakeBorderLeft",i.appendChild(t),i.appendChild(this._createRouteShowResultsDetailsElement());var e=document.createElement("label");e.htmlFor=this._addUID("GProuteResultsShowDetails"),e.innerHTML="Afficher le détail",i.appendChild(e);var n=document.createElement("label");n.htmlFor=this._addUID("GProuteResultsShowDetails"),n.innerHTML="Masquer le détail",i.appendChild(n);var r=document.createElement("div");return r.className="GPfakeBorder",i.appendChild(r),i.appendChild(this._createRouteResultsDetailsElement()),i},_createRouteWaitingElement:function(){var i=document.createElement("div");i.id=this._addUID("GProuteCalcWaitingContainer"),i.className="GProuteCalcWaitingContainerHidden";var t=document.createElement("p");return t.className="GProuteCalcWaiting",t.innerHTML="Calcul en cours...",i.appendChild(t),i},_createRouteResultsStagesElement:function(){var i=document.createElement("div");return i.id=this._addUID("GProuteResultsStages"),i},_addRouteResultsStagesValuesElement:function(i){document.getElementById(this._addUID("GProuteResultsStages")).innerHTML="";for(var t=0;t<i.length;t++){var e=i[t].childNodes[0].id,n=Re.index(e);if(document.getElementById(this._addUID("GPlocationPoint_"+n)).className==="GPflexInput GPlocationStageFlexInput"){var r=document.createElement("div");r.className="GProuteResultsStages";var o=document.createElement("div");o.className="GProuteResultStageLabel",o.innerHTML=document.getElementById(this._addUID("GPlocationOriginLabel_"+n)).innerHTML+" :",r.appendChild(o);var a=document.createElement("div");a.className="GProuteResultStageValue";var s=document.getElementById(this._addUID("GPlocationOriginCoords_"+n)),l=s.value,u=s.className==="GPlocationOriginVisible";l!==null&&l!==""&&u?a.innerHTML=l:a.innerHTML=document.getElementById(this._addUID("GPlocationOrigin_"+n)).value,r.appendChild(a),a.innerHTML!==""&&document.getElementById(this._addUID("GProuteResultsStages")).appendChild(r)}}},_createRouteResultsElement:function(){var i=this,t=document.createElement("div");t.id=this._addUID("GProuteResults");var e=document.createElement("div");e.id=this._addUID("GProuteResultsValues"),t.appendChild(e);var n=document.createElement("div");n.id=this._addUID("GProuteResultsMode");var r=document.createElement("select");r.id=this._addUID("GProuteResultsComputationSelect"),r.className="GPinputSelect",r.addEventListener("change",function(u){i.onRouteModeComputationChangeAndRun(u)});for(var o=[{code:"fastest",label:"Plus rapide"},{code:"shortest",label:"Plus court"}],a=0;a<o.length;a++){var s=document.createElement("option");s.value=o[a].code,s.text=o[a].label,r.appendChild(s)}n.appendChild(r),t.appendChild(n);var l=document.createElement("div");return l.id=this._addUID("GProuteResultsNew"),l.title="Modifier le calcul",l.addEventListener("click",function(u){document.getElementById(i._addUID("GProuteResultsPanel")).className="GProuteComponentHidden",document.getElementById(i._addUID("GProuteForm")).className="",i.onShowRouteResultsNewClick(u)}),t.appendChild(l),t},_addRouteResultsValuesElement:function(i,t,e){var n=document.getElementById(this._addUID("GProuteResultsValues"));if(n.childElementCount)for(;n.firstChild;)n.removeChild(n.firstChild);var r=document.createElement("div");r.className="GProuteResultsValue";var o=document.createElement("label");o.className="GProuteResultsValueLabel",o.innerHTML="Distance :",r.appendChild(o);var a=0,s=parseInt(i/1e3,10);if(!s)a=Math.round(i)+" m";else{var l=Math.round(i);l=l/1e3,a=l+" km"}var u=document.createElement("div");u.id=this._addUID("GProuteResultsValueDist"),u.innerHTML=a,r.appendChild(u),n.appendChild(r);var c=document.createElement("div");c.className="GProuteResultsValue";var h=document.createElement("label");h.className="GProuteResultsValueLabel",h.innerHTML="Durée :",c.appendChild(h);var d=document.createElement("div");return d.id=this._addUID("GProuteResultsValueDist"),d.innerHTML=e(t),c.appendChild(d),n.appendChild(c),n},_createRouteShowResultsDetailsElement:function(){var i=document.createElement("input");return i.id=this._addUID("GProuteResultsShowDetails"),i.type="checkbox",i},_createRouteResultsDetailsElement:function(){var i=document.createElement("div");return i.id=this._addUID("GProuteResultsDetails"),i},_addRouteResultsDetailsElement:function(i,t){var e=this,n=document.getElementById(this._addUID("GProuteResultsDetails"));if(n.childElementCount)for(;n.firstChild;)n.removeChild(n.firstChild);for(var r=0,o=0,a=0;a<i.length;a++){var s=a+1,l=i[a],u=document.createElement("div");u.className="GProuteResultsDetailsNumber",u.innerHTML=s+".",n.appendChild(u),o+=parseFloat(l.duration),r+=parseFloat(l.distance);var c=0,h=parseInt(r/1e3,10);if(!h)c=Math.round(r)+" m";else{var d=Math.round(r);d=d/1e3,c=d+" km"}var p=document.createElement("div");p.className="GProuteResultsDetailsInstruction",p.id=this._addUID("GProuteResultsDetailsInstruction_"+s),p.title="distance : "+c+" / temps : "+t(o),p.innerHTML=l.instruction,p.addEventListener("mouseover",function(f){e.onRouteResultsDetailsMouseOver(f)}),p.addEventListener("mouseout",function(f){e.onRouteResultsDetailsMouseOut(f)}),p.addEventListener("click",function(f){typeof e.onRouteResultsDetailsClick=="function"&&e.onRouteResultsDetailsClick(f)}),n.appendChild(p)}return n},_createRoutePanelFormPointElement:function(i,t,e){var n=this,r=document.createElement("div");r.id="GProutePoint"+i,r.className=e?"GPflexInput GProuteStageFlexInput":"GPflexInput GProuteStageFlexInputHidden";var o=document.createElement("label");o.id="GProuteOriginLabel"+i,o.htmlFor="GProuteOrigin"+i,o.innerHTML=t,o.addEventListener("click",function(){var c=this.id.charAt(this.id.length-1);document.getElementById("GProuteOriginCoords"+c).value="";for(var h=1;h<8;h++)document.getElementById("GProutePoint"+h).style.display="flex";document.getElementById("GProuteForm").className="",document.getElementById("GProuteOriginPointer"+c).checked=!1,document.getElementById("GProuteOrigin"+c).className="GProuteOriginVisible",document.getElementById("GProuteOriginCoords"+c).className="GProuteOriginHidden"}),r.appendChild(o);var a=document.createElement("input");a.id="GProuteOrigin"+i,a.className="GProuteOriginVisible",a.type="text",a.placeholder="Saisir une adresse",a.addEventListener("keyup",function(c){var h=c.which||c.keyCode;if(!(h===13||h===10)){var d=this.id.charAt(this.id.length-1);document.getElementById("GProuteOrigin"+d).value.length>2?document.getElementById("GProuteAutoCompleteList"+d).style.display="block":document.getElementById("GProuteAutoCompleteList"+d).style.display="none",n.onAutoCompleteSearchText(c)}}),a.addEventListener("blur",function(){var c=this.id.charAt(this.id.length-1);document.getElementById("GProuteAutoCompleteList"+c).style.display="none"}),r.appendChild(a);var s=document.createElement("input");s.id="GProuteOriginCoords"+i,s.className="GProuteOriginHidden",s.type="text",s.disabled=!0,r.appendChild(s);var l=document.createElement("input");l.id="GProuteOriginPointer"+i,l.type="checkbox",r.appendChild(l);var u=document.createElement("label");return u.id="GProuteOriginPointerImg"+i,u.htmlFor="GProuteOriginPointer"+i,u.className="GProuteOriginPointerImg",u.title="Pointer un lieu sur la carte",u.addEventListener("click",function(c){c.preventDefault(),c.stopPropagation();var h=this.id.charAt(this.id.length-1),d;for(d=1;d<8;d++)h!==d&&(document.getElementById("GProuteOriginPointer"+d).checked=!1,document.getElementById("GProuteOriginCoords"+d).value==="Pointer un lieu sur la carte"&&(document.getElementById("GProuteOriginCoords"+d).value="",document.getElementById("GProuteOrigin"+d).className="GProuteOriginVisible",document.getElementById("GProuteOriginCoords"+d).className="GProuteOriginHidden"));if(document.getElementById("GProuteOriginPointer"+h).checked){for(document.getElementById("GProuteOriginCoords"+h).value="",d=1;d<8;d++)document.getElementById("GProutePoint"+d).style.display="flex";document.getElementById("GProuteForm").className="",document.getElementById("GProuteOriginPointer"+h).checked=!1,document.getElementById("GProuteOrigin"+h).className="GProuteOriginVisible",document.getElementById("GProuteOriginCoords"+h).className="GProuteOriginHidden"}else{for(document.getElementById("GProuteOriginCoords"+h).value="Pointer un lieu sur la carte",d=1;d<8;d++)h===d?document.getElementById("GProutePoint"+d).style.display="flex":document.getElementById("GProutePoint"+d).style.display="none";document.getElementById("GProuteForm").className="GProuteFormMini",document.getElementById("GProuteOriginPointer"+h).checked=!0,document.getElementById("GProuteOrigin"+h).className="GProuteOriginHidden",document.getElementById("GProuteOriginCoords"+h).className="GProuteOriginVisible"}n.onRouteMapPointClick(c)}),r.appendChild(u),r},_createRoutePanelFormRemoveStageElement:function(i){var t=this,e=document.createElement("div");return e.id="GProuteStageRemove"+i,e.className="GProuteStageRemove",e.title="Supprimer l'étape",i!==1&&i!==7&&e.addEventListener("click",function(n){var r=this.id.charAt(this.id.length-1);document.getElementById("GProutePoint"+r).className="GPflexInput GProuteStageFlexInputHidden",document.getElementById("GProuteOrigin"+r).value="",document.getElementById("GProuteOrigin"+r).className="GProuteOriginVisible",document.getElementById("GProuteOriginCoords"+r).value="",document.getElementById("GProuteOriginCoords"+r).className="GProuteOriginHidden",document.getElementById("GProuteStageAdd").style.display="",t.onRouteRemovePointClick(n)}),e},_createRoutePanelFormAddStageElement:function(){var i=this,t=document.createElement("div");return t.id="GProuteStageAdd",t.title="Ajouter une étape",t.addEventListener("click",function(e){for(var n=1,r=0,o=2;o<7;o++)document.getElementById("GProutePoint"+o).className==="GPflexInput GProuteStageFlexInputHidden"?n===1&&(n=o):r++;n<7&&(document.getElementById("GProutePoint"+n).className="GPflexInput GProuteStageFlexInput"),r===4&&(document.getElementById("GProuteStageAdd").style.display="none"),i.onRouteAddPointClick(e)}),t},_createRoutePanelFormAutoCompleteListElement:function(i){var t=this,e=document.createElement("div");return e.id="GProuteAutoCompleteList"+i,e.className="GPadvancedAutoCompleteList",e.addEventListener?e.addEventListener("click",function(n){t.onAutoCompletedResultsItemClick(n),document.getElementById("GProuteAutoCompleteList"+i).style.display="none"},!1):e.attachEvent&&e.attachEvent("onclick",function(n){t.onAutoCompletedResultsItemClick(n),document.getElementById("GProuteAutoCompleteList"+i).style.display="none"}),e},_createRouteAutoCompletedLocationElement:function(i,t,e){var n=document.getElementById("GProuteAutoCompleteList"+t),r=document.createElement("div");r.id="AutoCompletedLocation"+e,r.className="GPautoCompleteProposal",r.innerHTML=gr.getSuggestedLocationFreeform(i),n.appendChild(r)},_createRoutePanelFormModeChoiceElement:function(){var i=document.createElement("div");return i.id=this._addUID("GProuteModeChoice"),i},_createRoutePanelFormModeChoiceTransportElement:function(i){var t=this,e=document.createElement("div");e.id=this._addUID("GProuteTransportChoice");var n=document.createElement("span");n.className="GProuteModeLabel",n.innerHTML="Mode de transport",e.appendChild(n);for(var r=0;r<i.length;r++){var o=i[r];if(o==="Voiture"){var a=document.createElement("input");a.id=this._addUID("GProuteTransportCar"),a.type="radio",a.name="GProuteTransport",a.value="Voiture",r===0&&(a.checked=!0),a.addEventListener?a.addEventListener("change",function(c){t.onRouteModeTransportChange(c)}):a.attachEvent&&a.attachEvent("onchange",function(c){t.onRouteModeTransportChange(c)}),e.appendChild(a);var s=document.createElement("label");s.className="GProuteTransportImg",s.htmlFor=this._addUID("GProuteTransportCar"),s.title="Voiture",e.appendChild(s)}if(o==="Pieton"){var l=document.createElement("input");l.id=this._addUID("GProuteTransportPedestrian"),l.type="radio",l.name="GProuteTransport",l.value="Pieton",r===0&&(l.checked=!0),l.addEventListener?l.addEventListener("change",function(c){t.onRouteModeTransportChange(c)}):l.attachEvent&&l.attachEvent("onchange",function(c){t.onRouteModeTransportChange(c)}),e.appendChild(l);var u=document.createElement("label");u.className="GProuteTransportImg",u.htmlFor=this._addUID("GProuteTransportPedestrian"),u.title="Piéton",e.appendChild(u)}}return e},_createRoutePanelFormModeChoiceComputeElement:function(){var i=this,t=document.createElement("div");t.id=this._addUID("GProuteComputationChoice");var e=document.createElement("label");e.htmlFor=this._addUID("GProuteComputationSelect"),e.innerHTML="Mode de calcul";var n=document.createElement("span");n.className="GProuteModeLabel",n.appendChild(e),t.appendChild(n);var r=document.createElement("select");r.id=this._addUID("GProuteComputationSelect"),r.className="GPinputSelect",r.addEventListener("change",function(l){i.onRouteModeComputationChange(l)});for(var o=[{code:"fastest",label:"Plus rapide"},{code:"shortest",label:"Plus court"}],a=0;a<o.length;a++){var s=document.createElement("option");s.value=o[a].code,s.text=o[a].label,r.appendChild(s)}return t.appendChild(r),t},_createShowRouteExclusionsElement:function(){var i=document.createElement("input");return i.id=this._addUID("GPshowRouteExclusions"),i.type="checkbox",i},_createShowRouteExclusionsPictoElement:function(){var i=this,t=document.createElement("label");return t.id=this._addUID("GPshowRouteExclusionsPicto"),t.className="GPshowMoreOptionsImage GPshowMoreOptions GPshowRouteExclusionsPicto",t.htmlFor=this._addUID("GPshowRouteExclusions"),t.title="Exclusions",t.addEventListener?t.addEventListener("click",function(e){i.onShowRouteExclusionsClick(e)}):t.attachEvent&&t.attachEvent("onclick",function(e){i.onShowRouteExclusionsClick(e)}),t},_createRoutePanelFormExclusionsElement:function(){var i=document.createElement("div");i.id=this._addUID("GProuteExclusions");var t=document.createElement("span");return t.className="GProuteExclusionsLabel",t.innerHTML="Passages autorisés",i.appendChild(t),i},_createRoutePanelFormExclusionOptionsElement:function(i){var t=this,e=document.createElement("div");e.className="GProuteExclusionsOptions";for(var n in i)if(i.hasOwnProperty(n)){var r=i[n];switch(n){case"toll":var o=document.createElement("input");o.id=this._addUID("GProuteExclusionsToll"),o.type="checkbox",o.value="Toll",o.checked=!r,o.addEventListener?o.addEventListener("change",function(h){t.onRouteExclusionsChange(h)}):o.attachEvent&&o.attachEvent("onchange",function(h){t.onRouteExclusionsChange(h)}),e.appendChild(o);var a=document.createElement("label");a.className="GProuteExclusionsOption",a.htmlFor=this._addUID("GProuteExclusionsToll"),a.innerHTML="Péages",e.appendChild(a);break;case"tunnel":var s=document.createElement("input");s.id=this._addUID("GProuteExclusionsTunnel"),s.type="checkbox",s.value="Tunnel",s.checked=!r,s.addEventListener?s.addEventListener("change",function(h){t.onRouteExclusionsChange(h)}):s.attachEvent&&s.attachEvent("onchange",function(h){t.onRouteExclusionsChange(h)}),e.appendChild(s);var l=document.createElement("label");l.className="GProuteExclusionsOption",l.htmlFor=this._addUID("GProuteExclusionsTunnel"),l.innerHTML="Tunnels",e.appendChild(l);break;case"bridge":var u=document.createElement("input");u.id=this._addUID("GProuteExclusionsBridge"),u.type="checkbox",u.value="Bridge",u.checked=!r,u.addEventListener?u.addEventListener("change",function(h){t.onRouteExclusionsChange(h)}):u.attachEvent&&u.attachEvent("onchange",function(h){t.onRouteExclusionsChange(h)}),e.appendChild(u);var c=document.createElement("label");c.className="GProuteExclusionsOption",c.htmlFor=this._addUID("GProuteExclusionsBridge"),c.innerHTML="Ponts",e.appendChild(c);break}}return e},_createRouteSubmitFormElement:function(){var i=document.createElement("input");return i.id=this._addUID("GProuteSubmit"),i.className="GPinputSubmit",i.type="submit",i.value="Calculer",i},_createRouteFormResetElement:function(){var i=this,t=document.createElement("div");return t.id=this._addUID("GProuteReset"),t.title="Réinitialiser les paramètres",t.addEventListener("click",function(e){i.onRouteResetClick(e)}),t}},Si=Ye.getLogger("route"),U0=function(i){function t(e){if(e=e||{},!(this instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this.initialize(e),this._container=this._createMainContainerElement(),this._containerElement=null,e.element&&e.element.appendChild&&(e.element.appendChild(this._container),this._containerElement=e.element),i.call(this,{element:this._containerElement||this._container,target:e.target,render:e.render})}return i&&(t.__proto__=i),t.prototype=Object.create(i.prototype,{}),he.assign(t.prototype,bN),t.prototype.constructor=t,t.prototype.setMap=function(e){if(e){if(this._container=this._initContainer(e),this.options.export){var n=he.assign({control:this},this.options.export);this.export=new Vo(n),this.export.render();var r=this;this.export.on("export:compute",o=>{r.dispatchEvent({type:"export:compute",content:o.content})})}this.draggable&&Oo.dragElement(this._panelRouteContainer,this._panelHeaderRouteContainer,e.getTargetElement())}i.prototype.setMap.call(this,e)},t.prototype.getCollapsed=function(){return this.collapsed},t.prototype.setCollapsed=function(e){if(e===void 0){Si.log("[ERROR] Route:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(e?document.getElementById("GProutePanelClose-"+this._uid).click():document.getElementById("GPshowRoute-"+this._uid).click(),this.collapsed=e)},t.prototype.getLayer=function(){return this._geojsonSections},t.prototype.setLayer=function(e){if(!e){this._geojsonSections=null;return}if(!(e instanceof mi)){Si.log("no valid layer given for hosting drawn features.");return}e.setStyle(this._defaultFeatureStyle),this._geojsonSections=e},t.prototype.getGeoJSON=function(){return JSON.stringify(this._geojsonObject)},t.prototype.setGeoJSON=function(e){try{this._geojsonObject=JSON.parse(e)}catch(n){Si.log("no valid geojson given :"+n.message)}},t.prototype.getData=function(){var e=[];for(let r=0;r<this._currentPoints.length;r++){const o=this._currentPoints[r];e.push(o.getCoordinate())}var n={type:"route",points:e,transport:this._currentTransport,exclusions:this._currentExclusions,computation:this._currentComputation,results:{}};return he.assign(n.results,this._currentRouteInformations),n},t.prototype.setData=function(e){this._currentTransport=e.transport,this._currentComputation=e.computation,this._currentExclusions=e.exclusions;for(var n=0;n<this._currentPoints.length;n++){var r=this._currentPoints[n];if(r.getCoordinate()){r.clearResults();var o=n+1+"-"+this._uid;document.getElementById("GPlocationOriginCoords_"+o).value="",document.getElementById("GPlocationOrigin_"+o).value="",document.getElementById("GPlocationPoint_"+o).style.cssText="",n>0&&n<6&&(document.getElementById("GPlocationPoint_"+o).className="GPflexInput GPlocationStageFlexInputHidden"),document.getElementById("GPlocationOriginPointer_"+o).checked=!1,document.getElementById("GPlocationOrigin_"+o).className="GPlocationOriginVisible",document.getElementById("GPlocationOriginCoords_"+o).className="GPlocationOriginHidden"}}for(var a=0;a<e.points.length;a++){const s=e.points[a];s&&this._currentPoints[a].setCoordinate(s,"EPSG:4326")}this._currentRouteInformations=e.results},t.prototype.getContainer=function(){return this._container},t.prototype.getStyle=function(){return this._defaultFeatureStyle},t.prototype.init=function(){for(let f=0;f<this._currentPoints.length;f++){const g=this._currentPoints[f];var e=f+1,n=g.getCoordinate();if(n){var r=document.getElementById("GPlocationOrigin_"+e+"-"+this._uid);r.value=n[1].toFixed(4)+" / "+n[0].toFixed(4),f>0&&f<6&&(document.getElementById("GPlocationPoint_"+e+"-"+this._uid).className="GPflexInput GPlocationStageFlexInput")}}var o=document.getElementsByClassName("GPlocationPoint-"+this._uid);this._addRouteResultsStagesValuesElement(o);var a;this._currentTransport==="Pieton"?(a=document.getElementById("GProuteTransportPedestrian-"+this._uid),a&&(a.checked="true")):(a=document.getElementById("GProuteTransportCar-"+this._uid),a&&(a.checked="true"));var s=document.getElementById("GProuteComputationSelect-"+this._uid);s&&(s.value=this._currentComputation);var l=document.getElementById("GProuteExclusionsToll-"+this._uid);l&&(this._currentExclusions.indexOf("toll")!==-1?l.checked=!1:l.checked=!0);var u=document.getElementById("GProuteExclusionsTunnel-"+this._uid);u&&(this._currentExclusions.indexOf("tunnel")!==-1?u.checked=!1:u.checked=!0);var c=document.getElementById("GProuteExclusionsBridge-"+this._uid);c&&(this._currentExclusions.indexOf("bridge")!==-1?c.checked=!1:c.checked=!0);var h=this._currentRouteInformations.totalDistance,d=this._currentRouteInformations.totalTime,p=this._simplifiedInstructions(this._currentRouteInformations.routeInstructions);p&&this._fillRouteResultsDetailsContainer(h,d,p),this._formRouteContainer.className="GProuteComponentHidden",this._hideWaitingContainer(),this._resultsRouteContainer.className=""},t.prototype.clean=function(){this._currentTransport=null,this._currentExclusions=[],this._currentComputation=null;for(var e=0;e<this._currentPoints.length;e++)this._currentPoints[e].clear();this._removeRouteStepLocations(),this._clearRouteInputOptions(),this._clearRouteResultsDetails(),this.setLayer(),this._formRouteContainer.className="",this._resultsRouteContainer.className="GProuteComponentHidden"},t.prototype.initialize=function(e){this._checkInputOptions(e),this.options={collapsed:!0,draggable:!1,export:!1,graphs:["Voiture","Pieton"],exclusions:{toll:!1,tunnel:!1,bridge:!1},routeOptions:{},autocompleteOptions:{},layerDescription:{title:"Itinéraire",description:"Itinéraire basé sur un graphe"}},he.assign(this.options,e);var n={departure:{url:It.red,offset:It.defaultOffset},stages:{url:It.lightOrange,offset:It.defaultOffset},arrival:{url:It.darkOrange,offset:It.defaultOffset}};this.options.markersOpts=he.assign(n,e.markersOpts),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this._uid=Re.generate(),this._panelRouteContainer=null,this._panelHeaderRouteContainer=null,this._waitingContainer=null,this._formRouteContainer=null,this._resultsRouteContainer=null,this._showRouteExclusionsElement=null,this._currentPoints=[],this._currentTransport=null,this._initTransport(),this._currentComputation=null,this._initComputation(),this._currentExclusions=[],this._initExclusions(),this._waiting=!1,this._timer=null,this._geojsonRoute=null,this._geojsonSections=null,this._geojsonObject=null,this.export=null,this._popupContent=null,this._popupDiv=this._initPopupDiv(),this._popupOverlay=null,this._resultsSelectInteraction=null,this._resultsHoverInteraction=null,this._defaultFeatureStyle=new de({stroke:new Me({color:"rgba(0,183,152,0.9)",width:12})}),this._selectedFeatureStyle=new de({stroke:new Me({color:"rgba(255,102,0,0.9)",width:12})}),this._currentRouteInformations=null,this._resources={},this.listenerKey=null},t.prototype._checkInputOptions=function(e){if(e.graphs)if(Array.isArray(e.graphs)&&e.graphs.length)for(var n=0;n<e.graphs.length;n++)typeof e.graphs[n]=="string"?(e.graphs[n].toLowerCase()==="pieton"&&(e.graphs[n]="Pieton"),e.graphs[n].toLowerCase()==="voiture"&&(e.graphs[n]="Voiture")):(Si.log("[ol.control.Route] ERROR : parameter 'graphs' elements should be of type 'string'"),e.graphs[n]=null);else Si.warn("'graphs' parameter should be an array"),e.graphs=null;e.collapsed==="true"&&(e.collapsed=!0),e.collapsed==="false"&&(e.collapsed=!1)},t.prototype._initContainer=function(e){var n=this._container,r=this._showRouteContainer=this._createShowRouteElement();n.appendChild(r),this.collapsed||(r.checked=!0);var o=this._createShowRoutePictoElement();n.appendChild(o);var a=this._panelRouteContainer=this._createRoutePanelElement(),s=this._panelHeaderRouteContainer=this._createRoutePanelHeaderElement();a.appendChild(s);for(var l=this._formRouteContainer=this._createRoutePanelFormElement(),u=this._createRoutePanelFormPointsElement(e),c=0;c<u.length;c++)l.appendChild(u[c]);var h=this._createRoutePanelFormModeChoiceElement();h.appendChild(this._createRoutePanelFormModeChoiceTransportElement(this.options.graphs)),h.appendChild(this._createRoutePanelFormModeChoiceComputeElement()),l.appendChild(h),l.appendChild(this._createShowRouteExclusionsElement()),this._showRouteExclusionsElement=this._createShowRouteExclusionsPictoElement(),l.appendChild(this._showRouteExclusionsElement);var d=this._createRoutePanelFormExclusionsElement();d.appendChild(this._createRoutePanelFormExclusionOptionsElement(this.options.exclusions)),l.appendChild(d);var p=this._createRouteFormResetElement();l.appendChild(p);var f=this._createRouteSubmitFormElement();l.appendChild(f),a.appendChild(l);var g=this._resultsRouteContainer=this._createRoutePanelResultsElement();a.appendChild(g);var v=this._waitingContainer=this._createRouteWaitingElement();return a.appendChild(v),n.appendChild(a),n.addEventListener&&n.addEventListener("click",y=>this._hideRouteSuggestedLocations(y)),n},t.prototype._initTransport=function(){this._currentTransport="Voiture";var e=this.options.graphs;(!e||e.length===0)&&(this.options.graphs=["Voiture","Pieton"]),Array.isArray(e)&&e.length&&(e[0]==="Voiture"||e[0]==="Pieton")&&(this._currentTransport=e[0]);var n=this.options.routeOptions;n.graph&&(this._currentTransport=n.graph)},t.prototype._initComputation=function(){this._currentComputation="fastest";var e=this.options.routeOptions;e.routePreference&&(this._currentComputation=e.routePreference)},t.prototype._initExclusions=function(){this._currentExclusions=[];var e=this.options.exclusions;if((!e||typeof e=="object"&&Object.keys(e).length===0)&&(this.options.exclusions={toll:!1,tunnel:!1,bridge:!1}),e&&typeof e=="object"&&Object.keys(e).length)for(var n in e)e.hasOwnProperty(n)&&e[n]&&this._currentExclusions.push(n);var r=this.options.routeOptions;Array.isArray(r.exclusions)&&(this._currentExclusions=r.exclusions)},t.prototype._initPopupDiv=function(){var e=this,n=document.createElement("div");n.className="gp-feature-info-div";var r=document.createElement("input");return r.type="button",r.className="gp-styling-button closer",r.onclick=function(){return e._popupOverlay!=null&&e._popupOverlay.setPosition(void 0),!1},this._popupContent=document.createElement("div"),this._popupContent.className="gp-features-content-div",n.appendChild(this._popupContent),n.appendChild(r),n},t.prototype._createRoutePanelFormPointsElement=function(e){var n=[],r=1,o=new Cs({apiKey:this.options.apiKey||null,tag:{id:r,groupId:this._uid,markerOpts:this.options.markersOpts.departure,label:"Départ",display:!0},autocompleteOptions:this.options.autocompleteOptions||null});for(o.setMap(e),this._addFormPointsEventListeners(o),n.push(o._container),this._currentPoints.push(o),r=2;r<7;r++){var a=new Cs({apiKey:this.options.apiKey||null,tag:{id:r,groupId:this._uid,label:"Etape",markerOpts:this.options.markersOpts.stages,display:!1,removeOption:!0},autocompleteOptions:this.options.autocompleteOptions||null});a.setMap(e),this._addFormPointsEventListeners(a),n.push(a._container),this._currentPoints.push(a)}var s=new Cs({apiKey:this.options.apiKey||null,tag:{id:r,groupId:this._uid,markerOpts:this.options.markersOpts.arrival,label:"Arrivée",display:!0,addOption:!0},autocompleteOptions:this.options.autocompleteOptions||null});return s.setMap(e),this._addFormPointsEventListeners(s),n.push(s._container),this._currentPoints.push(s),n},t.prototype._addFormPointsEventListeners=function(e){e&&(e._inputLabelContainer.addEventListener?(e._inputLabelContainer.addEventListener("click",n=>this.onRouteOriginLabelClick(n)),e._inputShowPointer.addEventListener("click",n=>this.onRouteOriginPointerClick(n,e)),e._removePointElement&&e._removePointElement.addEventListener("click",n=>{Si.trace("click on _removePointElement",n)}),e._addPointElement&&e._addPointElement.addEventListener("click",n=>{Si.trace("click on _addPointElement",n)})):e._inputLabelContainer.attachEvent&&(e._inputLabelContainer.attachEvent("onclick",n=>this.onRouteOriginLabelClick(n)),e._inputShowPointer.attachEvent("onclick",n=>this.onRouteOriginPointerClick(n,e)),e._removePointElement&&e._removePointElement.attachEvent("onclick",n=>{}),e._addPointElement&&e._addPointElement.attachEvent("onclick",n=>{})))},t.prototype.onRouteComputationSubmit=function(e){Si.log("onRouteComputationSubmit",e);var n=this._currentPoints,r;if(n[0]&&n[0].getCoordinate){var o=n[0].getCoordinate();r={x:o[0],y:o[1]},Si.log("start",r)}var a,s=n[n.length-1];if(s&&s.getCoordinate){var l=s.getCoordinate();a={x:l[0],y:l[1]},Si.log("end",a)}for(var u=[],c=1;c<n.length-1;c++)if(n[c]&&n[c].getCoordinate){var h=n[c].getCoordinate();if(h){var d={x:h[0],y:h[1]};Si.log("step",d),u.push(d)}}this._currentTransport=e.transport,this._currentComputation=e.computation,this._currentExclusions=e.exclusions;var p=this.options.routeOptions,f=p.protocol||"XHR",g=p.timeOut||0;f==="JSONP"&&g===0&&(g=15e3);var v=p.onFailure!==null&&typeof p.onFailure=="function",y=p.onSuccess!==null&&typeof p.onSuccess=="function",m=this;this._requestRouting({startPoint:r,endPoint:a,viaPoints:u,graph:p.graph||this._currentTransport,routePreference:p.routePreference||this._currentComputation,exclusions:p.exclusions||this._currentExclusions,geometryInInstructions:!0,distanceUnit:"m",timeOut:g,protocol:f,onSuccess:function(A){Si.log(A),A&&m._fillRouteResultsDetails(A),y&&p.onSuccess.call(m,A)},onFailure:function(A){m._hideWaitingContainer(),m._clearRouteResultsDetails(),Si.log(A.message),v&&p.onFailure.call(m,A)}})},t.prototype.onRouteOriginLabelClick=function(){this._formRouteContainer.className="",Kt(this.listenerKey),this.dispatchEvent("route:drawend")},t.prototype.onRouteOriginPointerClick=function(e,n){var r=this.getMap();n._inputShowPointerContainer.checked?(this._formRouteContainer.className="GProuteFormMini",this.listenerKey=r.on("click",()=>{this._formRouteContainer.className==="GProuteFormMini"&&(this._formRouteContainer.className=""),Kt(this.listenerKey),this.dispatchEvent("route:drawend")}),this.dispatchEvent("route:drawstart")):(this._formRouteContainer.className="",Kt(this.listenerKey),this.dispatchEvent("route:drawend"))},t.prototype.onShowRoutePanelClick=function(e){var n=this.getMap();Tr.unset(n),!this._geojsonSections&&!this._waiting&&this._clear(),this.collapsed=document.getElementById("GPshowRoute-"+this._uid).checked,this.dispatchEvent("change:collapsed")},t.prototype.onRouteModeComputationChange=function(e){var n=e.target.selectedIndex,r=e.target.options[n].value;r&&(Si.log(r),this._currentComputation=r)},t.prototype.onRouteModeComputationChangeAndRun=function(e){this.onRouteModeComputationChange(e),this._clearRouteResultsDetails(),this._clearRouteResultsGeometry(),this._clearRouteResultsFeatureGeometry(),this.onRouteComputationSubmit({computation:this._currentComputation,transport:this._currentTransport,exclusions:this._currentExclusions})},t.prototype.onRouteModeTransportChange=function(e){var n=e.target.value;n&&(this._currentTransport=n)},t.prototype.onShowRouteExclusionsClick=function(e){Si.log("onShowRouteExclusionsClick",e)},t.prototype.onRouteExclusionsChange=function(e){var n=e.target.value,r=e.target.checked;if(!(!n||typeof n!="string")){n=n.toLowerCase();for(var o=!1,a=null,s=0;s<this._currentExclusions.length;s++)this._currentExclusions[s]===n&&(a=s,o=!0);!o&&!r&&this._currentExclusions.push(n),o&&r&&this._currentExclusions.splice(a,1)}},t.prototype.onRouteResetClick=function(){for(var e=this._currentPoints,n=0;n<e.length;n++)e[n].clear();this._clear(),this._clearRouteInputOptions()},t.prototype.onShowRouteResultsNewClick=function(){this._clearRouteResultsDetails(),this._clearRouteResultsGeometry(),this._clearRouteResultsFeatureGeometry()},t.prototype.onRouteResultsDetailsMouseOver=function(e){var n=e.target.id,r=n.substring(n.indexOf("_")+1);if(e.target.classList&&e.target.classList.add("GProuteResultsDetailsInstructionHighlight"),!!this._geojsonSections){var o=this._geojsonSections.getSource().getFeatureById(parseInt(r,10));o.setStyle(this._selectedFeatureStyle)}},t.prototype.onRouteResultsDetailsMouseOut=function(e){var n=e.target.id,r=n.substring(n.indexOf("_")+1);if(e.target.classList&&e.target.classList.remove("GProuteResultsDetailsInstructionHighlight"),!!this._geojsonSections){var o=this._geojsonSections.getSource().getFeatureById(parseInt(r,10));o.setStyle(null)}},t.prototype._requestRouting=function(e){!e||typeof e=="object"&&Object.keys(e).length===0||e.startPoint&&e.endPoint&&(e.apiKey=this.options.routeOptions.apiKey||this.options.apiKey,typeof e.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?e.ssl=this.options.ssl:e.ssl=!0),Si.log(e),this._displayWaitingContainer(),tt.Services.route(e))},t.prototype._fillRouteResultsDetails=function(e){var n=e.totalDistance,r=e.totalTime,o=this._simplifiedInstructions(e.routeInstructions);o&&this._fillRouteResultsDetailsContainer(n,r,o);var a=e.routeGeometry;a&&this._fillRouteResultsDetailsGeometry(a,this._defaultFeatureStyle),o&&o[0].geometry&&this._fillRouteResultsDetailsFeatureGeometry(o,this._defaultFeatureStyle);var s=e.bbox;if(s){var l=this.getMap(),u=[s.left,s.bottom,s.right,s.top],c=l.getView().getProjection().getCode();c!=="EPSG:4326"&&(u=vr(u,"EPSG:4326",c)),l.getView().fit(u,l.getSize())}this._currentRouteInformations=e,this.dispatchEvent({type:"route:compute"}),this._formRouteContainer.className="GProuteComponentHidden",this._hideWaitingContainer(),this._resultsRouteContainer.className=""},t.prototype._fillRouteResultsDetailsContainer=function(e,n,r){this._resultsRouteValuesContainer=this._addRouteResultsValuesElement(e,n,this._convertSecondsToTime),this._resultsRouteDetailsContainer=this._addRouteResultsDetailsElement(r,this._convertSecondsToTime)},t.prototype._fillRouteResultsDetailsGeometry=function(e,n){this._clearRouteResultsGeometry();var r=this.getMap();if(e){var o={type:"FeatureCollection",features:[{type:"Feature",crs:{type:"name",properties:{name:"EPSG:4326"}},geometry:e}]},a=new kn({defaultDataProjection:"EPSG:4326",defaultStyle:n}),s=a.readFeatures(o,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"});this._geojsonRoute=new mi({source:new fn({features:s}),style:n}),r.addLayer(this._geojsonRoute)}},t.prototype._fillRouteResultsDetailsFeatureGeometry=function(e,n){this._clearRouteResultsFeatureGeometry();var r=this.getMap();this._geojsonObject={type:"FeatureCollection",crs:{type:"name",properties:{name:"EPSG:4326"}},features:[]};for(var o=0;o<e.length;o++){for(var a=e[o],s=o+1,l=a.geometry.coordinates,u=0;u<l.length;u++)typeof l[u][0]=="string"&&(l[u][0]=parseFloat(l[u][0]),l[u][1]=parseFloat(l[u][1]));this._geojsonObject.features.push({type:"Feature",geometry:a.geometry,properties:{popupContent:"("+s+") distance : "+this._convertDistance(a.distance)+" / temps : "+this._convertSecondsToTime(a.duration)},id:s})}this._geojsonObject.features.push({type:"Feature",geometry:{type:"Point",coordinates:this._currentPoints[0].getCoordinate()},properties:{description:"Point de départ","marker-symbol":this.options.markersOpts.departure.url}});for(var c=1;c<this._currentPoints.length-1;c++)if(this._currentPoints[c]&&this._currentPoints[c].getCoordinate){var h=this._currentPoints[c].getCoordinate();h&&this._geojsonObject.features.push({type:"Feature",geometry:{type:"Point",coordinates:h},properties:{description:"Point d'étape","marker-symbol":this.options.markersOpts.stages.url}})}this._geojsonObject.features.push({type:"Feature",geometry:{type:"Point",coordinates:this._currentPoints[this._currentPoints.length-1].getCoordinate()},properties:{description:"Point d'arrivée","marker-symbol":this.options.markersOpts.arrival.url}});var d=new kn({defaultDataProjection:"EPSG:4326",defaultStyle:n}),p=this.getMap().getView().getProjection().getCode(),f=d.readFeatures(this._geojsonObject,{dataProjection:"EPSG:4326",featureProjection:p});this._geojsonSections=new mi({source:new fn({features:f}),style:n,opacity:.9});var g;this._currentTransport==="Pieton"?(g="piéton",this._geojsonSections.gpResultLayerId="Pieton$OGC:OPENLS;Itineraire"):(g="voiture",this._geojsonSections.gpResultLayerId="Voiture$OGC:OPENLS;Itineraire"),r.addLayer(this._geojsonSections),r.getControls().forEach(v=>{if(v instanceof Mr){var y=this._geojsonSections.gpLayerId;v._layers[y].title===y&&v.addLayer(this._geojsonSections,{title:this.options.layerDescription.title+" ("+g+")",description:this.options.layerDescription.description})}},this),this._resultsHoverInteraction=new qn({condition:Of,layers:[this._geojsonSections],style:this._selectedFeatureStyle}),this._resultsHoverInteraction.on("select",v=>this._onResultsFeatureMouseOver(v)),r.addInteraction(this._resultsHoverInteraction),this._resultsSelectInteraction=new qn({layers:[this._geojsonSections],style:this._selectedFeatureStyle}),this._resultsSelectInteraction.on("select",v=>this._onResultsFeatureSelect(v)),r.addInteraction(this._resultsSelectInteraction)},t.prototype._onResultsFeatureMouseOver=function(e){if(e.selected.length!==0){var n=e.selected[0],r=document.getElementById("GProuteResultsDetailsInstruction_"+n.getId()+"-"+this._uid);r&&r.classList&&r.classList.add("GProuteResultsDetailsInstructionHighlight")}if(e.deselected.length!==0){var o=e.deselected[0],a=document.getElementById("GProuteResultsDetailsInstruction_"+o.getId()+"-"+this._uid);a&&a.classList&&a.classList.remove("GProuteResultsDetailsInstructionHighlight")}},t.prototype._onResultsFeatureSelect=function(e){var n=this.getMap();if(e.selected.length!==0){var r=e.selected[0];this._popupContent.innerHTML=r.getProperties().popupContent,this._popupOverlay?this._popupOverlay.setPosition(e.mapBrowserEvent.coordinate):(this._popupOverlay=new dn({element:this._popupDiv,positioning:"bottom-center",position:e.mapBrowserEvent.coordinate}),n.addOverlay(this._popupOverlay))}else this._popupOverlay!=null&&this._popupOverlay.setPosition(void 0)},t.prototype._clear=function(){this._currentTransport=null,this._currentExclusions=[],this._currentComputation=null,this._clearRouteResultsDetails(),this._clearRouteResultsGeometry(),this._clearRouteResultsFeatureGeometry();for(var e=0;e<this._currentPoints.length;e++)this._currentPoints[e].clear();this._removeRouteStepLocations()},t.prototype._clearRouteInputOptions=function(){this._initTransport(),this._initComputation(),this._initExclusions();var e;this._currentTransport==="Pieton"?(e=document.getElementById("GProuteTransportPedestrian-"+this._uid),e&&(e.checked="true")):(e=document.getElementById("GProuteTransportCar-"+this._uid),e&&(e.checked="true"));var n=document.getElementById("GProuteComputationSelect-"+this._uid);n&&(n.value=this._currentComputation);var r=document.getElementById("GProuteExclusionsToll-"+this._uid);r&&(this._currentExclusions.indexOf("toll")!==-1?r.checked=!1:r.checked=!0);var o=document.getElementById("GProuteExclusionsTunnel-"+this._uid);o&&(this._currentExclusions.indexOf("tunnel")!==-1?o.checked=!1:o.checked=!0);var a=document.getElementById("GProuteExclusionsBridge-"+this._uid);a&&(this._currentExclusions.indexOf("bridge")!==-1?a.checked=!1:a.checked=!0)},t.prototype._removeRouteStepLocations=function(){var e=document.querySelectorAll('div[id^="GPlocationPoint"]');if(e.length!==0){for(var n=[],r=0;r<e.length;r++)e[r].id.indexOf(this._uid)!==-1&&n.push(e[r]);for(var o=1;o<n.length-1;o++){var a=n[o].classList;if(a.length!==0)for(var s=0;s<a.length;s++)a[s]==="GPlocationStageFlexInput"&&document.getElementById(this._addUID("GPlocationStageRemove_"+(o+1))).click()}}},t.prototype._clearRouteResultsDetails=function(){if(this._currentRouteInformations=null,this._resultsRouteDetailsContainer){var e=this._resultsRouteDetailsContainer;if(e.childElementCount)for(;e.firstChild;)e.removeChild(e.firstChild)}if(this._resultsRouteValuesContainer){var n=this._resultsRouteValuesContainer;if(n.childElementCount)for(;n.firstChild;)n.removeChild(n.firstChild)}},t.prototype._clearRouteResultsGeometry=function(){var e=this.getMap();this._geojsonRoute!=null&&(e.removeLayer(this._geojsonRoute),this._geojsonRoute=null)},t.prototype._clearRouteResultsFeatureGeometry=function(){var e=this.getMap();this._geojsonSections!=null&&(e.removeLayer(this._geojsonSections),this._geojsonSections=null,this._geojsonObject=null),this._popupOverlay!=null&&(e.removeOverlay(this._popupOverlay),this._popupOverlay=null),this._resultsSelectInteraction!=null&&(e.removeInteraction(this._resultsSelectInteraction),this._resultsSelectInteraction=null),this._resultsHoverInteraction!=null&&(e.removeInteraction(this._resultsHoverInteraction),this._resultsHoverInteraction=null)},t.prototype._hideRouteSuggestedLocations=function(e){if(e.target&&e.target.id&&e.target.id.indexOf("GPlocationOrigin_")!==-1)for(var n=parseInt(e.target.id.split("_")[1][0],10)-1,r=0;r<this._currentPoints.length;r++)r!==parseInt(n,10)&&this._currentPoints[r]._hideSuggestedLocation();else for(var o=0;o<this._currentPoints.length;o++)this._currentPoints[o]._hideSuggestedLocation()},t.prototype._displayWaitingContainer=function(){this._waitingContainer.className="GProuteCalcWaitingContainerVisible",this._waiting=!0;var e=this.options.routeOptions;if(e&&e.timeOut){this._timer&&(clearTimeout(this._timer),this._timer=null);var n=this;this._timer=setTimeout(function(){n._waiting===!0?n._hideWaitingContainer():n._timer&&clearTimeout(n._timer)},16e3)}},t.prototype._hideWaitingContainer=function(){if(this._waiting){this._waitingContainer.className="GProuteCalcWaitingContainerHidden",this._waiting=!1;var e=this.options.routeOptions;e&&e.timeOut&&(clearTimeout(this._timer),this._timer=null)}},t.prototype._simplifiedInstructions=function(e){var n=[],r=e[0];e.length===1&&n.push(r);for(var o=1;o<e.length;o++){var a=e[o];if(a.instruction===r.instruction){r.distance=(parseFloat(a.distance)+parseFloat(r.distance)).toString(),r.duration=(parseFloat(a.duration)+parseFloat(r.duration)).toString();for(var s=1;s<a.geometry.coordinates.length;s++)r.geometry.coordinates.push(a.geometry.coordinates[s])}else n.push(r),r=a,o===e.length-1&&(n.push(a),r=null)}return Si.log(n),n},t.prototype._convertSecondsToTime=function(e){var n="";e=Math.round(e);var r=Math.floor(e/(60*60)),o=e%(60*60),a=Math.floor(o/60);return r&&(n=r+"h "),n+=a+" min",n},t.prototype._convertDistance=function(e){var n="",r=parseInt(e/1e3,10);return r?n=r+" km":n=parseInt(e,10)+" m",n},t}(yi);window.ol&&window.ol.control&&(window.ol.control.Route=U0);var RN={_addUID:function(i){var t=this._uid?i+"-"+this._uid:i;return t},_createMainContainerElement:function(){var i=document.createElement("div");return i.id=this._addUID("GPisochron"),i.className="GPwidget",i},_createShowIsoElement:function(){var i=document.createElement("input");return i.id=this._addUID("GPshowIsochron"),i.type="checkbox",i},_createShowIsoPictoElement:function(){var i=this,t=document.createElement("label");t.id=this._addUID("GPshowIsochronPicto"),t.className="GPshowAdvancedToolPicto",t.htmlFor=this._addUID("GPshowIsochron"),t.title="Calculer une isochrone",t.addEventListener?t.addEventListener("click",function(n){i.onShowIsoPanelClick(n)}):t.attachEvent&&t.attachEvent("onclick",function(n){i.onShowIsoPanelClick(n)});var e=document.createElement("span");return e.id=this._addUID("GPshowIsochronOpen"),e.className="GPshowAdvancedToolOpen",t.appendChild(e),t},_createIsoPanelElement:function(){var i=document.createElement("div");return i.id=this._addUID("GPisochronPanel"),i.className="GPpanel",i},_createIsoPanelHeaderElement:function(){var i=this,t=document.createElement("div");t.className="GPpanelHeader";var e=document.createElement("div");e.className="GPpanelTitle",e.innerHTML="Calcul d'isochrone",t.appendChild(e);var n=document.createElement("div");return n.id=this._addUID("GPisochronPanelClose"),n.className="GPpanelClose",n.title="Fermer le panneau",n.addEventListener?n.addEventListener("click",function(){document.getElementById(i._addUID("GPshowIsochronPicto")).click()},!1):n.attachEvent&&n.attachEvent("onclick",function(){document.getElementById(i._addUID("GPshowIsochronPicto")).click()}),t.appendChild(n),t},_createIsoPanelFormElement:function(){var i=this,t=document.createElement("form");return t.id=this._addUID("GPisochronForm"),t.addEventListener("submit",function(e){return e.preventDefault(),i.onIsoComputationSubmit(e),!1}),t},_createIsoWaitingElement:function(){var i=document.createElement("div");i.id=this._addUID("GPisochronCalcWaitingContainer"),i.className="GPisochronCalcWaitingContainerHidden";var t=document.createElement("p");return t.className="GPisochronCalcWaiting",t.innerHTML="Calcul en cours...",i.appendChild(t),i},_createIsoPanelFormTypeChoiceElement:function(){var i=document.createElement("div");return i.id=this._addUID("GPisochronChoice"),i},_createIsoPanelFormTypeChoiceChronElement:function(i){var t=this,e=document.createElement("div");e.className="GPisochronChoiceAlt";var n=document.createElement("input");n.id=this._addUID("GPisochronChoiceAltChron"),n.name="GPisochronChoiceMode",n.type="radio",n.checked=!!i,n.addEventListener?n.addEventListener("change",function(a){document.getElementById(t._addUID("GPisochronValueChron")).className="GPflexInput",document.getElementById(t._addUID("GPisochronValueDist")).className="GPisochronValueHidden",t.onIsoTypeChoiceChange(a)},!1):n.attachEvent&&n.attachEvent("onchange",function(){document.getElementById(t._addUID("GPisochronValueChron")).className="GPflexInput",document.getElementById(t._addUID("GPisochronValueDist")).className="GPisochronValueHidden",t.onIsoTypeChoiceChange()}),n.value="isochron",e.appendChild(n);var r=document.createElement("label");r.className="GPisochronChoiceAltImg",r.htmlFor=this._addUID("GPisochronChoiceAltChron"),e.appendChild(r);var o=document.createElement("span");return o.id=this._addUID("GPisochronChoiceAltChronTxt"),o.innerHTML="isochrone",o.addEventListener?o.addEventListener("click",function(){document.getElementById(t._addUID("GPisochronChoiceAltChron")).click()},!1):o.attachEvent&&o.attachEvent("onclick",function(){document.getElementById(t._addUID("GPisochronChoiceAltChron")).click()}),e.appendChild(o),e},_createIsoPanelFormTypeChoiceDistElement:function(i){var t=this,e=document.createElement("div");e.className="GPisochronChoiceAlt";var n=document.createElement("input");n.id=this._addUID("GPisochronChoiceAltDist"),n.name="GPisochronChoiceMode",n.type="radio",n.checked=!!i,n.addEventListener?n.addEventListener("change",function(a){document.getElementById(t._addUID("GPisochronValueDist")).className="GPflexInput",document.getElementById(t._addUID("GPisochronValueChron")).className="GPisochronValueHidden",t.onIsoTypeChoiceChange(a)},!1):n.attachEvent&&n.attachEvent("onchange",function(){document.getElementById(t._addUID("GPisochronValueDist")).className="GPflexInput",document.getElementById(t._addUID("GPisochronValueChron")).className="GPisochronValueHidden",t.onIsoTypeChoiceChange()}),n.value="isodistance",e.appendChild(n);var r=document.createElement("label");r.className="GPisochronChoiceAltImg",r.htmlFor=this._addUID("GPisochronChoiceAltDist"),e.appendChild(r);var o=document.createElement("span");return o.id=this._addUID("GPisochronChoiceAltDistTxt"),o.innerHTML="isodistance",o.addEventListener?o.addEventListener("click",function(){document.getElementById(t._addUID("GPisochronChoiceAltDist")).click()},!1):o.attachEvent&&o.attachEvent("onclick",function(){document.getElementById(t._addUID("GPisochronChoiceAltDist")).click()}),e.appendChild(o),e},_createIsoPanelFormValueIsochronElement:function(i){var t=this,e=document.createElement("div");e.id=this._addUID("GPisochronValueChron"),e.className=i?"GPflexInput":"GPisochronValueHidden";var n=document.createElement("label");n.id=this._addUID("GPisochronValueChronLabel"),n.htmlFor=this._addUID("GPisochronValueChronInput"),n.innerHTML="Temps",e.appendChild(n);var r=document.createElement("input");r.id=this._addUID("GPisochronValueChronInput1"),r.min="0",r.step="1",r.value="0",r.type="number",r.addEventListener?r.addEventListener("change",function(l){typeof t.onIsoValueChronTimeMinuteChange=="function"&&t.onIsoValueChronTimeHourChange(l)}):r.attachEvent&&r.attachEvent("onchange",function(l){typeof t.onIsoValueChronTimeMinuteChange=="function"&&t.onIsoValueChronTimeHourChange(l)}),e.appendChild(r);var o=document.createElement("label");o.innerHTML="h",e.appendChild(o);var a=document.createElement("input");a.id=this._addUID("GPisochronValueChronInput2"),a.min="0",a.max="59",a.step="1",a.value="0",a.type="number",a.addEventListener?a.addEventListener("change",function(l){typeof t.onIsoValueChronTimeMinuteChange=="function"&&t.onIsoValueChronTimeMinuteChange(l)}):a.attachEvent&&a.attachEvent("onchange",function(l){typeof t.onIsoValueChronTimeMinuteChange=="function"&&t.onIsoValueChronTimeMinuteChange(l)}),e.appendChild(a);var s=document.createElement("label");return s.innerHTML="min",e.appendChild(s),e},_createIsoPanelFormValueIsodistanceElement:function(i){var t=this,e=document.createElement("div");e.id=this._addUID("GPisochronValueDist"),e.className=i?"GPflexInput":"GPisochronValueHidden";var n=document.createElement("label");n.id=this._addUID("GPisochronValueDistLabel"),n.htmlFor=this._addUID("GPisochronValueDistInput"),n.innerHTML="Distance",e.appendChild(n);var r=document.createElement("input");r.id=this._addUID("GPisochronValueDistInput"),r.min="0",r.step="any",r.value="0",r.type="number",r.addEventListener?r.addEventListener("change",function(a){typeof t.onIsoValueDistChange=="function"&&t.onIsoValueDistChange(a)}):r.attachEvent&&r.attachEvent("onchange",function(a){typeof t.onIsoValueDistChange=="function"&&t.onIsoValueDistChange(a)}),e.appendChild(r);var o=document.createElement("label");return o.innerHTML="km",e.appendChild(o),e},_createIsoPanelFormModeChoiceElement:function(){var i=document.createElement("div");return i.id=this._addUID("GPisochronModeChoice"),i},_createIsoPanelFormModeChoiceTransportElement:function(i){var t=this,e=document.createElement("div");e.id=this._addUID("GPisochronTransportChoice");var n=document.createElement("span");n.className="GPisochronModeLabel",n.innerHTML="Mode de transport",e.appendChild(n);for(var r=0;r<i.length;r++){var o=i[r];if(o==="Voiture"){var a=document.createElement("input");a.id=this._addUID("GPisochronTransportCar"),a.type="radio",a.name="GPisochronTransport",r===0&&(a.checked=!0),a.addEventListener?a.addEventListener("change",function(c){t.onIsoModeTransportChange(c)}):a.attachEvent&&a.attachEvent("onchange",function(c){t.onIsoModeTransportChange(c)}),a.value="Voiture",e.appendChild(a);var s=document.createElement("label");s.className="GPisochronTransportImg",s.htmlFor=this._addUID("GPisochronTransportCar"),s.title="Voiture",e.appendChild(s)}if(o==="Pieton"){var l=document.createElement("input");l.id=this._addUID("GPisochronTransportPedestrian"),l.type="radio",l.name="GPisochronTransport",r===0&&(l.checked=!0),l.addEventListener?l.addEventListener("change",function(c){t.onIsoModeTransportChange(c)}):l.attachEvent&&l.attachEvent("onchange",function(c){t.onIsoModeTransportChange(c)}),l.value="Pieton",e.appendChild(l);var u=document.createElement("label");u.className="GPisochronTransportImg",u.htmlFor=this._addUID("GPisochronTransportPedestrian"),u.title="Piéton",e.appendChild(u)}}return e},_createIsoPanelFormModeChoiceDirectionElement:function(i){var t=this,e=document.createElement("div");e.id=this._addUID("GPisochronDirectionChoice");var n=document.createElement("span");n.className="GPisochronModeLabel",n.innerHTML="Sens de parcours",e.appendChild(n);var r=document.createElement("select");r.id=this._addUID("GPisochronDirectionSelect"),r.className="GPinputSelect",r.addEventListener("change",function(u){t.onIsoModeDirectionChange(u)});for(var o=0;o<i.length;o++){var a=i[o];if(a.toLowerCase()==="departure"){var s=document.createElement("option");o===0&&(s.selected="selected"),s.value="departure",s.text="Départ",r.appendChild(s)}if(a.toLowerCase()==="arrival"){var l=document.createElement("option");o===0&&(l.selected="selected"),l.value="arrival",l.text="Arrivée",r.appendChild(l)}}return e.appendChild(r),e},_createShowIsoExclusionsElement:function(){var i=document.createElement("input");return i.id=this._addUID("GPshowIsoExclusions"),i.type="checkbox",i},_createShowIsoExclusionsPictoElement:function(){var i=document.createElement("label");return i.id=this._addUID("GPshowIsoExclusionsPicto"),i.className="GPshowMoreOptionsImage GPshowMoreOptions GPshowIsoExclusionsPicto",i.htmlFor=this._addUID("GPshowIsoExclusions"),i.title="Exclusions",i.style.top="240px",i},_createIsoPanelFormExclusionsElement:function(){var i=document.createElement("div");i.id=this._addUID("GPisoExclusions");var t=document.createElement("span");return t.className="GPisoExclusionsLabel",t.innerHTML="Passages autorisés",i.appendChild(t),i},_createIsoPanelFormExclusionOptionsElement:function(i){var t=this,e=document.createElement("div");e.className="GPisoExclusionsOptions";for(var n in i)if(i.hasOwnProperty(n)){var r=i[n];switch(n){case"toll":var o=document.createElement("input");o.id=this._addUID("GPisoExclusionsToll"),o.type="checkbox",o.checked=!r,o.addEventListener?o.addEventListener("change",function(h){t.onIsoExclusionsChange(h)}):o.attachEvent&&o.attachEvent("onchange",function(h){t.onIsoExclusionsChange(h)}),o.value="Toll",e.appendChild(o);var a=document.createElement("label");a.className="GPisoExclusionsOption",a.htmlFor=this._addUID("GPisoExclusionsToll"),a.innerHTML="Péages",e.appendChild(a);break;case"tunnel":var s=document.createElement("input");s.id=this._addUID("GPisoExclusionsTunnel"),s.type="checkbox",s.checked=!r,s.addEventListener?s.addEventListener("change",function(h){t.onIsoExclusionsChange(h)}):s.attachEvent&&s.attachEvent("onchange",function(h){t.onIsoExclusionsChange(h)}),s.value="Tunnel",e.appendChild(s);var l=document.createElement("label");l.className="GPisoExclusionsOption",l.htmlFor=this._addUID("GPisoExclusionsTunnel"),l.innerHTML="Tunnels",e.appendChild(l);break;case"bridge":var u=document.createElement("input");u.id=this._addUID("GPisoExclusionsBridge"),u.type="checkbox",u.checked=!r,u.addEventListener?u.addEventListener("change",function(h){t.onIsoExclusionsChange(h)}):u.attachEvent&&u.attachEvent("onchange",function(h){t.onIsoExclusionsChange(h)}),u.value="Bridge",e.appendChild(u);var c=document.createElement("label");c.className="GPisoExclusionsOption",c.htmlFor=this._addUID("GPisoExclusionsBridge"),c.innerHTML="Ponts",e.appendChild(c);break}}return e},_createIsoSubmitFormElement:function(){var i=document.createElement("input");return i.id=this._addUID("GPisochronSubmit"),i.className="GPinputSubmit",i.type="submit",i.value="Calculer",i},_createIsoFormResetElement:function(){var i=this,t=document.createElement("div");return t.id=this._addUID("GPisochronReset"),t.title="Réinitialiser les paramètres",t.addEventListener("click",function(e){i.onIsoResetClick(e)}),t}},Pi=Ye.getLogger("isocurve"),B0=function(i){function t(e){if(e=e||{},!(this instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this.initialize(e),this._container=this._createMainContainerElement(),this._containerElement=null,e.element&&e.element.appendChild&&(e.element.appendChild(this._container),this._containerElement=e.element),i.call(this,{element:this._containerElement||this._container,target:e.target,render:e.render})}return i&&(t.__proto__=i),t.prototype=Object.create(i.prototype,{}),he.assign(t.prototype,RN),t.prototype.constructor=t,t.prototype.setMap=function(e){if(e){if(this._container=this._initContainer(e),this.options.export){var n=he.assign({control:this},this.options.export);this.export=new Vo(n),this.export.render();var r=this;this.export.on("export:compute",o=>{r.dispatchEvent({type:"export:compute",content:o.content})})}this.draggable&&Oo.dragElement(this._IsoPanelContainer,this._IsoPanelHeaderContainer,e.getTargetElement())}i.prototype.setMap.call(this,e)},t.prototype.getCollapsed=function(){return this.collapsed},t.prototype.setCollapsed=function(e){if(e===void 0){Pi.log("[ERROR] Isocurve:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(e?document.getElementById("GPisochronPanelClose-"+this._uid).click():document.getElementById("GPshowIsochronPicto-"+this._uid).click(),this.collapsed=e)},t.prototype.getLayer=function(){return this._geojsonLayer},t.prototype.setLayer=function(e){if(!e){this._geojsonLayer=null;return}if(!(e instanceof mi)){Pi.log("no valid layer given for hosting drawn features.");return}e.setStyle(this._defaultFeatureStyle),this._geojsonLayer=e},t.prototype.getGeoJSON=function(){return JSON.stringify(this._geojsonObject)},t.prototype.setGeoJSON=function(e){try{this._geojsonObject=JSON.parse(e)}catch(n){Pi.log("no valid geojson given :"+n.message)}},t.prototype.getData=function(){var e={type:"isocurve",transport:this._currentTransport,computation:this._currentComputation,exclusions:this._currentExclusions,direction:this._currentDirection,point:this._originPoint.getCoordinate(),results:{}};return he.assign(e.results,this._currentIsoResults),e},t.prototype.setData=function(e){this._currentTransport=e.transport,this._currentComputation=e.computation,this._currentExclusions=e.exclusions,this._currentDirection=e.direction;var n=document.getElementById("GPlocationOriginPointer_1-"+this._uid);n.checked=!0;var r=document.getElementById("GPlocationOriginCoords_1-"+this._uid);r.value="",this._originPoint.setCoordinate(e.point,"EPSG:4326"),this._currentIsoResults=e.results},t.prototype.getContainer=function(){return this._container},t.prototype.getStyle=function(){return this._defaultFeatureStyle},t.prototype.compute=function(e,n,r){this._clear(),this._showIsoContainer.checked||this._pictoIsoContainer.click();var o=this.getMap();if(o){var a={direction:"departure",method:"time",transport:"Voiture",exclusions:[]};he.assign(a,r),this._originPoint.setCoordinate(e);var s=this._originPoint.getCoordinate(),l=document.getElementById("GPlocationOrigin_1-"+this._uid);if(l.value=s[0].toFixed(4)+" / "+s[1].toFixed(4),this._currentTransport=a.transport,a.transport==="Voiture"?document.getElementById("GPisochronTransportCar-"+this._uid).checked=!0:document.getElementById("GPisochronTransportPedestrian-"+this._uid).checked=!0,this._currentExclusions=a.exclusions,this._currentComputation=a.method,a.method==="time"){var u=n.split(".");this._currentTimeHour=u[0]||0,document.getElementById("GPisochronValueChronInput1-"+this._uid).value=this._currentTimeHour,this._currentTimeMinute=u[1]||0,document.getElementById("GPisochronValueChronInput2-"+this._uid).value=this._currentTimeMinute,document.getElementById("GPisochronChoiceAltChron-"+this._uid).click()}else this._currentDistance=n,document.getElementById("GPisochronValueDistInput-"+this._uid).value=this._currentDistance,document.getElementById("GPisochronChoiceAltDist-"+this._uid).click();this._currentDirection=a.direction,a.direction==="departure"?document.getElementById("GPisochronDirectionSelect-"+this._uid).selectedIndex=0:document.getElementById("GPisochronDirectionSelect-"+this._uid).selectedIndex=1,this.onIsoComputationSubmit()}},t.prototype.init=function(){var e=this._originPoint.getCoordinate(),n=document.getElementById("GPlocationOrigin_1-"+this._uid);if(n.value=e[1].toFixed(4)+" / "+e[0].toFixed(4),this._currentTransport==="Voiture"?document.getElementById("GPisochronTransportCar-"+this._uid).checked=!0:document.getElementById("GPisochronTransportPedestrian-"+this._uid).checked=!0,this._currentComputation==="time"){var r=this._currentIsoResults.time/60;this._currentTimeHour=Math.floor(r/60),document.getElementById("GPisochronValueChronInput1-"+this._uid).value=this._currentTimeHour,this._currentTimeMinute=Math.round((r/60-this._currentTimeHour)*60),document.getElementById("GPisochronValueChronInput2-"+this._uid).value=this._currentTimeMinute,document.getElementById("GPisochronChoiceAltChron-"+this._uid).click()}else this._currentDistance=this._currentIsoResults.distance/1e3,document.getElementById("GPisochronValueDistInput-"+this._uid).value=this._currentDistance,document.getElementById("GPisochronChoiceAltDist-"+this._uid).click();this._currentDirection==="departure"?document.getElementById("GPisochronDirectionSelect-"+this._uid).selectedIndex=0:document.getElementById("GPisochronDirectionSelect-"+this._uid).selectedIndex=1},t.prototype.clean=function(){this._clearIsoInputs(),this._originPoint.clearResults(),document.getElementById("GPlocationPoint_1-"+this._uid).style.cssText="",document.getElementById("GPlocationOriginCoords_1-"+this._uid).value="",document.getElementById("GPlocationOrigin_1-"+this._uid).value="",document.getElementById("GPlocationPoint_1-"+this._uid).style.cssText="",document.getElementById("GPlocationOriginPointer_1-"+this._uid).checked=!1,document.getElementById("GPlocationOrigin_1-"+this._uid).className="GPlocationOriginVisible",document.getElementById("GPlocationOriginCoords_1-"+this._uid).className="GPlocationOriginHidden",this._currentIsoResults=null,this.setLayer()},t.prototype.initialize=function(e){this._checkInputOptions(e),this.options={collapsed:!0,draggable:!1,export:!1,methods:["time","distance"],graphs:["Voiture","Pieton"],exclusions:{toll:!1,tunnel:!1,bridge:!1},directions:["departure","arrival"],markerOpts:{url:It.lightOrange,offset:It.defaultOffset},isocurveOptions:{},autocompleteOptions:{},layerDescription:{title:"Isochrone/Isodistance",description:"isochrone/isodistance basé sur un graphe"}},he.assign(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this._uid=Re.generate(),this._currentTransport=null,this._initTransport(),this._currentComputation=null,this._initComputation(),this._currentExclusions=[],this._initExclusions(),this._currentDirection=null,this._initDirection(),this._originPoint=null,this._showIsoContainer=null,this._pictoIsoContainer=null,this._waitingContainer=null,this._formContainer=null,this._IsoPanelContainer=null,this._IsoPanelHeaderContainer=null,this._currentIsoResults=null,this._geojsonLayer=null,this._geojsonObject=null,this.export=null,this._waiting=!1,this._timer=null,this._defaultFeatureStyle=new de({fill:new Ge({color:"rgba(0, 183, 152, 0.7)"}),stroke:new Me({color:"rgba(0, 183, 152, 0)",width:1})}),this._resources={},this.listenerKey=null},t.prototype._checkInputOptions=function(e){var n;if(e.methods)if(Array.isArray(e.methods))if(e.methods.length===0)e.methods=null;else for(n=0;n<e.methods.length;n++)typeof e.methods[n]!="string"&&Pi.log("[ol.control.Isocurve] ERROR : parameter 'methods' elements should be of type 'string'");else Pi.warn("'methods' parameter should be an array"),e.methods=null;if(e.graphs)if(Array.isArray(e.graphs))if(e.graphs.length===0)e.graphs=null;else for(n=0;n<e.graphs.length;n++)typeof e.graphs[n]!="string"?Pi.log("[ol.control.Isocurve] ERROR : parameter 'graphs' elements should be of type 'string'"):(e.graphs[n].toLowerCase()==="pieton"&&(e.graphs[n]="Pieton"),e.graphs[n].toLowerCase()==="voiture"&&(e.graphs[n]="Voiture"));else Pi.warn("'graphs' parameter should be an array"),e.graphs=null;if(e.directions)if(Array.isArray(e.directions))if(e.directions.length===0)e.directions=null;else for(n=0;n<e.directions.length;n++)typeof e.directions[n]!="string"&&Pi.log("[ol.control.Isocurve] ERROR : parameter 'directions' elements should be of type 'string'");else Pi.warn("'directions' parameter should be an array"),e.directions=null;e.collapsed==="true"&&(e.collapsed=!0),e.collapsed==="false"&&(e.collapsed=!1)},t.prototype._initTransport=function(){this._currentTransport="Voiture";var e=this.options.graphs;(!e||e.length===0)&&(this.options.graphs=["Voiture","Pieton"]),Array.isArray(e)&&e.length&&(e[0]==="Voiture"||e[0]==="Pieton")&&(this._currentTransport=e[0]);var n=this.options.isocurveOptions;n.graph&&(this._currentTransport=n.graph)},t.prototype._initComputation=function(){this._currentComputation="time";var e=this.options.methods;(!e||e.length===0)&&(this.options.methods=["time","distance"]),Array.isArray(e)&&e.length&&(e[0]==="time"||e[0]==="distance")&&(this._currentComputation=e[0]);var n=this.options.isocurveOptions;n.method&&(this._currentComputation=n.method),n.time&&(this._currentComputation="time"),n.distance&&(this._currentComputation="distance")},t.prototype._initDirection=function(){this._currentDirection="departure";var e=this.options.directions;(!e||e.length===0)&&(this.options.directions=["departure","arrival"]),Array.isArray(e)&&e.length&&(e[0]==="departure"||e[0]==="arrival")&&(this._currentDirection=e[0]);var n=this.options.isocurveOptions;n.reverse||(this._currentDirection="departure"),n.reverse===!0&&(this._currentDirection="arrival",this.options.directions=["arrival","departure"])},t.prototype._initExclusions=function(){this._currentExclusions=[];var e=this.options.exclusions;if((!e||typeof e=="object"&&Object.keys(e).length===0)&&(this.options.exclusions={toll:!1,tunnel:!1,bridge:!1}),e&&typeof e=="object"&&Object.keys(e).length)for(var n in e)e.hasOwnProperty(n)&&e.k&&this._currentExclusions.push(n);var r=this.options.isocurveOptions;Array.isArray(r.exclusions)&&(this._currentExclusions=r.exclusions)},t.prototype._initContainer=function(e){var n=this._container,r=this._showIsoContainer=this._createShowIsoElement();n.appendChild(r),this.collapsed||(r.checked=!0);var o=this._pictoIsoContainer=this._createShowIsoPictoElement();n.appendChild(o);var a=this._IsoPanelContainer=this._createIsoPanelElement(),s=this._IsoPanelHeaderContainer=this._createIsoPanelHeaderElement();a.appendChild(s);var l=this._formContainer=this._createIsoPanelFormElement(),u=this._createIsoPanelFormPointElement(e);l.appendChild(u);for(var c=!1,h=!1,d=this._createIsoPanelFormTypeChoiceElement(),p=0;p<this.options.methods.length;p++)this.options.methods[p]==="time"&&(c=p===0,d.appendChild(this._createIsoPanelFormTypeChoiceChronElement(c))),this.options.methods[p]==="distance"&&(h=p===0,d.appendChild(this._createIsoPanelFormTypeChoiceDistElement(h)));l.appendChild(d),l.appendChild(this._createIsoPanelFormValueIsochronElement(c)),l.appendChild(this._createIsoPanelFormValueIsodistanceElement(h));var f=this._createIsoPanelFormModeChoiceElement();if(f.appendChild(this._createIsoPanelFormModeChoiceTransportElement(this.options.graphs)),f.appendChild(this._createIsoPanelFormModeChoiceDirectionElement(this.options.directions)),l.appendChild(f),this.options.exclusions&&typeof this.options.exclusions=="object"&&Object.keys(this.options.exclusions).length!==0){l.appendChild(this._createShowIsoExclusionsElement()),l.appendChild(this._createShowIsoExclusionsPictoElement());var g=this._createIsoPanelFormExclusionsElement();g.appendChild(this._createIsoPanelFormExclusionOptionsElement(this.options.exclusions)),l.appendChild(g)}var v=this._createIsoFormResetElement();l.appendChild(v);var y=this._submitContainer=this._createIsoSubmitFormElement();l.appendChild(y),a.appendChild(l);var m=this._waitingContainer=this._createIsoWaitingElement();return a.appendChild(m),n.appendChild(a),n.addEventListener&&n.addEventListener("click",A=>this._hideIsoSuggestedLocations(A)),n},t.prototype._createIsoPanelFormPointElement=function(e){this._originPoint=new Cs({apiKey:this.options.apiKey||null,tag:{id:1,groupId:this._uid,markerOpts:this.options.markerOpts,label:"Départ",display:!0},autocompleteOptions:this.options.autocompleteOptions||null}),this._originPoint.setMap(e);var n=this;return document.getElementById("GPlocationOriginPointerImg_1-"+this._uid).onclick=function(){n._clearGeojsonLayer();var r=n.getMap();n._originPoint._inputShowPointerContainer.checked?(n._formContainer.className="GPisochronFormMini",this.listenerKey=r.on("click",()=>{n._formContainer.className="",n.dispatchEvent("isocurve:drawend")})):(n._formContainer.className="",Kt(this.listenerKey)),n.dispatchEvent("isocurve:drawstart")},document.getElementById("GPlocationOriginLabel_1-"+this._uid).onclick=function(){n._clearGeojsonLayer(),n._formContainer.className="",e.un("click",()=>{n._formContainer.className=""}),n.dispatchEvent("isocurve:drawend")},document.getElementById("GPlocationOrigin_1-"+this._uid).onclick=function(){n._clearGeojsonLayer(),n.dispatchEvent("isocurve:drawend")},this._originPoint._container},t.prototype.onIsoComputationSubmit=function(){if(!this._originPoint||!this._originPoint.getCoordinate||!this._originPoint.getCoordinate()){Pi.log("[Isocurve] Missing position parameter to submit isocurve request");return}var e=this._originPoint.getCoordinate(),n={x:e[0],y:e[1]};Pi.log("origin : ",n);var r,o;if(this._currentComputation.toLowerCase()==="time"){var a=document.getElementById("GPisochronValueChronInput1-"+this._uid),s=parseInt(a.value,10);isNaN&&isNaN(s)&&(s=0);var l=document.getElementById("GPisochronValueChronInput2-"+this._uid),u=parseInt(l.value,10);isNaN&&isNaN(u)&&(u=0),r=s*3600+u*60,Pi.log("time : "+r)}if(this._currentComputation.toLowerCase()==="distance"){var c=document.getElementById("GPisochronValueDistInput-"+this._uid);o=parseFloat(c.value)*1e3,Pi.log("distance : "+o)}if(!r&&!o){Pi.log("[Isocurve] Missing time or distance parameter to submit isocurve request");return}var h=this.options.isocurveOptions||{},d=h.protocol||"XHR",p=h.timeOut||0;d==="JSONP"&&p===0&&(p=15e3);var f=h.onFailure!==null&&typeof h.onFailure=="function",g=h.onSuccess!==null&&typeof h.onSuccess=="function",v=this,y={position:n,graph:h.graph||this._currentTransport,exclusions:h.exclusions||this._currentExclusions,method:h.method||this._currentComputation,smoothing:h.smoothing||!0,timeOut:p,protocol:d,onSuccess:function(m){Pi.log(m),m&&v._drawIsoResults(m),g&&h.onSuccess.call(v,m)},onFailure:function(m){v._hideWaitingContainer(),Pi.log(m.message),f&&h.onFailure.call(v,m)}};(this._currentDirection.toLowerCase()==="arrival"||h.reverse)&&(y.reverse=!0),r&&(y.time=r),o&&(y.distance=o),this._requestIsoCurve(y)},t.prototype.onShowIsoPanelClick=function(){var e=this.getMap();Tr.unset(e),this.collapsed=this._showIsoContainer.checked,this.dispatchEvent("change:collapsed")},t.prototype.onIsoTypeChoiceChange=function(e){var n=e.target.value;n&&(n==="isodistance"&&(this._currentComputation="distance"),n==="isochron"&&(this._currentComputation="time"))},t.prototype.onIsoModeTransportChange=function(e){var n=e.target.value;n&&(this._currentTransport=n)},t.prototype.onIsoModeDirectionChange=function(e){var n=e.target.value;n&&(n.toLowerCase()==="arrival"?this._originPoint._inputLabelContainer.innerHTML="Arrivée":this._originPoint._inputLabelContainer.innerHTML="Départ",this._currentDirection=n)},t.prototype.onIsoExclusionsChange=function(e){var n=e.target.value,r=e.target.checked;if(n){for(var o=!1,a=null,s=0;s<this._currentExclusions.length;s++)D_(this._currentExclusions[s],n.toLowerCase())&&(a=s,o=!0);!o&&!r&&this._currentExclusions.push(n.toLowerCase()),o&&r&&(this._currentExclusions[a]=null)}},t.prototype.onIsoResetClick=function(){this._clear()},t.prototype._requestIsoCurve=function(e){!e||typeof e=="object"&&Object.keys(e).length===0||e.position&&(typeof e.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?e.ssl=this.options.ssl:e.ssl=!0),Pi.log(e),this._clearGeojsonLayer(),this._displayWaitingContainer(),tt.Services.isoCurve(e))},t.prototype._drawIsoResults=function(e){if(this._currentIsoResults=e,this._hideWaitingContainer(),!!e.geometry){var n=this.getMap();this._geojsonObject={type:"FeatureCollection",crs:{type:"name",properties:{name:"EPSG:4326"}},features:[{type:"Feature",crs:{type:"name",properties:{name:"EPSG:4326"}},geometry:e.geometry}]},this._geojsonObject.features.push({type:"Feature",geometry:{type:"Point",coordinates:this._originPoint.getCoordinate()},properties:{description:"Point d'origine","marker-symbol":this.options.markerOpts.url}});var r=new kn({defaultDataProjection:"EPSG:4326",defaultStyle:this._defaultFeatureStyle}),o=n.getView().getProjection().getCode(),a=r.readFeatures(this._geojsonObject,{dataProjection:"EPSG:4326",featureProjection:o});this._geojsonLayer=new mi({source:new fn({features:a}),style:this._defaultFeatureStyle,opacity:.9});var s;if(this._currentTransport==="Pieton"?(s="piéton",this._geojsonLayer.gpResultLayerId="Pieton$GEOPORTAIL:GPP:Isocurve"):(s="voiture",this._geojsonLayer.gpResultLayerId="Voiture$GEOPORTAIL:GPP:Isocurve"),n.addLayer(this._geojsonLayer),this.dispatchEvent({type:"isocurve:compute"}),a[0]&&a[0].getGeometry()&&a[0].getGeometry().getExtent()){var l=a[0].getGeometry().getExtent();n.getView().fit(l,n.getSize())}var u=this._currentComputation==="time"?"Isochrone":"Isodistance";n.getControls().forEach(c=>{if(c instanceof Mr){var h=this._geojsonLayer.gpLayerId;c._layers[h].title===h&&c.addLayer(this._geojsonLayer,{title:this.options.layerDescription.title+" ("+u+"/"+s+")",description:this.options.layerDescription.description})}})}},t.prototype._clear=function(){this._clearIsoInputs(),this._originPoint.clear(),this._clearGeojsonLayer(),this._currentIsoResults=null},t.prototype._clearIsoInputs=function(){var e=document.getElementById("GPisochronValueChronInput1-"+this._uid);e&&(e.value="0");var n=document.getElementById("GPisochronValueChronInput2-"+this._uid);n&&(n.value="0");var r=document.getElementById("GPisochronValueDistInput-"+this._uid);r&&(r.value="0"),this._initTransport(),this._initComputation(),this._initDirection(),this._initExclusions();var o;this._currentTransport==="Pieton"?(o=document.getElementById("GPisochronTransportPedestrian-"+this._uid),o&&(o.checked="true")):(o=document.getElementById("GPisochronTransportCar-"+this._uid),o&&(o.checked="true"));var a;this._currentComputation.toLowerCase()==="distance"?(a=document.getElementById("GPisochronChoiceAltDist-"+this._uid),a&&(a.checked="true"),document.getElementById("GPisochronValueDist-"+this._uid)&&(document.getElementById("GPisochronValueDist-"+this._uid).className="GPflexInput"),document.getElementById("GPisochronValueChron-"+this._uid)&&(document.getElementById("GPisochronValueChron-"+this._uid).className="GPisochronValueHidden")):(a=document.getElementById("GPisochronChoiceAltChron-"+this._uid),a&&(a.checked="true"),document.getElementById("GPisochronValueChron-"+this._uid)&&(document.getElementById("GPisochronValueChron-"+this._uid).className="GPflexInput"),document.getElementById("GPisochronValueDist-"+this._uid)&&(document.getElementById("GPisochronValueDist-"+this._uid).className="GPisochronValueHidden"));var s=document.getElementById("GPisochronDirectionSelect-"+this._uid);s&&(s.value=this._currentDirection),this._currentDirection==="arrival"?this._originPoint._inputLabelContainer.innerHTML="Arrivée":this._originPoint._inputLabelContainer.innerHTML="Départ";var l=document.getElementById("GPisoExclusionsToll-"+this._uid);l&&(this._currentExclusions.indexOf("toll")!==-1?l.checked=!1:l.checked=!0);var u=document.getElementById("GPisoExclusionsTunnel-"+this._uid);u&&(this._currentExclusions.indexOf("tunnel")!==-1?u.checked=!1:u.checked=!0);var c=document.getElementById("GPisoExclusionsBridge-"+this._uid);c&&(this._currentExclusions.indexOf("bridge")!==-1?c.checked=!1:c.checked=!0)},t.prototype._clearGeojsonLayer=function(){var e=this.getMap();this._geojsonLayer&&(e.removeLayer(this._geojsonLayer),this._geojsonLayer=null),this._geojsonObject=null},t.prototype._hideIsoSuggestedLocations=function(e){e.target&&e.target.id&&e.target.id.indexOf("GPlocationOrigin_")!==-1||this._originPoint._hideSuggestedLocation()},t.prototype._displayWaitingContainer=function(){this._waitingContainer.className="GPisochronCalcWaitingContainerVisible",this._waiting=!0;var e=this.options.isocurveOptions;if(e&&e.timeOut){this._timer&&(clearTimeout(this._timer),this._timer=null);var n=this;this._timer=setTimeout(function(){n._waiting===!0?n._hideWaitingContainer():n._timer&&clearTimeout(n._timer)},16e3)}},t.prototype._hideWaitingContainer=function(){if(this._waiting){this._waitingContainer.className="GPisochronCalcWaitingContainerHidden",this._waiting=!1;var e=this.options.isocurveOptions;e&&e.timeOut&&(clearTimeout(this._timer),this._timer=null)}},t}(yi);window.ol&&window.ol.control&&(window.ol.control.Isocurve=B0);const D_=function(i,t){if(i===t)return!0;if(typeof i=="object"&&i!=null&&typeof t=="object"&&t!=null){if(Object.keys(i).length!==Object.keys(t).length)return!1;for(var e in i)if(t.hasOwnProperty(e)){if(!D_(i[e],t[e]))return!1}else return!1;return!0}else return!1};var ON={_addUID:function(i){var t=this._uid?i+"-"+this._uid:i;return t},_createMainContainerElement:function(){var i=document.createElement("div");return i.id=this._addUID("GPreverseGeocoding"),i.className="GPwidget",i},_createShowReverseGeocodingElement:function(){var i=document.createElement("input");return i.id=this._addUID("GPshowReverseGeocoding"),i.type="checkbox",i},_createShowReverseGeocodingPictoElement:function(){var i=this,t=document.createElement("label");t.id=this._addUID("GPshowReverseGeocodingPicto"),t.className="GPshowAdvancedToolPicto",t.htmlFor=this._addUID("GPshowReverseGeocoding"),t.title="Ouvrir la recherche inverse",t.addEventListener?t.addEventListener("click",function(){i.onShowReverseGeocodingClick()}):t.attachEvent&&t.attachEvent("onclick",function(){i.onShowReverseGeocodingClick()});var e=document.createElement("span");return e.id=this._addUID("GPshowReverseGeocodingOpen"),e.className="GPshowAdvancedToolOpen",t.appendChild(e),t},_createReverseGeocodingWaitingElement:function(){var i=document.createElement("div");i.id=this._addUID("GPreverseGeocodingCalcWaitingContainer"),i.className="GPreverseGeocodingCalcWaitingContainerHidden";var t=document.createElement("p");return t.className="GPreverseGeocodingCalcWaiting",t.innerHTML="Recherche en cours...",i.appendChild(t),i},_createReverseGeocodingResultsPanelElement:function(){var i=document.createElement("div");return i.id=this._addUID("GPreverseGeocodingResultsPanel"),i.className="GPpanel GPreverseGeocodingComponentHidden",i},_createReverseGeocodingResultsListElement:function(){var i=document.createElement("div");return i.id=this._addUID("GPreverseGeocodingResultsList"),i},_createReverseGeocodingResultElement:function(i,t){var e=this,n=document.getElementById(this._addUID("GPreverseGeocodingResultsList")),r=document.createElement("div");r.id=this._addUID("ReverseGeocodedLocation_"+t),r.className="GPautoCompleteProposal",r.innerHTML=i,r.title=i,r.addEventListener?(r.addEventListener("mouseover",function(o){e.onReverseGeocodingResultMouseOver(o)}),r.addEventListener("mouseout",function(o){e.onReverseGeocodingResultMouseOut(o)}),r.addEventListener("click",function(o){typeof e.onReverseGeocodingResultClick=="function"&&e.onReverseGeocodingResultClick(o)})):r.attachEvent&&(r.attachEvent("onmouseover",function(o){e.onReverseGeocodingResultMouseOver(o)}),r.attachEvent("onmouseout",function(o){e.onReverseGeocodingResultMouseOut(o)}),r.attachEvent("onclick",function(o){typeof e.onReverseGeocodingResultClick=="function"&&e.onReverseGeocodingResultClick(o)})),n.appendChild(r)},_createReverseGeocodingPanelElement:function(){var i=document.createElement("div");return i.id=this._addUID("GPreverseGeocodingPanel"),i.className="GPpanel",i},_createReverseGeocodingPanelHeaderElement:function(){var i=document.createElement("div");return i.className="GPpanelHeader",i},_createReverseGeocodingPanelReturnPictoElement:function(){var i=this,t=document.createElement("div");return t.id=this._addUID("GPreverseGeocodingReturnPicto"),t.title="Nouvelle recherche",t.className="GPreverseGeocodingReturnPictoHidden",t.addEventListener?t.addEventListener("click",function(e){document.getElementById(i._addUID("GPreverseGeocodingResultsPanel")).className="GProuteComponentHidden",document.getElementById(i._addUID("GPreverseGeocodingForm")).className="",document.getElementById(i._addUID("GPreverseGeocodingHeaderTitle")).innerHTML="Recherche inverse",document.getElementById(i._addUID("GPreverseGeocodingReturnPicto")).className="GPreverseGeocodingReturnPictoHidden",i.onGPreverseGeocodingReturnPictoClick(e)}):t.attachEvent&&t.attachEvent("onclick",function(e){document.getElementById(i._addUID("GPreverseGeocodingResultsPanel")).className="GProuteComponentHidden",document.getElementById(i._addUID("GPreverseGeocodingForm")).className="",document.getElementById(i._addUID("GPreverseGeocodingHeaderTitle")).innerHTML="Recherche inverse",document.getElementById(i._addUID("GPreverseGeocodingReturnPicto")).className="GPreverseGeocodingReturnPictoHidden",i.onGPreverseGeocodingReturnPictoClick(e)}),t},_createReverseGeocodingPanelTitleElement:function(){var i=document.createElement("div");return i.className="GPpanelTitle",i.id=this._addUID("GPreverseGeocodingHeaderTitle"),i.innerHTML="Recherche inverse",i},_createReverseGeocodingPanelCloseElement:function(){var i=this,t=document.createElement("div");return t.id=this._addUID("GPreverseGeocodingPanelClose"),t.className="GPpanelClose",t.title="Fermer le panneau",t.addEventListener?t.addEventListener("click",function(){document.getElementById(i._addUID("GPshowReverseGeocodingPicto")).click()},!1):t.attachEvent&&t.attachEvent("onclick",function(){document.getElementById(i._addUID("GPshowReverseGeocodingPicto")).click()}),t},_createReverseGeocodingPanelFormElement:function(){var i=this,t=document.createElement("form");return t.id=this._addUID("GPreverseGeocodingForm"),t.addEventListener?t.addEventListener("submit",function(e){e.preventDefault(),i.onReverseGeocodingSubmit()}):t.attachEvent&&t.attachEvent("onsubmit",function(e){e.preventDefault(),i.onReverseGeocodingSubmit()}),t},_createReverseGeocodingFormModeChoiceGeocodingTypeElement:function(i){var t=this,e=document.createElement("div");e.className="GPflexInput";var n=document.createElement("label");n.className="GPreverseGeocodingCodeLabel",n.innerHTML="Recherche par",n.title="Recherche par",e.appendChild(n);var r=document.createElement("select");r.className="GPreverseGeocodingCode",r.addEventListener?r.addEventListener("change",function(u){t.onReverseGeocodingTypeChange(u)}):r.attachEvent&&r.attachEvent("onchange",function(u){t.onReverseGeocodingTypeChange(u)}),(!i||!Array.isArray(i))&&(i=["StreetAddress","PositionOfInterest","CadastralParcel"]);for(var o=0;o<i.length;o++)switch(i[o]){case"PositionOfInterest":var a=document.createElement("option");a.value="PositionOfInterest",a.text="Lieux/toponymes",r.appendChild(a);break;case"StreetAddress":var s=document.createElement("option");s.value="StreetAddress",s.text="Adresses",r.appendChild(s);break;case"CadastralParcel":var l=document.createElement("option");l.value="CadastralParcel",l.text="Parcelles cadastrales",r.appendChild(l);break}return e.appendChild(r),e},_createReverseGeocodingFormModeChoiceGeocodingDelimitationElement:function(i){var t=this,e=document.createElement("div");e.className="GPflexInput";var n=document.createElement("label");n.className="GPreverseGeocodingCodeLabel",n.innerHTML="Délimitation",n.title="Délimitation",e.appendChild(n);var r=document.createElement("select");r.className="GPreverseGeocodingCode",r.addEventListener?r.addEventListener("change",function(u){t.onReverseGeocodingDelimitationChange(u)}):r.attachEvent&&r.attachEvent("onchange",function(u){t.onReverseGeocodingDelimitationChange(u)}),(!i||!Array.isArray(i))&&(i=["Point","Circle","Extent"]);for(var o=0;o<i.length;o++)switch(i[o].toLowerCase()){case"point":var a=document.createElement("option");a.value="point",a.text="Pointer un lieu",r.appendChild(a);break;case"circle":var s=document.createElement("option");s.value="circle",s.text="Dessiner un cercle",r.appendChild(s);break;case"extent":var l=document.createElement("option");l.value="extent",l.text="Dessiner une emprise",r.appendChild(l);break}return e.appendChild(r),e},_createReverseGeocodingSubmitFormElement:function(){var i=document.createElement("input");return i.id=this._addUID("GPreverseGeocodingSubmit"),i.className="GPinputSubmit",i.type="submit",i.value="Rechercher",i}},kt=Ye.getLogger("reversegeocoding"),N_=function(i){function t(e){if(e=e||{},!(this instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this.initialize(e),this._container=this._initContainer(),this._containerElement=null,e.element&&e.element.appendChild&&(e.element.appendChild(this._container),this._containerElement=e.element),i.call(this,{element:this._containerElement||this._container,target:e.target,render:e.render})}return i&&(t.__proto__=i),t.prototype=Object.create(i.prototype,{}),he.assign(t.prototype,ON),t.prototype.constructor=t,t.prototype.getCollapsed=function(){return this.collapsed},t.prototype.setCollapsed=function(e){if(e===void 0){kt.log("[ERROR] ReverseGeocode:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(e?document.getElementById("GPreverseGeocodingPanelClose-"+this._uid).click():document.getElementById("GPshowReverseGeocoding-"+this._uid).click(),this.collapsed=e)},t.prototype.setMap=function(e){if(e)this._activateMapInteraction(e),this.draggable&&Oo.dragElement(this._panelContainer,this._panelHeaderContainer,e.getTargetElement());else{var n=this.getMap();this._clearResults(),this._clearInputFeatures(),this._removeMapInteraction(n),this._inputFeaturesLayer!=null&&(n.removeLayer(this._inputFeaturesLayer),this._inputFeaturesLayer=null,this._inputFeaturesSources=null,this._inputFeatures=null)}i.prototype.setMap.call(this,e)},t.prototype.getData=function(){return this._reverseGeocodingLocations},t.prototype.initialize=function(e){this._checkInputOptions(e),this.options={collapsed:!0,draggable:!1,resources:["StreetAddress","PositionOfInterest","CadastralParcel"],delimitations:["Point","Circle","Extent"],reverseGeocodeOptions:{},layerDescription:{title:"Saisie (recherche inverse)",description:"Couche de saisie d'une zone de recherche pour la recherche inverse"}},he.assign(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this._uid=Re.generate(),this._currentGeocodingType=null,this._initGeocodingType(),this._currentGeocodingDelimitation=null,this._initGeocodingDelimitation(),this._showReverseGeocodingInput=null,this._panelContainer=null,this._panelHeaderContainer=null,this._panelTitleContainer=null,this._returnPictoContainer=null,this._formContainer=null,this._resultsContainer=null,this._resultsListContainer=null,this._waitingContainer=null,this._inputFeatures=null,this._inputFeaturesSource=null,this._inputFeaturesLayer=null,this._mapInteraction=null,this._requestOptions=null,this._requestGeom=null,this._waiting=!1,this._timer=null,this._reverseGeocodingLocations=[],this._reverseGeocodingLocationsMarkers=[],this._resultsDefaultStyle=new de({image:new ni({src:It.lightOrange,anchor:[.5,1]})}),this._resultsSelectedStyle=new de({image:new ni({src:It.red,anchor:[.5,1]})}),this._resultsHoverInteraction=null,this._resultsSelectInteraction=null,this._popupContent=null,this._popupDiv=this._initPopupDiv(),this._popupOverlay=null},t.prototype._checkInputOptions=function(e){var n,r;if(e.resources){var o=e.resources;if(Array.isArray(o)){var a=["StreetAddress","PositionOfInterest","CadastralParcel"],s=[];for(n=0;n<o.length;n++)a.indexOf(o[n])===-1&&(s.push(n),kt.log("[ReverseGeocode] options.resources : "+o[n]+" is not a resource for reverse geocode"));if(s.length!==0)for(r=0;r<s.length;r++)o.splice(s[r],1)}else kt.log("[ReverseGeocode] 'options.resources' parameter should be an array"),o=null}if(e.delimitations){var l=e.delimitations;if(Array.isArray(l)){var u=["Circle","Point","Extent"],c=[];for(n=0;n<l.length;n++)u.indexOf(l[n])===-1&&(c.push(n),kt.log("[ReverseGeocode] options.delimitations : "+l[n]+" is not a delimitation for reverse geocode"));if(c.length!==0)for(r=0;r<c.length;r++)l.splice(c[r],1)}else kt.log("[ReverseGeocode] 'options.delimitations' parameter should be an array"),l=null}},t.prototype._initGeocodingType=function(){this._currentGeocodingType="StreetAddress";var e=this.options.resources;(!e||e.length===0)&&(this.options.resources=["StreetAddress","PositionOfInterest","CadastralParcel"]),Array.isArray(e)&&e.length&&(e[0]==="StreetAddress"||e[0]==="PositionOfInterest"||e[0]==="CadastralParcel")&&(this._currentGeocodingType=e[0]);var n=this.options.reverseGeocodeOptions;n.filterOptions&&Array.isArray(n.filterOptions.type)&&n.filterOptions.type.length!==0&&(this._currentGeocodingType=n.filterOptions.type[0])},t.prototype._initGeocodingDelimitation=function(){this._currentGeocodingDelimitation="Point";var e=this.options.delimitations;if((!e||e.length===0)&&(this.options.delimitations=["Point","Circle","Extent"]),Array.isArray(e)&&e.length){var n=e[0].toLowerCase();(n==="point"||n==="circle"||n==="extent")&&(this._currentGeocodingDelimitation=e[0])}},t.prototype._initPopupDiv=function(){var e=this,n=document.createElement("div");n.className="gp-feature-info-div";var r=document.createElement("input");return r.type="button",r.className="gp-styling-button closer",r.onclick=function(){return e._popupOverlay!=null&&e._popupOverlay.setPosition(void 0),!1},this._popupContent=document.createElement("div"),this._popupContent.className="gp-features-content-div",n.appendChild(this._popupContent),n.appendChild(r),n},t.prototype._initContainer=function(){var e=this._createMainContainerElement(),n=this._showReverseGeocodingInput=this._createShowReverseGeocodingElement();e.appendChild(n),this.collapsed||(n.checked=!0);var r=this._createShowReverseGeocodingPictoElement();e.appendChild(r);var o=this._panelContainer=this._createReverseGeocodingPanelElement(),a=this._panelHeaderContainer=this._createReverseGeocodingPanelHeaderElement(),s=this._returnPictoContainer=this._createReverseGeocodingPanelReturnPictoElement();a.appendChild(s);var l=this._panelTitleContainer=this._createReverseGeocodingPanelTitleElement();a.appendChild(l);var u=this._createReverseGeocodingPanelCloseElement();a.appendChild(u),o.appendChild(a);var c=this._formContainer=this._createReverseGeocodingPanelFormElement();c.appendChild(this._createReverseGeocodingFormModeChoiceGeocodingTypeElement(this.options.resources)),c.appendChild(this._createReverseGeocodingFormModeChoiceGeocodingDelimitationElement(this.options.delimitations));var h=this._createReverseGeocodingSubmitFormElement();c.appendChild(h),o.appendChild(c);var d=this._waitingContainer=this._createReverseGeocodingWaitingElement();o.appendChild(d);var p=this._resultsContainer=this._createReverseGeocodingResultsPanelElement(),f=this._resultsListContainer=this._createReverseGeocodingResultsListElement();return p.appendChild(f),o.appendChild(p),e.appendChild(o),kt.log(e),e},t.prototype._activateMapInteraction=function(e){if(!this.collapsed){this._inputFeaturesLayer==null&&(this._inputFeatures=new oi,this._inputFeaturesSource=new fn({features:this._inputFeatures}),this._inputFeaturesLayer=new mi({source:this._inputFeaturesSource,style:new de({fill:new Ge({color:"rgba(0, 183, 152, 0.3)"}),stroke:new Me({color:"rgba(0, 183, 152, 0.8)",width:3}),image:new ni({src:It.turquoiseBlue,anchor:[.5,1]})})}),this._inputFeaturesLayer.gpResultLayerId="reverseGeocoding",e.addLayer(this._inputFeaturesLayer));var n=this._currentGeocodingDelimitation.toLowerCase();switch(n){case"point":this._activatePointInteraction(e);break;case"circle":this._activateCircleInteraction(e);break;case"extent":this._activateBoxInteraction(e);break}e.getControls().forEach(r=>{if(r instanceof Mr){var o=this._inputFeaturesLayer.gpLayerId;r._layers[o].title===o&&(r.addLayer(this._inputFeaturesLayer,{title:this.options.layerDescription.title,description:this.options.layerDescription.description}),r.setRemovable(this._inputFeaturesLayer,!1))}})}},t.prototype._activatePointInteraction=function(e){this._mapInteraction=new Ln({style:new de({image:new gi({radius:0,fill:new Ge({color:"rgba(0, 183, 152, 0.8)"})})}),type:"Point",source:this._inputFeaturesSource}),this._mapInteraction.on("drawstart",n=>{kt.log("on drawstart ",n),this._inputFeatures.clear(),this._onDrawStart(n,"point")}),this._mapInteraction.on("drawend",n=>{kt.log("on drawend",n),n.feature&&n.feature.getGeometry&&(this._requestGeom={type:"Point",coordinates:[this._requestPosition.lon,this._requestPosition.lat]})}),e.addInteraction(this._mapInteraction),this._setCursor("crosshair",e)},t.prototype._activateCircleInteraction=function(e){this._mapInteraction=new Ln({style:new de({fill:new Ge({color:"rgba(0, 183, 152, 0.3)"}),stroke:new Me({color:"rgba(0, 183, 152, 0.8)",width:3}),image:new gi({radius:4,fill:new Ge({color:"rgba(0, 183, 152, 0.8)"})})}),type:"Circle",source:this._inputFeaturesSource}),this._mapInteraction.on("drawstart",n=>{kt.log("on drawstart ",n),this._inputFeatures.clear(),this._onDrawStart(n,"circle")}),this._mapInteraction.on("drawend",n=>{if(kt.log("on drawend",n),n.feature&&n.feature.getGeometry){var r=n.feature.getGeometry().getRadius();this._requestGeom={},this._requestGeom.type="Circle",this._requestGeom.radius=r,this._requestPosition&&(this._requestGeom.coordinates=[this._requestPosition.lon,this._requestPosition.lat]),kt.log("circle radius : ",r)}}),e.addInteraction(this._mapInteraction)},t.prototype._activateBoxInteraction=function(e){var n=function(r,o){o||(o=new zi([]));var a=r[0],s=r[1];return o.setCoordinates([[a,[a[0],s[1]],s,[s[0],a[1]],a]]),o};this._mapInteraction=new Ln({style:new de({fill:new Ge({color:"rgba(0, 183, 152, 0.3)"}),stroke:new Me({color:"rgba(0, 183, 152, 0.8)",width:3}),image:new gi({radius:4,fill:new Ge({color:"rgba(0, 183, 152, 0.8)"})})}),type:"LineString",source:this._inputFeaturesSource,maxPoints:2,geometryFunction:n}),this._mapInteraction.on("drawstart",r=>{kt.log("on drawstart",r),this._inputFeatures.clear()}),this._mapInteraction.on("drawend",r=>{kt.log("on drawend",r),this._onBoxDrawEnd(r)}),e.addInteraction(this._mapInteraction)},t.prototype._removeMapInteraction=function(e){this._mapInteraction!=null&&(e.removeInteraction(this._mapInteraction),this._mapInteraction=null),this._setCursor()},t.prototype._onDrawStart=function(e,n){var r;if(e.feature&&e.feature.getGeometry){var o=e.feature.getGeometry();n==="point"&&(r=o.getCoordinates()),n==="circle"&&(r=o.getCenter())}if(r){var a;if(this.options.reverseGeocodeOptions&&this.options.reverseGeocodeOptions.srs)a=this.options.reverseGeocodeOptions.srs;else{var s=this.getMap();if(!s||!s.getView())return;a=s.getView().getProjection()}var l=ut(r,a,"EPSG:4326");this._requestPosition={lon:l[0],lat:l[1]},kt.log("position coordinates : ",this._requestPosition)}},t.prototype._onBoxDrawEnd=function(e){if(e.feature&&e.feature.getGeometry){var n=e.feature.getGeometry().getCoordinates()[0],r=n[0],o=n[2],a;if(this.options.reverseGeocodeOptions&&this.options.reverseGeocodeOptions.srs)a=this.options.reverseGeocodeOptions.srs;else{var s=this.getMap();if(!s||!s.getView())return;a=s.getView().getProjection()}var l=ut(r,a,"EPSG:4326"),u=ut(o,a,"EPSG:4326"),c={};l[0]<u[0]?(c.left=l[0],c.right=u[0]):(c.left=u[0],c.right=l[0]),l[1]<u[1]?(c.bottom=l[1],c.top=u[1]):(c.bottom=u[1],c.top=l[1]),this._requestGeom={type:"Polygon",coordinates:[[[c.left,c.top],[c.right,c.top],[c.right,c.bottom],[c.left,c.bottom],[c.left,c.top]]]},kt.log("searchGeometry filter : ",this._requestGeom)}},t.prototype._setCursor=function(e,n){if(n=n||this.getMap(),!!n){var r=n.getTargetElement();e?r.style.cursor=e:r.style.cursor=null}},t.prototype._reverseGeocodingRequest=function(){var e=this.getMap();this._requestOptions=this._getReverseGeocodingRequestOptions(),this._removeMapInteraction(e),this._displayWaitingContainer(),tt.Services.reverseGeocode(this._requestOptions)},t.prototype._getReverseGeocodingRequestOptions=function(){var e=this.getMap(),n=this.options.reverseGeocodeOptions,r=this;typeof this.options.ssl!="boolean"&&(this.options.ssl=!0);var o=n.onFailure!==null&&typeof n.onFailure=="function",a=n.onSuccess!==null&&typeof n.onSuccess=="function",s={apiKey:n.apiKey||this.options.apiKey,ssl:this.options.ssl,position:this._requestPosition,filterOptions:{type:[this._currentGeocodingType]},srs:"CRS:84",returnFreeForm:!1,maximumResponses:n.maximumResponses||18,timeOut:n.timeOut||3e4,onSuccess:function(l){l.locations&&(kt.log("reverseGeocode results : ",l.locations),r._displayGeocodedLocations(l.locations)),a&&n.onSuccess.call(r,l.locations)},onFailure:function(l){r._hideWaitingContainer(),r._clearResults(),r._clearInputFeatures(),r._activateMapInteraction(e),kt.log(l.message),o&&n.onFailure.call(r,l)}};return this._requestGeom.type.toLowerCase()==="circle"?(this._requestGeom.radius>500&&(kt.log("INFO : initial circle radius ("+this._requestGeom.radius+") limited to 1000m."),this._requestGeom.radius=500),s.searchGeometry=this._requestGeom):this._requestGeom.type.toLowerCase()==="polygon"?s.searchGeometry=this._requestGeom:this._requestGeom.type.toLowerCase()==="point"&&(this._currentGeocodingType==="StreetAddress"?(s.searchGeometry={type:"Circle",radius:50,coordinates:this._requestGeom.coordinates},s.maximumResponses=1):s.searchGeometry=this._requestGeom),kt.log("reverseGeocode request options : ",s),s},t.prototype._displayGeocodedLocations=function(e){this._clearResults(),this._reverseGeocodingLocations=e,this.dispatchEvent({type:"reversegeocode:compute"}),this._formContainer.className="GPreverseGeocodingComponentHidden",this._hideWaitingContainer(),this._panelTitleContainer.innerHTML="Résultats de la recherche",this._returnPictoContainer.className="",this._resultsContainer.className="GPpanel",this._fillGeocodedLocationListContainer(e),this._displayGeocodedLocationsOnMap(e)},t.prototype._fillGeocodedLocationListContainer=function(e){for(var n=0;n<e.length;n++){var r=e[n];kt.log(r);var o=this._fillGeocodedLocationDescription(r);o.length!==0&&this._createReverseGeocodingResultElement(o,n)}},t.prototype._fillGeocodedLocationDescription=function(e){if(!(!e||!e.placeAttributes)){var n=e.placeAttributes,r="";switch(e.type){case"StreetAddress":n.street&&(r+=n.housenumber?n.housenumber+" ":"",r+=n.street+", "),r+=n.postcode+" "+n.city;break;case"PositionOfInterest":r+=n.toponym,n.postcode.length===1&&(r+=", "+n.postcode[0]),r+=" ("+n.category.join(",")+")";break;case"CadastralParcel":r+=n.id,r+=n.city?" ("+n.city+")":"";break;default:r+=n.city?n.city:"";break}return r}},t.prototype._displayGeocodedLocationsOnMap=function(e){if(this._reverseGeocodingLocations.length!==0){var n=this.getMap();this._createResultsLayer();for(var r=0;r<e.length;r++)this._addResultFeature(e[r],r);if(this._resultsFeatures.getLength()>1){if(this._resultsFeaturesSource&&this._resultsFeaturesSource.getExtent){var o=this._resultsFeaturesSource.getExtent();n.getView().fit(o,n.getSize())}}else{var a=this._resultsFeatures.item(0),s=a.getGeometry().getCoordinates();n.getView().setCenter(s),n.getView().setZoom(17)}this._resultsHoverInteraction=new qn({condition:Of,layers:[this._resultsFeaturesLayer]}),this._resultsHoverInteraction.on("select",u=>this._onResultsFeatureMouseOver(u)),n.addInteraction(this._resultsHoverInteraction),this._resultsSelectInteraction=new qn({layers:[this._resultsFeaturesLayer]}),this._resultsSelectInteraction.on("select",u=>this._onResultsFeatureSelect(u)),n.addInteraction(this._resultsSelectInteraction);var l="";switch(this._currentGeocodingType){case"StreetAddress":l="adresses";break;case"PositionOfInterest":l="toponymes";break;case"CadastralParcel":l="parcelles cadastrales";break}n.getControls().forEach(u=>{if(u instanceof Mr){var c=this._resultsFeaturesLayer.gpLayerId;u._layers[c].title===c&&(u.addLayer(this._resultsFeaturesLayer,{title:"Résultats de la recherche inverse",description:"Résultats de la recherche inverse sur les "+l}),u.setRemovable(this._resultsFeaturesLayer,!1))}})}},t.prototype._createResultsLayer=function(){var e=this.getMap();this._resultsFeatures=new oi,this._resultsFeaturesSource=new fn({features:this._resultsFeatures}),this._resultsFeaturesLayer=new mi({source:this._resultsFeaturesSource}),this._resultsFeaturesLayer.gpResultLayerId="reverseGeocodingResults",e.addLayer(this._resultsFeaturesLayer)},t.prototype._addResultFeature=function(e,n){var r=this.getMap(),o=[e.position.lon,e.position.lat];if(o.length!==0){var a=r.getView(),s=a.getProjection().getCode();s!=="EPSG:4326"&&(o=ut(o,"EPSG:4326",s));var l=new ii({geometry:new Wi(o)});l.setStyle(this._resultsDefaultStyle),l.setId(n),l.setProperties({location:e,popupContent:this._fillPopupContent(e)}),this._resultsFeatures.push(l)}},t.prototype._fillPopupContent=function(e){var n="<ul>",r=e.placeAttributes;for(var o in r)r.hasOwnProperty(o)&&o!=="trueGeometry"&&o!=="extraFields"&&o!=="houseNumberInfos"&&o!=="_count"&&(n+="<li>",n+='<span class="gp-attname-others-span">'+o.toUpperCase()+" : </span>",n+=r[o],n+=" </li>");return n+=" </ul>",n},t.prototype._onResultsFeatureMouseOver=function(e){var n;if(e.selected.length!==0){if(n=e.selected[0],n.setStyle(this._resultsSelectedStyle),n.getId()!=null){var r=document.getElementById("ReverseGeocodedLocation_"+n.getId()+"-"+this._uid);r&&r.classList&&r.classList.add("GPreverseGeocodedLocationHighlight")}document.getElementById("ReverseGeocodedLocation_"+n.getId()+"-"+this._uid)}if(e.deselected.length!==0){n=e.deselected[0],n.setStyle(this._resultsDefaultStyle);var o=document.getElementById("ReverseGeocodedLocation_"+n.getId()+"-"+this._uid);o&&o.classList&&o.classList.remove("GPreverseGeocodedLocationHighlight")}},t.prototype._onResultsFeatureSelect=function(e){var n=this.getMap();if(e.selected.length!==0){var r=e.selected[0];this._popupContent.innerHTML=r.getProperties().popupContent,this._popupOverlay?this._popupOverlay.setPosition(e.mapBrowserEvent.coordinate):(this._popupOverlay=new dn({element:this._popupDiv,positioning:"bottom-center",position:e.mapBrowserEvent.coordinate}),n.addOverlay(this._popupOverlay)),this.dispatchEvent({type:"reversegeocode:onclickresult",location:r.getProperties().location})}else this._popupOverlay!=null&&this._popupOverlay.setPosition(void 0)},t.prototype.onShowReverseGeocodingClick=function(){var e=this.getMap();Tr.unset(e),this.collapsed=this._showReverseGeocodingInput.checked,this.dispatchEvent("change:collapsed"),!this._waiting&&!this._reverseGeocodingLocations.length&&(this.collapsed?(this._clearResults(),this._clearInputFeatures(),this._removeMapInteraction(e),this._inputFeaturesLayer!=null&&(e.removeLayer(this._inputFeaturesLayer),this._inputFeaturesLayer=null,this._inputFeaturesSources=null,this._inputFeatures=null)):this._activateMapInteraction(e))},t.prototype.onReverseGeocodingTypeChange=function(e){var n=e.target.selectedIndex,r=e.target.options[n].value;r&&(kt.log(r),this._currentGeocodingType=r)},t.prototype.onReverseGeocodingDelimitationChange=function(e){var n=e.target.selectedIndex,r=e.target.options[n].value;if(r){kt.log(r),this._currentGeocodingDelimitation=r;var o=this.getMap();this._clearInputFeatures(),this._removeMapInteraction(o),this._activateMapInteraction(o)}},t.prototype.onGPreverseGeocodingReturnPictoClick=function(){this._clearResults(),this._clearInputFeatures(),this._activateMapInteraction(this.getMap())},t.prototype.onReverseGeocodingSubmit=function(){if(!this._requestPosition){kt.log("missing position");return}this._reverseGeocodingRequest()},t.prototype.onReverseGeocodingResultClick=function(e){var n=e.target.id,r=n.substring(n.indexOf("_")+1),o=this._resultsFeaturesSource.getFeatureById(parseInt(r,10));this.dispatchEvent({type:"reversegeocode:onclickresult",location:o.getProperties().location})},t.prototype.onReverseGeocodingResultMouseOver=function(e){var n=e.target.id,r=n.substring(n.indexOf("_")+1);if(e.target.classList&&e.target.classList.add("GPreverseGeocodedLocationHighlight"),!!this._resultsFeaturesSource){var o=this._resultsFeaturesSource.getFeatureById(parseInt(r,10));o.setStyle(this._resultsSelectedStyle)}},t.prototype.onReverseGeocodingResultMouseOut=function(e){var n=e.target.id,r=n.substring(n.indexOf("_")+1);if(e.target.classList&&e.target.classList.remove("GPreverseGeocodedLocationHighlight"),!!this._resultsFeaturesSource){var o=this._resultsFeaturesSource.getFeatureById(parseInt(r,10));o.setStyle(this._resultsDefaultStyle)}},t.prototype._clearResults=function(){var e=this.getMap();if(this._reverseGeocodingLocations=[],this._resultsListContainer)for(;this._resultsListContainer.firstChild;)this._resultsListContainer.removeChild(this._resultsListContainer.firstChild);this._resultsFeaturesLayer&&(e.removeLayer(this._resultsFeaturesLayer),this._resultsFeaturesLayer=null),this._popupOverlay!=null&&(e.removeOverlay(this._popupOverlay),this._popupOverlay=null),this._resultsSelectInteraction!=null&&(e.removeInteraction(this._resultsSelectInteraction),this._resultsSelectInteraction=null),this._resultsHoverInteraction!=null&&(e.removeInteraction(this._resultsHoverInteraction),this._resultsHoverInteraction=null)},t.prototype._clearInputFeatures=function(){this._inputFeatures&&this._inputFeatures.clear(),this._requestGeom=null},t.prototype._displayWaitingContainer=function(){this._waitingContainer.className="GProuteCalcWaitingContainerVisible",this._waiting=!0,this._timer&&(clearTimeout(this._timer),this._timer=null);var e=this;this._timer=setTimeout(function(){e._waiting===!0?e._hideWaitingContainer():e._timer&&clearTimeout(e._timer)},16e3)},t.prototype._hideWaitingContainer=function(){this._waiting&&(this._waitingContainer.className="GProuteCalcWaitingContainerHidden",this._waiting=!1,clearTimeout(this._timer),this._timer=null)},t}(yi);window.ol&&window.ol.control&&(window.ol.control.ReverseGeocode=N_);var LN=function(){function i(){}return i.prototype.read=function(t){if(t)if(typeof t=="string"){var e=Eo(t);return this.readFromDocument(e)}else return Io(t)?this.readFromDocument(t):this.readFromNode(t);else return null},i.prototype.readFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFromNode(e);return null},i.prototype.readFromNode=function(t){},i}();const j0=LN;var GN="http://www.w3.org/1999/xlink";function el(i){return i.getAttributeNS(GN,"href")}var kN=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Li=[null,"http://www.opengis.net/wms"],DN=j(Li,{Service:P(nF),Capability:P(iF)}),NN=j(Li,{Request:P(cF),Exception:P(sF),Layer:P(lF)}),FN=function(i){kN(t,i);function t(){var e=i.call(this)||this;return e.version=void 0,e}return t.prototype.readFromNode=function(e){this.version=e.getAttribute("version").trim();var n=re({version:this.version},DN,e,[]);return n||null},t}(j0),UN=j(Li,{Name:P(H),Title:P(H),Abstract:P(H),KeywordList:P(j_),OnlineResource:P(el),ContactInformation:P(rF),Fees:P(H),AccessConstraints:P(H),LayerLimit:P($i),MaxWidth:P($i),MaxHeight:P($i)}),BN=j(Li,{ContactPersonPrimary:P(oF),ContactPosition:P(H),ContactAddress:P(aF),ContactVoiceTelephone:P(H),ContactFacsimileTelephone:P(H),ContactElectronicMailAddress:P(H)}),jN=j(Li,{ContactPerson:P(H),ContactOrganization:P(H)}),zN=j(Li,{AddressType:P(H),Address:P(H),City:P(H),StateOrProvince:P(H),PostCode:P(H),Country:P(H)}),VN=j(Li,{Format:ji(H)}),F_=j(Li,{Name:P(H),Title:P(H),Abstract:P(H),KeywordList:P(j_),CRS:Tt(H),EX_GeographicBoundingBox:P(tF),BoundingBox:Tt(eF),Dimension:Tt(uF),Attribution:P($N),AuthorityURL:Tt(pF),Identifier:Tt(H),MetadataURL:Tt(fF),DataURL:Tt($r),FeatureListURL:Tt($r),Style:Tt(gF),MinScaleDenominator:P(lt),MaxScaleDenominator:P(lt),Layer:Tt(U_)}),WN=j(Li,{Title:P(H),OnlineResource:P(el),LogoURL:P(B_)}),YN=j(Li,{westBoundLongitude:P(lt),eastBoundLongitude:P(lt),southBoundLatitude:P(lt),northBoundLatitude:P(lt)}),HN=j(Li,{GetCapabilities:P(np),GetMap:P(np),GetFeatureInfo:P(np)}),qN=j(Li,{Format:Tt(H),DCPType:Tt(hF)}),XN=j(Li,{HTTP:P(dF)}),ZN=j(Li,{Get:P($r),Post:P($r)}),KN=j(Li,{Name:P(H),Title:P(H),Abstract:P(H),LegendURL:Tt(B_),StyleSheetURL:P($r),StyleURL:P($r)}),JN=j(Li,{Format:P(H),OnlineResource:P(el)}),QN=j(Li,{Keyword:ji(H)});function $N(i,t){return re({},WN,i,t)}function eF(i,t){var e=[Br(i.getAttribute("minx")),Br(i.getAttribute("miny")),Br(i.getAttribute("maxx")),Br(i.getAttribute("maxy"))],n=[Br(i.getAttribute("resx")),Br(i.getAttribute("resy"))];return{crs:i.getAttribute("CRS"),extent:e,res:n}}function tF(i,t){var e=re({},YN,i,t);if(e){var n=e.westBoundLongitude,r=e.southBoundLatitude,o=e.eastBoundLongitude,a=e.northBoundLatitude;if(!(n===void 0||r===void 0||o===void 0||a===void 0))return[n,r,o,a]}}function iF(i,t){return re({},NN,i,t)}function nF(i,t){return re({},UN,i,t)}function rF(i,t){return re({},BN,i,t)}function oF(i,t){return re({},jN,i,t)}function aF(i,t){return re({},zN,i,t)}function sF(i,t){return re([],VN,i,t)}function lF(i,t){var e=re({},F_,i,t);return e.Layer===void 0?Object.assign(e,U_(i,t)):e}function U_(i,t){var e=t[t.length-1],n=re({},F_,i,t);if(n){var r=fa(i.getAttribute("queryable"));r===void 0&&(r=e.queryable),n.queryable=r!==void 0?r:!1;var o=Wc(i.getAttribute("cascaded"));o===void 0&&(o=e.cascaded),n.cascaded=o;var a=fa(i.getAttribute("opaque"));a===void 0&&(a=e.opaque),n.opaque=a!==void 0?a:!1;var s=fa(i.getAttribute("noSubsets"));s===void 0&&(s=e.noSubsets),n.noSubsets=s!==void 0?s:!1;var l=Br(i.getAttribute("fixedWidth"));l||(l=e.fixedWidth),n.fixedWidth=l;var u=Br(i.getAttribute("fixedHeight"));u||(u=e.fixedHeight),n.fixedHeight=u;var c=["Style","CRS","AuthorityURL"];c.forEach(function(d){if(d in e){var p=n[d]||[];n[d]=p.concat(e[d])}});var h=["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"];return h.forEach(function(d){if(!(d in n)){var p=e[d];n[d]=p}}),n}}function uF(i,t){var e={name:i.getAttribute("name"),units:i.getAttribute("units"),unitSymbol:i.getAttribute("unitSymbol"),default:i.getAttribute("default"),multipleValues:fa(i.getAttribute("multipleValues")),nearestValue:fa(i.getAttribute("nearestValue")),current:fa(i.getAttribute("current")),values:H(i)};return e}function $r(i,t){return re({},JN,i,t)}function cF(i,t){return re({},HN,i,t)}function hF(i,t){return re({},XN,i,t)}function dF(i,t){return re({},ZN,i,t)}function np(i,t){return re({},qN,i,t)}function B_(i,t){var e=$r(i,t);if(e){var n=[Wc(i.getAttribute("width")),Wc(i.getAttribute("height"))];return e.size=n,e}}function pF(i,t){var e=$r(i,t);if(e)return e.name=i.getAttribute("name"),e}function fF(i,t){var e=$r(i,t);if(e)return e.type=i.getAttribute("type"),e}function gF(i,t){return re({},KN,i,t)}function j_(i,t){return re([],QN,i,t)}const vF=FN;var mF=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),mn=[null,"http://www.opengis.net/ows/1.1"],yF=j(mn,{ServiceIdentification:P(VF),ServiceProvider:P(YF),OperationsMetadata:P(jF)}),AF=function(i){mF(t,i);function t(){return i.call(this)||this}return t.prototype.readFromNode=function(e){var n=re({},yF,e,[]);return n||null},t}(j0),_F=j(mn,{DeliveryPoint:P(H),City:P(H),AdministrativeArea:P(H),PostalCode:P(H),Country:P(H),ElectronicMailAddress:P(H)}),CF=j(mn,{Value:Tt(HF)}),IF=j(mn,{AllowedValues:P(GF)}),EF=j(mn,{Phone:P(zF),Address:P(LF)}),wF=j(mn,{HTTP:P(UF)}),SF=j(mn,{Get:Tt(FF),Post:void 0}),PF=j(mn,{DCP:P(NF)}),xF=j(mn,{Operation:BF}),MF=j(mn,{Voice:P(H),Facsimile:P(H)}),TF=j(mn,{Constraint:Tt(kF)}),bF=j(mn,{IndividualName:P(H),PositionName:P(H),ContactInfo:P(DF)}),RF=j(mn,{Abstract:P(H),AccessConstraints:P(H),Fees:P(H),Title:P(H),ServiceTypeVersion:P(H),ServiceType:P(H)}),OF=j(mn,{ProviderName:P(H),ProviderSite:P(el),ServiceContact:P(WF)});function LF(i,t){return re({},_F,i,t)}function GF(i,t){return re({},CF,i,t)}function kF(i,t){var e=i.getAttribute("name");if(e)return re({name:e},IF,i,t)}function DF(i,t){return re({},EF,i,t)}function NF(i,t){return re({},wF,i,t)}function FF(i,t){var e=el(i);if(e)return re({href:e},TF,i,t)}function UF(i,t){return re({},SF,i,t)}function BF(i,t){var e=i.getAttribute("name"),n=re({},PF,i,t);if(n){var r=t[t.length-1];r[e]=n}}function jF(i,t){return re({},xF,i,t)}function zF(i,t){return re({},MF,i,t)}function VF(i,t){return re({},RF,i,t)}function WF(i,t){return re({},bF,i,t)}function YF(i,t){return re({},OF,i,t)}function HF(i,t){return H(i)}const qF=AF;var XF=globalThis&&globalThis.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Rr=[null,"http://www.opengis.net/wmts/1.0"],tl=[null,"http://www.opengis.net/ows/1.1"],ZF=j(Rr,{Contents:P(s4)}),KF=function(i){XF(t,i);function t(){var e=i.call(this)||this;return e.owsParser_=new qF,e}return t.prototype.readFromNode=function(e){var n=e.getAttribute("version");n&&(n=n.trim());var r=this.owsParser_.readFromNode(e);return r?(r.version=n,r=re(r,ZF,e,[]),r||null):null},t}(j0),JF=j(Rr,{Layer:Tt(l4),TileMatrixSet:Tt(u4)}),QF=j(Rr,{Style:Tt(c4),Format:Tt(H),TileMatrixSetLink:Tt(h4),Dimension:Tt(d4),ResourceURL:Tt(p4)},j(tl,{Title:P(H),Abstract:P(H),WGS84BoundingBox:P(z_),Identifier:P(H)})),$F=j(Rr,{LegendURL:Tt(f4)},j(tl,{Title:P(H),Identifier:P(H)})),e4=j(Rr,{TileMatrixSet:P(H),TileMatrixSetLimits:P(v4)}),t4=j(Rr,{TileMatrixLimits:ji(m4)}),i4=j(Rr,{TileMatrix:P(H),MinTileRow:P($i),MaxTileRow:P($i),MinTileCol:P($i),MaxTileCol:P($i)}),n4=j(Rr,{Default:P(H),Value:Tt(H)},j(tl,{Identifier:P(H)})),r4=j(tl,{LowerCorner:ji(Kp),UpperCorner:ji(Kp)}),o4=j(Rr,{WellKnownScaleSet:P(H),TileMatrix:Tt(g4)},j(tl,{SupportedCRS:P(H),Identifier:P(H),BoundingBox:P(z_)})),a4=j(Rr,{TopLeftCorner:P(Kp),ScaleDenominator:P(lt),TileWidth:P($i),TileHeight:P($i),MatrixWidth:P($i),MatrixHeight:P($i)},j(tl,{Identifier:P(H)}));function s4(i,t){return re({},JF,i,t)}function l4(i,t){return re({},QF,i,t)}function u4(i,t){return re({},o4,i,t)}function c4(i,t){var e=re({},$F,i,t);if(e){var n=i.getAttribute("isDefault")==="true";return e.isDefault=n,e}}function h4(i,t){return re({},e4,i,t)}function d4(i,t){return re({},n4,i,t)}function p4(i,t){var e=i.getAttribute("format"),n=i.getAttribute("template"),r=i.getAttribute("resourceType"),o={};return e&&(o.format=e),n&&(o.template=n),r&&(o.resourceType=r),o}function z_(i,t){var e=re([],r4,i,t);if(e.length==2)return Cn(e)}function f4(i,t){var e={};return e.format=i.getAttribute("format"),e.href=el(i),e}function Kp(i,t){var e=H(i).split(/\s+/);if(!(!e||e.length!=2)){var n=+e[0],r=+e[1];if(!(isNaN(n)||isNaN(r)))return[n,r]}}function g4(i,t){return re({},a4,i,t)}function v4(i,t){return re([],t4,i,t)}function m4(i,t){return re({},i4,i,t)}const y4=KF;var V_={exports:{}};(function(i,t){(function(e,n){i.exports=n()})(ds,function(){var e={};e=function(){this.listeners={}},e.prototype={addEventListener:function(r,o,a){for(var s=[],l=arguments.length,u=0;u<l;u++)s.push(arguments[u]);s=s.length>3?s.splice(3,s.length-1):[],typeof this.listeners[r]<"u"?this.listeners[r].push({scope:a,callback:o,args:s}):this.listeners[r]=[{scope:a,callback:o,args:s}]},removeEventListener:function(r,o,a){if(typeof this.listeners[r]<"u"){for(var s=this.listeners[r].length,l=[],u=0;u<s;u++){var c=this.listeners[r][u];c.scope==a&&c.callback==o||l.push(c)}this.listeners[r]=l}},hasEventListener:function(r,o,a){if(typeof this.listeners[r]<"u"){var s=this.listeners[r].length;if(o===void 0&&a===void 0)return s>0;for(var l=0;l<s;l++){var u=this.listeners[r][l];if((!a||u.scope==a)&&u.callback==o)return!0}}return!1},dispatch:function(r,o){for(var a={type:r,target:o},s=[],l=arguments.length,u=0;u<l;u++)s.push(arguments[u]);if(s=s.length>2?s.splice(2,s.length-1):[],s=[a].concat(s),typeof this.listeners[r]<"u")for(var c=this.listeners[r].slice(),h=c.length,u=0;u<h;u++){var d=c[u];if(d&&d.callback){var p=s.concat(d.args);d.callback.apply(d.scope,p)}}},getEvents:function(){var r="";for(var o in this.listeners)for(var a=this.listeners[o].length,s=0;s<a;s++){var l=this.listeners[o][s];r+=l.scope&&l.scope.className?l.scope.className:"anonymous",r+=" listen for '"+o+`'
`}return r}};var n=new e;return n})})(V_);var A4=V_.exports;const Ri=fu(A4);var rn={onloaded:"editor:onloaded",layer:{onclickvisibility:"editor:layer:onclickvisibility",onclickclone:"editor:layer:onclickclone",onclickremove:"editor:layer:onclickremove"},legend:{onclickedition:"editor:legend:onclickedition",onchangevalue:"editor:legend:onchangevalue"},group:{oncollapse:"editor:group:oncollapse"},style:{oneditjson:"editor:style:oneditjson",scale:{onchangemin:"editor:style:scale:onchangemin",onchangemax:"editor:style:scale:onchangemax"}},filter:{oneditjson:"editor:filter:oneditjson"},themes:{onclickimage:"editor:themes:onclickimage",onclicktitle:"editor:themes:onclicktitle"},search:{onsubmit:"editor:search:onsubmit",onautocomplete:"editor:search:onautocomplete"}},eo=Ye.getLogger("editor-style");function Oi(i){if(eo.trace("[constructor] Style",i),this.options=i||{target:null,position:0,tools:null,title:null,obj:null},!(this instanceof Oi))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}Oi.prototype.constructor=Oi;Oi.prototype._initialize=function(){this.id=this.options.id||null,this.options.target,this.options.position||(this.options.position=0);var i={scale:!0,edition:!1};this.options.tools||(this.options.tools=i),he.mergeParams(this.options.tools,i,!1),this.options.obj||(this.options.obj={paint:{},layout:{}}),this.options.title||(this.options.title="JSON Styles :"),this.container=null,this.name={target:"GPEditorMapBoxStyleTarget",container:"GPEditorMapBoxStyleContainer",containerjson:"GPEditorMapBoxStyleJsonContainer",jsonlabel:"GPEditorMapBoxStyleJsonTitle",jsondisplay:"GPEditorMapBoxStyleJsonDisplay",containertoolsscale:"GPEditorMapBoxStyleToolsScaleContainer",scaletitle:"GPEditorMapBoxStyleScaleTitle",containertoolsminscale:"GPEditorMapBoxStyleToolsScaleMinContainer",scalelabelmin:"GPEditorMapBoxStyleScaleLabelMin",scaleinputmin:"GPEditorMapBoxStyleScaleInputMin",containertoolsmaxscale:"GPEditorMapBoxStyleToolsScaleMaxContainer",scalelabelmax:"GPEditorMapBoxStyleScaleLabelMax",scaleinputmax:"GPEditorMapBoxStyleScaleInputMax",containertoolsedit:"GPEditorMapBoxStyleToolsEditionContainer"}};Oi.prototype._initContainer=function(){var i=this,t=!1,e=JSON.parse(JSON.stringify(this.options.obj)),n={};e.paint&&(t=!0,n.paint=e.paint,Object.keys(e.paint).length===0&&eo.info("tag 'paint' is empty !")),e.layout&&(t=!0,n.layout=e.layout,e.layout.visibility&&delete n.visibility,Object.keys(e.layout).length===0&&eo.info("tag 'layout' is empty !"));var r=document.createElement("div");r.className=this.name.container;var o=null;if(t){var a=JSON.stringify(n,null,4);o=this._syntaxHighlight(a)}var s=document.createElement("div");s.className=this.name.containerjson;var l=document.createElement("label");l.className=this.name.jsonlabel,l.innerHTML=this.options.title,s.appendChild(l);var u=document.createElement("pre");u.className=this.name.jsondisplay,u.innerHTML=o,u.addEventListener?u.addEventListener("click",function(c){i.options.tools.edition&&i.onEditJsonStyleMapBox(c)}):u.attachEvent&&u.attachEvent("onclick",function(c){i.options.tools.edition&&i.onEditJsonStyleMapBox(c)}),s.appendChild(u),r.appendChild(s),this.options.tools.scale&&r.appendChild(this._createElementToolsScale({min:n.layout?n.layout.minzoom:0,max:n.layout?n.layout.maxzoom:21})),this.options.tools.edition&&r.appendChild(this._createElementToolsEdition()),this.container=r};Oi.prototype._createElementToolsScale=function(i){eo.trace("_createElementToolsScale");var t=this,e=this.options.obj,n=document.createElement("div");n.className=this.name.containertoolsscale;var r=document.createElement("div");r.className=this.name.containertoolsminscale;var o=document.createElement("label");o.className=this.name.scalelabelmin,o.innerHTML="min :",r.appendChild(o);var a=document.createElement("input");a.className=this.name.scaleinputmin,a.type="range",a.value=i.min||0,a.title=i.min||0,a.disabled=!1,a.min=0,a.max=21,a.data=e,a.addEventListener?a.addEventListener("change",function(c){t.onChangeStyleScaleMinMapBox(c)}):a.appendChild&&a.appendChild("onchange",function(c){t.onChangeStyleScaleMinMapBox(c)}),r.appendChild(a),n.appendChild(r);var s=document.createElement("div");s.className=this.name.containertoolsmaxscale;var l=document.createElement("label");l.className=this.name.scalelabelmax,l.innerHTML="max :",s.appendChild(l);var u=document.createElement("input");return u.className=this.name.scaleinputmin,u.type="range",u.value=i.max||21,u.title=i.max||21,u.disabled=!1,u.min=0,u.max=21,u.data=e,u.addEventListener?u.addEventListener("change",function(c){t.onChangeStyleScaleMaxMapBox(c)}):u.appendChild&&u.appendChild("onchange",function(c){t.onChangeStyleScaleMaxMapBox(c)}),s.appendChild(u),n.appendChild(s),n};Oi.prototype._createElementToolsEdition=function(){eo.warn("_createElementToolsEdition, it's not yet implemented !");var i=document.createElement("div");return i.className=this.name.containertoolsedit,i};Oi.prototype._syntaxHighlight=function(i){return i=i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),i.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+-]?\d+)?)/g,function(t){var e="gp-json-number";return/^"/.test(t)?/:$/.test(t)?e="gp-json-key":e="gp-json-string":/true|false/.test(t)?e="gp-json-boolean":/null/.test(t)&&(e="gp-json-null"),"<span class='"+e+"'>"+t+"</span>"})};Oi.prototype.add=function(){if(!this.options.target){if(!document.getElementById(this.name.target)){var i=document.createElement("div");i.id=this.name.target;var t=document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0];t.appendChild(i)}this.options.target=document.getElementById(this.name.target)}return this.container&&this.options.target.appendChild(this.container),this};Oi.prototype.display=function(i){return eo.trace("display()",i),typeof i<"u"&&(this.container.style.display=i?"flex":"none"),this.container.style.display==="flex"};Oi.prototype.getContainer=function(){return this.container};Oi.prototype.onEditJsonStyleMapBox=function(i){eo.trace("onEditJsonStyleMapBox",i),i.editorID=this.id,i.data=this.options,Ri.dispatch(rn.style.oneditjson,i)};Oi.prototype.onChangeStyleScaleMinMapBox=function(i){eo.trace("onChangeStyleScaleMinMapBox",i),i.editorID=this.id,i.data=this.options,Ri.dispatch(rn.style.scale.onchangemin,i)};Oi.prototype.onChangeStyleScaleMaxMapBox=function(i){eo.trace("onChangeStyleScaleMaxMapBox",i),i.editorID=this.id,i.data=this.options,Ri.dispatch(rn.style.scale.onchangemax,i)};var ed=Ye.getLogger("editor-themes");function Un(i){if(ed.trace("[constructor] Themes",i),this.options=i||{},!(this instanceof Un))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}Un.prototype.constructor=Un;Un.prototype._initialize=function(){this.id=this.options.id||null,this.options.target;var i={thumbnails:!0,button:{visible:!0,type:"radio"}};(!this.options.tools||Object.keys(this.options.tools).length===0)&&(this.options.tools=i),he.mergeParams(this.options.tools,i,!1),(typeof this.options.obj>"u"||this.options.obj===null||!this.options.obj)&&(this.options.obj={themesSummary:"",themes:[]}),this.container=null,this.name={target:"GPEditorMapBoxThemeTarget",container:"GPEditorMapBoxThemesContainer",containertheme:"GPEditorMapBoxThemeContainer",containerthemeID:"GPEditorMapBoxThemeContainer_ID_",input:"GPEditorMapBoxThemeInput",inputID:"GPEditorMapBoxThemeInput_ID_",label:"GPEditorMapBoxThemeTitle",labelID:"GPEditorMapBoxThemeTitle_ID_",image:"GPEditorMapBoxThemeImage",imageID:"GPEditorMapBoxThemeImage_ID_",message:"GPEditorMapBoxThemeMessage"}};Un.prototype._initContainer=function(){var i=this,t=this.options.obj,e=this.id||Re.generate(),n=document.createElement("div");n.className=this.name.container,n.title=t.themesSummary||"";var r=t.themes;if(r)for(var o=0;o<r.length;o++){var a=r[o],s=document.createElement("div");s.id=this.name.containerthemeID+o+"_"+e,s.className=this.name.containertheme,s.tabIndex=o;var l=a.url,u=a.selected||!1;if(l){var c=this.options.tools.button;if(c.visible){var h=c.type==="checkbox"?"checkbox":"radio",d=document.createElement("input");d.type=h,d.id=this.name.inputID+o+"_"+e,d.className=this.name.input,d.name=e,d.checked=u,d.data=l,d.addEventListener?d.addEventListener("click",function(v){i.onClickThemeTitleMapBox(v)}):d.attachEvent&&d.attachEvent("onclick",function(v){i.onClickThemeTitleMapBox(v)}),s.appendChild(d)}if(this.options.tools.thumbnails&&a.thumbnail){var p=document.createElement("img");p.id=this.name.imageID+o+"_"+e,p.className=this.name.image,p.src=a.thumbnail,p.alt=a.thumbnail,p.title=a.description||"",p.data=l,p.addEventListener?p.addEventListener("click",function(v){i.onClickThemeImageMapBox(v);var y=v.target.parentElement.childNodes;if(y){var m=y[0];m.tagName.toLowerCase()==="input"&&(m.checked=!m.checked)}}):p.attachEvent&&p.attachEvent("onclick",function(v){i.onClickThemeImageMapBox(v);var y=v.target.parentElement.childNodes;if(y){var m=y[0];m.tagName.toLowerCase()==="input"&&(m.checked=!m.checked)}}),s.appendChild(p)}if(a.name){var f=document.createElement("label");f.id=this.name.labelID+o+"_"+e,this.options.tools.button.visible&&(f.htmlFor=d.id),f.className=this.name.label,f.innerHTML=a.name,f.title=a.description||"",f.data=l,this.options.tools.button.visible||(f.addEventListener?f.addEventListener("click",function(v){i.onClickThemeTitleMapBox(v)}):f.attachEvent&&f.attachEvent("onclick",function(v){i.onClickThemeTitleMapBox(v)})),s.appendChild(f)}}else{var g=document.createElement("label");g.className=this.name.message,g.innerHTML="Thème non disponible...",s.appendChild(g)}n.appendChild(s)}this.container=n};Un.prototype.add=function(){if(!this.options.target){if(!document.getElementById(this.name.target)){var i=document.createElement("div");i.id=this.name.target;var t=document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0];t.appendChild(i)}this.options.target=document.getElementById(this.name.target)}return this.container&&this.options.target.appendChild(this.container),this};Un.prototype.display=function(i){return ed.trace("display()",i),typeof i<"u"&&(this.container.style.display=i?"flex":"none"),this.container.style.display==="flex"};Un.prototype.getContainer=function(){return this.container};Un.prototype.onClickThemeImageMapBox=function(i){if(ed.trace("onClickThemeImageMapBox",i),i.editorID=this.id,i.data=this.options,this.options.tools.button.type==="checkbox")for(var t=i.target.previousSibling.id.substring(i.target.previousSibling.id.lastIndexOf("_")+1),e=document.getElementsByClassName(this.name.input),n=0;n<e.length;n++){var r=e[n];if(r.id!==i.target.previousSibling.id){var o=r.id.substring(r.id.lastIndexOf("_")+1);o===t&&(r.checked=!1)}}Ri.dispatch(rn.themes.onclickimage,i)};Un.prototype.onClickThemeTitleMapBox=function(i){if(ed.trace("onClickThemeTitleMapBox",i),i.editorID=this.id,i.data=this.options,this.options.tools.button.type==="checkbox")for(var t=i.target.id.substring(i.target.id.lastIndexOf("_")+1),e=document.getElementsByClassName(this.name.input),n=0;n<e.length;n++){var r=e[n];if(r.id!==i.target.id){var o=r.id.substring(r.id.lastIndexOf("_")+1);o===t&&(r.checked=!1)}}Ri.dispatch(rn.themes.onclicktitle,i)};var td=Ye.getLogger("editor-filter");function Bn(i){if(td.trace("[constructor] Filter",i),this.options=i||{target:null,position:0,tools:null,title:null,obj:null},!(this instanceof Bn))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}Bn.prototype.constructor=Bn;Bn.prototype._initialize=function(){this.id=this.options.id||null,this.options.target,this.options.position||(this.options.position=0);var i={edition:!1};this.options.tools||(this.options.tools=i),he.mergeParams(this.options.tools,i,!1),this.options.obj||(this.options.obj={filter:[]}),this.options.title||(this.options.title="JSON Filtres :"),this.container=null,this.name={target:"GPEditorMapBoxFilterTarget",container:"GPEditorMapBoxFilterContainer",containerjson:"GPEditorMapBoxFilterJsonContainer",jsonlabel:"GPEditorMapBoxFilterTitleJson",jsondisplay:"GPEditorMapBoxFilterDisplayJson",containertoolsedit:"GPEditorMapBoxFilterToolsEditionContainer"}};Bn.prototype._initContainer=function(){var i=this,t=!1,e=JSON.parse(JSON.stringify(this.options.obj));e.filter&&(t=!0,e.filter.length===0&&td.info("tag 'filter' is empty !"));var n=document.createElement("div");n.className=this.name.container;var r=null;t&&(r=JSON.stringify(e.filter,null,4));var o=document.createElement("div");o.className=this.name.containerjson;var a=document.createElement("label");a.className=this.name.jsonlabel,a.innerHTML=this.options.title,o.appendChild(a);var s=document.createElement("pre");if(s.className=this.name.jsondisplay,s.innerHTML=r,s.addEventListener?s.addEventListener("click",function(u){i.options.tools.edition&&i.onEditJsonFilterMapBox(u)}):s.attachEvent&&s.attachEvent("onclick",function(u){i.options.tools.edition&&i.onEditJsonFilterMapBox(u)}),o.appendChild(s),n.appendChild(o),this.options.tools.edition){var l=document.createElement("div");l.className=this.name.containertoolsedit,n.appendChild(l)}this.container=n};Bn.prototype.add=function(){if(!this.options.target){if(!document.getElementById(this.name.target)){var i=document.createElement("div");i.id=this.name.target;var t=document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0];t.appendChild(i)}this.options.target=document.getElementById(this.name.target)}return this.container&&this.options.target.appendChild(this.container),this};Bn.prototype.display=function(i){return td.trace("display()",i),typeof i<"u"&&(this.container.style.display=i?"flex":"none"),this.container.style.display==="flex"};Bn.prototype.getContainer=function(){return this.container};Bn.prototype.onEditJsonFilterMapBox=function(i){td.trace("onEditJsonFilterMapBox",i),i.editorID=this.id,i.data=this.options,Ri.dispatch(rn.filter.oneditjson,i)};var tn=Ye.getLogger("editor-legend");function Nt(i){if(tn.trace("[constructor] Legend",i),this.options=i||{target:null,position:0,sprites:null,obj:null},!(this instanceof Nt))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}Nt.prototype.constructor=Nt;Nt.PROPERTIES={line:["line-color","line-dasharray","line-opacity","line-width"],fill:["fill-color","fill-opacity","fill-outline-color","fill-pattern"],background:["background-color","background-opacity","background-pattern"],circle:["circle-color","circle-opacity","circle-stroke-color","circle-stroke-opacity","circle-stroke-width"],icon:["icon-color","icon-image","icon-opacity","__icon-size"],text:["__text-anchor","text-color","text-field","__text-font","__text-opacity","__text-size"]};Nt.prototype._initialize=function(){this.id=this.options.id||null,this.options.target,this.options.position||(this.options.position=0),this.options.obj||(this.options.obj={title:"vide...",editable:!0,paint:{"fill-color":"#FFFFFF"}});var i=this.options.obj.editable;this.editable=typeof i<"u"?i:!1,this.legendRender={type:"fill",values:{width:1,stroke:"#FFFFFF",color:"#000000",opacity:1}},this.container=null,this.rendercontainer=null,this.toolscontainer=null,this.name={target:"GPEditorMapBoxLegendTarget",container:"GPEditorMapBoxLegendContainer",containerlegendrender:"GPEditorMapBoxLegendRenderContainer",legendrender:"GPEditorMapBoxLegendRender",legendeditable:"GPEditorMapBoxLegendEditable",legendtitle:"GPEditorMapBoxLegendTitle",containerlegendtools:"GPEditorMapBoxLegendToolsContainer"},this.labels={"line-color":"Couleur du trait","line-width":"Epaisseur du trait","line-opacity":"Opacité du trait","fill-color":"Couleur de remplissage","fill-opacity":"Opacité du remplissage"}};Nt.prototype._initContainer=function(){var i=this.options.obj,t=document.createElement("div");t.className=this.name.container;var e=Object.assign({},i.paint,i.layout),n=Object.keys(e);if(n.length===0){tn.info("tag 'paint' or 'layout' is empty !");return}for(var r={},o=!1,a=0;a<n.length;a++){var s=n[a];if(/fill-/.test(s)||/line-/.test(s)||/circle-/.test(s)||/background-/.test(s)||/text-/.test(s)||/icon-/.test(s)){o=!0;var l=i.title||"",u=s.split("-")[0];(u==="text"||u==="icon")&&(u="symbol"),this.legendRender=this._getProperties(u,e),r={edit:this.editable,title:l,type:this.legendRender.type,values:this.legendRender.values},t.appendChild(this._createElementIconLegend(r));break}}o||(r={edit:this.editable,title:"",type:this.legendRender.type,values:this.legendRender.values},t.appendChild(this._createElementIconLegend(r)),tn.warn("legend type unknown, default legend used...")),this.toolscontainer=this._createElementEditionLegend(r),t.appendChild(this.toolscontainer),this.container=t};Nt.prototype._getProperties=function(i,t){if(i==="symbol"){var e=t["text-field"],n=t["icon-image"];if(i=e&&n?"icon":e?"text":n?"icon":"unknow",i==="unknow"){tn.warn("type unknow !?");return}}var r={};for(const l in t)if(Object.hasOwnProperty.call(t,l)){const u=t[l];if(Nt.PROPERTIES[i].includes(l)){var o=l.replace(i,"").slice(1),a=this._getValue(u);if(a){if((o==="pattern"||o==="image")&&(!this.options.sprites||!this.options.sprites.json||!this.options.sprites.json[a])){var s=i+":"+o;tn.warn("sprites mandatory for key ",s);break}r[o]=a}}else tn.warn("property not supported : ",l)}return{type:i,values:r}};Nt.prototype._renderThumbnail=function(i,t){var e=this.rendercontainer;if(!e)return!1;var n=null,r=3;switch(t.color||(t.color="#FFFFFF"),i){case"text":var o="font-size: 5em;font-weight: bold;";n=`url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' viewBox='0 0 100 100'><text x='50' y='50' fill='%color%' fill-opacity='%opacity%'  text-anchor='middle' dominant-baseline='central' style='%style%'> T </text></svg>")`,e.style.background=n.replace("%color%",t.color.indexOf("rgb")===0?t.color:ge.hexToRgba(t.color,1)).replace("%opacity%",t.opacity||1).replace("%style%",o);break;case"icon":if(t.image)n="<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' width='27px' height='27px' x='0' y='0' viewBox='%x% %y% %w% %h%'><image width='%W%px' height='%H%px' href='%URL%'/></svg>".replace("%x%",this.options.sprites.json[t.image].x).replace("%y%",this.options.sprites.json[t.image].y).replace(/%w%/g,this.options.sprites.json[t.image].width).replace(/%h%/g,this.options.sprites.json[t.image].height).replace("%W%",this.options.sprites.size.w).replace("%H%",this.options.sprites.size.h).replace("%URL%",this.options.sprites.url),e.innerHTML=n;else{var a="fill: transparent;stroke-width: 10;";n=`url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' viewBox='0 0 100 100'><path d='M 50,20 80,82.5 20,82.5 z' stroke='%color%' style='%style%'/></svg>")`,e.style.background=n.replace("%color%",t.color.indexOf("rgb")===0?t.color:ge.hexToRgba(t.color,1)).replace("%style%",a)}break;case"line":var s=Array.isArray(t.dasharray)?t.dasharray.join(" "):0;n=`url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' viewBox='0 0 100 100'><line x1='0' y1='100' x2='100' y2='0' stroke='%color%' stroke-width='%stroke-width%' stroke-opacity='%stroke-opacity%' stroke-dasharray='%stroke-dasharray%' /></svg>")`,e.style.background=n.replace("%color%",t.color.indexOf("rgb")===0?t.color:ge.hexToRgba(t.color,1)).replace("%stroke-opacity%",t.opacity||1).replace("%stroke-dasharray%",s).replace("%stroke-width%",(t.width||0)*r);break;case"circle":var l=t["stroke-color"]||"#FFFFFF";n=`url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' viewBox='0 0 100 100'><circle cx='50' cy='50' r='40' stroke='%stroke-color%' stroke-width='%stroke-width%' stroke-opacity='%strock-opacity%' fill='%color%' fill-opacity='%opacity%' /></svg>")`,e.style.background=n.replace("%color%",t.color.indexOf("rgb")===0?t.color:ge.hexToRgba(t.color,1)).replace("%opacity%",t.opacity||1).replace("%stroke-color%",l.indexOf("rgb")===0?l:ge.hexToRgba(l,1)).replace("%stroke-opacity%",t["stroke-opacity"]||1).replace("%stroke-width%",(t["stroke-width"]||0)*r);break;case"background":case"fill":if(t.pattern)n="<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' width='27px' height='27px' x='0' y='0' viewBox='%x% %y% %w% %h%'><image width='%W%px' height='%H%px' href='%URL%'/></svg>".replace("%x%",this.options.sprites.json[t.pattern].x).replace("%y%",this.options.sprites.json[t.pattern].y).replace(/%w%/g,this.options.sprites.json[t.pattern].width).replace(/%h%/g,this.options.sprites.json[t.pattern].height).replace("%W%",this.options.sprites.size.w).replace("%H%",this.options.sprites.size.h).replace("%URL%",this.options.sprites.url),e.innerHTML=n;else{var u=t["outline-color"]||"#FFFFFF";n=`url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' viewBox='0 0 100 100'><rect x='0' y='0' width='100' height='100' rx='5' ry='5' stroke='%stroke-color%' stroke-width='3' fill='%color%' fill-opacity='%opacity%' /></svg>")`,e.style.background=n.replace("%color%",t.color.indexOf("rgb")===0?t.color:ge.hexToRgba(t.color,1)).replace("%opacity%",t.opacity||1).replace("%stroke-color%",u.indexOf("rgb")===0?u:ge.hexToRgba(u,1))}break;default:return tn.warn("type not found, no thumbnail..."),!1}return!0};Nt.prototype._getValue=function(i){var t=null;if(typeof i=="string")t=i;else if(typeof i=="number")t=i;else if(Array.isArray(i)){var e=!0;i.forEach(r=>{typeof r!="number"&&(e=!1)}),e&&(t=i)}else if(typeof i=="object"){if(t=null,"stops"in i){i.stops.sort((r,o)=>{var a=r[0],s=o[0];return a>s?-1:a<s?1:0});var n=i.stops.slice(-1);t=n[0][1]}}else tn.warn("value not supported !");return t};Nt.prototype._createElementIconLegend=function(i){var t=this,e=document.createElement("div");e.className=this.name.containerlegendrender;var n=this.rendercontainer=document.createElement("div");n.className=this.name.legendrender,i.edit&&(n.className+=" ",n.className+=this.name.legendeditable,n.addEventListener?n.addEventListener("click",function(a){t.onEditionLegendMapBox(a)}):n.attachEvent&&n.attachEvent("onclick",function(a){t.onEditionLegendMapBox(a)}));var r=i.type;this._renderThumbnail(r,i.values)?n.className+=i.edit?" legend-"+r:" legend-"+r+"-not-editable":n.className+=" legend-unknow",e.appendChild(n);var o=document.createElement("span");return o.className=this.name.legendtitle,o.innerHTML=i.title||"",e.appendChild(o),e};Nt.prototype._createElementEditionLegend=function(i){var t=this,e=document.createElement("div");if(e.className=this.name.containerlegendtools,!i.edit)return e;switch(i.type){case"line":n.call(t),r.call(t),o.call(t);break;case"background":case"fill":a.call(t),s.call(t);break}function n(){var l=document.createElement("div");l.className="legend-styling-div";var u=document.createElement("label");u.className="legend-line",u.htmlFor=this.id?"line-color-"+this.id:"line-color",u.innerHTML=this.labels["line-color"];var c=document.createElement("input");c.className="legend-styling",c.id=this.id?"line-color-"+this.id:"line-color",c.title="Selectionner une couleur de trait",c.type="color",c.value=i.values.color,c.setAttribute("data-id","line-color"),c.addEventListener?c.addEventListener("change",function(h){t._renderThumbnail(i.type,Object.assign(i.values,{color:h.target.value})),t.onChangeValueLegendMapBox(h)}):c.attachEvent&&c.attachEvent("onchange",function(h){t._renderThumbnail(i.type,Object.assign(i.values,{color:h.target.value})),t.onChangeValueLegendMapBox(h)}),l.appendChild(u),l.appendChild(c),e.appendChild(l)}function r(){var l=document.createElement("div");l.className="legend-styling-div";var u=document.createElement("label");u.className="legend-line",u.htmlFor=this.id?"line-width-"+this.id:"line-width",u.innerHTML=this.labels["line-width"];var c=document.createElement("input");c.className="legend-styling",c.id=this.id?"line-width-"+this.id:"line-width",c.title=i.values.width,c.type="range",c.min="0",c.max="10",c.step="1",c.defaultValue=i.values.width,c.setAttribute("data-id","line-width"),c.addEventListener?c.addEventListener("change",function(h){tn.trace(h),h.target.title=h.target.value,t._renderThumbnail(i.type,Object.assign(i.values,{width:h.target.value})),t.onChangeValueLegendMapBox(h)}):c.attachEvent&&c.attachEvent("onchange",function(h){tn.trace(h),h.target.title=h.target.value,t._renderThumbnail(i.type,Object.assign(i.values,{width:h.target.value})),t.onChangeValueLegendMapBox(h)}),l.appendChild(u),l.appendChild(c),e.appendChild(l)}function o(){var l=document.createElement("div");l.className="legend-styling-div";var u=document.createElement("label");u.className="legend-line",u.htmlFor=this.id?"line-opacity-"+this.id:"line-opacity",u.innerHTML=this.labels["line-opacity"];var c=document.createElement("input");c.className="legend-styling",c.id=this.id?"line-opacity-"+this.id:"line-opacity",c.title=i.values.opacity,c.type="range",c.min="0",c.max="1",c.step="0.1",c.defaultValue=i.values.opacity,c.setAttribute("data-id","line-opacity"),c.addEventListener?c.addEventListener("change",function(h){tn.trace(h),h.target.title=h.target.value,t._renderThumbnail(i.type,Object.assign(i.values,{opacity:h.target.value})),t.onChangeValueLegendMapBox(h)}):c.attachEvent&&c.attachEvent("onchange",function(h){tn.trace(h),h.target.title=h.target.value,t._renderThumbnail(i.type,Object.assign(i.values,{opacity:h.target.value})),t.onChangeValueLegendMapBox(h)}),l.appendChild(u),l.appendChild(c),e.appendChild(l)}function a(){var l=document.createElement("div");l.className="legend-styling-div";var u=document.createElement("label");u.className="legend-fill",u.htmlFor=this.id?"fill-color-"+this.id:"fill-color",u.innerHTML=this.labels["fill-color"];var c=document.createElement("input");c.className="legend-styling",c.id=this.id?"fill-color-"+this.id:"fill-color",c.title="Selectionner une couleur de remplissage",c.type="color",c.value=i.values.color,c.setAttribute("data-id","fill-color"),c.addEventListener?c.addEventListener("change",function(h){t._renderThumbnail(i.type,Object.assign(i.values,{color:h.target.value})),t.onChangeValueLegendMapBox(h)}):c.attachEvent&&c.attachEvent("onchange",function(h){t._renderThumbnail(i.type,Object.assign(i.values,{color:h.target.value})),t.onChangeValueLegendMapBox(h)}),l.appendChild(u),l.appendChild(c),e.appendChild(l)}function s(){var l=document.createElement("div");l.className="legend-styling-div";var u=document.createElement("label");u.className="legend-fill",u.htmlFor=this.id?"fill-opacity-"+this.id:"fill-opacity",u.innerHTML=this.labels["fill-opacity"];var c=document.createElement("input");c.className="legend-styling",c.id=this.id?"fill-opacity-"+this.id:"fill-opacity",c.title=i.values.opacity,c.type="range",c.min="0",c.max="1",c.step="0.1",c.defaultValue=i.values.opacity,c.setAttribute("data-id","fill-opacity"),c.addEventListener?c.addEventListener("change",function(h){h.target.title=h.target.value,t._renderThumbnail(i.type,Object.assign(i.values,{opacity:h.target.value})),t.onChangeValueLegendMapBox(h)}):c.attachEvent&&c.attachEvent("onchange",function(h){h.target.title=h.target.value,t._renderThumbnail(i.type,Object.assign(i.values,{opacity:h.target.value})),t.onChangeValueLegendMapBox(h)}),l.appendChild(u),l.appendChild(c),e.appendChild(l)}return e};Nt.prototype.add=function(){if(!this.options.target){if(!document.getElementById(this.name.target)){var i=document.createElement("div");i.id=this.name.target;var t=document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0];t.appendChild(i)}this.options.target=document.getElementById(this.name.target)}return this.container&&this.options.target.appendChild(this.container),this};Nt.prototype.display=function(i){return tn.trace("display()",i),typeof i<"u"&&(this.container.style.display=i?"flex":"none"),this.container.style.display==="flex"};Nt.prototype.isEditable=function(){return this.editable};Nt.prototype.getRenderContainer=function(){return this.rendercontainer};Nt.prototype.getToolsContainer=function(){return this.toolscontainer};Nt.prototype.getContainer=function(){return this.container};Nt.prototype.onEditionLegendMapBox=function(i){tn.trace("onEditionLegendMapBox",i),i.editorID=this.id,i.data=this.options,Ri.dispatch(rn.legend.onclickedition,i)};Nt.prototype.onChangeValueLegendMapBox=function(i){tn.trace("onChangeValueLegendMapBox",i),i.editorID=this.id,i.data=this.options,Ri.dispatch(rn.legend.onchangevalue,i)};var qi=Ye.getLogger("editor-layer");function Wt(i){if(qi.trace("[constructor] Layer",i),this.options=i||{},!(this instanceof Wt))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}Wt.prototype.constructor=Wt;Wt.prototype._initialize=function(){this.id=this.options.id||null,this.options.target,this.options.position||(this.options.position=0);var i={visibility:!0,icon:{image:!0,anchor:"end"},type:!0,pin:!0,remove:!1,clone:!1};this.options.tools||(this.options.tools=i),he.mergeParams(this.options.tools,i,!1);var t={id:"",type:"",source:"","source-layer":""};this.options.obj||(this.options.obj=t),he.mergeParams(this.options.obj,t,!1),this.bSlotLegend=!1,this.oFilter=null,this.oStyle=null,this.oLegend=null,this.container=null,this.DomVisibility=null,this.DomToggle=null,this.name={target:"GPEditorMapBoxLayerTarget",container:"GPEditorMapBoxLayerContainer",containerlegend:"GPEditorMapBoxLayerLegendContainer",containertitle:"GPEditorMapBoxLayerTitleContainer",imagelabelinput:"GPEditorMapBoxLayerImageInput",imagelabel:"GPEditorMapBoxLayerImageLabel",typeimg:"GPEditorMapBoxLayerTypeImage",titleinput:"GPEditorMapBoxLayerTitleInput",titlelabel:"GPEditorMapBoxLayerTitleLabel",containertools:"GPEditorMapBoxToolsContainer",visibilityinput:"GPEditorMapBoxToolsVisibilityInput",visibilitylabel:"GPEditorMapBoxToolsVisibilityLabel",visibilityinputdisable:"GPEditorMapBoxToolsVisibilityInputDisable",visibilitylabeldisable:"GPEditorMapBoxToolsVisibilityLabelDisable"}};Wt.prototype._initContainer=function(){var i=this,t=this.options.obj,e=document.createElement("div");e.className=this.name.container;var n=document.createElement("div");if(n.id=this.name.containertitle+"-"+this.options.position,n.className=this.name.containertitle,this.options.tools.pin){var r=document.createElement("input");r.id=this.name.imagelabelinput+"-"+this.options.position,r.className=this.name.imagelabelinput,r.type="checkbox",n.appendChild(r);var o=document.createElement("label");o.className=this.name.imagelabel,o.htmlFor=r.id,o.addEventListener?o.addEventListener("click",function(h){i.onClickLayerMapBox(h)}):o.attachEvent&&o.attachEvent("onclick",function(h){i.onClickLayerMapBox(h)}),n.appendChild(o)}var a=function(){var h=document.createElement("div");if(h.id=this.name.containertools+"-"+this.options.position,h.className=this.name.containertools,this.options.tools.visibility){var d=document.createElement("input");d.id=this.name.visibilityinput+"-"+this.options.position,d.className=this.options.tools.icon.image?this.name.visibilityinput:this.name.visibilityinputdisable,d.type="checkbox",d.checked="checked",d.addEventListener?d.addEventListener("click",function(f){i.onVisibilityLayerMapBox(f)}):d.attachEvent&&d.attachEvent("onclick",function(f){i.onVisibilityLayerMapBox(f)}),h.appendChild(d),this.DomVisibility=d;var p=document.createElement("label");p.htmlFor=this.name.visibilityinput+"-"+this.options.position,p.id=this.name.visibilitylabel+"-"+this.options.position,p.className=this.options.tools.icon.image?this.name.visibilitylabel:this.name.visibilitylabeldisable,p.title="Afficher/masquer la couche",h.appendChild(p),e.appendChild(h)}this.options.tools.clone&&qi.warn("Dom for tools clone, it's not yet implemented !"),this.options.tools.remove&&qi.warn("Dom for tools remove, it's not yet implemented !")};if(this.options.tools.icon.anchor==="start"&&a.apply(this),this.options.tools.type&&t.type){var s=document.createElement("img");switch(s.className=this.name.typeimg,t.type.toUpperCase()){case"SYMBOL-ICON":s.style["background-position"]="0px 0";break;case"SYMBOL-TEXT":s.style["background-position"]="-194px 0";break;case"SYMBOL":s.style["background-position"]="-84px 0";break;case"LINE":s.style["background-position"]="-28px 0";break;case"FILL":s.style["background-position"]="-56px 0";break;case"BACKGROUND":s.style["background-position"]="-140px 0";break;case"CIRCLE":s.style["background-position"]="-168px 0";break;default:s.style["background-position"]="-112px 0"}n.appendChild(s)}var l=document.createElement("div");l.id=this.name.containerlegend+"-"+this.options.position,l.className=this.name.containerlegend,n.appendChild(l);var u=document.createElement("input");u.id=this.name.titleinput+"-"+this.options.position,u.className=this.name.titleinput,u.type="checkbox",n.appendChild(u);var c=document.createElement("label");c.className=this.name.titlelabel,c.htmlFor=u.id,c.innerHTML=t.id||t["source-layer"]||t.source,c.title=t["source-layer"]||t.source||t.id,c.addEventListener?c.addEventListener("click",function(h){i.onClickLayerMapBox(h)}):c.attachEvent&&c.attachEvent("onclick",function(h){i.onClickLayerMapBox(h)}),n.appendChild(c),this.DomToggle=c,e.appendChild(n),this.options.tools.icon.anchor==="end"&&a.apply(this),this.container=e};Wt.prototype.add=function(){if(qi.trace("add()"),!this.options.target){if(!document.getElementById(this.name.target)){var i=document.createElement("div");i.id=this.name.target;var t=document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0];t.appendChild(i)}this.options.target=document.getElementById(this.name.target)}return this.container&&this.options.target.appendChild(this.container),this};Wt.prototype.addStyle=function(i){qi.trace("addStyle()",i),i&&typeof i=="object"&&i instanceof Oi&&(this.oStyle=i,this.oStyle.display(!1))};Wt.prototype.addFilter=function(i){qi.trace("addFilter()",i),i&&typeof i=="object"&&i instanceof Bn&&(this.oFilter=i,this.oFilter.display(!1))};Wt.prototype.addLegend=function(i){qi.trace("addLegend()",i),i&&typeof i=="object"&&i instanceof Nt&&(this.oLegend=i,this.oLegend.display(!1))};Wt.prototype.slotLegend=function(){var i=this.oLegend;if(i){var t=null,e=this.container.childNodes;if(e.length)for(var n=this.options.tools.icon.anchor==="start"?1:0,r=e[n].childNodes,o=0;o<r.length;o++){var a=r[o];a.id.indexOf(this.name.containerlegend)!==-1&&(t=a)}if(t){var s=i.getRenderContainer();s&&(t.appendChild(s),this.bSlotLegend=!0)}}};Wt.prototype.visibility=function(i){if(qi.trace("visibility()",i),!!this.options.tools.visibility)return typeof i<"u"&&(this.DomVisibility.checked=i?"checked":""),this.DomVisibility.checked};Wt.prototype.collapse=function(){qi.trace("collapse()"),this.DomToggle.click()};Wt.prototype.visible=function(){qi.trace("visible()"),this.options.tools.visibility&&this.DomVisibility.click()};Wt.prototype.display=function(i){qi.trace("display()",i);var t=document.getElementById(this.DomToggle.htmlFor).checked;return typeof i<"u"&&(this.container.style.display=i?"inline-flex":"none",this.oStyle&&this.oStyle.display(i&&t),this.oFilter&&this.oFilter.display(i&&t),this.oLegend&&this.oLegend.display(i&&t)),t};Wt.prototype.active=function(i){return qi.trace("active()",i),typeof i<"u"&&(this.container.className=i?this.name.container:this.name.container+" disabled"),this.container.className===this.name.container};Wt.prototype.getContainer=function(){return this.container};Wt.prototype.onClickLayerMapBox=function(i){qi.trace("onClickLayerMapBox",i);var t=i.target.htmlFor.substring(i.target.htmlFor.indexOf("-")),e=document.getElementById(i.target.htmlFor).checked;i.target.htmlFor===this.name.imagelabelinput+t&&(document.getElementById(this.name.titleinput+t).checked=!e),i.target.htmlFor===this.name.titleinput+t&&document.getElementById(this.name.imagelabelinput+t)&&(document.getElementById(this.name.imagelabelinput+t).checked=!e),this.oStyle&&this.oStyle.display(!e),this.oFilter&&this.oFilter.display(!e),this.oLegend&&this.oLegend.isEditable()&&this.oLegend.display(!e)};Wt.prototype.onVisibilityLayerMapBox=function(i){qi.trace("onVisibilityLayerMapBox",i),i.editorID=this.id,i.data=this.options,Ri.dispatch(rn.layer.onclickvisibility,i)};Wt.prototype.onCloneLayerMapBox=function(i){qi.trace("onCloneLayerMapBox",i),i.editorID=this.id,i.data=this.options,Ri.dispatch(rn.layer.onclickclone,i)};Wt.prototype.onRemoveLayerMapBox=function(i){qi.trace("onRemoveLayerMapBox",i),i.editorID=this.id,i.data=this.options,Ri.dispatch(rn.layer.onclickremove,i)};var W_=Ye.getLogger("editor-group");function tr(i){if(W_.trace("[constructor] Group",i),this.options=i||{},!(this instanceof tr))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}tr.prototype.constructor=tr;tr.prototype._initialize=function(){this.id=this.options.id||null,this.options.target,this.options.title||(this.options.title="Détails du groupe..."),typeof this.options.collapse>"u"&&(this.options.collapse=!0),this.container=null,this.name={target:"GPEditorMapBoxGroupTarget",container:"GPEditorMapBoxGroupContainer",details:"GPEditorMapBoxGroupDetails",summary:"GPEditorMapBoxGroupSummary"}};tr.prototype._initContainer=function(){var i=document.createElement("div");i.className=this.name.container;var t=document.createElement("details");t.className=this.name.details,t.open=!this.options.collapse,i.appendChild(t);var e=document.createElement("summary");e.className=this.name.summary,e.innerHTML=this.options.title,t.appendChild(e),this.container=i};tr.prototype.add=function(){if(!this.options.target){if(!document.getElementById(this.name.target)){var i=document.createElement("div");i.id=this.name.target;var t=document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0];t.appendChild(i)}this.options.target=document.getElementById(this.name.target)}this.container&&this.options.target.appendChild(this.container)};tr.prototype.display=function(i){this.container.style.display=i?"flex":"none"};tr.prototype.getContainer=function(){var i=this.container.childNodes;return i.length?i[0]:this.container};tr.prototype.onCollapseGroupMapBox=function(i){W_.trace("onCollapseGroupMapBox",i),i.editorID=this.id,i.data=this.options,Ri.dispatch(rn.group.oncollapse,i)};var Su=Ye.getLogger("editor-search");function jn(i){if(Su.trace("[constructor] Search",i),this.options=i||{target:null,tools:null,title:null,obj:null},!(this instanceof jn))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}jn.prototype.constructor=jn;jn.prototype._initialize=function(){this.id=this.options.id||null,this.options.target;var i={};this.options.tools||(this.options.tools=i),he.mergeParams(this.options.tools,i,!1),this.options.obj||(this.options.obj={}),this.options.title||(this.options.title="Recherche de couches :"),this.container=null,this.name={target:"GPEditorMapBoxSearchTarget",container:"GPEditorMapBoxSearchContainer"}};jn.prototype._initContainer=function(){var i=JSON.parse(JSON.stringify(this.options.obj));i.layers&&i.layers.length===0&&Su.info("tag 'layers' is empty !");var t=document.createElement("div");t.className=this.name.container,this.container=t};jn.prototype.add=function(){if(!this.options.target){if(!document.getElementById(this.name.target)){var i=document.createElement("div");i.id=this.name.target;var t=document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0];t.appendChild(i)}this.options.target=document.getElementById(this.name.target)}return this.container&&this.options.target.appendChild(this.container),this};jn.prototype.display=function(i){return Su.trace("display()",i),typeof i<"u"&&(this.container.style.display=i?"flex":"none"),this.container.style.display==="flex"};jn.prototype.getContainer=function(){return this.container};jn.prototype.onSubmitSearchLayersMapBox=function(i){Su.trace("onSubmitSearchLayersMapBox",i),i.editorID=this.id,i.data=this.options,Ri.dispatch(rn.search.onsubmit,i)};jn.prototype.onAutocompleteSearchLayersMapBox=function(i){Su.trace("onAutocompleteSearchLayersMapBox",i),i.editorID=this.id,i.data=this.options,Ri.dispatch(rn.search.onautocomplete,i)};var _4={_addUID:function(i){var t=this._uid?i+"-"+this._uid:i;return t}},fi=Ye.getLogger("editor");function Yt(i){if(fi.trace("[constructor] Editor",i),this.options=i||{},!(this instanceof Yt))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize()}he.assign(Yt.prototype,_4);Yt.prototype.constructor=Yt;Yt.prototype._initialize=function(){if(this.options.target||fi.info("La 'target' n'est pas renseignée (options.target)."),!this.options.style){fi.error("Le 'style' MapBox n'est pas renseigné (options.style) !");return}this.options.events?this._initEvents():fi.warn("Les 'handlers' ne sont pas renseignés (options.events) !"),this.options.themes||fi.info("Les 'themes' MapBox ne sont pas renseignés (options.themes).");var i={themes:!1,layers:!0,search:!1,style:!1,filter:!1,legend:!1,group:!1,groupAuto:!1,sort:!0,sortBy:"id",sortOrder:"asc",title:!0,collapse:void 0,type:!0,pin:!0,visibility:!0,icon:{image:!0,anchor:"end"},editable:!0};this.options.tools||(fi.trace("Utilisation des outils MapBox par défaut (options.tools)."),this.options.tools=i),he.mergeParams(this.options.tools,i,!1),this.id=this.options.id||Re.generate(),this.context={},this.layers=[],this.container=null,this.name={target:"GPEditorMapBoxTarget",container:"GPEditorMapBoxContainer",containerID:"GPEditorMapBoxContainer_ID_",containerLayers:"GPEditorMapBoxLayersContainer",titleLayers:"GPEditorMapBoxLayersTitle",titleLayersID:"GPEditorMapBoxLayersTitle_ID_",titleThemes:"GPEditorMapBoxThemesTitle",titleThemesID:"GPEditorMapBoxThemesTitle_ID_",sep:"GPEditorMapBoxSep"},this.mapbox={},this.sprites={}};Yt.prototype._initEvents=function(){var i=this.options.scope||this,t=this.options.events;if(t){for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];n&&(Ri.hasEventListener(e,n,i)||Ri.addEventListener(e,n,i))}}};Yt.prototype._initContainer=function(){fi.trace(this.mapbox);var i=document.createElement("div");i.id=this.name.containerID+this.id,i.className=this.name.container;var t=this.options.tools.themes;if(t&&this.options.themes){if(this.options.tools.title){var e=document.createElement("div");e.id=this.name.titleThemesID+this.id,e.className=this.name.titleThemes,e.innerHTML="Liste des 'thèmes'",i.appendChild(e)}var n=new Un({id:this.id,target:i,tools:typeof t=="object"?t:{},obj:this.options.themes});n.add()}if(this.options.tools.search){var r=new jn({id:this.id,target:i,tools:{},obj:this.mapbox.layers});r.add()}for(var o in this.mapbox.sources)if(this.mapbox.sources.hasOwnProperty(o)){if(this.options.tools.layers){var a=Object.keys(this.mapbox.sources).length>1?1:0;if(a){var s=document.createElement("hr");s.className=this.name.sep,i.appendChild(s)}if(this.options.tools.title){var l=document.createElement("div");l.id=this.name.titleLayersID+this.id,l.className=this.name.titleLayers,l.innerHTML=a?"Liste des 'couches' ("+o+")":"Liste des 'couches'",i.appendChild(l)}}var u=this.mapbox.layers.slice();if(u.forEach(function(D,z){var F=D.metadata;F?F["geoportail:order"]=z:D.metadata={"geoportail:order":z}}),this.options.tools.sort){var c=this.options.tools.sortBy,h=this.options.tools.sortOrder,d=function(D,z){var F=0;if(D.metadata&&D.metadata["geoportail:group"]&&z.metadata&&z.metadata["geoportail:group"]){var O=null,R=null;O=D.metadata["geoportail:group"],R=z.metadata["geoportail:group"],F=O.localeCompare(R)}else switch(c){case"geom":F=h==="asc"?D.type.localeCompare(z.type)||D.id.localeCompare(z.id):z.type.localeCompare(D.type)||z.id.localeCompare(D.id);break;case"class":F=h==="asc"?D["source-layer"].localeCompare(z["source-layer"])||D.id.localeCompare(z.id):z["source-layer"].localeCompare(D["source-layer"])||z.id.localeCompare(D.id);break;case"id":default:F=h==="asc"?D.id.localeCompare(z.id):z.id.localeCompare(D.id);break}return F};u.sort(d)}fi.trace("Layers : ",u);var p=this.options.tools.sortBy,f=this.options.tools.groupAuto,g={};u.forEach(function(D){var z=D.metadata;if(z&&z["geoportail:group"]){var F=z["geoportail:group"];g[F]=g[F]?g[F]+1:1}else{var O=null;switch(p){case"class":O=D["source-layer"];break;case"geom":O=D.type;break;case"id":default:O=D.id;break}var R=O;if(f){var M=/_|-|:|=/,ie=O.search(M);R=ie!==-1?O.substring(0,ie).trim():O}g[R]=g[R]?g[R]+1:1,z?z["geoportail:group"]=R:D.metadata={"geoportail:group":R}}}),fi.trace("Groups : ",g);var v=document.createElement("div");v.className=this.name.containerLayers,i.appendChild(v);var y;if(this.options.tools.collapse!==void 0){y=document.createElement("details"),y.className="",y.open=!this.options.tools.collapse,v.appendChild(y);var m=document.createElement("summary");m.className="",m.innerHTML="",y.appendChild(m)}for(var A=this.options.tools.collapse!==void 0?y:v,_=-1,C=0;C<u.length;C++){var I=u[C];if(_++,I.source===o){if(this.options.tools.group&&this.options.tools.sort){var E=I.metadata;if(E){var w=I.metadata["geoportail:group"];if(w)if(g[w]>1){g[w]=-1;var S=new tr({id:this.id,target:this.options.tools.collapse!==void 0?y:v,title:w,collapse:!0});S.add(),A=S.getContainer()}else g[w]===1&&(A=this.options.tools.collapse!==void 0?y:v);else A=this.options.tools.collapse!==void 0?y:v}else A=this.options.tools.collapse!==void 0?y:v}if(this.options.tools.layers){var x=new Wt({id:this.id,target:A,position:_+"_"+this.id,tools:{visibility:this.options.tools.visibility,icon:this.options.tools.icon,type:this.options.tools.type,pin:this.options.tools.pin},obj:{id:I.id,type:I.type,source:I.source,"source-layer":I["source-layer"]}});x.add(),I.layout&&I.layout.visibility&&I.layout.visibility==="none"&&x.visibility(!1),this.layers.push(x)}if(this.options.tools.legend){var T=this.options.tools.editable;typeof T>"u"&&(T=I.editable);var L=new Nt({id:this.id,target:A,sprites:this.sprites,obj:{id:I.id,source:I.source,title:I.id,editable:typeof T<"u"?T:!1,paint:I.paint,layout:I.layout}});L.add(),L.display(!1),x&&(x.addLegend(L),x.slotLegend())}if(this.options.tools.style){var G=new Oi({id:this.id,target:A,position:_+"_"+this.id,obj:{id:I.id,source:I.source,layout:I.layout,paint:I.paint}});G.add(),G.display(!1),x&&x.addStyle(G),I.layout&&I.layout.visibility&&I.layout.visibility==="none"&&x.visibility(!1)}if(this.options.tools.filter){var N=new Bn({id:this.id,target:A,position:_+"_"+this.id,obj:{id:I.id,source:I.source,filter:I.Filter}});N.add(),N.display(!1),x&&x.addFilter(N)}}else _>=0&&_--}}if(this.container=i,!this.options.target){if(!document.getElementById(this.name.target)){var B=document.createElement("div");B.id=this.name.target;var U=document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0]||document.documentElement;U.appendChild(B)}this.options.target=document.getElementById(this.name.target)}this.container&&this.options.target.appendChild(this.container),Ri.dispatch(rn.onloaded,this)};Yt.prototype._getSprites=function(i){var t=this;if(i&&i.startsWith("mapbox://"))return new Promise((r,o)=>{fi.error("Protocole mapbox:// non géré !"),r(t)});if(!i)return new Promise((r,o)=>{fi.error("Auncun sprites disponibles !"),r(t)});var e=function(){var r=i+".png";return fetch(r,{credentials:"same-origin"}).then(function(o){if(o.ok)return o.blob().then(function(s){t.sprites.url=r;var l=new Image;return l.src=r,l.decode().then(function(){t.sprites.size={},t.sprites.size.h=l.height,t.sprites.size.w=l.width})}).catch(s=>{fi.warn("fetch image sprites exception :",s)});var a=new Error("HTTP status code: "+o.status);throw a}).catch(o=>new Promise((a,s)=>{fi.error("fetch image sprites exception :",o),s(o)}))},n=function(){var r=i+".json";return fetch(r,{credentials:"same-origin"}).then(function(o){if(o.ok)return o.json().then(function(s){t.sprites.json=s}).catch(s=>{fi.warn("fetch json sprites exception :",s)});var a=new Error("HTTP status code: "+o.status);throw a}).catch(o=>new Promise((a,s)=>{fi.error("fetch json sprites exception :",o),s(o)}))};return Promise.all([e(),n()])};Yt.prototype.createElement=function(){var i=this;if(typeof this.options.style=="object")return this.mapbox=this.options.style,this.options.tools.legend?this._getSprites(this.mapbox.sprite).then(function(){return i._initContainer(),i}).catch(t=>{fi.warn("fetch sprites exception :",t)}):new Promise((t,e)=>{i._initContainer(),t(i)});if(typeof this.options.style=="string")return fetch(this.options.style,{credentials:"same-origin"}).then(t=>t.json().then(e=>{i.mapbox=e}).then(function(){return i.options.tools.legend?i._getSprites(i.mapbox.sprite).then(function(){return i._initContainer(),i}).catch(e=>{fi.warn("fetch sprites exception :",e)}):new Promise((e,n)=>{i._initContainer(),e(i)})}).catch(e=>{fi.error("json exception :",e)})).catch(t=>{fi.error("fetch exception :",t)})};Yt.prototype.display=function(i){this.container.style.display=i?"block":"none"};Yt.prototype.setContext=function(i,t){this.context[i]=t};Yt.prototype.getContext=function(i){return this.context[i]};Yt.prototype.getID=function(){return this.id};Yt.prototype.getContainer=function(){return this.container};Yt.prototype.getStyle=function(){return this.mapbox};Yt.prototype.getStyleLayer=function(i){for(var t=null,e=this.getLayer(i),n=e.options.obj.id,r=0;r<this.mapbox.layers.length;r++){var o=this.mapbox.layers[r];if(o.id===n){t=o;break}}return t};Yt.prototype.getLayerFromStyle=function(i){for(var t=null,e=this.mapbox.layers[i],n=0;n<this.getLayers().length;n++){var r=this.getLayer(n);if(e.id===r.options.obj.id){t=r;break}}return t};Yt.prototype.getLayers=function(){return this.layers};Yt.prototype.getLayer=function(i){return this.layers[i]};window.ol&&window.ol.style&&(window.ol.style.Editor=Yt);var C4={_addUID:function(i){var t=this._uid?i+"-"+this._uid:i;return t},_createLoadingElement:function(){var i=document.createElement("div");return i.id="GPmapLoading",i.className="",i},_createMainContainerElement:function(){var i=document.createElement("div");return i.id=this._addUID("GPimport"),i.className="GPwidget",i},_createShowImportElement:function(){var i=document.createElement("input");return i.id=this._addUID("GPshowImport"),i.type="checkbox",i},_createShowImportPictoElement:function(){var i=this,t=document.createElement("label");t.id=this._addUID("GPshowImportPicto"),t.className="GPshowAdvancedToolPicto",t.htmlFor=this._addUID("GPshowImport"),t.title="Ouvrir l'import de couches",t.addEventListener?t.addEventListener("click",function(){i._onShowImportClick()}):t.attachEvent&&t.attachEvent("onclick",function(){i._onShowImportClick()});var e=document.createElement("span");return e.id=this._addUID("GPshowImportOpen"),e.className="GPshowAdvancedToolOpen",t.appendChild(e),t},_createImportPanelElement:function(){var i=document.createElement("div");return i.id=this._addUID("GPimportPanel"),i.className="GPpanel",i},_createImportPanelHeaderElement:function(){var i=document.createElement("div");i.className="GPpanelHeader";var t=this._createImportPanelTitleElement();i.appendChild(t);var e=this._createImportPanelCloseElement();return i.appendChild(e),i},_createImportPanelTitleElement:function(){var i=document.createElement("div");return i.className="GPpanelTitle",i.innerHTML="Import de données",i},_createImportPanelCloseElement:function(){var i=this,t=document.createElement("div");return t.id=this._addUID("GPimportPanelClose"),t.className="GPpanelClose",t.title="Fermer le panneau",t.addEventListener?t.addEventListener("click",function(){document.getElementById(i._addUID("GPshowImportPicto")).click()},!1):t.attachEvent&&t.attachEvent("onclick",function(){document.getElementById(i._addUID("GPshowImportPicto")).click()}),t},_createImportPanelFormElement:function(){var i=this,t=document.createElement("form");return t.id=this._addUID("GPimportForm"),t.className="map-tool-box",t.addEventListener?t.addEventListener("submit",function(e){e.preventDefault(),i._onImportSubmit()}):t.attachEvent&&t.attachEvent("onsubmit",function(e){e.preventDefault(),i._onImportSubmit()}),t},_createImportTypeLineElement:function(i){var t=this,e=document.createElement("div");e.id=this._addUID("GPimportTypeLine"),e.className="GPimportInputLine";var n=document.createElement("label");n.htmlFor=this._addUID("GPimportType"),n.className="GPimportLabel",n.innerHTML="Type de donnée",n.title="Type de donnée",e.appendChild(n);var r=document.createElement("select");r.className="GPimportSelect",r.addEventListener?r.addEventListener("change",function(s){this.value==="KML"||this.value==="GPX"||this.value==="GeoJSON"||this.value==="MAPBOX"?(document.getElementById(t._addUID("GPimportStaticParams")).className="GPimportVisibleParams",document.getElementById(t._addUID("GPimportServiceParams")).className="GPimportHiddenParams"):(this.value==="WMS"||this.value==="WMTS"||this.value==="WFS")&&(document.getElementById(t._addUID("GPimportServiceParams")).className="GPimportVisibleParams",document.getElementById(t._addUID("GPimportStaticParams")).className="GPimportHiddenParams"),t._onImportTypeChange(s)}):r.attachEvent&&r.attachEvent("onchange",function(){this.value==="KML"||this.value==="GPX"||this.value==="GeoJSON"||this.value==="MAPBOX"?(document.getElementById(t._addUID("GPimportStaticParams")).className="GPimportVisibleParams",document.getElementById(t._addUID("GPimportServiceParams")).className="GPimportHiddenParams"):(this.value==="WMS"||this.value==="WMTS"||this.value==="WFS")&&(document.getElementById(t._addUID("GPimportServiceParams")).className="GPimportVisibleParams",document.getElementById(t._addUID("GPimportStaticParams")).className="GPimportHiddenParams"),t._onImportTypeChange()}),r.id=this._addUID("GPimportType"),(!i||!Array.isArray(i))&&(i=["KML","GPX","GeoJSON","MAPBOX","WMS","WMTS","WFS"]);for(var o,a=0;a<i.length;a++)o=document.createElement("option"),o.value=i[a],o.text=i[a]==="MAPBOX"?"Tuiles vectorielles":i[a],r.appendChild(o);return e.appendChild(r),e},_createImportWaitingElement:function(){var i=document.createElement("div");i.id=this._addUID("GPimportWaitingContainer"),i.className="GPimportWaitingContainerHidden";var t=document.createElement("p");return t.className="GPimportWaiting",t.innerHTML="Recherche en cours...",i.appendChild(t),i},_createImportStaticParamsContainer:function(i){var t=document.createElement("div");return t.id=this._addUID("GPimportStaticParams"),i==="KML"||i==="GPX"||i==="GeoJSON"||i==="MAPBOX"?t.className="GPimportVisibleParams":t.className="GPimportHiddenParams",t},_createStaticNameLabel:function(){var i=document.createElement("div");i.className="GPimportInputLine";var t=document.createElement("label");t.className="GPimportLabel",t.htmlFor=this._addUID("GPimportName"),t.innerHTML="Nom",t.title="Nom",i.appendChild(t);var e=document.createElement("input");return e.type="text",e.id=this._addUID("GPimportName"),e.className="GPimportInput",i.appendChild(e),i},_createStaticModeChoiceDiv:function(){var i=document.createElement("div");return i.id=this._addUID("GPimportChoice"),i},_createStaticLocalChoiceDiv:function(){var i=this,t=document.createElement("div");t.className="GPimportChoiceAlt";var e=document.createElement("input");e.type="radio",e.addEventListener?e.addEventListener("change",function(r){document.getElementById(i._addUID("GPimportValueLocal")).className="GPimportInputLine",document.getElementById(i._addUID("GPimportValueUrl")).className="GPimportValueHidden",i._onStaticImportTypeChange(r)}):e.appendChild&&e.appendChild("onchange",function(){document.getElementById(i._addUID("GPimportValueLocal")).className="GPimportInputLine",document.getElementById(i._addUID("GPimportValueUrl")).className="GPimportValueHidden",i._onStaticImportTypeChange()}),e.name="GPimportChoiceMode",e.value="local",e.checked=!0,e.id=this._addUID("GPimportChoiceAltLocal"),t.appendChild(e);var n=document.createElement("label");return n.className="GPimportChoiceAltTxt",n.htmlFor=this._addUID("GPimportChoiceAltLocal"),n.innerHTML="par fichier local",n.title="par fichier local",t.appendChild(n),t},_createStaticUrlChoiceDiv:function(){var i=this,t=document.createElement("div");t.className="GPimportChoiceAlt";var e=document.createElement("input");e.type="radio",e.addEventListener?e.addEventListener("change",function(r){document.getElementById(i._addUID("GPimportValueUrl")).className="GPimportInputLine",document.getElementById(i._addUID("GPimportValueLocal")).className="GPimportValueHidden",i._onStaticImportTypeChange(r)}):e.appendChild&&e.appendChild("onchange",function(){document.getElementById(i._addUID("GPimportValueUrl")).className="GPimportInputLine",document.getElementById(i._addUID("GPimportValueLocal")).className="GPimportValueHidden",i._onStaticImportTypeChange()}),e.id=this._addUID("GPimportChoiceAltUrl"),e.name="GPimportChoiceMode",e.value="url",e.checked=!1,t.appendChild(e);var n=document.createElement("label");return n.className="GPimportChoiceAltTxt",n.htmlFor=this._addUID("GPimportChoiceAltUrl"),n.innerHTML="par URL",n.title="par URL",t.appendChild(n),t},_createStaticLocalInputDiv:function(){var i=document.createElement("div");return i.id=this._addUID("GPimportValueLocal"),i.className="GPimportInputLine",i},_createStaticLocalInputLabel:function(){var i=document.createElement("label");return i.className="GPimportLabel",i.htmlFor=this._addUID("GPimportFile"),i.innerHTML="Fichier local",i.title="Fichier local",i},_createStaticLocalInput:function(){var i=document.createElement("input");return i.type="file",i.id=this._addUID("GPimportFile"),i.className="GPimportInputFile",i},_createStaticUrlInputDiv:function(){var i=document.createElement("div");return i.id=this._addUID("GPimportValueUrl"),i.className="GPimportValueHidden",i},_createStaticUrlInputLabel:function(){var i=document.createElement("label");return i.className="GPimportLabel",i.htmlFor=this._addUID("GPimportUrl"),i.innerHTML="URL",i.title="URL",i},_createStaticUrlInput:function(){var i=document.createElement("input");return i.type="text",i.id=this._addUID("GPimportUrl"),i.className="GPimportInput",i},_createServiceParamsContainer:function(i){var t=document.createElement("div");return t.id=this._addUID("GPimportServiceParams"),i==="WMS"||i==="WMTS"||i==="WFS"?t.className="GPimportVisibleParams":t.className="GPimportHiddenParams",t},_createServiceUrlDiv:function(){var i=document.createElement("div");return i.className="GPimportInputLine",i},_createServiceUrlInputLabel:function(){var i=document.createElement("label");return i.className="GPimportLabel",i.htmlFor=this._addUID("GPimportServiceUrl"),i.innerHTML="URL du service",i.title="URL du service",i},_createServiceUrlInput:function(){var i=document.createElement("input");return i.type="text",i.id=this._addUID("GPimportServiceUrl"),i.className="GPimportInput",i},_createImportSubmitFormElement:function(){var i=document.createElement("input");return i.id=this._addUID("GPimportSubmit"),i.className="GPinputSubmit tool-form-submit",i.type="submit",i.value="Importer",i},_createImportGetCapPanelElement:function(){var i=document.createElement("div");return i.id=this._addUID("GPimportGetCapPanel"),i.className="GPpanel",i},_createImportGetCapPanelHeaderElement:function(){var i=this,t=document.createElement("div");t.className="GPpanelHeader";var e=document.createElement("div");e.className="GPpanelTitle",e.innerHTML="Couches accessibles",e.title="Couches accessibles",t.appendChild(e);var n=document.createElement("div");return n.addEventListener?n.addEventListener("click",function(){document.getElementById(i._addUID("GPimportGetCapPanel")).style.display="none",document.getElementById(i._addUID("GPimportPanel")).style.display="",i._onGetCapPanelClose()}):n.attachEvent&&n.attachEvent("click",function(){document.getElementById(i._addUID("GPimportGetCapPanel")).style.display="none",document.getElementById(i._addUID("GPimportPanel")).style.display="",i._onGetCapPanelClose()}),n.className="GPpanelClose",n.title="Fermer le panneau",n.id=this._addUID("GPimportGetCapPanelClose"),t.appendChild(n),t},_createImportGetCapResultsContainer:function(){var i=document.createElement("div");return i.className="GPimportGetCapRoot",i.id=this._addUID("GPimportGetCapResults"),i},_addImportGetCapResultListRubrique:function(i,t){var e=document.createElement("ul");return e.className="GPimportGetCapListRubrique",e.title=i,t.appendChild(e),t},_addImportGetCapResultRubrique:function(i,t){var e=document.createElement("li");e.className="GPimportGetCapRubrique";var n=document.createElement("input");n.id="GPimportGetCapRubrique-"+Re.generate(),n.className="GPimportGetCapRubrique",n.type="checkbox",e.appendChild(n);var r=document.createElement("label");return r.className="GPimportGetCapRubriqueTitle",r.htmlFor=n.id,r.innerHTML=i,r.title=i,e.appendChild(r),t.appendChild(e),t},_addImportGetCapResultListLayer:function(i){var t=document.createElement("ul");return t.className="GPimportGetCapListLayer",i.appendChild(t),i},_addImportGetCapResultLayer:function(i,t,e){var n=document.createElement("li");n.className="GPimportGetCapProposal",n.innerHTML=i.content,n.title=i.title,n.id="GPimportGetCapProposal_"+t;var r=this;return n.addEventListener?n.addEventListener("click",function(o){r._onGetCapResponseLayerClick(o)}):n.attachEvent&&n.attachEvent("onclick",function(){r._onGetCapResponseLayerClick()}),e.appendChild(n),e},_createImportMapBoxPanelElement:function(){var i=document.createElement("div");return i.id=this._addUID("GPimportMapBoxPanel"),i.className="GPpanel",i},_createImportMapBoxPanelHeaderElement:function(){var i=this,t=document.createElement("div");t.className="GPpanelHeader";var e=document.createElement("div");e.id=this._addUID("GPimportMapBoxPanelReturnPicto"),e.title="Masquer le panneau",e.className="",e.addEventListener?e.addEventListener("click",function(o){i._onMapBoxReturnPictoClick(o)}):e.attachEvent&&e.attachEvent("onclick",function(o){i._onMapBoxReturnPictoClick(o)}),t.appendChild(e);var n=document.createElement("div");n.className="GPpanelTitle",n.innerHTML="Edition des styles",n.title="Edition des styles",t.appendChild(n);var r=document.createElement("div");return r.addEventListener?r.addEventListener("click",function(){document.getElementById(i._addUID("GPimportMapBoxPanel")).style.display="none",document.getElementById(i._addUID("GPimportPanel")).style.display="",i._onMapBoxPanelClose()}):r.attachEvent&&r.attachEvent("click",function(){document.getElementById(i._addUID("GPimportMapBoxPanel")).style.display="none",document.getElementById(i._addUID("GPimportPanel")).style.display="",i._onMapBoxPanelClose()}),r.className="GPpanelClose",r.title="Fermer le panneau",r.id=this._addUID("GPimportMapBoxPanelClose"),t.appendChild(r),t},_createImportMapBoxResultsContainer:function(){var i=document.createElement("div");return i.className="GPimportMapBoxpRoot",i.id=this._addUID("GPimportMapBoxResults"),i}},I4={_toolboxId:"GPtoolbox-measure-main",_buttonId:"GPtoolbox-measure-button",_widgetId:"GPtoolbox-measure-widget",getToolBoxID:function(i){return i?this._toolboxId+"-"+i:this._toolboxId},getButtonID:function(i){return i?this._buttonId+"-"+i:this._buttonId},getWidgetID:function(i){return i?this._widgetId+"-"+i:this._widgetId},_createToolBoxContainerElement:function(i){var t=document.createElement("div");t.id=this.getToolBoxID(i),t.className="GPshowAdvancedToolPicto";var e=document.createElement("button");e.id=this.getButtonID(i);var n=this;e.addEventListener("click",function(){this.blur();var o=document.getElementById(n.getWidgetID(i));o.style.display==="block"?o.style.display="none":o.style.display="block"}),t.appendChild(e);var r=document.createElement("div");return r.id=this.getWidgetID(i),r.addEventListener("click",function(){},!1),t.appendChild(r),t}},tc=Ye.getLogger("toolbox"),Pu={_toolbox:{},add:function(i,t){if(tc.trace("ToolBox.add()",t),!i){tc.trace("map doesn't exist !?");return}var e=typeof window<"u"?window:typeof self<"u"?self:null;e&&(this._toolbox=e.gpShareMeasureToolBox||{});var n=i.getTargetElement(),r=n.ownerDocument,o=n.id;!this._toolbox||Object.keys(this._toolbox).length===0?(this._toolbox={},this._toolbox[o]=Re.generate()):this._toolbox[o]||(this._toolbox[o]=Re.generate());var a=this._toolbox[o];if(!r.getElementById(this.getToolBoxID(a))){tc.trace("create toolbox !");var s=this._createToolBoxContainerElement(a);s.style.pointerEvents="auto";var l=n.getElementsByClassName("ol-overlaycontainer-stopevent");l[0].appendChild(s)}var u=r.getElementById(this.getWidgetID(a));t.setTarget(u),e&&(e.gpShareMeasureToolBox=this._toolbox),tc.trace("add control to toolbox !")}};he.assign(Pu,I4);var rp=Ye.getLogger("measures"),In={DEFAULT_POINTER_STYLE:new gi({radius:5,stroke:new Me({color:"#002A50",width:2}),fill:new Ge({color:"rgba(255, 155, 0, 0.7)"})}),DEFAULT_DRAW_START_STYLE:new de({fill:new Ge({color:"rgba(0, 183, 152, 0.2)"}),stroke:new Me({color:"#002A50",lineDash:[10,10],width:2})}),DEFAULT_DRAW_FINISH_STYLE:new de({fill:new Ge({color:"rgba(0, 183, 152, 0.3)"}),stroke:new Me({color:"#002A50",width:3})}),tools:{MeasureLength:[],MeasureArea:[],MeasureAzimuth:[]},measureDraw:null,measureSource:null,measureVector:null,sketch:null,measureTooltipElement:null,measureTooltip:null,helpTooltipElement:null,helpTooltip:null,clean:function(){var i=this.CLASSNAME;rp.trace("["+i+"] deactived tool !"),this.clearMeasure(),this.clearMeasureToolTip(),this.removeMeasureEvents(),this._showContainer.checked=!1},onPointerMoveHandler:function(i){if(!i.dragging){var t=i.coordinate;if(this.sketch){var e,n=this.sketch.getGeometry();if(e=this.format(n),n.getType()==="LineString")t=n.getLastCoordinate();else if(n.getType()==="Polygon")t=n.getInteriorPoint().getCoordinates();else return;this.measureTooltipElement.innerHTML=e,this.measureTooltip.setPosition(t)}}},onShowMeasureClick:function(i,t){var e=this.getMap(),n=e.getTargetElement().id,r=typeof window<"u"?window:typeof self<"u"?self:null;r&&(this.tools=r.gpShareMeasures||{});var o=this.CLASSNAME;for(var a in this.tools)if(this.tools.hasOwnProperty(a))for(var s=this.tools[a],l=0;l<s.length;l++){var u=s[l];u&&u.active&&a!==o&&u.map===n&&(u.active=!1,u.instance!==null&&u.instance.clean())}if(Tr.unset(e,{current:"Measures"}),this._showContainer.checked){this.clearMeasure(),this.clearMeasureToolTip(),this.removeMeasureEvents();for(var h=0;h<this.tools[o].length;h++)this.tools[o][h].map===n&&(this.tools[o][h].active=!1)}else{this.addMeasureEvents(),this.initMeasureInteraction(),this.addMeasureInteraction(t);for(var c=0;c<this.tools[o].length;c++)this.tools[o][c].map===n&&(this.tools[o][c].active=!0)}},clearMeasureToolTip:function(){var i=this.getMap();if(i)for(var t=i.getTargetElement(),e=t.getElementsByClassName("ol-overlaycontainer"),n=0;n<e.length;n++){for(var r=e[n],o=r.children.length,a=[],s=0;s<o;s++){var l=r.children[s];if(l.children.length!==0){var u=l.children[0];(u.className==="GPmeasureTooltip GPmeasureTooltip-static"||u.className==="GPmeasureTooltip GPmeasureTooltip-measure")&&a.push(l)}}for(var c=0;c<a.length;c++)r.removeChild(a[c])}},clearMeasure:function(){var i=this.getMap();this.measureVector&&(i.removeLayer(this.measureVector),this.measureVector=null),this.measureDraw&&(i.removeInteraction(this.measureDraw),this.measureDraw=null)},createMeasureTooltip:function(i){this.measureTooltipElement&&this.measureTooltipElement.parentNode.removeChild(this.measureTooltipElement),this.measureTooltipElement=document.createElement("div"),this.measureTooltipElement.className="GPmeasureTooltip GPmeasureTooltip-measure",this.measureTooltip=new dn({element:this.measureTooltipElement,stopEvent:!1,offset:[0,-15],positioning:"bottom-center"}),i.addOverlay(this.measureTooltip)},createHelpTooltip:function(i){this.helpTooltipElement&&this.helpTooltipElement.parentNode.removeChild(this.helpTooltipElement),this.helpTooltipElement=document.createElement("div"),this.helpTooltipElement.className="tooltip hidden",this.helpTooltip=new dn({element:this.helpTooltipElement,stopEvent:!1,offset:[15,0],positioning:"center-left"}),i.addOverlay(this.helpTooltip)},createStylingMeasureInteraction:function(i){this.options.styles=i||{},rp.trace("style start",this.options.styles.start);var t={image:In.DEFAULT_POINTER_STYLE,fill:In.DEFAULT_DRAW_START_STYLE.getFill(),stroke:In.DEFAULT_DRAW_START_STYLE.getStroke()};this.options.styles.hasOwnProperty("pointer")&&this.options.styles.pointer instanceof Image&&(t.image=this.options.styles.pointer),this.options.styles.hasOwnProperty("start")&&this.options.styles.start instanceof de&&(this.options.styles.start.getFill()!=null&&(t.fill=this.options.styles.start.getFill()),this.options.styles.start.getStroke()!=null&&(t.stroke=this.options.styles.start.getStroke())),this.options.styles.start=new de(t),rp.trace("style finish",this.options.styles.finish);var e={fill:In.DEFAULT_DRAW_FINISH_STYLE.getFill(),stroke:In.DEFAULT_DRAW_FINISH_STYLE.getStroke()};this.options.styles.hasOwnProperty("finish")&&this.options.styles.finish instanceof de&&(this.options.styles.finish.getFill()!=null&&(e.fill=this.options.styles.finish.getFill()),this.options.styles.finish.getStroke()!=null&&(e.stroke=this.options.styles.finish.getStroke())),this.options.styles.finish=new de(e)},addMeasureInteraction:function(i){var t=this.getMap(),e=this;this.measureDraw=new Ln({source:this.measureSource,condition:function(n){return n.originalEvent.ctrlKey?(e.sketch&&this.removeLastPoint(),!1):!0},type:i,style:this.options.styles.start||In.DEFAULT_DRAW_START_STYLE}),this.measureDraw.setProperties({name:"Measures",source:this}),t.addInteraction(this.measureDraw),this.createMeasureTooltip(t),this.measureDraw.on("drawstart",n=>{e.sketch=n.feature}),this.measureDraw.on("drawend",()=>{if(e.sketch){var n,r,o=e.sketch.getGeometry();if(n=e.format(o),o.getType()==="LineString")r=o.getLastCoordinate();else if(o.getType()==="Polygon")r=o.getInteriorPoint().getCoordinates();else return;e.measureTooltipElement.innerHTML=n,e.measureTooltip.setPosition(r)}e.measureTooltipElement.className="GPmeasureTooltip GPmeasureTooltip-static",e.measureTooltip.setOffset([0,-7]),e.sketch=null,e.measureTooltipElement=null,e.createMeasureTooltip(t)})},initMeasureInteraction:function(){var i=this.getMap();this.measureSource=new fn,this.measureVector=new mi({source:this.measureSource,style:this.options.styles.finish||In.DEFAULT_DRAW_FINISH_STYLE}),this.measureVector.gpResultLayerId="measure",i.addLayer(this.measureVector),i.getControls().forEach(t=>{if(t instanceof Mr){var e=this.measureVector.gpLayerId;t._layers[e].title===e&&t.addLayer(this.measureVector,{title:this.options.layerDescription.title,description:this.options.layerDescription.description})}})}},E4={_addUID:function(i){var t=this._uid?i+"-"+this._uid:i;return t},_createMainContainerElement:function(){var i=document.createElement("div");return i.id=this._addUID("GPelevationPath"),i.className="GPwidget",i},_createShowElevationPathElement:function(){var i=document.createElement("input");return i.id=this._addUID("GPshowElevationPath"),i.type="checkbox",i},_createShowElevationPathPictoElement:function(){var i=this,t=document.createElement("label");t.id=this._addUID("GPshowElevationPathPicto"),t.className="GPshowAdvancedToolPicto",t.htmlFor=this._addUID("GPshowElevationPath"),t.title="Calculer un profil",t.addEventListener?t.addEventListener("click",function(n){i.onShowElevationPathClick(n)}):t.attachEvent&&t.attachEvent("onclick",function(n){i.onShowElevationPathClick(n)});var e=document.createElement("span");return e.id=this._addUID("GPshowElevationPathOpen"),e.className="GPshowAdvancedToolOpen",t.appendChild(e),t},_createElevationPathPanelElement:function(){var i=document.createElement("div");return i.id=this._addUID("GPelevationPathPanel"),i.className="GPpanel",i},_createElevationPathPanelHeaderElement:function(){var i=this,t=document.createElement("div");t.className="GPpanelHeader";var e=document.createElement("div");e.id=this._addUID("GPelevationPathPanelInfo"),e.className="GPpanelInfo",e.title="Informations",e.addEventListener?e.addEventListener("click",function(){i.onOpenElevationPathInfoClick()}):e.attachEvent&&e.attachEvent("onclick",function(){i.onOpenElevationPathInfoClick()}),t.appendChild(e);var n=document.createElement("div");n.className="GPpanelTitle",n.innerHTML="Profil Altimétrique",t.appendChild(n);var r=document.createElement("div");r.id=this._addUID("GPelevationPathPanelReduce"),r.className="GPpanelReduce",r.title="Masquer le panneau",r.addEventListener?r.addEventListener("click",function(){typeof i.onReduceElevationPathPanelClick=="function"&&(document.getElementById(i._addUID("GPshowElevationPath")).checked=!1,i.onReduceElevationPathPanelClick())},!1):r.attachEvent&&r.attachEvent("onclick",function(){typeof i.onReduceElevationPathPanelClick=="function"&&(document.getElementById(i._addUID("GPshowElevationPath")).checked=!1,i.onReduceElevationPathPanelClick())}),t.appendChild(r);var o=document.createElement("div");return o.id=this._addUID("GPelevationPathPanelClose"),o.className="GPpanelClose",o.title="Fermer le panneau",o.addEventListener?o.addEventListener("click",function(){document.getElementById(i._addUID("GPshowElevationPathPicto")).click()},!1):o.attachEvent&&o.attachEvent("onclick",function(){document.getElementById(i._addUID("GPshowElevationPathPicto")).click()}),t.appendChild(o),t},_createElevationPathPanelProfilElement:function(){var i=document.createElement("div");return i.id="GPelevationPathProfil",i},_createElevationPathWaitingElement:function(){var i=document.createElement("div");i.id=this._addUID("GPelevationPathCalcWaitingContainer"),i.className="GPelevationPathCalcWaitingContainerHidden";var t=document.createElement("p");return t.className="GPelevationPathCalcWaiting",t.innerHTML="Calcul en cours...",i.appendChild(t),i},_createElevationPathInformationsElement:function(){var i=document.createElement("div");i.id=this._addUID("GPelevationPathInformationsContainer"),i.className="GPelevationPathInformationsContainerHidden";var t=document.createElement("p");return t.className="GPelevationPathInformations",t.innerHTML="Aucune information...",i.appendChild(t),i},_addElevationPathInformationsItem:function(i){var t=document.getElementById(this._addUID("GPelevationPathInformationsContainer"));if(t){var e=document.createElement("p");e.className="GPelevationPathInformations",e.innerHTML=i,t.appendChild(e)}return t}},ic={_getCssProperty:function(i,t){return window.getComputedStyle(i,null).getPropertyValue(t)},_getTextWidth:function(i,t,e=null){var n=this.canvas||(this.canvas=document.createElement("canvas")),r=n.getContext("2d");e===null?r.font=`${this._getCssProperty(t,"font-weight")} ${this._getCssProperty(t,"font-size")} ${this._getCssProperty(t,"font-family")}`:r.font=e;var o=r.measureText(i);return o.width},_dataZToSvgY:function(i,t,e,n){return t-(i-e)*n-.5},_dataDistToSvgX:function(i,t,e,n){return t-e+i*n},_svgXToDataDist:function(i,t,e,n){return(i+e-t)/n},_arrayBisect:function(i,t){let e;if(i.length===0)return 0;for(e=0;e<i.length;e++)if(t<i[e].dist)return e;return e-1},displayProfileByDefault:function(i,t,e,n){var r=e;if(!t||!i)return;for(;t.firstChild;)t.removeChild(t.firstChild);const o={top:25,right:15,bottom:10,left:10};var a=r.options.displayProfileOptions,s=i.points,l=JSON.parse(JSON.stringify(s));l.sort(function(nt,Ii){return nt.z-Ii.z});var u=l[0].z,c=l[l.length-1].z,h=i.distance;let d="m";const p=document.createElement("div");p.id="profileElevationByDefault",t.appendChild(p);var f=window.getComputedStyle(t).getPropertyValue("width").replace(/px/,""),g=window.getComputedStyle(t).getPropertyValue("height").replace(/px/,"");const v=g-o.top-o.bottom,y=f-o.left-o.right,m=17,A=this._getTextWidth(Math.round(c).toLocaleString()+",88",t,"400 10 Verdana"),_=17,C=15,I=15,E=this._getTextWidth(Math.round(h).toLocaleString()+",5",t),w=1,S=v-_-C,x=y-m-A,T=document.createElementNS("http://www.w3.org/2000/svg","svg");T.id="profileElevationByDefaultSvg",T.setAttribute("style","display: block; margin: auto; overflow: visible; position: absolute; left: 10px;"),T.setAttribute("viewBox",`0 0 ${f} ${g}`),T.setAttribute("width","100%"),T.setAttribute("height","100%");const L=Math.floor(S/I);let G;c===u?G=.1:G=Math.pow(10,Math.ceil(Math.log((c-u)/L)/Math.log(10)))/2;let N=Math.floor(u/G)*G,B=Math.ceil(c/G)*G;B===c&&(B+=G),N=Math.round(N*100)/100,B=Math.round(B*100)/100;let U=Math.round((B-N)/G);U+1>L&&(G=Math.pow(10,Math.ceil(Math.log((c-u)/L)/Math.log(10))),N=Math.floor(u/G)*G,B=Math.ceil(c/G)*G,B===c&&(B+=G),N=Math.round(N*100)/100,B=Math.round(B*100)/100,U=Math.floor((B-N)/G)),U=Math.max(Math.round(U),1);const D=document.createElementNS("http://www.w3.org/2000/svg","g");D.setAttribute("class","profile-z-vertical");const z=document.createElementNS("http://www.w3.org/2000/svg","g"),F=S/U;let O;c===u?O=S/.2:O=S/(B-N);let R,M,ie,Y,K,Q;for(let nt=0;nt<=U;nt++)R=document.createElementNS("http://www.w3.org/2000/svg","text"),R.setAttribute("class","profile-z-graduation"),R.setAttribute("font-family","Verdana"),R.setAttribute("font-size","10px"),R.setAttribute("fill","#5E5E5E"),R.textContent=(Math.round(100*(N+nt*G))/100).toLocaleString(),M=S-nt*F,R.setAttribute("transform",`translate(${m+A-8}, ${M+5})`),R.setAttribute("text-anchor","end"),D.appendChild(R),ie=Math.round(M)-.5,Y=document.createElementNS("http://www.w3.org/2000/svg","g"),K=document.createElementNS("http://www.w3.org/2000/svg","path"),K.setAttribute("cs","100,100"),K.setAttribute("stroke-width","1"),nt!==0?K.setAttribute("stroke-opacity","0.2"):K.setAttribute("stroke-opacity","1"),K.setAttribute("stroke","#000000"),K.setAttribute("fill","none"),K.setAttribute("d",`M${m+A},${ie} L${x+m+A},${ie}`),Q=document.createElementNS("http://www.w3.org/2000/svg","path"),Q.setAttribute("cs","100,100"),Q.setAttribute("stroke-width","1"),Q.setAttribute("stroke-opacity","1"),Q.setAttribute("stroke","#000000"),Q.setAttribute("fill","none"),Q.setAttribute("d",`M${m+A},${ie} L${m+A+5},${ie}`),Q.setAttribute("transform","translate(-5, 0)"),Y.appendChild(Q),Y.appendChild(K),z.appendChild(Y);var me=document.createElementNS("http://www.w3.org/2000/svg","text");me.setAttribute("class","profile-z-legend"),me.setAttribute("font-family","Verdana"),me.setAttribute("font-size","11px"),me.setAttribute("fill","#5E5E5E"),me.textContent="Altitude (m)",me.setAttribute("transform",`translate(${m-8}, ${Math.round(S/2)}) rotate(-90)`),me.setAttribute("text-anchor","middle"),D.appendChild(me),T.appendChild(D),T.appendChild(z),h>2e3&&(h/=1e3,d="km");const pe=Math.floor(x/E);let V=Math.pow(10,Math.ceil(Math.log(h/pe)/Math.log(10)))/2;const ze=h;let Ce=Math.floor(ze/V);Ce>pe?(V=Math.pow(10,Math.ceil(Math.log(h/pe)/Math.log(10))),Ce=Math.floor(ze/V)):Ce<w&&(V=Math.pow(10,Math.ceil(Math.log(h/pe)/Math.log(10))-1),Ce=Math.floor(ze/V)),Ce=Math.max(Ce,1);const Qe=V*Ce,At=document.createElementNS("http://www.w3.org/2000/svg","g");At.setAttribute("class","profile-x-vertical");const $e=document.createElementNS("http://www.w3.org/2000/svg","g"),it=x/ze,ue=(ze-Qe)*it,gt=Math.round((x-ue)/Ce);let et,J,He,Ve,_t,k;for(let nt=0;nt<=Ce+1;nt++)et=document.createElementNS("http://www.w3.org/2000/svg","text"),et.setAttribute("class","profile-x-graduation"),et.setAttribute("font-family","Verdana"),et.setAttribute("font-size","10px"),et.setAttribute("fill","#5E5E5E"),nt!==Ce+1&&(et.textContent=(Math.round(100*nt*V)/100).toLocaleString()),J=m+A+nt*gt,nt===Ce+1&&(J=m+A+x),et.setAttribute("transform",`translate(${J}, ${S+C+5})`),et.setAttribute("text-anchor","middle"),At.appendChild(et),He=J-.5,Ve=document.createElementNS("http://www.w3.org/2000/svg","g"),_t=document.createElementNS("http://www.w3.org/2000/svg","path"),_t.setAttribute("cs","100,100"),_t.setAttribute("stroke-width","1"),nt!==0?_t.setAttribute("stroke-opacity","0.2"):_t.setAttribute("stroke-opacity","1"),_t.setAttribute("stroke","#000000"),_t.setAttribute("fill","none"),_t.setAttribute("d",`M${He},${S} L${He},0`),k=document.createElementNS("http://www.w3.org/2000/svg","path"),k.setAttribute("cs","100,100"),k.setAttribute("stroke-width","1"),k.setAttribute("stroke-opacity","1"),k.setAttribute("stroke","#000000"),k.setAttribute("fill","none"),k.setAttribute("d",`M${He},${S} L${He},${S-5}`),k.setAttribute("transform","translate(0, 5)"),Ve.appendChild(k),Ve.appendChild(_t),$e.appendChild(Ve);var W=document.createElementNS("http://www.w3.org/2000/svg","text");W.setAttribute("class","profile-x-legend"),W.setAttribute("font-family","Verdana"),W.setAttribute("font-size","11px"),W.setAttribute("fill","#5E5E5E"),W.textContent=`Distance (${d})`,W.setAttribute("transform",`translate(${m+A+x/2}, ${S+C+_+3})`),W.setAttribute("text-anchor","middle"),At.appendChild(W),T.appendChild(At),T.appendChild($e);const q=document.createElementNS("http://www.w3.org/2000/svg","g");let se=1;d==="km"&&(se=1e3);let ye=this._dataDistToSvgX(s[0].dist/se,y,x,it),Ae=this._dataZToSvgY(s[0].z,S,N,O),qe=`M${ye},${Ae}`;for(let nt=1;nt<s.length;nt++)ye=this._dataDistToSvgX(s[nt].dist/se,y,x,it),Ae=this._dataZToSvgY(s[nt].z,S,N,O),qe+=` L${ye},${Ae}`;const Fe=document.createElementNS("http://www.w3.org/2000/svg","path");Fe.setAttribute("cs","100,100"),Fe.setAttribute("stroke-width","1"),Fe.setAttribute("stroke-opacity","1"),Fe.setAttribute("stroke","#0B6BA7"),Fe.setAttribute("fill","none"),Fe.setAttribute("d",qe),qe+=` L${ye},${S}`,qe+=` L${y-x},${S}`;const Gt=document.createElementNS("http://www.w3.org/2000/svg","path");Gt.setAttribute("cs","100,100"),Gt.setAttribute("stroke-width","1"),Gt.setAttribute("stroke-opacity","0"),Gt.setAttribute("stroke","#000000"),Gt.setAttribute("fill","#00B798"),Gt.setAttribute("fill-opacity","0.4"),Gt.setAttribute("d",qe),q.appendChild(Fe),q.appendChild(Gt),T.appendChild(q);const Et=document.createElementNS("http://www.w3.org/2000/svg","g"),We=document.createElementNS("http://www.w3.org/2000/svg","rect");We.setAttribute("width",x),We.setAttribute("height",S),We.setAttribute("transform",`translate(${y-x},0)`),We.setAttribute("visibility","hidden"),We.setAttribute("pointer-events","all");const on=JSON.parse(JSON.stringify(s));on.sort(function(nt,Ii){return nt.dist-Ii.dist});const bt=document.createElementNS("http://www.w3.org/2000/svg","line");bt.setAttribute("id","focusLineX"),bt.setAttribute("class","focusLine-default"),bt.setAttribute("fill","none"),bt.setAttribute("stroke","#F90"),bt.setAttribute("stroke-width","0.5px"),bt.setAttribute("visibility","hidden");const Ft=document.createElementNS("http://www.w3.org/2000/svg","line");Ft.setAttribute("id","focusLineY"),Ft.setAttribute("class","focusLine-default"),Ft.setAttribute("fill","none"),Ft.setAttribute("stroke","#F90"),Ft.setAttribute("stroke-width","0.5px"),Ft.setAttribute("visibility","hidden");const Gi=document.createElementNS("http://www.w3.org/2000/svg","circle");Gi.setAttribute("id","focusCircle"),Gi.setAttribute("r",4),Gi.setAttribute("class","circle-default focusCircle-default"),Gi.setAttribute("fill","#F90"),Gi.setAttribute("visibility","hidden"),Et.appendChild(Gi),Et.appendChild(bt),Et.appendChild(Ft);const Mt=document.createElementNS("http://www.w3.org/2000/svg","text"),Xi=document.createElementNS("http://www.w3.org/2000/svg","tspan"),Or=document.createElementNS("http://www.w3.org/2000/svg","tspan"),Zi=document.createElementNS("http://www.w3.org/2000/svg","tspan");Mt.setAttribute("style","text-align:center; max-width:220px; font-size:10px; color:#000000; font-family:Verdana; z-index:50;"),Mt.style.pointerEvents="none",Mt.style.position="fixed",Mt.setAttribute("class","tooltipInit"),Mt.setAttribute("text-anchor","middle"),p.appendChild(Mt),Xi.setAttribute("class","altiPathValue"),Xi.setAttribute("x","0"),Xi.setAttribute("dy","-.7em"),Or.setAttribute("class","altiPathValue"),Or.setAttribute("x","0"),Or.setAttribute("dy","1em"),Zi.setAttribute("class","altiPathCoords"),Zi.setAttribute("x","0"),Zi.setAttribute("dy","1em"),Mt.appendChild(Xi),a.currentSlope&&Mt.appendChild(Or),Mt.appendChild(Zi);const Ai=document.createElementNS("http://www.w3.org/2000/svg","g");Et.appendChild(Ai);const ki=document.createElementNS("http://www.w3.org/2000/svg","path");ki.setAttribute("cs","100,100"),ki.setAttribute("fill","#FFFFFF"),ki.setAttribute("stroke","#CCCCCC"),ki.setAttribute("fill-opacity","0.8"),ki.setAttribute("stroke-width","1"),ki.setAttribute("stroke-opacity","1");const si=document.createElementNS("http://www.w3.org/2000/svg","path");si.setAttribute("cs","100,100"),si.setAttribute("fill","#FFFFFF"),si.setAttribute("stroke","#000000"),si.setAttribute("fill-opacity","0"),si.setAttribute("stroke-width","1"),si.setAttribute("stroke-opacity","0.4"),si.setAttribute("transform","translate(1,1)"),Ai.appendChild(si),Ai.appendChild(ki),Ai.appendChild(Mt),Ai.setAttribute("class","tooltipInit"),Ai.style.pointerEvents="none";function Vn(){bt.setAttribute("visibility","visible"),Ft.setAttribute("visibility","visible"),Gi.setAttribute("visibility","visible"),n.__createProfileMarker(r,s[0]),Mt.setAttribute("class","tooltipFadeIn"),Ai.setAttribute("class","tooltipFadeIn")}function Wo(){bt.setAttribute("visibility","hidden"),Ft.setAttribute("visibility","hidden"),Gi.setAttribute("visibility","hidden"),n.__removeProfileMarker(r),Mt.setAttribute("class","tooltipFadeOut"),Ai.setAttribute("class","tooltipFadeOut")}function Wn(nt){const Ii=T.createSVGPoint();Ii.x=nt.clientX,Ii.y=nt.clientY;const ao=Ii.matrixTransform(T.getScreenCTM().inverse()),so=this._svgXToDataDist(ao.x,y,x,it)*se,Fa=Math.max(1,this._arrayBisect(on,so)),Ua=s[Fa-1],ar=s[Fa];let li=Ua;so-Ua.dist>ar.dist-so&&(li=ar);const Rt=this._dataDistToSvgX(li.dist/se,y,x,it),Ei=this._dataZToSvgY(li.z,S,N,O);Gi.setAttribute("cx",Rt),Gi.setAttribute("cy",Ei),bt.setAttribute("x1",Rt),bt.setAttribute("y1",S),bt.setAttribute("x2",Rt),bt.setAttribute("y2",0),Ft.setAttribute("x1",m+A),Ft.setAttribute("y1",Ei),Ft.setAttribute("x2",x+m+A),Ft.setAttribute("y2",Ei),n.__updateProfileMarker(r,li);const sr=`Altitude : ${li.z.toLocaleString()} m`,Jt=`Pente : ${li.slope} %`,ui=`(lat : ${li.lat.toLocaleString()} / lon : ${li.lon.toLocaleString()})`;Xi.innerHTML=sr,Or.innerHTML=Jt,Zi.innerHTML=ui;const an=Math.max(this._getTextWidth(ui,Zi),this._getTextWidth(sr,Xi));let Lr;li.dist>h*se/2?(Lr=`M -0.5 -0.5 l -6 6 l 0 16 l -${an+10} 0 l 0 -44 l ${an+10} 0 l 0 16 l 6 6`,Mt.setAttribute("transform",`translate(${-(an/2+12)},0)`)):li.dist<=h*se/2&&(Lr=`M -0.5 -0.5 l 6 6 l 0 16 l ${an+10} 0 l 0 -44 l -${an+10} 0 l 0 16 l -6 6`,Mt.setAttribute("transform",`translate(${an/2+12},0)`)),ki.setAttribute("d",Lr),si.setAttribute("d",Lr),Ai.setAttribute("transform",`translate(${Rt},${Ei})`),Ai.style.transform=`translate(${Rt}px,${Ei}px)`}return We.addEventListener("pointerover",Vn),We.addEventListener("pointerout",Wo),We.addEventListener("pointermove",Wn.bind(this)),Et.appendChild(We),T.appendChild(Et),p.appendChild(T),t},displayProfileRaw:function(i,t,e,n){if(t){for(;t.firstChild;)t.removeChild(t.firstChild);var r=i&&i.points?i.points:{},o=document.createElement("textarea");return o.id="profilElevationResults",o.rows=10,o.cols=50,o.style.width="100%",o.innerHTML=JSON.stringify(r,void 0,4),o.addEventListener("mouseover",function(a){n.__customRawProfileMouseOverEvent(e,a)}),t.appendChild(o),t}},displayProfileLibD3:function(i,t,e,n){var r=e;if(t&&i){for(;t.firstChild;)t.removeChild(t.firstChild);var o=i.points;if(i.distance>2e3){i.unit="km";for(let w=0;w<o.length;w++)o[w].dist/=1e3}var a=r.options.displayProfileOptions,s={top:20,right:20,bottom:30,left:40},l=window.getComputedStyle(t).getPropertyValue("width"),u=window.getComputedStyle(t).getPropertyValue("height"),c=l.replace(/px/,"")-s.left-s.right,h=u.replace(/px/,"")-s.top-s.bottom,d=d3.scale.linear().range([0,c]),p=d3.scale.linear().range([h,0]),f=d3.svg.axis().scale(d).orient("bottom").ticks(5),g=d3.svg.axis().scale(p).orient("left").ticks(5),v=d3.svg.line().interpolate("basis").x(function(w){return d(w.dist)}).y(function(w){return p(w.z)}),y=d3.svg.area().interpolate("basis").x(function(w){return d(w.dist)}).y0(h).y1(function(w){return p(w.z)}),m=d3.select(t).append("svg").attr("width",c+s.left+s.right).attr("height",h+s.top+s.bottom).append("g").attr("transform","translate("+s.left+","+s.top+")"),A=d3.extent(o,function(w){return w.dist});d.domain(A);var _=[0,d3.max(o,function(w){return w.z})];p.domain(_),m.append("path").datum(o).attr("class","area-d3").attr("d",y),m.append("g").attr("class","x axis-d3").attr("transform","translate(0,"+h+")").call(f).append("text").attr("y",-15).attr("dy",".71em").attr("x",c).text("Distance ("+i.unit+")"),m.append("g").attr("class","y axis-d3").call(g).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").text("Altitude (m)"),m.append("g").attr("class","grid-d3 vertical").attr("transform","translate(0,"+h+")").call(f.orient("bottom").tickSize(-h,0,0).tickFormat("")),m.append("g").attr("class","grid-d3 horizontal").call(g.orient("left").tickSize(-c,0,0).tickFormat("")),m.append("path").datum(o).attr("class","line-d3").attr("d",v),m.selectAll("circle").data(o).enter().append("circle").attr("cx",function(w){return d(w.dist)}).attr("cy",function(w){return p(w.z)}).attr("r",0).attr("class","circle-d3");var C=m.append("g").style("display","none");C.append("line").attr("id","focusLineX").attr("class","focusLine-d3"),C.append("line").attr("id","focusLineY").attr("class","focusLine-d3"),C.append("circle").attr("id","focusCircle").attr("r",4).attr("class","circle-d3 focusCircle-d3");var I=d3.select(t).append("div").attr("class","tooltip-d3").style("opacity",0),E=d3.bisector(function(w){return w.dist}).left;return m.append("rect").attr("class","overlay-d3").attr("width",c).attr("height",h).on("mouseover",function(){C.style("display",null),n.__createProfileMarker(r,o[0])}).on("mouseout",function(){C.style("display","none"),n.__removeProfileMarker(r),I.transition().duration(500).style("opacity",0)}).on("mousemove",function(){var w=d3.mouse(this),S=d.invert(w[0]),x=Math.max(1,E(o,S)),T=o[x-1],L=o[x],G=S-T[0]>L[0]-S?L:T,N=d(G.dist),B=p(G.z);C.select("#focusCircle").attr("cx",N).attr("cy",B),C.select("#focusLineX").attr("x1",N).attr("y1",p(_[0])).attr("x2",N).attr("y2",p(_[1])),C.select("#focusLineY").attr("x1",d(A[0])).attr("y1",B).attr("x2",d(A[1])).attr("y2",B),n.__updateProfileMarker(r,G),I.transition().duration(200).style("opacity",.9);var U="";U+=" Altitude : "+G.z+" m",a.currentSlope&&(U+="<br/> Pente : "+G.slope+" %"),U+="<br/> (Lat : "+G.lat+"/ Lon : "+G.lon+")",I.html(U).style("left",d3.event.pageX+"px").style("top",d3.event.pageY-28+"px")}),m}},displayProfileLibAmCharts:function(i,t,e,n){var r=e;if(t&&i){var o=i.points,a="<span class='altiPathValue'>[[title]] : [[value]]m</span><br/>",s=r.options.displayProfileOptions.currentSlope;if(s&&(a+="<span class='altiPathValue'>Pente : [[slope]] %</span><br/>"),a+="<span class='altiPathCoords'>(Lat: [[lat]] / Lon:[[lon]])</span>",AmCharts.addInitHandler(function(){}),i.distance>2e3){i.unit="km";for(let d=0;d<o.length;d++)o[d].dist/=1e3}for(let d=0;d<o.length;d++){var l=o[d].dist,u=100;l>100?u=1:l>10&&(u=10),l=Math.round(l*u)/u,o[d].dist=l}var c={type:"serial",pathToImages:"http://cdn.amcharts.com/lib/3/images/",categoryField:"dist",autoMarginOffset:0,marginRight:10,marginTop:10,startDuration:0,color:"#5E5E5E",fontSize:8,theme:"light",thousandsSeparator:"",numberFormatter:{precision:-1,decimalSeparator:",",thousandsSeparator:" "},categoryAxis:{color:"#5E5E5E",gridPosition:"start",minHorizontalGap:40,tickPosition:"start",title:"Distance ("+i.unit+")",titleColor:"#5E5E5E",labelOffset:0,startOnAxis:!0},chartCursor:{animationDuration:0,bulletsEnabled:!0,bulletSize:10,categoryBalloonEnabled:!1,cursorColor:"#F90",graphBulletAlpha:1,graphBulletSize:1,zoomable:!1},trendLines:[],graphs:[{balloonColor:"#CCCCCC",balloonText:a,bullet:"round",bulletAlpha:0,bulletBorderColor:"#FFF",bulletBorderThickness:2,bulletColor:"#F90",bulletSize:6,hidden:!1,id:"AmGraph-1",fillAlphas:.4,fillColors:"#C77A04",lineAlpha:1,lineColor:"#C77A04",lineThickness:1,title:"Altitude",valueField:"z"}],guides:[],valueAxes:[{id:"ValueAxis-1",minVerticalGap:20,title:"Altitude (m)"}],balloon:{borderColor:"#CCCCCC",borderThickness:1,fillColor:"#FFFFFF",showBullet:!0},titles:[],allLabels:[],dataProvider:o},h=AmCharts.makeChart(t,c);return h.addListener("changed",function(d){var p=d.chart.dataProvider[d.index];n.__updateProfileMarker(r,p)}),h}}},Le=Ye.getLogger("elevationpath"),z0=function(i){function t(e){if(Le.trace("ElevationPath()"),e=e||{},!(this instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this.CLASSNAME="ElevationPath",this._uid=Re.generate(),this._showContainer=null,this._pictoContainer=null,this._panelContainer=null,this._profileContainer=null,this._waitingContainer=null,this._infoContainer=null,this._timerHdlr=null,this._drawStyleStart=null,this._drawStyleFinish=null,this._markerStyle=null,this._profile=null,this._data={},this._measureSource=null,this._measureVector=null,this._measureDraw=null,this._lastSketch=null,this._currentSketch=null,this._marker=null,this._initialize(e),this._container=e.element?e.element:this._initializeContainer(),i.call(this,{element:this._container,target:e.target,render:e.render})}return i&&(t.__proto__=i),t.prototype=Object.create(i.prototype,{}),he.assign(t.prototype,E4),t.__removeProfileMarker=function(e){var n=e;n._marker&&(n._measureSource.removeFeature(n._marker),n._marker=null)},t.__createProfileMarker=function(e,n){var r=e;r._marker&&(r._measureSource.removeFeature(r._marker),r._marker=null);var o=r.getMap(),a=o.getView().getProjection(),s=ut([n.lon,n.lat],"EPSG:4326",a),l=r._measureSource.getFeatures()[0].getGeometry().getClosestPoint(s),u=new Wi(l);r._marker=new ii({geometry:u}),Le.trace(u),r._marker.setStyle(r._markerStyle),r._measureSource.addFeature(r._marker)},t.__updateProfileMarker=function(e,n){var r=e;t.__removeProfileMarker(r),t.__createProfileMarker(r,n)},t.__customRawProfileOperation=function(e,n){Le.log("__customRawProfileOperation");for(var r=e,o=n.points,a=r.getMap().getView().getProjection(),s=0;s<o.length;s++){var l=o[s],u=ut([l.lon,l.lat],"EPSG:4326",a),c=new Wi(u);r._marker=new ii({geometry:c}),Le.trace(c);var h=t.DEFAULT_STYLES.RESULTS,d=new gi({radius:h.imageRadius,stroke:new Me({color:h.imageStrokeColor,width:h.imageStrokeWidth}),fill:new Ge({color:h.imageFillColor})});r._marker.setStyle(new de({image:d})),r._measureSource.addFeature(r._marker)}},t.__customRawProfileMouseOverEvent=function(e,n){Le.log("__customRawProfileMouseOverEvent",e,n)},t.DISPLAY_PROFILE_LIB_AMCHARTS=function(e,n,r){if(Le.trace("ElevationPath.DISPLAY_PROFILE_LIB_AMCHARTS"),typeof AmCharts>"u"){Le.log("Lib. AmCharts is not loaded !");return}var o=ic.displayProfileLibAmCharts(e,n,r,t);o&&(this._profile=o)},t.DISPLAY_PROFILE_LIB_D3=function(e,n,r){if(Le.trace("ElevationPath.DISPLAY_PROFILE_LIB_D3"),typeof d3>"u"){Le.log("Lib. D3 is not loaded !");return}var o=ic.displayProfileLibD3(e,n,r,t);o&&(this._profile=o)},t.DISPLAY_PROFILE_RAW=function(e,n,r){Le.trace("ElevationPath.DISPLAY_PROFILE_RAW");var o=ic.displayProfileRaw(e,n,r,t);o&&(this._profile=o)},t.DISPLAY_PROFILE_BY_DEFAULT=function(e,n,r){Le.trace("ElevationPath.DISPLAY_PROFILE_BY_DEFAULT");var o=ic.displayProfileByDefault(e,n,r,t);o&&(this._profile=o)},t.DEFAULT_STYLES={MARKER:new ni({src:It.lightOrange,anchor:[.5,1],snapToPixel:!0}),RESULTS:{imageRadius:5,imageFillColor:"rgba(128, 128, 128, 0.2)",imageStrokeColor:"rgba(0, 0, 0, 0.7)",imageStrokeWidth:2}},t.prototype.constructor=t,t.prototype.setMap=function(e){if(Le.trace("ElevationPath::setMap"),e&&(this.options.active&&(this._profile===null&&(this._panelContainer.style.display="none"),this._initMeasureInteraction(e),this._addMeasureInteraction(e)),this.options.target||Pu.add(e,this),this.options.export)){var n=he.assign({control:this},this.options.export);this.export=new Vo(n),this.export.render();var r=this;this.export.on("export:compute",o=>{r.dispatchEvent({type:"export:compute",content:o.content})})}i.prototype.setMap.call(this,e)},t.prototype.getActive=function(){return Le.trace("ElevationPath::getActive"),this.options.active},t.prototype.setActive=function(e){Le.trace("ElevationPath::setActive"),this.options.active=e},t.prototype.getData=function(){return he.assign({type:"elevationpath"},this._data)},t.prototype.setData=function(e){this._data=e},t.prototype.getContainer=function(){return this._container},t.prototype.getLayer=function(){return this._measureVector},t.prototype.setLayer=function(e){if(!e){this._measureVector=null;return}if(!(e instanceof mi)){Le.log("no valid layer given for hosting drawn features.");return}e.setStyle(this._drawStyleFinish),this._measureVector=e,this._measureSource=e.getSource()},t.prototype.getGeoJSON=function(){var e=this._measureVector.getSource().getFeatures(),n=new kn({defaultStyle:this._drawStyleFinish}),r=n.writeFeatures(e,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"});return r},t.prototype.getStyle=function(){return this._drawStyleFinish},t.prototype.clean=function(e){Le.trace("ElevationPath::clean");var n=this.getMap();this._panelContainer.style.display="none",this._showContainer.checked=!1,this._removeProfile(),this._removeMeasureInteraction(n,typeof e<"u"?e:!1),this.setLayer()},t.prototype.init=function(){this._showContainer.checked=!0,this._panelContainer.style.display="block",this._displayProfile(this._data),this._waitingContainer.className="GPelevationPathCalcWaitingContainerHidden"},t.prototype._initialize=function(e){Le.trace("ElevationPath::_initialize : ",e),this.options={target:null,render:null,active:!1,apiKey:null,export:!1,elevationOptions:{outputFormat:"json"},layerDescription:{title:"Profil altimétrique",description:"Mon profil altimétrique"},displayProfileOptions:{totalDistance:!0,greaterSlope:!0,meanSlope:!0,ascendingElevation:!0,descendingElevation:!0,currentSlope:!0,apply:null,target:null},stylesOptions:{profile:null,draw:null,marker:null}},he.mergeParams(this.options,e),this.options.target=e.target||null,this.options.apiKey=e.apiKey;var n=e.displayProfileOptions||{};this.export=null;var r=n.apply;this.options.displayProfileOptions.apply=typeof r=="function"?r:t.DISPLAY_PROFILE_BY_DEFAULT;var o=n.target;this.options.displayProfileOptions.target=typeof o<"u"?o:null;var a=e.stylesOptions||{};this.options.stylesOptions.draw=a.draw||{},this._createStylingDraw(),this.options.stylesOptions.marker=a.marker||{},this._createStylingMarker()},t.prototype._initializeContainer=function(){Le.trace("ElevationPath::_initializeContainer : ",this._uid);var e=this._createMainContainerElement(),n=this._showContainer=this._createShowElevationPathElement();e.appendChild(n);var r=this._pictoContainer=this._createShowElevationPathPictoElement();e.appendChild(r),this.options.active&&(this._showContainer.checked=!0);var o=this._panelContainer=this._createElevationPathPanelElement(),a=this._createElevationPathPanelHeaderElement();o.appendChild(a);var s=this._profileContainer=this._createElevationPathPanelProfilElement();o.appendChild(s);var l=this._waitingContainer=this._createElevationPathWaitingElement();o.appendChild(l);var u=this._infoContainer=this._createElevationPathInformationsElement();return o.appendChild(u),this.options.displayProfileOptions.target===null&&e.appendChild(o),e},t.prototype._createStylingMarker=function(){Le.trace("ElevationPath::_createStylingMarker ");var e=t.DEFAULT_STYLES.MARKER;Le.trace("style marker",e),this.options.stylesOptions.marker instanceof Pc&&(e=this.options.stylesOptions.marker),this._markerStyle=new de({image:e})},t.prototype._createStylingDraw=function(){Le.trace("ElevationPath::_createStylingDraw");var e=this.options.stylesOptions.draw;Le.trace("style start",e.start);var n={image:In.DEFAULT_POINTER_STYLE,stroke:In.DEFAULT_DRAW_START_STYLE.getStroke()};e.hasOwnProperty("pointer")&&e.pointer instanceof Pc&&(n.image=e.pointer),e.hasOwnProperty("start")&&e.start instanceof Me&&(n.stroke=e.start),this._drawStyleStart=new de(n),Le.trace("style finish",e.finish);var r={stroke:In.DEFAULT_DRAW_FINISH_STYLE.getStroke()};e.hasOwnProperty("finish")&&e.finish instanceof Me&&(r.stroke=e.finish),this._drawStyleFinish=new de(r)},t.prototype._createStylingProfile=function(){Le.trace("ElevationPath::_createStylingProfile");var e=this.options.stylesOptions.profile;Le.trace("style profile",e);var n=t.DEFAULT_STYLES.PROFILE;Object.keys(n).forEach(r=>{if(!e.hasOwnProperty(r))e[r]=n[r];else{var o=n[r];typeof o=="object"&&(he.mergeParams(o,e[r]),e[r]=o)}})},t.prototype._initMeasureInteraction=function(e){Le.trace("ElevationPath::_initMeasureInteraction()"),e&&(this._measureSource=new fn,this._measureVector=new mi({source:this._measureSource,style:this._drawStyleFinish}),this._measureVector.gpResultLayerId="measure:profil",e.addLayer(this._measureVector),e.getControls().forEach(n=>{if(n instanceof Mr){var r=this._measureVector.gpLayerId;n._layers[r].title===r&&n.addLayer(this._measureVector,{title:this.options.layerDescription.title,description:this.options.layerDescription.description})}}))},t.prototype._addMeasureInteraction=function(e){Le.trace("ElevationPath::_addMeasureInteraction()"),e&&(this._measureDraw=new Ln({source:this._measureSource,type:"LineString",style:this._drawStyleStart,stopClick:!0}),this._measureDraw.setProperties({name:"ElevationPath",source:this}),e.addInteraction(this._measureDraw),this._measureDraw.on("drawstart",n=>{Le.trace("drawstart",n),this._marker!==null&&(this._measureSource.removeFeature(this._marker),this._marker=null),this._lastSketch!==null&&(this._measureSource.removeFeature(this._lastSketch),this._lastSketch=null),this._currentSketch=n.feature;for(var r=this._measureSource.getFeatures(),o=0;o<r.length;o++)this._measureSource.removeFeature(r[o]);this.dispatchEvent("elevationpath:drawstart")}),this._measureDraw.on("drawend",n=>{Le.trace("drawend",n),this.dispatchEvent("elevationpath:drawend"),this._lastSketch=this._currentSketch,typeof this.options.elevationOptions.onSuccess>"u"&&this.options.displayProfileOptions.target===null&&(this._panelContainer.style.display="block"),this._measureDraw.setActive(!1),this._requestService()}))},t.prototype._removeMeasureInteraction=function(e,n){Le.trace("ElevationPath::_removeMeasureInteraction()"),e&&(n&&this._measureVector&&(e.removeLayer(this._measureVector),this._measureVector=null),this._measureDraw&&(e.removeInteraction(this._measureDraw),this._measureDraw=null))},t.prototype._getGeometry=function(){if(this._currentSketch===null){Le.warn("Current Feature undefined !?");return}for(var e=[],n=this.getMap(),r=n.getView().getProjection(),o="EPSG:4326",a=this._currentSketch.getGeometry().getCoordinates(),s=0;s<a.length;s++){var l=a[s],u=l;r!==o&&(u=ut(l,r,o)),e.push({lon:Math.round(u[0]*1e8)/1e8,lat:Math.round(u[1]*1e8)/1e8})}return e},t.prototype._getLength=function(){if(this._currentSketch===null){Le.warn("Current Feature undefined !?");return}for(var e=0,n=this.getMap(),r=n.getView().getProjection(),o="EPSG:4326",a=this._currentSketch.getGeometry().getCoordinates(),s=0,l=a.length-1;s<l;++s){var u=ut(a[s],r,o),c=ut(a[s+1],r,o);u[0]=Math.round(u[0]*1e8)/1e8,u[1]=Math.round(u[1]*1e8)/1e8,c[0]=Math.round(c[0]*1e8)/1e8,c[1]=Math.round(c[1]*1e8)/1e8,e+=Ia(u,c)}return e},t.prototype._getSketchCoords=function(){if(this._currentSketch===null){Le.warn("Current Feature undefined !?");return}for(var e=this.getMap(),n=e.getView().getProjection(),r="EPSG:4326",o=[],a=this._currentSketch.getGeometry().getCoordinates(),s=0;s<a.length;s++){var l=ut(a[s],n,r);l[0]=Math.round(l[0]*1e8)/1e8,l[1]=Math.round(l[1]*1e8)/1e8,o.push(l)}return o},t.prototype._requestService=function(){Le.trace("ElevationPath::_requestService");var e=this._getGeometry();if(Le.trace("geometry",e),!e){Le.warn("missing geometry !?");return}var n={};he.mergeParams(n,this.options.elevationOptions),he.mergeParams(n,{apiKey:n.apiKey||this.options.apiKey}),typeof n.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?n.ssl=this.options.ssl:n.ssl=!0),he.mergeParams(n,{ssl:n.ssl});var r=this,o=this.options.elevationOptions.onFailure!==null&&typeof this.options.elevationOptions.onFailure=="function",a=this.options.elevationOptions.onSuccess!==null&&typeof this.options.elevationOptions.onSuccess=="function",s=function(f){Le.trace(f),f&&(r._panelContainer.style.display="block",r._data&&(r._data={}),r._data=r._computeElevationMeasure(f.elevations),r._displayProfile(r._data),r._waitingContainer.className="GPelevationPathCalcWaitingContainerHidden",r._waiting=!1,r._measureDraw.setActive(!0)),a&&r.options.elevationOptions.onSuccess.call(r,r.getData())},l=function(f){r._panelContainer.style.display="none",Le.error(f.message),r._waitingContainer.className="GPelevationPathCalcWaitingContainerHidden",r._waiting=!1,r._measureDraw.setActive(!0),o&&r.options.elevationOptions.onFailure.call(r,f)};he.mergeParams(n,{onSuccess:s,onFailure:l});var u=n.sampling;if(!u){var c,h=this._getLength();Le.trace("length",h);var d=Math.max(50,Math.floor(h)/5);d>200?c=200:c=Math.floor(d);var p=this._getSketchCoords().length;p>100&&(c=0)}c>0&&he.mergeParams(n,{sampling:c}),he.mergeParams(n,{positions:e}),Le.trace("options du service",n),this._waitingContainer.className="GPelevationPathCalcWaitingContainerVisible",tt.Services.getAltitude(n)},t.prototype._computeElevationMeasure=function(e){Le.trace("ElevationPath::_computeElevationMeasure",e);var n=e,r="m",o=this._getSketchCoords();if(o){var a=0,s=0,l=o[1];n[0].dist=0,n[0].slope=0,n[0].lat=Math.round(n[0].lat*1e4)/1e4,n[0].lon=Math.round(n[0].lon*1e4)/1e4;for(var u=0,c=0,h=0,d=0,p=0,f=0,g=[],v=1;v<n.length;v++){var y=[n[v].lon,n[v].lat],m=s+Ia(y,o[a]),A=m-p;y[0]===l[0]&&y[1]===l[1]&&(a++,s=m,v!==n.length-1&&(l=o[a+1]));var _=n[v].z,C=n[v-1].z;_<0&&(_=0),C<0&&(C=0);var I=_-C;I<0?(u+=A,d+=I):I>0&&(c+=A,h+=I),p=m,n[v].dist=m,g.push(m),f+=I?Math.abs(Math.round(I/A*100)):0,n[v].slope=I?Math.abs(Math.round(I/A*100)):0;var E=n[v].slope;E>15&&E<30?n[v].color="#005b4c":E>30&&E<45?n[v].color="#00362d":E>45?n[v].color="#00120f":n[v].color="#00B798",n[v].lat=Math.round(n[v].lat*1e4)/1e4,n[v].lon=Math.round(n[v].lon*1e4)/1e4}Le.trace("List Distances",g);for(var w=n[0].z,S=n[0].z,x=n[0].slope,T=0;T<n.length;T++){var L=n[T];L.z<-100&&(L.z=0),L.z>S&&(S=L.z),L.z<w&&(w=L.z),L.slope>x&&(x=L.slope)}return{greaterSlope:x,meanSlope:Math.round(f/n.length),distancePlus:c,distanceMinus:u,ascendingElevation:h,descendingElevation:d,altMin:w.toLocaleString(),altMax:S.toLocaleString(),distance:this._getLength(),unit:r,points:n}}},t.prototype._displayProfile=function(e){Le.trace("ElevationPath::_displayProfile",e),this._updateInfoContainer();var n=this.options.displayProfileOptions.target;n&&n.appendChild(this._panelContainer),n=this._profileContainer;var r=this,o=this.options.displayProfileOptions.apply;o.call(this,e,n,r);var a=this.options.displayProfileOptions,s=document.getElementById("GPelevationPathPanelInfo-"+this._uid);s&&(a.totalDistance||a.greaterSlope||a.meanSlope||a.ascendingElevation||a.descendingElevation)&&(s.style.display="block"),this.dispatchEvent({type:"elevationpath:compute"})},t.prototype._updateInfoContainer=function(){Le.trace("ElevationPath::_updateInfoContainer");var e=this.options.displayProfileOptions.totalDistance,n=this.options.displayProfileOptions.meanSlope,r=this.options.displayProfileOptions.greaterSlope,o=this.options.displayProfileOptions.ascendingElevation,a=this.options.displayProfileOptions.descendingElevation,s=this._infoContainer;if(s.childElementCount)for(;s.firstChild;)s.removeChild(s.firstChild);e&&this._addElevationPathInformationsItem("Distance totale : "+Math.round(this._data.distance).toLocaleString()+" m"),o&&this._addElevationPathInformationsItem("Dénivelé positif : "+this._data.ascendingElevation.toLocaleString()+" m"),a&&this._addElevationPathInformationsItem("Dénivelé négatif : "+this._data.descendingElevation.toLocaleString()+" m"),n&&this._addElevationPathInformationsItem("Pente moyenne : "+this._data.meanSlope.toLocaleString()+" %"),r&&this._addElevationPathInformationsItem("Plus forte pente : "+this._data.greaterSlope.toLocaleString()+" %")},t.prototype._removeMeasure=function(){if(this._lastSketch=null,this._currentSketch=null,this._measureSource){this._marker&&(this._measureSource.removeFeature(this._marker),this._marker=null);for(var e=this._measureSource.getFeatures(),n=0;n<e.length;n++)this._measureSource.removeFeature(e[n])}},t.prototype._removeProfile=function(){if(this._profile=null,this._profileContainer)for(;this._profileContainer.firstChild;)this._profileContainer.removeChild(this._profileContainer.firstChild)},t.prototype.onShowElevationPathClick=function(e){var n=this.getMap();Tr.unset(n,{current:"ElevationPath"}),this._showContainer.checked?(this._panelContainer.style.display="none",e&&e.target.dataset&&e.target.dataset.removeMeasure?e.target.dataset.removeMeasure==="true"?this._removeMeasure():(this._lastSketch=null,this._currentSketch=null):this._removeMeasure(),this._removeProfile(),e&&e.target.dataset&&e.target.dataset.removeLayer?this._removeMeasureInteraction(n,e.target.dataset.removeLayer==="true"):this._removeMeasureInteraction(n,!0)):(this._profile===null&&(this._panelContainer.style.display="none"),this._initMeasureInteraction(n),this._addMeasureInteraction(n))},t.prototype.onOpenElevationPathInfoClick=function(){var e=this._infoContainer;e.className==="GPelevationPathInformationsContainerVisible"?(clearTimeout(this._timerHdlr),e.className="GPelevationPathInformationsContainerHidden"):e.className="GPelevationPathInformationsContainerVisible",this._timerHdlr=setTimeout(function(){e.className="GPelevationPathInformationsContainerHidden"},4e3)},t}(yi);window.ol&&window.ol.control&&(window.ol.control.ElevationPath=z0);var fe=Ye.getLogger("layerimport"),Y_=function(i){function t(e){if(e=e||{},!(this instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(e);var n=this._container=this._initContainer(e);i.call(this,{element:n,target:e.target,render:e.render})}return i&&(t.__proto__=i),t.DefaultStyles={image:new ni({src:It.lightOrange,anchor:[25.5,38],anchorOrigin:"top-left",anchorXUnits:"pixels",anchorYUnits:"pixels"}),stroke:new Me({color:"rgba(0,42,80,0.8)",width:4}),fill:new Ge({color:"rgba(0, 183, 152, 0.5)"}),text:new Cr({font:"16px Sans",textAlign:"left",fill:new Ge({color:"rgba(255, 255, 255, 1)"}),stroke:new Me({color:"rgba(0, 0, 0, 1)",width:2})})},t.prototype=Object.create(i.prototype,{}),he.assign(t.prototype,C4),t.prototype.constructor=t,t.prototype.setMap=function(e){if(e){var n=this;e.getLayers().on("remove",function(r){r.element.gpResultLayerId==="layerimport:MAPBOX"&&r.element.gpEditorId&&n._mapBoxPanel&&n._importPanel&&(n.cleanMapBoxResults(r.element.gpEditorId),n._mapBoxPanel.style.display="none",n._importPanel.style.display="")},n),this.draggable&&(Oo.dragElement(this._importPanel,this._importPanelHeader,e.getTargetElement()),Oo.dragElement(this._getCapPanel,this._getCapPanelHeader,e.getTargetElement()),Oo.dragElement(this._mapBoxPanel,this._mapBoxPanelHeader,e.getTargetElement()))}i.prototype.setMap.call(this,e)},t.prototype.getCollapsed=function(){return this.collapsed},t.prototype.setCollapsed=function(e){if(e===void 0){fe.error("[ERROR] LayerImport:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(e?document.getElementById("GPimportPanelClose-"+this._uid).click():document.getElementById("GPshowImport-"+this._uid).click(),this.collapsed=e)},t.prototype.getStaticImportContent=function(){return this.contentStatic},t.prototype.getServiceImportContent=function(){return this.contentService},t.prototype.getName=function(){return this._name},t.prototype._initialize=function(e){if(this._checkInputOptions(e),this.options={collapsed:!0,draggable:!1,layerTypes:["KML","GPX","GeoJSON","WMS","WMTS","MAPBOX"],webServicesOptions:{},vectorStyleOptions:{KML:{extractStyles:!0,showPointNames:!0,defaultStyle:{}},GPX:{defaultStyle:{}},GeoJSON:{defaultStyle:{}},MapBox:{defaultStyle:{},editor:{}}}},e.vectorStyleOptions&&e.vectorStyleOptions.KML&&e.vectorStyleOptions.KML.extractStyles&&(this.options.vectorStyleOptions.KML.extractStyles=e.vectorStyleOptions.KML.extractStyles),e.vectorStyleOptions&&e.vectorStyleOptions.KML&&e.vectorStyleOptions.KML.showPointNames&&(this.options.vectorStyleOptions.KML.showPointNames=e.vectorStyleOptions.KML.showPointNames),e.vectorStyleOptions&&e.vectorStyleOptions.KML&&e.vectorStyleOptions.KML.defaultStyle?this.options.vectorStyleOptions.KML.defaultStyle=e.vectorStyleOptions.KML.defaultStyle:this.options.vectorStyleOptions.KML.defaultStyle=new de({image:t.DefaultStyles.image,stroke:t.DefaultStyles.stroke,fill:t.DefaultStyles.fill,text:t.DefaultStyles.text}),e.vectorStyleOptions&&e.vectorStyleOptions.GPX&&e.vectorStyleOptions.GPX.defaultStyle?this.options.vectorStyleOptions.GPX.defaultStyle=e.vectorStyleOptions.GPX.defaultStyle:this.options.vectorStyleOptions.GPX.defaultStyle=new de({image:t.DefaultStyles.image,stroke:t.DefaultStyles.stroke,fill:t.DefaultStyles.fill,text:t.DefaultStyles.text}),e.vectorStyleOptions&&e.vectorStyleOptions.GeoJSON&&e.vectorStyleOptions.GeoJSON.defaultStyle?this.options.vectorStyleOptions.GeoJSON.defaultStyle=e.vectorStyleOptions.GeoJSON.defaultStyle:this.options.vectorStyleOptions.GeoJSON.defaultStyle=new de({image:t.DefaultStyles.image,stroke:t.DefaultStyles.stroke,fill:t.DefaultStyles.fill,text:t.DefaultStyles.text}),e.vectorStyleOptions&&e.vectorStyleOptions.MapBox&&e.vectorStyleOptions.MapBox.defaultStyle?this.options.vectorStyleOptions.MapBox.defaultStyle=e.vectorStyleOptions.MapBox.defaultStyle:this.options.vectorStyleOptions.MapBox.defaultStyle=new de({image:t.DefaultStyles.image,stroke:t.DefaultStyles.stroke,fill:t.DefaultStyles.fill,text:t.DefaultStyles.text}),e.vectorStyleOptions&&e.vectorStyleOptions.MapBox&&e.vectorStyleOptions.MapBox.editor?this.options.vectorStyleOptions.MapBox.editor=e.vectorStyleOptions.MapBox.editor:this.options.vectorStyleOptions.MapBox.editor={title:!0,collapse:!1,themes:!1,layers:!0,style:!0,filter:!1,legend:!0,group:!1},e.vectorStyleOptions&&e.vectorStyleOptions.MapBox&&e.vectorStyleOptions.MapBox.hasOwnProperty("display")?this.options.vectorStyleOptions.MapBox.display=e.vectorStyleOptions.MapBox.display:this.options.vectorStyleOptions.MapBox.display=!0,Array.isArray(e.layerTypes)){for(var n=[],r=0;r<e.layerTypes.length;r++)n.push(e.layerTypes[r]);this.options.layerTypes=n}he.mergeParams(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this._uid=Re.generate(),this._waiting=!1,this._timer=null,this._initImportTypes(),this._initDefaultStyles(),this._showImportInput=null,this._importPanel=null,this._importPanelHeader=null,this._formContainer=null,this._staticLocalImportInput=null,this._staticUrlImportInput=null,this._serviceUrlImportInput=null,this._getCapPanel=null,this._getCapPanelHeader=null,this._getCapResultsListContainer=null,this._mapBoxPanel=null,this._mapBoxPanelHeader=null,this._mapBoxResultsListContainer=null,this._waitingContainer=null,this._loadingContainer=null,this._getCapRequestUrl=null,this._getCapResponseWMS=null,this._getCapResponseWMSLayers=[],this._getCapResponseWMTS=null,this._getCapResponseWMTSLayers=[],this._hasMapBoxResults=!1,this.contentStatic=null,this._url=null,this._file=null,this._name=null},t.prototype._checkInputOptions=function(e){if(e.layerTypes){var n=e.layerTypes;if(!Array.isArray(n))fe.warn(`[ol.control.LayerImport] 'options.layerTypes' parameter should be an array. Set default values ["KML", "GPX", "GeoJSON", "WMS", "WMTS"]`),e.layerTypes=["KML","GPX","GeoJSON","WMS","WMTS","MAPBOX"];else{for(var r=["KML","GPX","GEOJSON","WMS","WMTS","WFS","MAPBOX"],o=[],a=0;a<n.length;a++)typeof n[a]!="string"?(o.push(a),fe.warn("[ol.control.LayerImport] 'options.layerTypes' elements should be of type string ("+n[a]+")")):(n[a]=n[a].toUpperCase(),r.indexOf(n[a])===-1&&(o.push(a),fe.log("[ol.control.LayerImport] options.layerTypes : "+n[a]+" is not a supported type")),n[a]==="GEOJSON"&&(n[a]="GeoJSON"),n[a]==="MAPBOX"&&(n[a]="MAPBOX"));if(o.length!==0)for(var s=o.length-1;s>=0;s--)n.splice(o[s],1)}}},t.prototype._initDefaultStyles=function(){var e=this.options.vectorStyleOptions.KML.defaultStyle;this._defaultKMLStyle=new de({image:e.image,stroke:e.stroke,fill:e.fill,text:e.text});var n=this.options.vectorStyleOptions.GPX.defaultStyle;this._defaultGPXStyle=new de({image:n.image,stroke:n.stroke,fill:n.fill,text:n.text});var r=this.options.vectorStyleOptions.GeoJSON.defaultStyle;this._defaultGeoJSONStyle=new de({image:r.image,stroke:r.stroke,fill:r.fill,text:r.text});var o=this.options.vectorStyleOptions.MapBox.defaultStyle;this._defaultMapBoxStyle=new de({image:o.image,stroke:o.stroke,fill:o.fill,text:o.text})},t.prototype._initImportTypes=function(){this._currentImportType=this.options.layerTypes[0]||"KML",this._currentImportType==="KML"||this._currentImportType==="GPX"||this._currentImportType==="GeoJSON"||this._currentImportType==="MAPBOX"?this._isCurrentImportTypeStatic=!0:(this._currentImportType==="WMS"||this._currentImportType==="WMTS"||this._currentImportType==="WFS")&&(this._isCurrentImportTypeStatic=!1),this._currentStaticImportType="local"},t.prototype._initContainer=function(){var e=this._createMainContainerElement(),n=this._showImportInput=this._createShowImportElement();e.appendChild(n),this.collapsed||(n.checked=!0);var r=this._createShowImportPictoElement();e.appendChild(r);var o=this._importPanel=this._createImportPanelElement(),a=this._importPanelHeader=this._createImportPanelHeaderElement();o.appendChild(a);var s=this._formContainer=this._initInputFormElement();o.appendChild(s),e.appendChild(o);var l=this._getCapPanel=this._createImportGetCapPanelElement(),u=this._getCapPanelHeader=this._createImportGetCapPanelHeaderElement();l.appendChild(u);var c=this._getCapResultsListContainer=this._createImportGetCapResultsContainer();l.appendChild(c),e.appendChild(l);var h=this._mapBoxPanel=this._createImportMapBoxPanelElement(),d=this._mapBoxPanelHeader=this._createImportMapBoxPanelHeaderElement();h.appendChild(d);var p=this._mapBoxResultsListContainer=this._createImportMapBoxResultsContainer();h.appendChild(p);var f=this._loadingContainer=this._createLoadingElement();h.appendChild(f),e.appendChild(h);var g=this._waitingContainer=this._createImportWaitingElement();return e.appendChild(g),e},t.prototype._initInputFormElement=function(){var e=this._createImportPanelFormElement(),n=this._createImportTypeLineElement(this.options.layerTypes);e.appendChild(n);var r=this._createImportStaticParamsContainer(this.options.layerTypes[0]),o=this._createStaticNameLabel();r.appendChild(o);var a=this._createStaticModeChoiceDiv(),s=this._createStaticLocalChoiceDiv();a.appendChild(s);var l=this._createStaticUrlChoiceDiv();a.appendChild(l),r.appendChild(a);var u=this._createStaticLocalInputDiv();u.appendChild(this._createStaticLocalInputLabel()),this._staticLocalImportInput=this._createStaticLocalInput(),u.appendChild(this._staticLocalImportInput),r.appendChild(u);var c=this._createStaticUrlInputDiv();c.appendChild(this._createStaticUrlInputLabel()),this._staticUrlImportInput=this._createStaticUrlInput(),c.appendChild(this._staticUrlImportInput),r.appendChild(c),e.appendChild(r);var h=this._createServiceParamsContainer(this.options.layerTypes[0]),d=this._createServiceUrlDiv();d.appendChild(this._createServiceUrlInputLabel()),this._serviceUrlImportInput=this._createServiceUrlInput(),d.appendChild(this._serviceUrlImportInput),h.appendChild(d),e.appendChild(h);var p=this._createImportSubmitFormElement();return e.appendChild(p),e},t.prototype._onShowImportClick=function(){var e=this.getMap();Tr.unset(e),this._hasMapBoxResults&&(this._mapBoxPanel.style.display="block"),this.collapsed=this._showImportInput.checked,this.dispatchEvent("change:collapsed")},t.prototype._onImportTypeChange=function(e){this._currentImportType=e.target.value,this._currentImportType==="KML"||this._currentImportType==="GPX"||this._currentImportType==="GeoJSON"||this._currentImportType==="MAPBOX"?this._isCurrentImportTypeStatic=!0:(this._currentImportType==="WMS"||this._currentImportType==="WMTS"||this._currentImportType==="WFS")&&(this._isCurrentImportTypeStatic=!1)},t.prototype._onStaticImportTypeChange=function(e){this._currentStaticImportType=e.target.value},t.prototype._onGetCapPanelClose=function(){(this._currentImportType==="WMS"||this._currentImportType==="WMTS"||this._currentImportType==="WFS")&&this.cleanGetCapResultsList()},t.prototype._onMapBoxPanelClose=function(){this.cleanMapBoxResultsList(),this._loadingContainer.className=""},t.prototype._onMapBoxReturnPictoClick=function(e){this._mapBoxPanel.style.display="none",this._showImportInput.checked=!1,this._loadingContainer.className=""},t.prototype._onImportSubmit=function(){fe.log("import d'une couche de type : "+this._currentImportType),this.contentStatic=null,this.contentService=null,this._isCurrentImportTypeStatic?this._importStaticLayer():this._importServiceLayers()},t.prototype._importStaticLayer=function(){var e,n=document.getElementById(this._addUID("GPimportName"));n&&(e=n.value||"",fe.log("import layer name : "+e)),this._currentStaticImportType==="local"?(fe.log("import static layer from local file"),this._importStaticLayerFromLocalFile(e)):this._currentStaticImportType==="url"&&(fe.log("import static layer from url"),this._importStaticLayerFromUrl(e))},t.prototype._importStaticLayerFromUrl=function(e){var n=this._staticUrlImportInput.value;if(fe.log("url : ",n),n.length===0){fe.error("[ol.control.LayerImport] url parameter is mandatory");return}if(n.trim&&(n=n.trim()),this._url=n,e||(e=this._url.substring(this._url.lastIndexOf("/")+1,this._url.lastIndexOf("."))),this._name=e,!this.options.webServicesOptions||!this.options.webServicesOptions.proxyUrl&&!this.options.webServicesOptions.noProxyDomains){fe.error("[ol.control.LayerImport] options.webServicesOptions.proxyUrl parameter is mandatory to request resources on another domain (cross-domain)");return}n=xy.proxifyUrl(n,this.options.webServicesOptions);var r=this;tt.Protocols.XHR.call({url:n,method:"GET",timeOut:15e3,onResponse:function(o){r._hideWaitingContainer(),r._addFeaturesFromImportStaticLayer(o,e)},onFailure:function(o){r._hideWaitingContainer(),fe.error("[ol.control.LayerImport] KML/GPX/GeoJSON/MapBox request failed : ",o)}})},t.prototype._importStaticLayerFromLocalFile=function(e){var n=this._staticLocalImportInput.files[0];if(!n){fe.warn("[ol.control.LayerImport] missing file");return}this._file=n,e||(e=this._file.name.substring(this._file.name.lastIndexOf("/")+1,this._file.name.lastIndexOf("."))),this._name=e;var r=new FileReader,o=this;r.onerror=function(a){o._hideWaitingContainer(),fe.error("error fileReader : ",a)},r.onprogress=function(){fe.log("onprogress")},r.onloadstart=function(){o._displayWaitingContainer(),fe.log("onloadstart")},r.onabort=function(){o._hideWaitingContainer(),fe.log("onabort")},r.onloadend=function(a){fe.log("onloadend : ",a)},r.onload=function(a){fe.log("fileReader onload - file content : ",a.target.result),o._hideWaitingContainer(),o._addFeaturesFromImportStaticLayer(a.target.result,e)},r.readAsText(n)},t.prototype._addFeaturesFromImportStaticLayer=function(e,n){var r=this.getMap();if(!(!r||!e)){var o=null,a=null,s=null,l=null;if(this.contentStatic=e,this._currentImportType==="MAPBOX"){this._hasMapBoxResults=!0;var u=this,c=JSON.parse(e),h=c.sources,d=Object.keys(h).length>1?1:0;for(var p in h)if(h.hasOwnProperty(p)){var f="",g="",v=null,y=null,m=null,A=null;if(c.metadata){for(var _ in c.metadata)if(c.metadata.hasOwnProperty(_)){var C=_.split(":");if(C[0]==="geoportail"){var I=C[1];if(I==="title"){f=c.metadata[_];continue}if(I==="description"){g=c.metadata[_];continue}if(I==="quicklookUrl"){v=c.metadata[_];continue}if(I==="legends"){y=c.metadata[_];continue}if(I==="metadata"){m=c.metadata[_];continue}if(I==="originators"){A=c.metadata[_];continue}}}}f||(f="Couche MapBox"),g||(g="Couche MapBox"),f=d?f+"("+p+")":f;var E=h[p],w=E.type;if(w==="vector"){var S=E.url,x=E.tiles,T=c.sprite;if(S&&S.indexOf("mapbox://")===0){var L=this._url;if(L){if(x=["a","b","c","d"].map(function(ue){var gt=S.replace("mapbox://",""),et=L.split("?")[1];return"https://"+ue+".tiles.mapbox.com/v4/"+gt+"/{z}/{x}/{y}.vector.pbf?"+et}),T.indexOf("mapbox://")===0){var G=L.split("?");c.sprite=G[0]+"/sprite?"+G[1]}}else fe.warn("Not yet implemented, can't use the local import scheme with a 'mapbox://' in the file.!")}if(x)s=new Lp({featureClass:ii}),a=new Pl({attributions:E.attribution,format:s,tileGrid:Rc({extent:E.bounds,maxZoom:E.maxzoom||22,minZoom:E.minzoom||1,tileSize:E.tileSize||256}),urls:x}),a._title=f,a._description=g,a._quicklookUrl=v,a._metadata=m,a._legends=y,a._originators=A,a.on("tileloadstart",function(ue){u._loadingContainer.className="GPmapLoadingVisible"}),a.on("tileloadend",function(ue){u._loadingContainer.className=""}),a.on("tileloaderror",function(ue){u._loadingContainer.className=""}),o=new bl({source:a,visible:!1,declutter:!0}),o.id=p,o.gpResultLayerId="layerimport:"+this._currentImportType;else if(S){s=new Lp({featureClass:ii}),o=new bl({visible:!1,declutter:!0}),o.id=p,o.gpResultLayerId="layerimport:"+this._currentImportType;var N=new aA({url:S}),B=N.on("change",function(){if(N.getState()==="ready"){for(var ue=N.getTileJSON(),gt=Array.isArray(ue.tiles)?ue.tiles:[ue.tiles],et=0;et<gt.length;et++){var J=gt[et];J.indexOf("http")!==0&&(gt[et]=S+J)}a=new Pl({attributions:N.getAttributions()||ue.attribution,format:s,tileGrid:Rc({extent:E.bounds,maxZoom:ue.maxzoom||E.maxzoom||22,minZoom:ue.minzoom||E.minzoom||0,tileSize:ue.tileSize||E.tileSize||256}),urls:gt}),a._title=f,a._description=g,a._quicklookUrl=v,a._metadata=m,a._legends=y,a._originators=A,a.on("tileloadstart",function(He){u._loadingContainer.className="GPmapLoadingVisible"}),a.on("tileloadend",function(He){u._loadingContainer.className=""}),o.setSource(a),o.set("mapbox-extension",ue.vector_layers),Kt(B)}})}}else if(w==="geojson"){var U=E.data;s=new kn,a=new Pl({attributions:E.attribution,format:s,url:U}),a._title=f,a._description=g,a._quicklookUrl=v,a._metadata=m,a._legends=y,a._originators=A,o=new bl({source:a,visible:!1,declutter:!0}),o.id=p,o.gpResultLayerId="layerimport:"+this._currentImportType}else{fe.warn("Type MapBox format unknown !");return}var D=JSON.parse(JSON.stringify(c));if(d){for(var z=D.layers,F=0;F<z.length;F++){var O=z[F];if(O.source!==p){z.splice(F,1);continue}}for(var R in D.sources)D.sources.hasOwnProperty(R)&&R!==p&&delete D.sources[R]}var M={id:p,styles:D,layer:o,options:{title:n||f,description:g,quicklookUrl:v,metadata:m,legends:y,originators:A}};(function(ue){var gt=function(){$a(ue.layer,ue.styles,ue.id).then(function(){var He=!0;ue.layer.setVisible(He);var Ve=1;ue.layer.setOpacity(Ve)}).then(function(){var He=r.getView().getProjection().getCode();r.getView()&&ue.styles.center&&ue.styles.center.length&&r.getView().setCenter(ut(ue.styles.center,"EPSG:4326",He)),r.getView()&&(ue.styles.zoom||ue.styles.zoom===0)&&r.getView().setZoom(ue.styles.zoom);var Ve=ue.layer.getSource();if(r.getView()&&r.getSize()&&Ve.getExtent){var _t=Ve.getExtent();_t&&_t[0]!==1/0&&r.getView().fit(Ve.getExtent(),r.getSize())}}).then(function(){u._importPanel.style.display="none";var He=new Yt({target:u._mapBoxResultsListContainer,style:JSON.parse(JSON.stringify(ue.styles)),scope:this,events:{"editor:onloaded":u._onLoadedMapBox,"editor:layer:onclickvisibility":u._onChangeVisibilitySourceMapBox,"editor:style:scale:onchangemin":u._onChangeScaleMinSourceMapBox,"editor:style:scale:onchangemax":u._onChangeScaleMaxSourceMapBox,"editor:legend:onchangevalue":u._onChangeLegendValueSourceMapBox,"editor:legend:onclickedition":u._onDisplayLayerSourceMapBox},tools:u.options.vectorStyleOptions.MapBox.editor});return He.setContext("map",r),He.setContext("layer",ue.layer),He.createElement().then(function(){if(He.getLayers().length===0)throw new Error("Il n'existe pas de styles pour la source demandée !?")}).then(function(){u.options.vectorStyleOptions.MapBox.display&&(u._mapBoxPanel.style.display="block")}).then(function(){var Ve=u._mapBoxResultsListContainer.getElementsByClassName("GPEditorMapBoxLayerTitleLabel");for(let _t=0;_t<Ve.length;_t++){const k=Ve[_t];k.textContent==="bckgrd"&&(k.textContent="Couleur de remplissage")}}).then(function(){ue.layer.set("mapbox-editor",He.getID()),setTimeout(function(){r.dispatchEvent({id:He.getID(),type:"editor:loaded",style:ue.styles,layer:ue.layer})},100)}).catch(function(Ve){throw Ve})}).then(function(){r.dispatchEvent({id:ue.id,type:"render:success",style:ue.styles})}).catch(function(He){fe.error(He),r.dispatchEvent({id:ue.id,type:"render:failure",error:He})})};fe.warn(ue.layer);var et=r.get("mapbox-styles")||{},J=ue.id;et[J]=ue.styles,r.set("mapbox-styles",et),ue.layer.set("mapbox-styles",ue.styles),r.addLayer(ue.layer),ue.layer.getSource()?gt():ue.layer.once("change:source",gt),r.getControls().forEach(He=>{He instanceof Mr&&He.addLayer(ue.layer,ue.options)})})(M)}}else{this._currentImportType==="KML"?(l=this.options.vectorStyleOptions.KML.defaultStyle,s=new Gs({showPointNames:this.options.vectorStyleOptions.KML.showPointNames,extractStyles:this.options.vectorStyleOptions.KML.extractStyles,defaultStyle:[l]})):this._currentImportType==="GPX"?(l=this.options.vectorStyleOptions.GPX.defaultStyle,s=new ks({defaultStyle:l})):this._currentImportType==="GeoJSON"&&(l=this.options.vectorStyleOptions.GeoJSON.defaultStyle,s=new kn({defaultStyle:l}));var ie=s.readProjection(e),Y=this._getMapProjectionCode(),K=null;K=s.readFeatures(e,{dataProjection:ie,featureProjection:Y}),fe.log("loaded features : ",K),a=new fn({features:new oi}),a.addFeatures(K),fe.trace(a),a._title=a._description=n,o=new mi({source:a,style:l}),o.gpResultLayerId="layerimport:"+this._currentImportType;var Q=s.readRootExtensions("geoportail:compute");if(Q&&Object.keys(Q).length!==0){var me={route:{class:U0,name:"itineraire"},isocurve:{class:B0,name:"isocurve"},elevationpath:{class:z0,name:"profil altimetrique"}},pe=Q.type,V=Q.transport;if(pe){var ze=me[pe].name,Ce=V?ze+" ("+V+")":ze,Qe=me[pe].class;if(Qe){o.gpResultLayerId="layerimport:COMPUTE",o.set("control",pe),o.set("name",ze),o.set("graph",V),o.set("data",Q),o.set("title",Ce);var At=new kn({defaultStyle:l}),$e=At.writeFeatures(K,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"});o.set("geojson",$e),this.getMap().getControls().forEach(ue=>{ue instanceof Qe&&(ue.setData(Q),ue.setLayer(o),ue.init())})}}}if(r.addLayer(o),r.getView()&&r.getSize()&&a.getExtent){var it=a.getExtent();it&&it[0]!==1/0&&r.getView().fit(a.getExtent(),r.getSize())}}}},t.prototype._addFeaturesFromImportStaticLayerUrl=function(e,n){var r=this.getMap();if(!(!r||!e)){var o,a,s;if(this._currentImportType==="MAPBOX"?fe.trace("Not yet implemented !"):(this._currentImportType==="KML"?s=new Gs({showPointNames:!0,extractStyles:this.options.vectorStyleOptions.KML.extractStyles,defaultStyle:[this.options.vectorStyleOptions.KML.defaultStyle]}):this._currentImportType==="GPX"?s=new ks({defaultStyle:this.options.vectorStyleOptions.GPX.defaultStyle}):this._currentImportType==="GeoJSON"&&(s=new kn({defaultStyle:this.options.vectorStyleOptions.GeoJSON.defaultStyle})),o=new fn({url:e,format:s}),this._currentImportType==="GPX"&&o.forEachFeature(function(u){u.getStyle()==null&&(fe.log("[ol.control.LayerImport] set default style for GPX feature"),u.setStyle(this.options.vectorStyleOptions.GPX.defaultStyle))}),this._currentImportType==="GeoJSON"&&o.forEachFeature(function(u){u.getStyle()==null&&(fe.log("[ol.control.LayerImport] set default style for GeoJSON feature"),u.setStyle(this.options.vectorStyleOptions.GeoJSON.defaultStyle))}),o._title=o._description=n,a=new mi({source:o})),a.gpResultLayerId="layerimport:"+this._currentImportType,r.addLayer(a),r.getView()&&r.getSize()&&o.getExtent){var l=o.getExtent();l&&l[0]!==1/0&&r.getView().fit(o.getExtent(),r.getSize())}}},t.prototype._onLoadedMapBox=function(e){var n=e.target.data.obj,r=this.getContext("layer");r.get("mapbox-source")===n.source&&(r.get("mapbox-editor"),e.target.editorID)},t.prototype._onChangeVisibilitySourceMapBox=function(e){var n=e.target.data.obj,r=e.target.srcElement,o=this.getContext("layer");if(o.get("mapbox-source")===n.source&&o.get("mapbox-editor")===e.target.editorID){for(var a=o.get("mapbox-styles"),s=a.layers,l=0;l<s.length;l++)if(s[l].id===n.id){var u=s[l].layout;u?u.visibility=r.checked?"visible":"none":s[l].layout={visibility:r.checked?"visible":"none"};break}$a(o,a,n.source).then(function(){}).catch(function(c){fe.error(c)})}},t.prototype._onChangeScaleMinSourceMapBox=function(e){var n=e.target.data.obj,r=e.target.srcElement,o=this.getContext("layer");if(o.get("mapbox-source")===n.source&&o.get("mapbox-editor")===e.target.editorID){for(var a=o.get("mapbox-styles"),s=a.layers,l=0;l<s.length;l++)if(s[l].id===n.id){s[l].minzoom=r.value,r.title=r.value;break}$a(o,a,n.source).then(function(){}).catch(function(u){fe.error(u)})}},t.prototype._onChangeScaleMaxSourceMapBox=function(e){var n=e.target.data.obj,r=e.target.srcElement,o=this.getContext("layer");if(o.get("mapbox-source")===n.source&&o.get("mapbox-editor")===e.target.editorID){for(var a=o.get("mapbox-styles"),s=a.layers,l=0;l<s.length;l++)if(s[l].id===n.id){s[l].maxzoom=r.value,r.title=r.value;break}$a(o,a,n.source).then(function(){}).catch(function(u){fe.error(u)})}},t.prototype._onChangeLegendValueSourceMapBox=function(e){var n=e.target.data.obj,r=e.target.srcElement,o=this.getContext("layer");if(o.get("mapbox-source")===n.source&&o.get("mapbox-editor")===e.target.editorID){for(var a=o.get("mapbox-styles"),s=a.layers,l=0;l<s.length;l++)if(s[l].id===n.id){var u=s[l].paint;u&&(u[r.dataset.id]=r.value);break}$a(o,a,n.source).then(function(){}).catch(function(c){fe.error(c)})}},t.prototype._onDisplayLayerSourceMapBox=function(e){var n=e.target.data.obj,r=this.getContext("layer");if(r.get("mapbox-source")===n.source&&r.get("mapbox-editor")===e.target.editorID){var o=e.target.currentTarget.parentNode.id,a=o.substring(o.indexOf("-")+1,o.indexOf("_")),s=this.getLayer(a);s.collapse()}},t.prototype._importServiceLayers=function(){if(this._currentImportType==="WFS"){fe.warn("[ol.control.LayerImport] WFS layer import is not implemented yet");return}this.cleanGetCapResultsList();var e=this._getCapRequestUrl=this._serviceUrlImportInput.value;if(!e){fe.error("[ol.control.LayerImport] url parameter is mandatory");return}fe.log("url : ",e),e.trim&&(e=e.trim());var n=e.indexOf("?");if(n<0?e+="?SERVICE="+this._currentImportType+"&REQUEST=GetCapabilities":n===e.length-1&&(e+="SERVICE="+this._currentImportType+"&REQUEST=GetCapabilities"),!this.options.webServicesOptions||!this.options.webServicesOptions.proxyUrl&&!this.options.webServicesOptions.noProxyDomains){fe.error("[ol.control.LayerImport] options.webServicesOptions.proxyUrl parameter is mandatory to request web service layers (getcapabilities request)");return}var r=this.options.webServicesOptions.proxyUrl,o=this.options.webServicesOptions.noProxyDomains,a=!1;if(o&&Array.isArray(o)&&o.length>0)for(var s in o)fe.log("analyzing "+o[s]),e.indexOf(o[s])!==-1&&(fe.log(e+" found in noProxyDomains list ("+o[s]+")."),a=!0);a===!1&&(e=r+encodeURIComponent(e)),this._displayWaitingContainer();var l=this;tt.Protocols.XHR.call({url:e,method:"GET",timeOut:15e3,onResponse:function(u){l._hideWaitingContainer(),l._displayGetCapResponseLayers(u)},onFailure:function(u){l._hideWaitingContainer(),fe.error("[ol.control.LayerImport] getCapabilities request failed : ",u)}})},t.prototype._displayGetCapResponseLayers=function(e){var n,r,o={content:null,title:null},a;if(this._getCapResponseWMSLayers=[],this.contentService=e,this._importPanel.style.display="none",this._getCapPanel.style.display="block",this._currentImportType==="WMS"){n=new vF;var s=this._getCapResponseWMS=n.read(e);if(fe.log("getCapabilities response : ",s),s&&s.Capability&&s.Capability.Layer){var l=s.Capability.Layer;if(Array.isArray(l))for(var u=0;u<l.length;u++)this._displayGetCapResponseWMSLayer(l[u]);else this._displayGetCapResponseWMSLayer(l)}}else if(this._currentImportType==="WMTS"){n=new y4;var c=this._getCapResponseWMTS=n.read(e);if(fe.log("getCapabilities response : ",c),c&&c.Contents&&c.Contents.Layer&&(r=c.Contents.Layer,Array.isArray(r))){this._getCapResponseWMTSLayers=r;for(var h=0;h<r.length;h++)if(a=this._getWMTSLayerProjection(r[h],c),a&&typeof a=="string")if(Ee(a)||Ee(a.toUpperCase()))o={content:r[h].Title,title:r[h].Abstract||r[h].Title},this._getCapResultsListContainer&&this._addImportGetCapResultLayer(o,h,this._getCapResultsListContainer);else{fe.warn("[ol.control.LayerImport] wmts layer cannot be added to map : unknown projection",r[h]);continue}}}},t.prototype._displayGetCapResponseWMSLayer=function(e,n){if(!e){fe.warn("[ol.control.LayerImport] _displayGetCapResponseWMSLayer : getCapabilities layer object not found");return}fe.log("[ol.control.LayerImport] _displayGetCapResponseWMSLayer - layerObj : ",e);var r=this._getMapProjectionCode(),o,a={content:null,title:null};if(n){var s,l,u=["CRS","Style"];for(l=0;l<u.length;l++)if(s=u[l],Array.isArray(n[s])&&n[s].length!==0)if(Array.isArray(e[s])&&e[s].length!==0)for(var c=0;c<n[s].length;c++)e[s].indexOf(n[s][c])===-1&&e[s].push(n[s][c]);else e[s]=n[s];var h=["BoundingBox","EX_GeographicBoundingBox","MaxScaleDenominator","MinScaleDenominator","Attribution","Dimension","queryable","cascaded","opaque","noSubsets","fixedWidth","fixedHeight"];for(l=0;l<h.length;l++)s=h[l],n[s]&&!e[s]&&(e[s]=n[s])}else e._isRootLayer=!0,e._container=this._getCapResultsListContainer,e.Title||(e.Title="Liste des couches");if(e.Layer){if(Array.isArray(e.Layer)){var d=e?e._container:n._container,p=e?e.Title:n.Title;e._container=this._addImportGetCapResultListRubrique(p,d).lastChild;for(var f=0;f<e.Layer.length;f++){for(var g=!1,v=e._container.getElementsByClassName("GPimportGetCapRubriqueTitle"),y=0;y<v.length;y++)v[y].title===e.Title&&(g=!0,e.Layer[f]._container=v[y].parentElement);g||(e.Layer[f]._container=this._addImportGetCapResultRubrique(e.Title,e._container).lastChild),this._displayGetCapResponseWMSLayer(e.Layer[f],e)}}}else{var m=this._getCapResponseWMSLayers.length;if(o=this._getWMSLayerProjection(e,r),!o)fe.warn("[ol.control.LayerImport] wms layer cannot be added to map : unknown projection",e);else{e._projection=o,a={content:e.Title,title:e.Abstract||e.Title};var A=e._container;A.localName==="ul"&&(A=A.lastChild),this._addImportGetCapResultLayer(a,m,A),this._getCapResponseWMSLayers[m]=e}}},t.prototype._onGetCapResponseLayerClick=function(e){if(e.target&&e.target.id){var n=parseInt(e.target.id.substr(23),10);if(isNaN(n))return;var r;this._currentImportType==="WMS"?(r=this._getCapResponseWMSLayers[n],this._addGetCapWMSLayer(r)):this._currentImportType==="WMTS"&&(r=this._getCapResponseWMTSLayers[n],this._addGetCapWMTSLayer(r))}},t.prototype._addGetCapWMSLayer=function(e){var n=this.getMap();if(!n){fe.warn("[ol.control.LayerImport] _addGetCapWMSLayer error : map is not defined");return}if(!e){fe.warn("[ol.control.LayerImport] _addGetCapWMSLayer error : layerInfo is not defined");return}var r=this._getMapProjectionCode(),o={},a=this._getWMSLayerGetMapUrl();if(a)o.url=a;else{var s=this._getCapRequestUrl.indexOf("?");s!==-1?o.url=this._getCapRequestUrl.substring(0,s):o.url=this._getCapRequestUrl}if(o.params={},e.Name)o.params.LAYERS=e.Name;else{fe.warn("[ol.control.LayerImport] unable to add wms layer : mandatory layer 'name' parameter cannot be found",e);return}o.params.SERVICE="WMS",this._getCapResponseWMS.version&&(o.params.VERSION=this._getCapResponseWMS.version);var l=e._projection;if(l)l!==r&&(o.projection=l);else{fe.warn("[ol.control.LayerImport] wms layer cannot be added to map : unknown projection");return}var u;if(e.Style&&Array.isArray(e.Style)){var c=e.Style[0];o.params.STYLES=c.Name,c.LegendURL&&Array.isArray(c.LegendURL)&&c.LegendURL.length!==0&&(u=c.LegendURL[0].OnlineResource)}var h=new qf(o);this._getWMSLayerInfoForLayerSwitcher(e,u,h);var d={};d.source=h,this._getWMSLayerMinMaxResolution(e,r,d),this._getWMSLayerExtent(e,r,d);var p=new xs(d);p.gpResultLayerId="layerimport:WMS",e.queryable&&(p.gpGFIparams={queryable:!0},this._getCapResponseWMS&&this._getCapResponseWMS.Capability&&this._getCapResponseWMS.Capability.Request&&this._getCapResponseWMS.Capability.Request.GetFeatureInfo&&this._getCapResponseWMS.Capability.Request.GetFeatureInfo.Format&&Array.isArray(this._getCapResponseWMS.Capability.Request.GetFeatureInfo.Format)&&(p.gpGFIparams.formats=this._getCapResponseWMS.Capability.Request.GetFeatureInfo.Format)),n.addLayer(p)},t.prototype._getWMSLayerGetMapUrl=function(){var e;if(this._getCapResponseWMS&&this._getCapResponseWMS.Capability&&this._getCapResponseWMS.Capability.Request&&this._getCapResponseWMS.Capability.Request.GetMap){var n=this._getCapResponseWMS.Capability.Request.GetMap;if(n.DCPType&&Array.isArray(n.DCPType)&&n.DCPType.length!==0){var r=n.DCPType[0];r&&r.HTTP&&r.HTTP.Get&&(e=r.HTTP.Get.OnlineResource)}}return e},t.prototype._getWMSLayerProjection=function(e,n){var r;if(!e||typeof e!="object"){fe.warn("missing layer information (from getCapabilities)");return}var o=e.CRS;if(Array.isArray(o)){if(o.includes(n))return r=n,r;var a,s;for(s=0;s<o.length;s++)if(a=o[s],a&&typeof a=="string"&&(Ee(a)||Ee(a.toUpperCase())))return r=a,r}return r},t.prototype._getWMSLayerMinMaxResolution=function(e,n,r){var o=Ee(n).getUnits();if(o==="m")e.MinScaleDenominator&&(r.minResolution=e.MinScaleDenominator*28e-5),e.MaxScaleDenominator&&(r.maxResolution=e.MaxScaleDenominator*28e-5);else if(o==="degrees"){var a=.05039999999999999/(Math.PI*6378137);e.MinScaleDenominator&&(r.minResolution=e.MinScaleDenominator*a),e.MaxScaleDenominator&&(r.maxResolution=e.MaxScaleDenominator*a)}},t.prototype._getWMSLayerExtent=function(e,n,r){if(!e){fe.warn("[ol.control.LayerImport] _getWMSLayerExtent error : layerInfo is not defined");return}var o=e.EX_GeographicBoundingBox,a=e.BoundingBox;if(o&&Array.isArray(o))n==="EPSG:4326"?r.extent=o:r.extent=vr(o,"EPSG:4326",n);else if(a&&Array.isArray(a)){for(var s,l,u=0;u<a.length;u++)if(s=a[u].crs,l=a[u].extent,s){if(s===n){r.extent=l;break}else if(typeof s=="string"){var c=Ee(s)?Ee(s):Ee(s.toUpperCase());if(c){if(c.getUnits()==="degrees"&&s.toUpperCase().indexOf("EPSG")===0){var h=[l[1],l[0],l[3],l[2]];r.extent=vr(h,c,n)}else r.extent=vr(l,c,n);break}}}}},t.prototype._getWMSLayerInfoForLayerSwitcher=function(e,n,r){if(e.Title?(r._title=e.Title,r._description=e.Abstract?e.Abstract:e.Title):(r._title=e.Name,r._description=e.Abstract?e.Abstract:e.Name),n&&(r._legends=[{url:n}]),e.MetadataURL&&Array.isArray(e.MetadataURL)){r._metadata=[];for(var o=0;o<e.MetadataURL.length;o++){var a=e.MetadataURL[o].OnlineResource;a&&r._metadata.push({url:a})}}if(e.Attribution){var s=e.Attribution;r._originators={},s.OnlineResource&&(r._originators.url=s.OnlineResource),s.Title&&(r._originators.name=r._originators.attribution=s.Title),s.LogoURL&&s.LogoURL.OnlineResource&&(r._originators.logo=s.LogoURL.OnlineResource)}},t.prototype._addGetCapWMTSLayer=function(e){if(!e||!e.Identifier){fe.warn("[ol.control.LayerImport] layer information not found in getCapabilities response for layer ");return}var n=this.getMap();if(n){var r={};r.layer=e.Identifier,this._getCapResponseWMTS.version&&(r.version=this._getCapResponseWMTS.version);var o=this._getWMTSLayerGetTileUrl();if(o)r.url=o;else{var a=this._getCapRequestUrl.indexOf("?");a!==-1?r.url=this._getCapRequestUrl.substring(0,a):r.url=this._getCapRequestUrl}var s=this._getTMSParams(e);r.matrixSet=s.tms,r.projection=s.projCode,r.tileGrid=new Wf({resolutions:s.resolutions,matrixIds:s.matrixIds,origin:s.origin});var l,u;if(e.Style&&Array.isArray(e.Style))for(var c,h=0;h<e.Style.length&&(c=e.Style[h],l=c.Identifier,!c.isDefault);h++)c.LegendURL&&Array.isArray(c.LegendURL)&&c.LegendURL.length!==0&&(u=c.LegendURL[0].href);l==null&&fe.warn("[ol.control.LayerImport] style information not found in getCapabilities response for layer "+e.Identifier),r.style=l;var d;e.Format&&Array.isArray(e.Format)&&(d=e.Format[0]),d==null&&fe.warn("[ol.control.LayerImport] format information not found in getCapabilities response for layer "+e.Identifier),r.format=d;var p=new Xl(r);e.Title?(p._title=e.Title,p._description=e.Abstract?e.Abstract:e.Title):(p._title=e.Identifier,p._description=e.Abstract?e.Abstract:e.Identifier),u&&(p._legends=[{url:u}]);var f={};f.source=p,f.extent=this._getWMTSLayerExtent(e);var g;try{g=new xs(f)}catch(v){fe.warn("[ol.control.LayerImport] an error occured while trying to create ol.layer.Tile from getCapabilities information. error : ",v);return}g.gpResultLayerId="layerimport:WMTS",n.addLayer(g)}},t.prototype._getWMTSLayerGetTileUrl=function(){var e;if(this._getCapResponseWMTS&&this._getCapResponseWMTS.OperationsMetadata&&this._getCapResponseWMTS.OperationsMetadata.GetTile){var n=this._getCapResponseWMTS.OperationsMetadata.GetTile;n.DCP&&n.DCP.HTTP&&n.DCP.HTTP.Get&&Array.isArray(n.DCP.HTTP.Get)&&n.DCP.HTTP.Get.length!==0&&(e=n.DCP.HTTP.Get[0].href)}return e},t.prototype._getWMTSLayerProjection=function(e,n){var r;if(!e||typeof e!="object"){fe.warn("missing layer information (from getCapabilities)");return}if(!n||typeof n!="object"){fe.warn("missing getCapabilities response");return}if(e.TileMatrixSetLink&&Array.isArray(e.TileMatrixSetLink)){var o=e.TileMatrixSetLink[0].TileMatrixSet,a;if(n.Contents&&Array.isArray(n.Contents.TileMatrixSet)){for(var s=n.Contents.TileMatrixSet,l=0;l<s.length;l++)if(s[l].Identifier===o&&s[l].TileMatrix){var u=s[l];a=u.SupportedCRS,a&&typeof a=="string"&&(Ee(a)||Ee(a.toUpperCase()))&&(r=a);break}}}return r},t.prototype._getTMSParams=function(e){var n={},r=[],o=[],a=[],s,l,u,c=this.getMap();if(c){if(e.TileMatrixSetLink&&Array.isArray(e.TileMatrixSetLink))if(s=e.TileMatrixSetLink[0].TileMatrixSet,this._getCapResponseWMTS.Contents&&Array.isArray(this._getCapResponseWMTS.Contents.TileMatrixSet)){for(var h=this._getCapResponseWMTS.Contents.TileMatrixSet,d=0;d<h.length;d++)if(h[d].Identifier===s&&h[d].TileMatrix){var p=h[d],f,g,v,y,m;if(p.SupportedCRS&&(l=p.SupportedCRS,u=Ee(l)),u&&u.getUnits&&(m=u.getUnits()),Array.isArray(p.TileMatrix))for(var A=0;A<p.TileMatrix.length;A++)f=p.TileMatrix[A],f.Identifier!=null&&(g=parseInt(f.Identifier,10),r.push(g)),v=f.ScaleDenominator,m==="degrees"?y=v*28e-5*180/(Math.PI*6378137):y=v*28e-5,o.push(y),a=f.TopLeftCorner;o.sort!==void 0&&o.sort(function(_,C){return C-_}),r.sort!==void 0&&r.sort(function(_,C){return _-C})}}else fe.warn("[ol.control.LayerImport] TileMatrixSet data not found in getCapabilities response for layer "+e.Identifier);else return;return n.tms=s,n.projCode=l,n.matrixIds=r,n.resolutions=o,n.origin=a,n}},t.prototype._getWMTSLayerExtent=function(e){var n,r=this._getMapProjectionCode();return e.WGS84BoundingBox&&Array.isArray(e.WGS84BoundingBox)&&(n=vr(e.WGS84BoundingBox,"EPSG:4326",r)),n},t.prototype._getMapProjectionCode=function(){var e=this.getMap();if(!e||!e.getView||!e.getView().getProjection){fe.warn("unable to get layerimport's map");return}var n=e.getView().getProjection().getCode();return n},t.prototype._displayWaitingContainer=function(){this._waitingContainer.className="GPimportWaitingContainerVisible",this._waiting=!0,this._timer&&(clearTimeout(this._timer),this._timer=null);var e=this;this._timer=setTimeout(function(){e._waiting===!0?e._hideWaitingContainer():e._timer&&clearTimeout(e._timer)},16e3)},t.prototype._hideWaitingContainer=function(){this._waiting&&(this._waitingContainer.className="GPimportWaitingContainerHidden",this._waiting=!1,clearTimeout(this._timer),this._timer=null)},t.prototype.cleanGetCapResultsList=function(){if(this._getCapRequestUrl=null,this._getCapResponseWMS=null,this._getCapResponseWMTS=null,this._getCapResponseWMSLayers=null,this._getCapResponseWMTSLayers=null,this._getCapResultsListContainer)for(;this._getCapResultsListContainer.firstChild;)this._getCapResultsListContainer.removeChild(this._getCapResultsListContainer.firstChild)},t.prototype.cleanMapBoxResultsList=function(){if(this._hasMapBoxResults=!1,this._mapBoxResultsListContainer)for(;this._mapBoxResultsListContainer.firstChild;)this._mapBoxResultsListContainer.removeChild(this._mapBoxResultsListContainer.firstChild)},t.prototype.cleanMapBoxResults=function(e){if(this._hasMapBoxResults=!1,this._mapBoxResultsListContainer){var n=this._mapBoxResultsListContainer.childNodes;for(let r=0;r<n.length;r++){const o=n[r];o.id==="GPEditorMapBoxContainer_ID_"+e&&o.remove()}}},t}(yi);window.ol&&window.ol.control&&(window.ol.control.LayerImport=Y_);var op=Ye.getLogger("geoportalattribution"),H_=function(i){function t(e){if(e=e||{},!(this instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");e.collapsible=!0,i.call(this,e)}return i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype,{}),t.prototype.constructor=t,t.prototype.setMap=function(e){if(e!=null){var n=e.getControls();n.forEach(r=>{if(!(r instanceof t)&&r){for(var o=r.element.classList,a=0;a<o.length;a++)if(o[a]==="ol-attribution"){n.remove(r);break}}}),this._updateAttributions(e),e.on("moveend",()=>{this._updateAttributions(e)}),e.getLayers().on("add",()=>{this._updateAttributions(e)}),e.getLayers().on("remove",()=>{this._updateAttributions(e)})}i.prototype.setMap.call(this,e)},t.prototype._updateAttributions=function(e){for(var n={},r=e.getView(),o=r.calculateExtent(e.getSize()),a=r.getProjection().getCode(),s=vr(o,a,"EPSG:4326"),l=[s[3],s[0],s[1],s[2]],u=r.getZoom(),c=e.getLayers().getArray(),h=0;h<c.length;h++)if(c[h].getSource)this._updateLayerAttributions(c[h],n,l,a,u);else if(c[h].getLayers){var d=c[h].getLayers();d.forEach(p=>{p.getSource?this._updateLayerAttributions(p,n,l,a,u):op.log("cannot find layer source in layergroup ",c[h])})}},t.prototype._updateLayerAttributions=function(e,n,r,o,a){if(!e){op.trace("layer is null !?");return}var s=e.getSource();if(!s){op.trace("source is not yet loaded !");return}n||(n={});var l=[],u=e.getVisible(),c=s._originators;if(typeof c<"u"&&s.setAttributions(),c&&u){for(var h=iA.getAttributions({extent:r,crs:o,zoom:a,visibility:u,originators:c}),d=0;d<h.length;d++){var p=h[d];n.hasOwnProperty(p)||(l.push(p),n[p]=!0)}l.length!==0&&(s.setAttributions(l),this.dispatchEvent({type:"attributions:update",attributions:l}))}},t}(Rm);window.ol&&window.ol.control&&(window.ol.control.GeoportalAttribution=H_);var w4={_addUID:function(i){var t=this._uid?i+"-"+this._uid:i;return t},_createMainContainerElement:function(){var i=document.createElement("div");return i.id=this._addUID("GPmeasureLength"),i.className="GPwidget",i},_createShowMeasureLengthElement:function(){var i=document.createElement("input");return i.id=this._addUID("GPshowMeasureLength"),i.type="checkbox",i},_createShowMeasureLengthPictoElement:function(){var i=this,t=document.createElement("label");t.id=this._addUID("GPshowMeasureLengthPicto"),t.className="GPshowAdvancedToolPicto",t.htmlFor=this._addUID("GPshowMeasureLength"),t.title="Mesurer une distance",t.addEventListener?t.addEventListener("click",function(n){i.onShowMeasureLengthClick(n)}):t.attachEvent&&t.attachEvent("onclick",function(n){i.onShowMeasureLengthClick(n)});var e=document.createElement("span");return e.id=this._addUID("GPshowMeasureLengthOpen"),e.className="GPshowAdvancedToolOpen",t.appendChild(e),t}},ia=Ye.getLogger("measurelength"),q_=function(i){function t(e){if(e=e||{},!(this instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this.CLASSNAME="MeasureLength",this._uid=Re.generate(),this._showContainer=null,this._pictoContainer=null,this._initialize(e);var n=e.element?e.element:this._initializeContainer();i.call(this,{element:n,target:e.target,render:e.render})}return i&&(t.__proto__=i),t.prototype=Object.create(i.prototype,{}),he.assign(t.prototype,In),he.assign(t.prototype,w4),t.prototype.constructor=t,t.prototype.setMap=function(e){ia.trace("setMap()");var n=this.CLASSNAME;e?this.options.target||Pu.add(e,this):this.clean(),this.tools[n].push({instance:e?this:null,active:!1,map:e?e.getTargetElement().id:null});var r=typeof window<"u"?window:typeof self<"u"?self:null;r&&(r.gpShareMeasures||(r.gpShareMeasures={}),r.gpShareMeasures[n]=this.tools[n]),i.prototype.setMap.call(this,e)},t.prototype._initialize=function(e){ia.trace("call MeasureLength::_initialize() : ",e),this.options={},this.options.geodesic=typeof e.geodesic<"u"?e.geodesic:!0,this.options.target=typeof e.target<"u"?e.target:null,this.options.render=typeof e.render<"u"?e.render:null,this.options.layerDescription=typeof e.layerDescription<"u"?e.layerDescription:{title:"Mesures de distance",description:"Mes mesures"},this.createStylingMeasureInteraction(e.styles)},t.prototype._initializeContainer=function(){ia.trace("call MeasureLength::_initializeContainer() : ",this._uid);var e=this._createMainContainerElement(),n=this._showContainer=this._createShowMeasureLengthElement();e.appendChild(n),this._showContainer.checked=!1;var r=this._pictoContainer=this._createShowMeasureLengthPictoElement();return e.appendChild(r),e},t.prototype.addMeasureEvents=function(){ia.trace("call MeasureLength::addMeasureEvents()");var e=this.getMap();e.on("singleclick",n=>this.onPointerMoveHandler(n)),e.on("pointermove",n=>this.onPointerMoveHandler(n))},t.prototype.removeMeasureEvents=function(){ia.trace("call MeasureLength::removeMeasureEvents()");var e=this.getMap();e.un("singleclick",n=>this.onPointerMoveHandle(n)),e.un("pointermove",n=>this.onPointerMoveHandler(n))},t.prototype.format=function(e){ia.trace("call MeasureLength::format()");var n=this.getMap(),r;if(this.options.geodesic){var o=e.getCoordinates();r=0;for(var a=n.getView().getProjection(),s=0,l=o.length-1;s<l;++s){var u=ut(o[s],a,"EPSG:4326"),c=ut(o[s+1],a,"EPSG:4326");r+=Ia(u,c)}}else r=Math.round(e.getLength()*100)/100;var h;return r>1e3?h=Math.round(r/1e3*100)/100+" km":h=Math.round(r*100)/100+" m",h},t.prototype.onShowMeasureLengthClick=function(e){ia.trace("call MeasureLength::onShowMeasureLengthClick()",e),this.onShowMeasureClick(e,"LineString")},t}(yi);window.ol&&window.ol.control&&(window.ol.control.MeasureLength=q_);var S4={_addUID:function(i){var t=this._uid?i+"-"+this._uid:i;return t},_createMainContainerElement:function(){var i=document.createElement("div");return i.id=this._addUID("GPmeasureArea"),i.className="GPwidget",i},_createShowMeasureAreaElement:function(){var i=document.createElement("input");return i.id=this._addUID("GPshowMeasureArea"),i.type="checkbox",i},_createShowMeasureAreaPictoElement:function(){var i=this,t=document.createElement("label");t.id=this._addUID("GPshowMeasureAreaPicto"),t.className="GPshowAdvancedToolPicto",t.htmlFor=this._addUID("GPshowMeasureArea"),t.title="Mesurer une surface",t.addEventListener?t.addEventListener("click",function(n){i.onShowMeasureAreaClick(n)}):t.attachEvent&&t.attachEvent("onclick",function(n){i.onShowMeasureAreaClick(n)});var e=document.createElement("span");return e.id=this._addUID("GPshowMeasureAreaOpen"),e.className="GPshowAdvancedToolOpen",t.appendChild(e),t}},na=Ye.getLogger("measurearea"),X_=function(i){function t(e){if(e=e||{},!(this instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this.CLASSNAME="MeasureArea",this._uid=Re.generate(),this._showContainer=null,this._pictoContainer=null,this._initialize(e);var n=e.element?e.element:this._initializeContainer();i.call(this,{element:n,target:e.target,render:e.render})}return i&&(t.__proto__=i),t.prototype=Object.create(i.prototype,{}),he.assign(t.prototype,In),he.assign(t.prototype,S4),t.prototype.constructor=t,t.prototype.setMap=function(e){na.trace("setMap()");var n=this.CLASSNAME;e?this.options.target||Pu.add(e,this):this.clean(),this.tools[n].push({instance:e?this:null,active:!1,map:e?e.getTargetElement().id:null});var r=typeof window<"u"?window:typeof self<"u"?self:null;r&&(r.gpShareMeasures||(r.gpShareMeasures={}),r.gpShareMeasures[n]=this.tools[n]),i.prototype.setMap.call(this,e)},t.prototype._initialize=function(e){na.trace("call MeasureArea::_initialize() : ",e),this.options={},this.options.geodesic=typeof e.geodesic<"u"?e.geodesic:!0,this.options.target=typeof e.target<"u"?e.target:null,this.options.render=typeof e.render<"u"?e.render:null,this.options.layerDescription=typeof e.layerDescription<"u"?e.layerDescription:{title:"Mesures de surface",description:"Mes mesures"},this.createStylingMeasureInteraction(e.styles)},t.prototype._initializeContainer=function(){na.trace("call MeasureArea::_initializeContainer() : ",this._uid);var e=this._createMainContainerElement(),n=this._showContainer=this._createShowMeasureAreaElement();e.appendChild(n),this._showContainer.checked=!1;var r=this._pictoContainer=this._createShowMeasureAreaPictoElement();return e.appendChild(r),e},t.prototype.addMeasureEvents=function(){na.trace("call MeasureArea::addMeasureEvents()");var e=this.getMap();e.on("singleclick",n=>this.onPointerMoveHandler(n)),e.on("pointermove",n=>this.onPointerMoveHandler(n))},t.prototype.removeMeasureEvents=function(){na.trace("call MeasureArea::removeMeasureEvents()");var e=this.getMap();e.un("singleclick",n=>this.onPointerMoveHandler(n)),e.un("pointermove",n=>this.onPointerMoveHandler(n))},t.prototype.format=function(e){na.trace("call MeasureArea::format()");var n;if(this.options.geodesic){var r=e.clone(),o=r.getLinearRing(0).getCoordinates();n=Math.abs(wc(new zi([o])))}else n=e.getArea();var a;return n>1e6?a=Math.round(n/1e6*100)/100+" km<sup>2</sup>":n>1e5?a=Math.round(n/1e6*1e3)/1e3+" km<sup>2</sup>":n>1e3?a=Math.round(n/10)*10+" m<sup>2</sup>":a=Math.round(n*100)/100+" m<sup>2</sup>",a},t.prototype.onShowMeasureAreaClick=function(e){na.trace("call MeasureArea::onShowMeasureAreaClick()",e),this.onShowMeasureClick(e,"Polygon")},t}(yi);window.ol&&window.ol.control&&(window.ol.control.MeasureArea=X_);var P4={_addUID:function(i){var t=this._uid?i+"-"+this._uid:i;return t},_createMainContainerElement:function(){var i=document.createElement("div");return i.id=this._addUID("GPmeasureAzimuth"),i.className="GPwidget",i},_createShowMeasureAzimuthElement:function(){var i=document.createElement("input");return i.id=this._addUID("GPshowMeasureAzimuth"),i.type="checkbox",i},_createShowMeasureAzimuthPictoElement:function(){var i=this,t=document.createElement("label");t.id=this._addUID("GPshowMeasureAzimuthPicto"),t.className="GPshowAdvancedToolPicto",t.htmlFor=this._addUID("GPshowMeasureAzimuth"),t.title="Mesurer un azimut",t.addEventListener?t.addEventListener("click",function(n){i.onShowMeasureAzimuthClick(n)}):t.attachEvent&&t.attachEvent("onclick",function(n){i.onShowMeasureAzimuthClick(n)});var e=document.createElement("span");return e.id=this._addUID("GPshowMeasureAzimuthOpen"),e.className="GPshowAdvancedToolOpen",t.appendChild(e),t}},hr=Ye.getLogger("measureazimut"),Z_=function(i){function t(e){if(e=e||{},!(this instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this.CLASSNAME="MeasureAzimuth",this._uid=Re.generate(),this._showContainer=null,this._pictoContainer=null,this._initialize(e);var n=e.element?e.element:this._initializeContainer();i.call(this,{element:n,target:e.target,render:e.render})}return i&&(t.__proto__=i),t.prototype=Object.create(i.prototype,{}),he.assign(t.prototype,In),he.assign(t.prototype,P4),t.prototype.constructor=t,t.prototype.setMap=function(e){hr.trace("setMap()");var n=this.CLASSNAME;e?this.options.target||Pu.add(e,this):this.clean(),this.tools[n].push({instance:e?this:null,active:!1,map:e?e.getTargetElement().id:null});var r=typeof window<"u"?window:typeof self<"u"?self:null;r&&(r.gpShareMeasures||(r.gpShareMeasures={}),r.gpShareMeasures[n]=this.tools[n]),i.prototype.setMap.call(this,e)},t.prototype.setGeodesic=function(e){this.options.geodesic=typeof e<"u"?e:!1},t.prototype.isGeodesic=function(){return this.options.geodesic},t.prototype._initialize=function(e){hr.trace("call MeasureAzimuth::_initialize() : ",e),this.options={},this.options.geodesic=typeof e.geodesic<"u"?e.geodesic:!1,this.options.target=typeof e.target<"u"?e.target:null,this.options.render=typeof e.render<"u"?e.render:null,this.options.layerDescription=typeof e.layerDescription<"u"?e.layerDescription:{title:"Mesures d'azimuth",description:"Mes mesures"},this.createStylingMeasureInteraction(e.styles)},t.prototype._initializeContainer=function(){hr.trace("call MeasureAzimuth::_initializeContainer() : ",this._uid);var e=this._createMainContainerElement(),n=this._showContainer=this._createShowMeasureAzimuthElement();e.appendChild(n),this._showContainer.checked=!1;var r=this._pictoContainer=this._createShowMeasureAzimuthPictoElement();return e.appendChild(r),e},t.prototype.addMeasureEvents=function(){hr.trace("call MeasureAzimuth::addMeasureEvents()");var e=this.getMap();e.on("singleclick",n=>this.onPointerMoveAzimutHandler(n)),e.on("pointermove",n=>this.onPointerMoveAzimutHandler(n))},t.prototype.removeMeasureEvents=function(){hr.trace("call MeasureAzimuth::removeMeasureEvents()");var e=this.getMap();e.un("singleclick",n=>this.onPointerMoveAzimutHandler(n)),e.un("pointermove",n=>this.onPointerMoveAzimutHandler(n))},t.prototype.format=function(e){hr.trace("call MeasureAzimuth::format()");var n=this.getMap(),r=n.getView().getProjection(),o=ut(e.getFirstCoordinate(),r,"EPSG:4326"),a=ut(e.getLastCoordinate(),r,"EPSG:4326");if(!this.options.geodesic){var s=Ia(o,a);if(hr.trace("measure between 2 points with geodesic method",s),s>500){var l=500/s;hr.trace("%",l),a=ut(e.getCoordinateAt(l),r,"EPSG:4326")}}var u=Math.PI/180,c=180/Math.PI,h=u*o[0],d=u*a[0],p=u*o[1],f=u*a[1],g=Math.sin(d-h)*Math.cos(f),v=Math.cos(p)*Math.sin(f)-Math.sin(p)*Math.cos(f)*Math.cos(d-h),y=Math.atan2(g,v),m=c*y;hr.trace("azimut",m),m<0&&(m+=360);var A=Math.round(m*100)/100+" °";return A},t.prototype.onShowMeasureAzimuthClick=function(e){hr.trace("call MeasureAzimuth::onShowMeasureAzimuthClick()",e),this.onShowMeasureClick(e,"LineString")},t.prototype.onPointerMoveAzimutHandler=function(e){if(this.onPointerMoveHandler(e),this.sketch){var n=this.sketch.getGeometry();n.getCoordinates().length>2&&this.measureDraw.finishDrawing()}},t}(yi);window.ol&&window.ol.control&&(window.ol.control.MeasureAzimuth=Z_);(function(){var i=document.getElementsByTagName("script"),t=i[i.length-1].getAttribute("data-key"),e=i[i.length-1].getAttribute("data-url"),n=i[i.length-1].getAttribute("data-timeout"),r=function(){},o=function(s){throw new Error("Configuration load failed : "+s.message)};if(!(!t&&!e)){var a={apiKey:t,sync:!0,onSuccess:r,onFailure:o};e&&(a.customConfigFile=e,a.callbackSuffix=""),n&&(a.timeOut=n),window.Gp||tt.Services.getConfig(a)}})();(function(){ph.loadByDefault(),ph.overload()})();var x4=tt.Services;window.Gp&&window.Gp.Config;function qv(i,t){function e(n,r){for(var o in n)n.hasOwnProperty(o)&&(r.hasOwnProperty(o)?typeof n[o]=="object"&&e(n[o],r[o]):r[o]=n[o])}return e(i,t)}var Se={};Se.gp={};Se.gp.GfiUtils=ps;Se.includeProjections=ph.load;Se.style=Se.style||{};Se.style.Editor=Yt;Se.style.editor=Se.style.editor||{};Se.style.editor.Style=Oi;Se.style.editor.Filter=Bn;Se.style.editor.Layer=Wt;Se.style.editor.Legend=Nt;Se.style.editor.Group=tr;Se.style.editor.Themes=Un;Se.style.editor.Search=jn;Se.format=Se.format||{};Se.format.KMLExtended=Gs;Se.format.GPXExtended=ks;Se.format.GeoJSONExtended=kn;Se.source=Se.source||{};Se.source.WMTSExtended=a0;Se.source.GeoportalWMTS=s0;Se.source.GeoportalWMS=l0;Se.layer=Se.layer||{};Se.layer.GeoportalWMTS=nA;Se.layer.GeoportalWMS=rA;Se.layer.GeoportalMapBox=KA;Se.control=Se.control||{};Se.control.LayerSwitcher=Mr;Se.control.GeoportalAttribution=H_;Se.control.GetFeatureInfo=u_;Se.control.SearchEngine=c_;Se.control.Route=U0;Se.control.Isocurve=B0;Se.control.GeoportalMousePosition=G_;Se.control.Drawing=k_;Se.control.ReverseGeocode=N_;Se.control.LayerImport=Y_;Se.control.MeasureLength=q_;Se.control.MeasureArea=X_;Se.control.MeasureAzimuth=Z_;Se.control.DefaultMarkers=It;Se.control.ElevationPath=z0;Se.control.LocationSelector=Cs;Se.control.Export=Vo;window.ol&&(qv(Se,window.ol),qv(window.ol,Se));function M4(){const i=document.getElementById("popup"),t=document.getElementById("popup-content"),e=document.getElementById("popup-closer"),n=["altitude_maximale_sol","altitude_maximale_toit","altitude_minimale_sol","altitude_minimale_toit","construction_legere","date_d_apparition","etat_de_l_objet","hauteur","materiaux_de_la_toiture","materiaux_des_murs","nature","nombre_d_etages","nombre_de_logements","usage_1","usage_2"],r=new dn({element:i,autoPan:!0,autoPanAnimation:{duration:250}});e.onclick=function(){return r.setPosition(void 0),e.blur(),!1};const o=[],a=[],s=Ee("EPSG:3857"),l=Ct(s.getExtent())/256;for(let m=0;m<19;m++)a[m]=m.toString(),o[m]=l/Math.pow(2,m);const u=new Wf({origin:[-20037508,20037508],resolutions:o,matrixIds:a}),c=new fn({format:new Hf,url:function(m){return"https://wxs.ign.fr/essentiels/geoportail/wfs?service=WFS&version=1.1.0&request=GetFeature&typename=BDTOPO_V3:batiment&outputFormat=application/json&srsname=EPSG:3857&bbox="+m.join(",")+",EPSG:3857"},strategy:TS(u)}),h=new mi({source:c,style:new de({stroke:new Me({color:"rgba(0, 0, 255, 1.0)",width:2}),fill:new Ge({color:"rgba(0, 0, 255, 0.2)"})}),minZoom:16}),d=new Xl({url:"https://wxs.ign.fr/essentiels/geoportail/wmts",layer:"GEOGRAPHICALGRIDSYSTEMS.PLANIGNV2",format:"image/png",matrixSet:"PM",projection:"EPSG:3857",tileGrid:u,style:"normal",attributions:`<a href="https://www.ign.fr" target="_blank"><img src="https://wxs.ign.fr/static/logos/IGN/IGN.gif" title="Institut national de l'information géographique et forestière" alt="IGN"></a>`}),p=new xs({source:d,maxZoom:16}),f=new Xl({url:"https://wxs.ign.fr/essentiels/geoportail/wmts",layer:"ORTHOIMAGERY.ORTHOPHOTOS",format:"image/jpeg",matrixSet:"PM",projection:"EPSG:3857",tileGrid:u,style:"normal",attributions:`<a href="https://www.ign.fr" target="_blank"><img src="https://wxs.ign.fr/static/logos/IGN/IGN.gif" title="Institut national de l'information géographique et forestière" alt="IGN"></a>`}),g=new xs({source:f,minZoom:16}),v=new YS({layers:[p,g,h],overlays:[r],target:document.getElementById("map"),view:new po({center:WI([3.280578,47.368489]),maxZoom:20,zoom:19})}),y=new Se.control.SearchEngine({collapsed:!1,displayAdvancedSearch:!1});v.addControl(y),v.on("singleclick",function(m){const A=m.coordinate,_=v.forEachFeatureAtPixel(m.pixel,function(C){return C});if(_){const C=_.getProperties();let E="<center><b>"+_.getId().replace("batiment.","")+"</b></center>";E+="<ul>";for(const w in C)if(C[w]&&n.includes(w)){let S=C[w];if(w==="materiaux_des_murs"&&(S=ix[C[w]]),w==="materiaux_de_la_toiture"&&(S=nx[C[w]]),S==="INDETERMINE"||S===!1)continue;E+="<li><b>"+w+"</b> : "+S+"</li>"}E+="</ul>",t.innerHTML=E,r.setPosition(A)}})}x4.getConfig({apiKey:"essentiels",timeOut:2e4,onSuccess:M4,serverUrl:"autoconf-https.json",callbackSuffix:""})});export default T4();
